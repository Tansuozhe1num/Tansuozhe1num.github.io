<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CodeTonRound4-div1+div2题解</title>
    <url>/2025/02/27/CodeTonRound4-div1-div2%E9%A2%98%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="题解-A-E"><a href="#题解-A-E" class="headerlink" title="题解 A - E"></a>题解 A - E</h2><hr>
<blockquote>
<p>Dream is so far ~</p>
</blockquote>
<h4 id="A-Beautiful-Sequence"><a href="#A-Beautiful-Sequence" class="headerlink" title="A. Beautiful Sequence"></a>A. Beautiful Sequence</h4><p>检查每一位对应的数字是否小于等于位置，如果可以说明这个数字可以移动到对应位置上， 遍历即可</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &lt;= i) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="B-Candies"><a href="#B-Candies" class="headerlink" title="B. Candies"></a>B. Candies</h4><p>考虑到从一开始往后面变，且每次只能变为 $2 <em> n - 1$ 或 $2 </em> n + 1$ ， 显然这些数都是奇数， 考虑从末位往前处理， 每次除以二如果是奇数说明这一次选了2来到这一步，否则将除以二结果加一，同时意味着这一步选了1。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> now = n / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(now &amp; <span class="number">1</span>)) &#123;</span><br><span class="line">            now ++;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        n = now;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans.<span class="built_in">size</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = ans.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="C-Make-It-Permutation"><a href="#C-Make-It-Permutation" class="headerlink" title="C. Make It Permutation"></a>C. Make It Permutation</h4><p>首先考虑有一个以上数字，显然需要使用第二步操作去掉（否则将不会形成一排列），<br>之后对于去重后数组， 将其排序， 从后面往前面dp过去， 考虑把后面全部删掉或者是在这两位之间补齐剩下的数字， 有<br>$dp[i] = min(dp[i + 1] + (b[i + 1] - b[i] - 1) <em> d, c </em> (nn - 1 - i));$<br>即当前位置最小需要等于上一位到这一位之间需要补齐数字和把后面全部删掉的数字。<br>注意一开始的1要补上（if no one in this array)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n, c, d;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; c &gt;&gt; d;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>() + <span class="number">1</span>, a.<span class="built_in">end</span>());</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; b;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[<span class="number">1</span>] != <span class="number">1</span>) &#123;</span><br><span class="line">        b.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">        sum += d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    b.<span class="built_in">push_back</span>(a[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == a[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            sum += c;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        b.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> nn = b.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">dp</span><span class="params">(nn)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = nn - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        dp[i] = <span class="built_in">min</span>&lt;i64&gt;(dp[i + <span class="number">1</span>] + (b[i + <span class="number">1</span>] - b[i] - <span class="number">1</span>) * d, c * (nn - <span class="number">1</span> - i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[<span class="number">0</span>] + sum &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="D-Climbing-The-Tree"><a href="#D-Climbing-The-Tree" class="headerlink" title="D. Climbing The Tree"></a>D. Climbing The Tree</h4><p>蜗牛爬树，很好玩的数学题， 直接给代码 ： 思路见代码</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun</span> <span class="params">(<span class="type">int</span> h, <span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (h &lt;= x) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">ceil</span> ( (h - x) * <span class="number">1.0</span> / (x - y) ) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    <span class="type">bool</span> f = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="keyword">while</span> (q --) &#123;</span><br><span class="line">        <span class="type">int</span> op, a, b, n;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line">            cin &gt;&gt; n;</span><br><span class="line">            <span class="keyword">if</span> (!f) &#123;</span><br><span class="line">                <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">                    l = <span class="number">1</span>;</span><br><span class="line">                    r = a;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = a * n - b * n - a + <span class="number">2</span> * b + <span class="number">1</span>;</span><br><span class="line">                    r = a * n - b * n + b;</span><br><span class="line">                &#125;</span><br><span class="line">                f = <span class="literal">true</span>;</span><br><span class="line">                cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> x, y;</span><br><span class="line">                <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">                    x = <span class="number">1</span>;</span><br><span class="line">                    y = a;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    x = a * n - b * n - a + <span class="number">2</span> * b + <span class="number">1</span>;</span><br><span class="line">                    y = a * n - b * n + b;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">max</span> (x, l) &gt; <span class="built_in">min</span> (y, r) ) cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = <span class="built_in">max</span> (x, l);</span><br><span class="line">                    r = <span class="built_in">min</span> (y, r);</span><br><span class="line">                    cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!f) cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">fun</span> (l, a, b) == <span class="built_in">fun</span> (r, a, b) ) cout &lt;&lt; <span class="built_in">fun</span> (l, a, b) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (t --) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="E-Monster"><a href="#E-Monster" class="headerlink" title="E. Monster"></a>E. Monster</h4><p>给出一张图， 点 u 的遍历需要先经过这一个点所需权值 a[ u ] 个点后才可遍历， 一开始想这道题会想着先选出所有点权为 0 的点， 以这个点作为起点开始bfs 维护一个Krusal树，想着想着不知道怎么写了，换个了思路， 用一个小根堆记录当前能到达的点的相邻所有点， 一开始把所有0的点压入堆中， 用个变量记录当前已经走过的点的数量，之后每次从堆中取出一个点， 检查这个点的权是否小于已经走过的点的数量， 如果大于说明不能到达，直接停止（因为开的是小根堆）， 否则对这个点周围的点进行遍历，如果可以到达就让走过的点++ ， 否则压入堆中等待处理。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">    <span class="type">int</span> u, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&gt;(<span class="type">const</span> node&amp; a) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;w &gt; a.w; &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> fun = [&amp;](<span class="type">int</span> s) -&gt; <span class="type">bool</span> &#123;</span><br><span class="line">        priority_queue&lt;node, vector&lt;node&gt;, greater&lt;node&gt;&gt; q;</span><br><span class="line">        <span class="comment">//queue&lt;int&gt; Q;</span></span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        q.<span class="built_in">push</span>(&#123;s, a[s]&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [u, w] = q.<span class="built_in">top</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span> (vis[u] == s) <span class="keyword">continue</span>;</span><br><span class="line">            vis[u] = s;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cnt &gt;= w) &#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) <span class="keyword">if</span> (vis[v] != s) &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;v, a[v]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//cerr &lt;&lt; &quot;cnt : &quot; &lt;&lt; cnt &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        <span class="keyword">return</span> (cnt == n);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="number">0</span> &amp;&amp; !vis[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">fun</span>(i)) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>codeforce题解</category>
      </categories>
      <tags>
        <tag>codeforce</tag>
      </tags>
  </entry>
  <entry>
    <title>Educational-codeforce-Round174题解</title>
    <url>/2025/02/27/Educational-codeforce-Round174%E9%A2%98%E8%A7%A3/</url>
    <content><![CDATA[<p><a href="https://codeforces.com/contest/2069">Edu174</a></p>
<h2 id="A-Was-there-an-Array"><a href="#A-Was-there-an-Array" class="headerlink" title="A Was there an Array?"></a>A Was there an Array?</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">观察题目发现如果给定的B[i] = 1, 左右都得是相等的， 如果出现了连续三个数字( i - 1, i , i + 1 ) 对应是 1 0 1，则有 a[i - 1] = a[ i ], a[ i ] = a[i + 1],  得出 a[i - 1] = a[i + 1], 但是i == 0 又推出 a[i - 1] != a[i + 1]矛盾，所以只需要判断一下是否出现了这种结构即可</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; b[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b[i] == <span class="number">0</span> &amp;&amp; b[i - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; b[i + <span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="B-Set-of-Strangers"><a href="#B-Set-of-Strangers" class="headerlink" title="B. Set of Strangers"></a>B. Set of Strangers</h2><p>观察到如果出现有相邻的相同数字，则对应数字需要操作两次才能变成另外一个数字，如果没有出现相邻，那么同一种数字总是需要1次即可完成操作，</p>
<p>暴力统计每个数字需要的操作次数，取最小的 n - 1 次累计求和就是答案。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">int</span> way[<span class="number">4</span>][<span class="number">2</span>] = &#123; <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span> &#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector <span class="title">a</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt; (m + <span class="number">1</span>))</span>, <span class="title">vis</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt; (m + <span class="number">1</span>))</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            cin &gt;&gt; a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="type">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> g) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        vis[x][y] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> dx = x + way[i][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> dy = y + way[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (dx &lt;= <span class="number">0</span> || dy &lt;= <span class="number">0</span> || dx &gt; n || dy &gt; m || vis[dx][dy] || a[dx][dy] != g) <span class="keyword">continue</span>;</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, dx, dy, g);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis[i][j]) &#123;</span><br><span class="line">                f = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">dfs</span>(dfs, i, j, a[i][j]);</span><br><span class="line">                <span class="keyword">if</span> (f) &#123;</span><br><span class="line">                    mp[a[i][j]] = <span class="number">2</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!mp.<span class="built_in">count</span>(a[i][j])) &#123;</span><br><span class="line">                        mp[a[i][j]] = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; b;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> [x, y] : mp) &#123;</span><br><span class="line">        b.<span class="built_in">push_back</span>(y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(b.<span class="built_in">begin</span>(), b.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; b.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        ans += b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="C-Beautiful-Sequence"><a href="#C-Beautiful-Sequence" class="headerlink" title="C. Beautiful Sequence"></a>C. Beautiful Sequence</h2><p>我的思路 ： </p>
<p>题目要求Beautiful序列满足以下条件：</p>
<ol>
<li><strong>左侧条件</strong>：除第一个元素外，每个元素左侧存在一个比它小的元素。</li>
<li><strong>右侧条件</strong>：除最后一个元素外，每个元素右侧存在一个比它大的元素。</li>
</ol>
<p>当元素只能取1、2、3时，序列结构必为 <code>[1, 2, ..., 2, 3]</code>，原因如下：</p>
<h3 id="首元素必须为1"><a href="#首元素必须为1" class="headerlink" title="首元素必须为1"></a>首元素必须为1</h3><ul>
<li>若首元素为2或3，后续元素无法满足左侧条件（如首元素为2时只能接3，但长度不足；首元素为3时无后续元素）。</li>
</ul>
<h3 id="末元素必须为3"><a href="#末元素必须为3" class="headerlink" title="末元素必须为3"></a>末元素必须为3</h3><ul>
<li>若末元素非3（如1或2），倒数第二个元素无法满足右侧条件（如末元素为2时，右侧无更大元素）。</li>
</ul>
<h3 id="中间元素必须全为2"><a href="#中间元素必须全为2" class="headerlink" title="中间元素必须全为2"></a>中间元素必须全为2</h3><ul>
<li>中间元素不能为1（左侧无更小元素）或3（右侧无更大元素），因此只能由2构成，且至少包含一个2（长度≥3）。</li>
</ul>
<p>综上，Beautiful序列的结构必为：</p>
<p> [ 1 2 2 2   … 3 ]</p>
<hr>


统计所有满足条件的子序列：
1. 选择一个1的位置`i`作为首元素。
2. 选择一个3的位置`j`（`j > i`）作为末元素。
3. 中间区间`(i, j)`中至少有一个2，且所有元素为2。

设区间`(i, j)`中有`c`个2，则中间部分的子序列组合数为：
$$
2^c - 1
$$

总答案为所有`(i, j)`对的组合数之和：
$$
\text{ans} = \sum_{\substack{i: a[i]=1}} \sum_{\substack{j>i: a[j]=3}} \left(2^{\text{\#}\{k \in (i,j): a[k]=2\}} - 1\right)
$$

---

### 前缀和数组
定义前缀和数组`P`，其中：
$$
P[i] = \text{数组前}i\text{个元素中2的个数}
$$
区间`(i, j)`中2的数量为：
$$
P[j-1] - P[i]
$$

### 优化内层求和
将内层求和转换为线性遍历：
- 对于每个位置`j`（`a[j]=3`），计算`X = P[j-1]`。
- 累加所有`i < j`且`a[i]=1`的贡献：
  $$
  \sum_{\substack{i: a[i]=1 \\ i < j}} \left(2^{X - P[i]} - 1\right)
  $$

通过分解公式：
$$
2^{X - P[i]} = 2^X \cdot 2^{-P[i]}
$$
定义累加量：
- `sumInv`：所有左侧1对应的`2^{-P[i]`之和。
- `cntOne`：左侧1的个数。

则当前`j`的贡献为：
$$
2^X \cdot \text{sumInv} - \text{cntOne}
$$

### 实现步骤
1. **遍历数组**，维护前缀和`P`。
2. **遇到1时**：更新`cntOne`和`sumInv += 2^{-P[i]}`。
3. **遇到3时**：根据当前`X = P[j-1]`计算贡献并累加。

---

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="结构限制"><a href="#结构限制" class="headerlink" title="结构限制"></a>结构限制</h3><ul>
<li>Beautiful序列严格遵循<code>[1, 2, ..., 2, 3]</code>形式，中间至少一个2。</li>
</ul>
<h3 id="计数公式"><a href="#计数公式" class="headerlink" title="计数公式"></a>计数公式</h3><ul>
<li>每个合法的<code>(i, j)</code>对贡献为<code>2^&#123;中间2的个数&#125; - 1</code>。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> T <span class="title">power</span><span class="params">(T a, i64 b, T mod)</span> </span>&#123;</span><br><span class="line">    T res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = a * a % mod) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">            res = (res * a) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200005</span>;</span><br><span class="line"><span class="function">vector&lt;i64&gt; <span class="title">pow2</span><span class="params">(N)</span>, <span class="title">inv</span><span class="params">(N)</span></span>;</span><br><span class="line"></span><br><span class="line">i64 inv2 = <span class="built_in">power</span>&lt;i64&gt;(<span class="number">2</span>, mod - <span class="number">2</span>, mod);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">P</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        P[i] = P[i - <span class="number">1</span>] + (a[i] == <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 one = <span class="number">0</span>, sum = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[j] == <span class="number">1</span>) &#123;</span><br><span class="line">            one = (one + <span class="number">1</span>) % mod;</span><br><span class="line">            sum = (sum + inv[P[j]]) % mod;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[j] == <span class="number">2</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> X = P[j - <span class="number">1</span>];</span><br><span class="line">            i64 g = ((pow2[X] * sum) % mod - one) % mod;</span><br><span class="line">            <span class="keyword">if</span> (g &lt; <span class="number">0</span>) g += mod;</span><br><span class="line">            ans = (ans + g) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans % mod &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    pow2[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        pow2[i] = (pow2[i - <span class="number">1</span>] * <span class="number">2</span>) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    inv[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        inv[i] = (inv[i - <span class="number">1</span>] * inv2) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>题解dp思路 :<br> 等我看完了再update</p>
<h2 id="D-Palindrome-Shuffle"><a href="#D-Palindrome-Shuffle" class="headerlink" title="D. Palindrome Shuffle"></a>D. Palindrome Shuffle</h2><p>首先知道前后本来就回文的字母可以先移除，所以只需要处理一个前后两个字母不一样的字符串即可，那么问题就变成处理一个字符串S， 只能重新排列S的某个前缀或者后缀子串使得它变成Palindrome</p>
<p>来看样例4 : </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">acbacddacbca</span><br></pre></td></tr></table></figure>
<p>可以看出需要再4 - 5进行操作，那么也可以在 4 - 6, 4 - 7 等等长度大于他的子串（只需要包含他）进行操作，即长度具有单调性，可以使用二分答案。</p>
<p>我们处理从前开始翻转情况，那么从后开始翻转情况可以reverse后套用从前面开始的情况进行操作。</p>
<p> <strong>check函数</strong>：</p>
<blockquote>
<p>首先统计待处理字符串中每个字母出现的次数，之后分两种情况 : </p>
</blockquote>
<ul>
<li><p>情况一 ： <strong>L（左字符串起始位置） + len - 1 &lt;= n / 2</strong><br>此时和样例4一样，需要在len范围内前缀和后缀里面的所有字符数量相同，同时保证没操作到的字符本来就是回文的（可以多开一个数组预处理记录，看代码is, ned部分）</p>
<ul>
<li>情况二 ： <strong>L（左字符串起始位置） + len - 1 &gt; n / 2</strong><br>只需要左边的每个字符数量全部<strong>大于或等于</strong>右边剩下的即可。</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line"></span><br><span class="line">    s = <span class="string">&#x27; &#x27;</span> + s;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (s[l] == s[r] &amp;&amp; l &lt;= r) &#123;</span><br><span class="line">        l++, r--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">c</span><span class="params">(<span class="number">27</span> + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        c[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">is</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ned</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != s[n - i + <span class="number">1</span>]) &#123;</span><br><span class="line">            is[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is[i + <span class="number">1</span>] == <span class="number">1</span> || ned[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            ned[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> ck = [&amp;](<span class="type">int</span> len) -&gt; <span class="type">bool</span> &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; <span class="built_in">g</span>(<span class="number">28</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= l + len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            g[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (l + len - <span class="number">1</span> &lt;= n / <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; i &gt;= r - len + <span class="number">1</span>; i--) &#123;</span><br><span class="line">                g[s[i] - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (g[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ned[l + len - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (c[i] - g[i] &gt; g[i]) &#123;</span><br><span class="line">                    <span class="comment">//cout &lt;&lt; len &lt;&lt; &#x27; &#x27; &lt;&lt; char(i + &#x27;a&#x27;) &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> lo = <span class="number">2</span>, ri = r - l;</span><br><span class="line">    <span class="keyword">while</span> (lo &lt;= ri) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (lo + ri) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">ck</span>(mid)) &#123;</span><br><span class="line">            ri = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = lo;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>() + <span class="number">1</span>, s.<span class="built_in">end</span>());</span><br><span class="line">    n = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (s[l] == s[r] &amp;&amp; l &lt;= r) &#123;</span><br><span class="line">        l++, r--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">h</span><span class="params">(<span class="number">27</span> + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        h[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">is2</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ned2</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != s[n - i + <span class="number">1</span>]) &#123;</span><br><span class="line">            is2[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is2[i + <span class="number">1</span>] == <span class="number">1</span> || ned2[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            ned2[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ll = <span class="number">2</span>, rr = r - l;</span><br><span class="line">    <span class="keyword">while</span> (ll &lt;= rr) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (ll + rr) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">ck</span>(mid)) &#123;</span><br><span class="line">            rr = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ll = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans = <span class="built_in">min</span>(ans, ll);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>codeforce题解</category>
      </categories>
      <tags>
        <tag>codeforce</tag>
      </tags>
  </entry>
  <entry>
    <title>Codeforces-1007div2题解</title>
    <url>/2025/03/01/Codeforces-1007div2%E9%A2%98%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="A-D1题解"><a href="#A-D1题解" class="headerlink" title="A - D1题解"></a>A - D1题解</h2><p>连续掉分ing, 什么时候才能变得又快又猛呢hehehe。。。</p>
<h2 id="A-The-Play-Never-Ends"><a href="#A-The-Play-Never-Ends" class="headerlink" title="A. The Play Never Ends"></a>A. The Play Never Ends</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 k;</span><br><span class="line">    cin &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (k % <span class="number">3</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="B-Perfecto"><a href="#B-Perfecto" class="headerlink" title="B. Perfecto"></a>B. Perfecto</h2><p>打表观察 从 1 到 300 sum的和是平方数的数字，发现和是平方数的只有  1 36 1225…..， 想要不出现平方数，只需要在前 i 个（其中 i 是使得sum是平方数的数字）不全是i的排列，也就是把每个满足和是平方数的最后一个数字和下一个数字替换，如果不超出范围就可以，否则-1</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        a[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        i64 g = <span class="built_in">sqrt</span>(sum);</span><br><span class="line">        <span class="keyword">if</span> (g * g == sum) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &gt; n) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sum -= a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i], a[i + <span class="number">1</span>]);</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 t;</span><br><span class="line">    cin &gt;&gt; t;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="C-Trapmigiano-Reggiano"><a href="#C-Trapmigiano-Reggiano" class="headerlink" title="C. Trapmigiano Reggiano"></a>C. Trapmigiano Reggiano</h2><p> 以en为根， 对树进行分层，每次取深度较大的节点，之后取深度较小的节点，走最深的情况是一条链，这时候会走 n / 2个点，之后n / 2个操作又会回到根，其他情况会在某条最长链的某个节点来后跳（因为有别的树链），如果最后回到原点直接输出，否则-1</p>
<blockquote>
<p>update: 看了大佬们说答案似乎不可能出现-1， 好像可以直接后序遍历，答案总会存在</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, st, en;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; st &gt;&gt; en;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dis</span><span class="params">(n + <span class="number">1</span>, <span class="number">-1</span>)</span></span>;</span><br><span class="line">    dis[en] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v != fa) &#123;</span><br><span class="line">                dis[v] = dis[u] + <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">dfs</span>(dfs, en, <span class="number">-1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        ans[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(ans.<span class="built_in">begin</span>() + <span class="number">1</span>, ans.<span class="built_in">end</span>(), </span><br><span class="line">        [&amp;](<span class="type">int</span> a, <span class="type">int</span> b) &#123;</span><br><span class="line">            <span class="keyword">return</span> dis[a] &gt; dis[b];</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//cerr &lt;&lt; &quot;dis:&quot; &lt;&lt; dis[st] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (dis[st] == <span class="number">-1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == n];</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="D1-Infinite-Sequence-Easy-Version"><a href="#D1-Infinite-Sequence-Easy-Version" class="headerlink" title="D1. Infinite Sequence (Easy Version)"></a>D1. Infinite Sequence (Easy Version)</h2><p> 手玩样例， 发现 7 = 8, 78 = 79……, 那么每对在 “^” 内（也就是除以二一样）的数字总是一样的，他们作为下一个数字的异或和的时候总是不做贡献，可以忽略。</p>
<p>我们不妨补全给定的n数组，使得n总是奇数（这样下一位置开始时候总是出现两两相等情况）</p>
<p>继续观察，发现</p>
<ul>
<li>当 x / 2是奇数时候，这时除了前n个给定的数字，其他总是两两成对出现， 此时 x = s[ n ] &amp; 1;</li>
<li>当 x / 2是偶数的时候，除了x / 2,在n + 1到x / 2之间的所有数字都是成对出现，不参与计算，故 x = s[ n ] &amp; (x / 2),</li>
</ul>
<p>这样递归下去可以找到答案，最坏时间复杂度为o(logn);</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n, l, r;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; l &gt;&gt; r;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">s</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        s[i] = s[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        n++;</span><br><span class="line">        a.<span class="built_in">push_back</span>(s[n / <span class="number">2</span>] &amp; <span class="number">1</span>);</span><br><span class="line">        s.<span class="built_in">push_back</span>(s[n - <span class="number">1</span>] + a[n]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> f = [&amp;](<span class="keyword">auto</span> self, i64 x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> a[x];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x / <span class="number">2</span> &lt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> (s[x / <span class="number">2</span>] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> g;</span><br><span class="line">        <span class="keyword">if</span> ((((x / <span class="number">2</span>) - n) &amp; <span class="number">1</span>)) &#123;</span><br><span class="line">            g = <span class="built_in">self</span>(self, x / <span class="number">2</span>) ^ (s[n] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            g = (s[n] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> g;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if (l &lt;= n * 2) &#123;</span></span><br><span class="line">    <span class="comment">//     for (int i = n + 1; i &lt;= l; i++) &#123;</span></span><br><span class="line">    <span class="comment">//         a.push_back(s[i / 2] &amp; 1);</span></span><br><span class="line">    <span class="comment">//         s.push_back(a[i] + s[i - 1]);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; a[l] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="comment">//     return;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>(f, l) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>codeforce题解</category>
      </categories>
      <tags>
        <tag>codeforce</tag>
      </tags>
  </entry>
  <entry>
    <title>Java14新特性-Record类</title>
    <url>/2025/03/05/Java14%E6%96%B0%E7%89%B9%E6%80%A7-Record%E7%B1%BB/</url>
    <content><![CDATA[<h2 id="Java-中的-Record-类"><a href="#Java-中的-Record-类" class="headerlink" title="Java 中的 Record 类"></a>Java 中的 Record 类</h2><p>Record 类是 Java 14 引入的一种新特性，旨在简化不可变数据类的定义。它类似于枚举类，用于标记不可变的数据类。Record 类通过减少样板代码，使得类的定义更加简洁和紧凑<a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a><a href="https://www.jianshu.com/p/bf99938a369b">2</a>。</p>
<p>Record 类的定义</p>
<p>使用 <em>record</em> 关键字可以定义一个 Record 类。例如，定义一个包含 <em>start</em> 和 <em>end</em> 两个字段的 <em>range</em> 类，可以这样写：</p>
<p>public record range(int start, int end) {}</p>
<p>这相当于定义了一个 <em>final</em> 类，并自动实现了 <em>equals</em>、<em>hashCode</em> 和 <em>toString</em> 方法<a href="https://www.jianshu.com/p/bf99938a369b">2</a>。</p>
<p>使用示例</p>
<p>以下是一个使用 Record 类的示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">range</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">range</span>(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">        System.out.println(r.start()); <span class="comment">// 输出: 100</span></span><br><span class="line">        System.out.println(r.end()); <span class="comment">// 输出: 200</span></span><br><span class="line">        System.out.println(r); <span class="comment">// 输出: range[start=100, end=200]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，<em>range</em> 类自动生成了构造方法、字段访问方法以及 <em>toString</em> 方法特点和优势<br>Record 类具有以下特点和优势：</p>
<ol>
<li><p><strong>简洁性</strong>：使用 <em>record</em> 关键字可以一行代码定义一个不可变类，减少了样板代码<a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a>。</p>
</li>
<li><p><strong>自动生成方法</strong>：编译器会自动生成构造方法、<em>equals</em>、<em>hashCode</em> 和 <em>toString</em> 方法<a href="https://www.jianshu.com/p/bf99938a369b">2</a>。</p>
</li>
<li><p><strong>不可变性</strong>：Record 类是 <em>final</em> 类，所有字段也是 <em>final</em> 的，保证了类的不可变性<a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>。</p>
</li>
</ol>
<p>扩展功能</p>
<p>虽然 Record 类简化了类的定义，但它仍然允许添加自定义方法、静态方法和构造方法。例如，可以为 <em>range</em> 类添加一个计算距离的方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">range</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">distance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> end - start;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还可以添加静态方法来创建实例：<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">range</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> range <span class="title function_">of</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">range</span>(start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过这些扩展功能，Record 类不仅简化了类的定义，还提供了灵活性<a href="https://www.jianshu.com/p/bf99938a369b">2</a><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>。</p>
<p>Record 类是 Java 14 引入的一种新特性，旨在简化不可变数据类的定义。它通过减少样板代码，使得类的定义更加简洁和紧凑，同时提供了自动生成的方法和不可变性<a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a><a href="https://www.jianshu.com/p/bf99938a369b">2</a>。此外，Record 类还允许添加自定义方法和静态方法，提供了灵活性<a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>。</p>
<h2 id="例题-Codeforce-Problem-D-Codeforces"><a href="#例题-Codeforce-Problem-D-Codeforces" class="headerlink" title="例题: Codeforce Problem - D - Codeforces"></a>例题: Codeforce <a href="https://codeforces.com/contest/1714/problem/D">Problem - D - Codeforces</a></h2><p>采用record记录pair快速操作</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">(Scanner sc)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> sc.next();</span><br><span class="line">        <span class="type">var</span> <span class="variable">h</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">var</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; cp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Collections.nCopies(n + <span class="number">1</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cp.set(i, sc.next());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">var</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">int</span>[h + <span class="number">1</span>];</span><br><span class="line">        Map&lt;Integer, Integer&gt; res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; h; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">maxp</span> <span class="operator">=</span> <span class="number">0</span>, P = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= n; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ck(cp.get(k), s, i, is) &amp;&amp; maxp &lt; cp.get(k).length()) &#123;</span><br><span class="line">                    maxp = cp.get(k).length();</span><br><span class="line">                    P = k;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (P != -<span class="number">1</span>) &#123;</span><br><span class="line">                res.put(i, P);</span><br><span class="line">                work(cp.get(P), is, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; h; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;Move&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> entry : res.entrySet()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> entry.getKey(), y = entry.getValue();</span><br><span class="line">            <span class="type">int</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cp.get(y).length(); i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (is[x + i] &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    tp++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tp == cp.get(y).length()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cp.get(y).length(); i++) &#123;</span><br><span class="line">                    is[x + i]--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ans.add(<span class="keyword">new</span> <span class="title class_">Move</span>(y, x));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(ans.size());</span><br><span class="line">        <span class="keyword">for</span> (Move move : ans) &#123;</span><br><span class="line">            System.out.println(move.k() + <span class="string">&quot; &quot;</span> + (move.pos() + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">ck</span><span class="params">(String p, String s, <span class="type">int</span> pos, <span class="type">int</span>[] is)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>, h = s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + pos &gt;= h || p.charAt(i) != s.charAt(pos + i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (is[i + pos] &gt; <span class="number">0</span>) c++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c != p.length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">(String p, <span class="type">int</span>[] is, <span class="type">int</span> pos)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">            is[pos + i]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Move</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> pos)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in)) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">while</span> (t-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                solve(scanner);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Educational codeforceRound 173 题解</title>
    <url>/2024/12/26/Educational-codeforceRound-173-%E9%A2%98%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> i64 inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">tuple&lt;T, T, T&gt; <span class="title">MaxArray</span><span class="params">(<span class="type">const</span> vector&lt;T&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.<span class="built_in">size</span>() == <span class="number">1</span>) <span class="keyword">return</span> &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    T cur = nums[<span class="number">1</span>], maxp = nums[<span class="number">1</span>];      </span><br><span class="line">    <span class="type">int</span> start = <span class="number">1</span>;              </span><br><span class="line">    <span class="type">int</span> le = <span class="number">1</span>;        </span><br><span class="line">    <span class="type">int</span> ri = <span class="number">1</span>;            </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur + nums[i] &lt; nums[i]) &#123;</span><br><span class="line">            cur = nums[i];</span><br><span class="line">            start = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cur &gt; maxp) &#123;</span><br><span class="line">            maxp = cur;</span><br><span class="line">            le = start; </span><br><span class="line">            ri = i;       </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;le, ri, maxp&#125;; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        <span class="keyword">if</span> (a[i] != <span class="number">1</span> &amp;&amp; a[i] != <span class="number">-1</span>) &#123;</span><br><span class="line">            pos = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [x, y, z] = <span class="built_in">MaxArray</span>&lt;i64&gt; (a);</span><br><span class="line">        i64 tp = <span class="built_in">max</span>(<span class="number">0LL</span>, z);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            a[i] = -a[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> [h, j, p] = <span class="built_in">MaxArray</span>&lt;i64&gt; (a);</span><br><span class="line"></span><br><span class="line">        i64 kp = <span class="built_in">max</span>(<span class="number">0LL</span>, p);</span><br><span class="line">        kp = -kp;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; tp - kp + <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = kp; i &lt;= tp; i++) &#123;</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">l</span><span class="params">(<span class="number">1</span>)</span>, <span class="title">r</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; pos; i++) &#123;</span><br><span class="line">        l.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = pos + <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        r.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [x, y, z] = <span class="built_in">MaxArray</span>(l);</span><br><span class="line">    z = <span class="built_in">max</span>(<span class="number">0LL</span>, z);</span><br><span class="line">    i64 lmax = z;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= l.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        l[i] = -l[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [p, u, b] = <span class="built_in">MaxArray</span>(l);</span><br><span class="line">    b = <span class="built_in">max</span>(<span class="number">0LL</span>, b);</span><br><span class="line">    i64 lmin = -b;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [gg, ee, f] = <span class="built_in">MaxArray</span>(r);</span><br><span class="line">    f = <span class="built_in">max</span>(<span class="number">0LL</span>, f);</span><br><span class="line">    i64 rmax = f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= r.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        r[i] = -r[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [ioi, powp, w] = <span class="built_in">MaxArray</span>(r);</span><br><span class="line">    w = <span class="built_in">max</span>(w, <span class="number">0LL</span>);</span><br><span class="line">    i64 rmin = -w;</span><br><span class="line"></span><br><span class="line">    set&lt;i64&gt; is;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="built_in">min</span>(rmin, lmin); i &lt;= <span class="number">0</span>; i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="built_in">max</span>(lmax, rmax); i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    i64 mp = <span class="number">0</span>;</span><br><span class="line">    i64 mi = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = pos + <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        mp = <span class="built_in">max</span>(<span class="number">0LL</span>, <span class="built_in">max</span>(mp, sum));</span><br><span class="line">        mi = <span class="built_in">min</span>(<span class="number">0LL</span>, <span class="built_in">min</span>(mi, sum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 mmp = <span class="number">0</span>, mmi = <span class="number">0</span>;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = pos - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        mmp = <span class="built_in">max</span>(<span class="number">0LL</span>, <span class="built_in">max</span>(mmp, sum));</span><br><span class="line">        mmi = <span class="built_in">min</span>(<span class="number">0LL</span>, <span class="built_in">min</span>(mmi, sum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 tminp = mmi + mi;</span><br><span class="line">    i64 tmaxp = mmp + mp;</span><br><span class="line">    <span class="comment">//cerr &lt;&lt; tminp &lt;&lt; &#x27; &#x27; &lt;&lt; tmaxp &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = a[pos] + tminp; i &lt;= a[pos] + tmaxp; i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; is.<span class="built_in">size</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : is) &#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> i64 inf = <span class="number">1e18</span> + <span class="number">9</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 l, r, g;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r &gt;&gt; g;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (g &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 de = (l / g) + ((l % g) ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    i64 kp = (r / g);</span><br><span class="line">   <span class="comment">// cerr &lt;&lt; &quot;!:&quot; &lt;&lt; de &lt;&lt; &#x27; &#x27; &lt;&lt; kp &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (g == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * r &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        i64 maxp = <span class="number">0</span>;</span><br><span class="line">        i64 ll = l, rr = r;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r - i &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 j = r; j &gt;= l; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j - i &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">gcd</span>(i, j) == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &gt; maxp) &#123;</span><br><span class="line">                        maxp = j - i, ll = i, rr = j;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="number">1LL</span> * ll &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * rr &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (de &gt; kp) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (de == kp) &#123;</span><br><span class="line">        <span class="keyword">if</span> (de == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; g &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (de == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * g * kp &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        i64 ll = de, rr = kp;</span><br><span class="line">        i64 maxp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (i64 li = de; li &lt;= kp; li++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (kp - li &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 j = kp; j &gt;= li; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j - li &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">gcd</span>(j, li) == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - li &gt; maxp) &#123;</span><br><span class="line">                        maxp = j - li;</span><br><span class="line">                        rr = j, ll = li;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ll * <span class="number">1LL</span> * g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; rr * <span class="number">1LL</span> * g &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>codeforce题解</category>
      </categories>
      <tags>
        <tag>codeforce</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML</title>
    <url>/2025/03/01/HTML/</url>
    <content><![CDATA[<blockquote>
<p>html 是一门制作网页的语言。</p>
<h2 id="1-html基本结构-骨架标签"><a href="#1-html基本结构-骨架标签" class="headerlink" title="1.html基本结构(骨架标签)"></a>1.html基本结构(骨架标签)</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>//声明html类型（html5)</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>//语言是什么</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>yrb.个人网页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    我只能说教教我</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>一般标签都是成对存在，称为双标签<br>但是有的单标签不用如&lt; br / &gt;</p>
</blockquote>
<ul>
<li><h4 id="html标签"><a href="#html标签" class="headerlink" title="html标签"></a>html标签</h4> head标签代表页面的头，，定义一些特殊的内容，这些内容往往都是“不可见的内容”（浏览器页面不可见）</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>&lt; head &gt;</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; title &gt;</td>
<td>定义网页的标题</td>
</tr>
<tr>
<td>&lt; meta &gt;</td>
<td>定义网页的基本信息</td>
</tr>
<tr>
<td>&lt; style &gt;</td>
<td>定义CSS样式</td>
</tr>
<tr>
<td>&lt; link &gt;</td>
<td>链接外部的CSS文件或者脚本文件</td>
</tr>
<tr>
<td>&lt; scripe &gt;</td>
<td>定义脚本语言</td>
</tr>
<tr>
<td>&lt; base &gt;</td>
<td>定义所有页面的基础定位</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><h4 id="body标签"><a href="#body标签" class="headerlink" title="body标签"></a>body标签</h4><p>  body标签代表页面的身体，定义网页的内容，这些内容往往都是“可见的”，在浏览器里面</p>
</li>
<li><h3 id="标签关系："><a href="#标签关系：" class="headerlink" title="标签关系："></a>标签关系：</h3><ul>
<li>包含关系：</li>
<li>并列关系：</li>
</ul>
</li>
</ul>
<h2 id="2-段落与文字"><a href="#2-段落与文字" class="headerlink" title="2.段落与文字"></a>2.段落与文字</h2><ul>
<li><h3 id="段落标签"><a href="#段落标签" class="headerlink" title="段落标签"></a>段落标签</h3>  段落与文字标签：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签</th>
<th>语义</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; h1&gt;~&lt; h6&gt;</td>
<td>header</td>
<td>标题</td>
</tr>
<tr>
<td>&lt; p&gt;</td>
<td>paragraph</td>
<td>段落</td>
</tr>
<tr>
<td>&lt; br&gt;</td>
<td>break</td>
<td>换行<br></td>
</tr>
<tr>
<td>&lt; hr&gt;</td>
<td>horizontal rule</td>
<td>水平线</td>
</tr>
<tr>
<td>&lt; div&gt;</td>
<td>division</td>
<td>分割元素块（块元素）</td>
</tr>
<tr>
<td>&lt; span&gt;</td>
<td>span</td>
<td>区域（行内元素）</td>
</tr>
</tbody>
</table>
</div>
<hr>
<blockquote>
<p>&lt; html  lang=”  “&gt;引号里面指名网页的语言：(定义为中文英文都可以互通)</p>
<ul>
<li>en为英语<ul>
<li>zh-CN为中文</li>
</ul>
</li>
<li>fr为法语</li>
</ul>
<p>&lt; meta charset =”UTF-8”&gt;字符集<br>不写编码形式会出现乱码</p>
<ul>
<li>常用的GB2312，BIG5,GBK,UTF-8，其中UTF-8称为万国码</li>
</ul>
</blockquote>
<hr>
<h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><blockquote>
<p>h1 - h6</p>
</blockquote>
<p>html提供了各等级的标题标签，</p>
<ul>
<li>加了标题标签的文字会被加粗，字号也会变得更大</li>
<li>一个标题会独占一行</li>
</ul>
<blockquote>
<p>段落标签和换行标签<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><br>可以把文字分为不同的段落</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span>是空行，<span class="tag">&lt;<span class="name">br</span> /&gt;</span>强制换行</span><br></pre></td></tr></table></figure>
<p>br是一个单标签</p>
<hr>
<h3 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h3><h3 id="文本格式化标签-1"><a href="#文本格式化标签-1" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h3><div class="table-container">
<table>
<thead>
<tr>
<th>标签</th>
<th>语义</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; strong&gt;&lt; /strong&gt;或者&lt; b&gt;</td>
<td>strong（加强）</td>
<td>加粗</td>
</tr>
<tr>
<td>&lt; em&gt;</td>
<td>emphaseized（强调）</td>
<td>斜体</td>
</tr>
<tr>
<td>&lt; cite&gt;</td>
<td>cite（引用）</td>
<td>斜体</td>
</tr>
<tr>
<td>&lt; sup&gt;</td>
<td>superscripted</td>
<td>上标</td>
</tr>
<tr>
<td>&lt; sub&gt;</td>
<td>subscripted</td>
<td>下标</td>
</tr>
<tr>
<td>&lt; del&gt;</td>
<td></td>
<td>删除线</td>
</tr>
<tr>
<td>&lt; ins&gt;</td>
<td></td>
<td>下划线</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h3 id="lt-div-gt-和-lt-span-gt-标签"><a href="#lt-div-gt-和-lt-span-gt-标签" class="headerlink" title="&lt; div&gt;和&lt; span&gt;标签"></a>&lt; div&gt;和&lt; span&gt;标签</h3><blockquote>
<p>没有语义的用来装内容，当成一个盒子</p>
</blockquote>
<ul>
<li>&lt; div&gt;占用一哈</li>
<li>&lt; span&gt;跨距显示，一行有多个</li>
</ul>
<hr>
<h3 id="图像标签和路径"><a href="#图像标签和路径" class="headerlink" title="图像标签和路径"></a>图像标签和路径</h3><h5 id="1-图像标签"><a href="#1-图像标签" class="headerlink" title="1.图像标签"></a>1.图像标签</h5><p>在html中，&lt; img&gt;用来定义一个图像（imaging)<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;img src=&quot;图像URL&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>src是必须属性，它用于指定图像文件的路径和文件名（属性就是这个图像标签的特性)</li>
<li>使用时把图片发在同一个文件夹里面</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>src</th>
<th>图像路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>alt</td>
<td>文本提示（在图像无法显示时候会提示）</td>
</tr>
<tr>
<td>title</td>
<td>图像提示</td>
</tr>
<tr>
<td>width</td>
<td>宽度设置</td>
</tr>
<tr>
<td>height</td>
<td>高度设置</td>
</tr>
<tr>
<td>border</td>
<td>图像的边框</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>图像可以有多个属性，但是都放在img后面，且各个属性没有先后之分</li>
<li>需要用空格隔开</li>
<li>采取属性键对</li>
</ul>
<hr>
<h2 id="超链接标签（重点）"><a href="#超链接标签（重点）" class="headerlink" title="超链接标签（重点）"></a>超链接标签（重点）</h2><blockquote>
<p>在html中，&lt; a&gt;标签用于定义超链接，作用从一个页面链接到另一个页面</p>
</blockquote>
<h5 id="超链接的语法格式"><a href="#超链接的语法格式" class="headerlink" title="超链接的语法格式"></a>超链接的语法格式</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;跳转目标&quot;</span> <span class="attr">target</span>=<span class="string">&quot;窗口弹出方式&quot;</span>&gt;</span>文本或者图像<span class="tag">&lt;<span class="name">a</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>链接分类：</p>
<ul>
<li>外部链接：必须写上绝对路径,加上https://</li>
<li>内部链接（同一目录【级别】下的链接）：直接写页面的名称如”index.html”</li>
<li>空链接：#</li>
<li>下载链接：地址链接的是 文件.exe 或者是 .zip 等压缩包形式,会直接下载这个exe或者zip，音频等。</li>
<li>网页链接元素，在网页里的各种网页元素，如文本，图像，表格，音频，视频都可以添加超链接。</li>
<li>锚点链接：点击该处可以快速定位到网页的某一个位置（也可以实现跳转到顶部等等）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">target:</span><br><span class="line">  _self在当前页面打开(默认的），_blank在新的窗口打开</span><br></pre></td></tr></table></figure>
<ul>
<li>锚点链接的具体操作：<h2 id="先把字串里面的写入”-一段id”-之后找到目标的标签，在其之后加上”id-”这段id的名字””就可以实现锚点跳转。"><a href="#先把字串里面的写入”-一段id”-之后找到目标的标签，在其之后加上”id-”这段id的名字””就可以实现锚点跳转。" class="headerlink" title="先把字串里面的写入”#一段id”,之后找到目标的标签，在其之后加上”id=”这段id的名字””就可以实现锚点跳转。"></a>先把字串里面的写入”#一段id”,之后找到目标的标签，在其之后加上”id=”这段id的名字””就可以实现锚点跳转。</h2><h3 id="注释标签"><a href="#注释标签" class="headerlink" title="注释标签"></a>注释标签</h3><blockquote>
<p> html中注释形式如下:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注释 --&gt;</span></span><br></pre></td></tr></table></figure></blockquote>
</li>
<li>可以使用”Ctrl + /或?”直接快捷键打出来</li>
<li>注释不会显示，只是用来</li>
</ul>
<hr>
<h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><p>  <img src="file:///d%3A/cworkspace/web/%E7%AC%94%E8%AE%B01.png" alt="D:\cworkspace\web\笔记1.png"></p>
<h2 id="重点记住空格和大于小于号。"><a href="#重点记住空格和大于小于号。" class="headerlink" title="   - 重点记住空格和大于小于号。"></a>   - 重点记住空格和大于小于号。</h2><h2 id="1-表格标签"><a href="#1-表格标签" class="headerlink" title="1.表格标签"></a>1.表格标签</h2><h4 id="1-1表格的主要作用"><a href="#1-1表格的主要作用" class="headerlink" title="1.1表格的主要作用"></a>1.1表格的主要作用</h4><blockquote>
<p>表格主要是用来显示，展示数据，因为它可以让数据显示的非常规律，可读性非常好，表格不是用来布局页面的，而是用来展示数据的。</p>
<h4 id="1-2表格的基本语法"><a href="#1-2表格的基本语法" class="headerlink" title="1.2表格的基本语法"></a>1.2表格的基本语法</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span>//表格里的行</span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>单元格内的文字<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    ···</span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  ···</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&lt; table&gt;是用来定义表格的标签</li>
<li>&lt; tr&gt;&lt; /tr&gt;用来定义行，必须定义在table内部</li>
<li>&lt; td&gt;&lt; /td&gt;用来定义单元格，必须定义在&lt; tr&gt;内</li>
<li>&lt; th&gt;&lt; /th&gt;表头单元格标签，（table head)，表头内容会被加粗，同时居中。</li>
</ul>
</blockquote>
<h4 id="1-2表格属性-到这里去练习一下"><a href="#1-2表格属性-到这里去练习一下" class="headerlink" title="1.2表格属性(到这里去练习一下)"></a>1.2表格属性(到这里去练习一下)</h4><blockquote>
<p>不常用，因为后面会使用CSS</p>
</blockquote>
<ul>
<li>align （属性值：left ,right , center),设置表格的位置</li>
<li>border (1 或 “” ),规定表格是否具有边框，默认为””，表示没有边框</li>
<li>width （像素值或百分比），规定表格的宽度</li>
<li>height (像素值或百分比) ， 规定表格的长度</li>
<li>cellpadding (像素值)，规定单元边沿与其内容之间的空白，默认像素为1。</li>
<li>cellspacing （像素值），规定单元格之间的空白，默认像素值为2.</li>
</ul>
<h4 id="1-3表格结构标签"><a href="#1-3表格结构标签" class="headerlink" title="1.3表格结构标签"></a>1.3表格结构标签</h4><blockquote>
<p>使用场景：因为表格可能很长，</p>
</blockquote>
<hr>
<h4 id="音频文件"><a href="#音频文件" class="headerlink" title="音频文件"></a>音频文件</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//html里如果属性名字和属性值完全一致，可以只写属性名字。</span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">//等同于<span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>controls为显示控制面板</li>
<li>loop是循环播放</li>
<li>autoplay自动播放</li>
<li>支持mp3,WebM,Ogg文件</li>
</ul>
<hr>
<h4 id="视频文件"><a href="#视频文件" class="headerlink" title="视频文件"></a>视频文件</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;  .mp4&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>loop循环播放</li>
<li>mute静音播放</li>
<li>autoplay自动播放</li>
<li>支持mp4,WebM,Ogg文件</li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaData类学习</title>
    <url>/2025/02/27/JavaData%E7%B1%BB%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<ul>
<li>Java的DATA类</li>
</ul>
<h2 id="Date类的概述"><a href="#Date类的概述" class="headerlink" title="Date类的概述"></a>Date类的概述</h2><ol>
<li><p>java.util,Date 表示日期和时间的类</p>
</li>
<li><p>类 Date 表示特定的瞬间，精确到千分之一秒（毫秒）</p>
</li>
<li><p>实例引入：获取时间原点到当前系统时间经历了多少秒</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// 时间原点：1970 年 01 月 01 日 00:00:00 </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;       </span><br><span class="line">            System.out.println(System.currentTimeMillis());    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Date类常用的构造方法和成员方法"><a href="#Date类常用的构造方法和成员方法" class="headerlink" title="Date类常用的构造方法和成员方法"></a>Date类常用的构造方法和成员方法</h2><h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><p>getTime()方法。返回：时间原点以来，此Date对象表示的毫秒数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoGetTime</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();        </span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> date.getTime();                <span class="comment">// 输出：1578728202850       </span></span><br><span class="line">     <span class="comment">// 该方法类似于 System.currentTimeMillis()        </span></span><br><span class="line">         System.out.println(time);   </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><h4 id="Date类的无参构造方法。"><a href="#Date类的无参构造方法。" class="headerlink" title="Date类的无参构造方法。"></a>Date类的无参构造方法。</h4><p>返回：当前系统的日期和时间</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate1</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;       </span><br><span class="line">         <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();         <span class="comment">// 输出：Sat Jan 11 15:40:50 CST 2020      </span></span><br><span class="line">        System.out.println(date);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Date类的带参构造方法"><a href="#Date类的带参构造方法" class="headerlink" title="Date类的带参构造方法"></a>Date类的带参构造方法</h4><p>Date(long date) 参数为一个毫秒值，把传入的毫秒值转换为Date日期</p>
<p>返回：传入参数（毫秒值）对应的的日期和时间</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate2</span> &#123;   </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">0L</span>);         <span class="comment">// 这里输出的是0毫秒时的日期和时间，即时间原点的日期和时间        // 输出：Thu Jan 01 08:00:00 CST 1970        </span></span><br><span class="line">        System.out.println(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="DateFormat抽象类和SimpleDateFormat实现类"><a href="#DateFormat抽象类和SimpleDateFormat实现类" class="headerlink" title="DateFormat抽象类和SimpleDateFormat实现类"></a>DateFormat抽象类和SimpleDateFormat实现类</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol>
<li><p>java.text.DateFormat类，是日期/时间格式化子类的抽象类</p>
</li>
<li><p>作用：格式化(也就是日期-&gt;文本)、解析(文本-&gt;日期)</p>
</li>
<li><p>成员方法</p>
<ol>
<li>string format( Datedate)按照指定的模式,把Date日期,格式化为符合模式的字符串</li>
<li>Date parse( string source)把符合模式的字符串,解析为Dote日期</li>
</ol>
</li>
<li><p>DateFormat类是一个抽象类,无法直接创建对象使用，可以使用 DateFormat类的子类<strong>java.text.SimpleDateFormat extends DateFormat</strong></p>
</li>
<li><p>构造方法：<strong>SimpleDateFormat(String pattern)</strong>用给定的模式和默认语言环境的日期格式符号构造SimpleDateFormat</p>
</li>
</ol>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ol>
<li><p>测试DateFormat类的format方法，输出指定格式的日期、时间</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01FormatMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建SimpleDateFormat对象，在SimpleDateFormat(String pattern)构造方法中传入指定的模式</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy 年 MM 月 dd 日 HH 时 mm 分 ss 秒&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 调用DateFormat的实现类SimpleDateFormat中的format方法，</span></span><br><span class="line">        <span class="comment">// 按照构造方法中指定的模式，把Date解析为符合模式的字符串（文本）</span></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">dateFormat</span> <span class="operator">=</span> simpleDateFormat.format(date);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Sat Jan 11 16:24:43 CST 2020</span></span><br><span class="line">        System.out.println(date);</span><br><span class="line">        <span class="comment">// 2020 年 01 月 11 日 16 时 24 分 43 秒</span></span><br><span class="line">        System.out.println(dateFormat);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试DateFormat类的parse方法，把符合构造方法中模式的字符串，解析为Date日期</p>
</li>
</ol>
<pre><code class="lang-java">import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Demo01ParseMethod &#123;
    public static void main(String[] args)
            throws ParseException &#123;
        // 创建SimpleDateFormat对象，在SimpleDateFormat(String pattern)构造方法中传入指定的模式
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy 年 MM 月 dd 日 HH 时 mm 分 ss 秒&quot;);

        // 调用 SimpleDateFormat对象中的 parse方法，把符合构SimpleDateFormat(String pattern)造方法中模式的字符串，解析为Date日期
        Date dateParse = simpleDateFormat.parse(&quot;2020 年 01 月 11 日 16 时 24 分 43 秒&quot;);

        // Sat Jan 11 16:24:43 CST 2020
        System.out.println(dateParse);
    &#125;
&#125;
</code></pre>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java包装类</title>
    <url>/2025/01/26/Java%E5%8C%85%E8%A3%85%E7%B1%BB/</url>
    <content><![CDATA[<h3 id="Java-的包装类（Wrapper-Classes）作用"><a href="#Java-的包装类（Wrapper-Classes）作用" class="headerlink" title="Java 的包装类（Wrapper Classes）作用"></a><strong>Java 的包装类（Wrapper Classes）作用</strong></h3><p>Java 的 <strong>包装类（Wrapper Class）</strong> 主要用于将 <strong>基本数据类型（primitive types）</strong> 转换为 <strong>对象类型（reference types）</strong>，它们提供了额外的方法，并且在某些情况下是必需的，比如在 <strong>集合框架（如 <code>ArrayList</code>）</strong> 中存储数据。</p>
<hr>
<h2 id="1-Java-包装类有哪些？"><a href="#1-Java-包装类有哪些？" class="headerlink" title="1. Java 包装类有哪些？"></a><strong>1. Java 包装类有哪些？</strong></h2><p>Java 为每种基本数据类型提供了对应的包装类：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>基本类型（Primitive Type）</th>
<th>包装类（Wrapper Class）</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>byte</code></td>
<td><code>Byte</code></td>
</tr>
<tr>
<td><code>short</code></td>
<td><code>Short</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>Integer</code></td>
</tr>
<tr>
<td><code>long</code></td>
<td><code>Long</code></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>Float</code></td>
</tr>
<tr>
<td><code>double</code></td>
<td><code>Double</code></td>
</tr>
<tr>
<td><code>char</code></td>
<td><code>Character</code></td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code>Boolean</code></td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="2-为什么需要包装类？"><a href="#2-为什么需要包装类？" class="headerlink" title="2. 为什么需要包装类？"></a><strong>2. 为什么需要包装类？</strong></h2><h3 id="1-在集合（ArrayList、HashMap-等）中存储基本类型"><a href="#1-在集合（ArrayList、HashMap-等）中存储基本类型" class="headerlink" title="(1) 在集合（ArrayList、HashMap 等）中存储基本类型"></a><strong>(1) 在集合（<code>ArrayList</code>、<code>HashMap</code> 等）中存储基本类型</strong></h3><p>Java <strong>集合框架</strong>（如 <code>ArrayList</code>、<code>HashMap</code>）<strong>不支持基本类型</strong>，必须使用对象类型。<br>例如，<code>ArrayList&lt;int&gt;</code> 是非法的，必须使用 <code>ArrayList&lt;Integer&gt;</code>。</p>
<p><strong>错误示例（不能使用 <code>int</code>）：</strong></p>
<p>java</p>
<p>复制编辑</p>
<p><code>ArrayList&lt;int&gt; list = new ArrayList&lt;&gt;(); // ❌ 错误！</code></p>
<p><strong>正确示例（使用 <code>Integer</code>）：</strong></p>
<p>java</p>
<p>复制编辑</p>
<p><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(10); // 自动装箱 list.add(20); System.out.println(list.get(0)); // 输出 10</code></p>
<hr>
<h3 id="2-null-处理"><a href="#2-null-处理" class="headerlink" title="(2) null 处理"></a><strong>(2) <code>null</code> 处理</strong></h3><p>基本类型（如 <code>int</code>、<code>double</code>）<strong>不能赋值 <code>null</code></strong>，但包装类可以：</p>
<p>java</p>
<p>复制编辑</p>
<p><code>Integer a = null; // ✅ 合法 int b = null;     // ❌ 错误（基本类型不能为 null）</code></p>
<p>这在 <strong>数据库操作</strong> 或 <strong>JSON 解析</strong> 时很常见，比如 <code>null</code> 表示数据缺失。</p>
<hr>
<h3 id="3-提供了额外的方法"><a href="#3-提供了额外的方法" class="headerlink" title="(3) 提供了额外的方法"></a><strong>(3) 提供了额外的方法</strong></h3><p>包装类提供了许多有用的方法，比如：</p>
<ul>
<li><strong><code>Integer.parseInt(String)</code></strong> 将字符串转换为 <code>int</code></li>
<li><strong><code>Double.parseDouble(String)</code></strong> 将字符串转换为 <code>double</code></li>
<li><strong><code>Integer.toHexString(int)</code></strong> 将整数转换为十六进制字符串</li>
<li><strong><code>Boolean.valueOf(String)</code></strong> 解析布尔值</li>
</ul>
<p>java</p>
<p>复制编辑</p>
<p><code>String str = &quot;123&quot;; int num = Integer.parseInt(str); // 将字符串 &quot;123&quot; 转换为 int System.out.println(num * 2); // 输出 246</code></p>
<hr>
<h3 id="4-自动装箱（Autoboxing）和自动拆箱（Unboxing）"><a href="#4-自动装箱（Autoboxing）和自动拆箱（Unboxing）" class="headerlink" title="(4) 自动装箱（Autoboxing）和自动拆箱（Unboxing）"></a><strong>(4) 自动装箱（Autoboxing）和自动拆箱（Unboxing）</strong></h3><p><strong>Java 5 引入了自动装箱/拆箱，减少了手动转换的麻烦。</strong></p>
<h4 id="自动装箱（Autoboxing）"><a href="#自动装箱（Autoboxing）" class="headerlink" title="自动装箱（Autoboxing）"></a><strong>自动装箱（Autoboxing）</strong></h4><p>基本类型 <strong>→</strong> 包装类 <strong>自动转换</strong></p>
<p>java</p>
<p>复制编辑</p>
<p><code>Integer num = 10; // 相当于 Integer num = Integer.valueOf(10);</code></p>
<h4 id="自动拆箱（Unboxing）"><a href="#自动拆箱（Unboxing）" class="headerlink" title="自动拆箱（Unboxing）"></a><strong>自动拆箱（Unboxing）</strong></h4><p>包装类 <strong>→</strong> 基本类型 <strong>自动转换</strong></p>
<p>java</p>
<p>复制编辑</p>
<p><code>int x = num; // 相当于 int x = num.intValue();</code></p>
<p>示例：</p>
<p>java</p>
<p>复制编辑</p>
<p><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(10); // 自动装箱 int value = list.get(0); // 自动拆箱 System.out.println(value + 1); // 输出 11</code></p>
<hr>
<h3 id="5-类型转换"><a href="#5-类型转换" class="headerlink" title="(5) 类型转换"></a><strong>(5) 类型转换</strong></h3><p>包装类允许不同类型之间的转换：</p>
<p>java</p>
<p>复制编辑</p>
<p><code>int i = 100; String str = Integer.toString(i); // int → String int j = Integer.parseInt(str); // String → int</code></p>
<hr>
<h2 id="3-包装类和基本类型的性能"><a href="#3-包装类和基本类型的性能" class="headerlink" title="3. 包装类和基本类型的性能"></a><strong>3. 包装类和基本类型的性能</strong></h2><p>包装类的对象在 <strong>堆内存（Heap）</strong> 分配，而基本类型通常在 <strong>栈内存（Stack）</strong> 中。<br>因此：</p>
<ul>
<li><strong>基本类型性能更好，占用内存更少</strong>。</li>
<li><strong>包装类需要额外的内存和时间</strong>，频繁使用时可能影响性能。</li>
</ul>
<h3 id="示例：包装类和基本类型性能对比"><a href="#示例：包装类和基本类型性能对比" class="headerlink" title="示例：包装类和基本类型性能对比"></a><strong>示例：包装类和基本类型性能对比</strong></h3><p>java</p>
<p>复制编辑</p>
<p><code>public class Test &#123;     public static void main(String[] args) &#123;         long startTime, endTime;          // 测试基本类型 int         startTime = System.nanoTime();         int sum1 = 0;         for (int i = 0; i &lt; 1000000; i++) &#123;             sum1 += i;         &#125;         endTime = System.nanoTime();         System.out.println(&quot;基本类型 int 耗时: &quot; + (endTime - startTime) + &quot; ns&quot;);          // 测试包装类 Integer         startTime = System.nanoTime();         Integer sum2 = 0;         for (int i = 0; i &lt; 1000000; i++) &#123;             sum2 += i; // 这里涉及大量的装箱和拆箱         &#125;         endTime = System.nanoTime();         System.out.println(&quot;包装类 Integer 耗时: &quot; + (endTime - startTime) + &quot; ns&quot;);     &#125; &#125;</code></p>
<p>💡 <strong>结论</strong>：包装类由于<strong>装箱/拆箱</strong>，性能比基本类型差很多，因此<strong>在性能敏感的场景下，应尽量使用基本类型</strong>。</p>
<hr>
<h2 id="4-小结"><a href="#4-小结" class="headerlink" title="4. 小结"></a><strong>4. 小结</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th><strong>用途</strong></th>
<th><strong>包装类（Wrapper Class）作用</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>集合存储</strong></td>
<td><code>ArrayList&lt;Integer&gt;</code> 不能存 <code>int</code>，只能存 <code>Integer</code></td>
</tr>
<tr>
<td><strong><code>null</code> 处理</strong></td>
<td>包装类可以存 <code>null</code>，基本类型不行</td>
</tr>
<tr>
<td><strong>提供方法</strong></td>
<td><code>Integer.parseInt()</code>、<code>Double.toString()</code></td>
</tr>
<tr>
<td><strong>自动装箱/拆箱</strong></td>
<td><code>Integer num = 10;</code> <strong>(装箱)</strong>，<code>int x = num;</code> <strong>(拆箱)</strong></td>
</tr>
<tr>
<td><strong>类型转换</strong></td>
<td><code>String → int</code>，<code>int → String</code></td>
</tr>
<tr>
<td><strong>性能考虑</strong></td>
<td>基本类型更快，占用内存更少</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// 验证字符串是否是一个邮箱地址  </span></span><br><span class="line">        ArrayList&lt;String&gt; lst = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        lst.add(<span class="string">&quot;12&quot;</span>);  </span><br><span class="line">        lst.add(<span class="string">&quot;13&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;  </span><br><span class="line">            sum += Integer.parseInt(lst.get(i));  </span><br><span class="line">            System.out.println(sum);  </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> Integer.toString(<span class="number">456</span>); <span class="comment">// toString把数据转化为String类型</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要出现的功能(以Int为例子):</p>
<ul>
<li>intValue()</li>
<li><strong>parseInt(String)</strong> 返回该string的int值.</li>
</ul>
<h2 id="BigInteger"><a href="#BigInteger" class="headerlink" title="BigInteger"></a>BigInteger</h2><h2 id="Java中的BigInteger范围"><a href="#Java中的BigInteger范围" class="headerlink" title="Java中的BigInteger范围"></a>Java中的BigInteger范围</h2><p>在Java中，<em>BigInteger</em>类是用于处理超出标准数据类型（如<em>int</em>、<em>long</em>）范围的大整数的。<em>BigInteger</em>类位于<em>java.math</em>包中，它提供了一系列方法来进行大整数的算术运算，比如加法、减法、乘法和除法等。<em>BigInteger</em>的一个关键特点是它可以表示非常大的数值，理论上只受限于计算机的内存大小。</p>
<p>要创建一个<em>BigInteger</em>实例，你可以使用其构造函数传入一个字符串表示的数值，例如：</p>
<p>BigInteger bi = new BigInteger(“1234567890”);</p>
<p>然后，你可以使用<em>BigInteger</em>提供的方法来执行各种算术操作。例如，要执行加法，你可以使用<em>add</em>方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;12345678901234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">sum</span> <span class="operator">=</span> i1.add(i2); <span class="comment">// 结果为12345678902469135780</span></span><br></pre></td></tr></table></figure>
<p>转换为基本数据类型</p>
<p>尽管<em>BigInteger</em>可以表示非常大的数值，但有时候我们需要将其转换为基本数据类型，如<em>long</em>。<em>BigInteger</em>提供了一系列方法来进行这种转换，例如<em>longValue()</em>和<em>longValueExact()</em>。<em>longValue()</em>方法会尝试将<em>BigInteger</em>的值转换为<em>long</em>类型，如果数值超出了<em>long</em>的范围，它会返回一个近似值。而<em>longValueExact()</em>方法在转换结果超出<em>long</em>范围时会抛出<em>ArithmeticException</em>异常。</p>
<p>使用<em>BigInteger</em>的一个缺点是其速度相对于原生类型（如<em>int</em>和<em>long</em>）较慢，因为<em>BigInteger</em>的运算是通过软件模拟实现的。因此，在性能敏感的应用中，如果可能，最好还是使用原生类型。</p>
<p>示例</p>
<p>以下是一个使用<em>BigInteger</em>的简单示例，它演示了如何创建<em>BigInteger</em>对象，执行幂运算，以及如何处理超出<em>long</em>范围时的情况：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">bi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">        System.out.println(bi.pow(<span class="number">5</span>)); <span class="comment">// 输出: 2867971860299718107233761438093672048294900000</span></span><br><span class="line">  </span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;123456789000&quot;</span>);</span><br><span class="line">        System.out.println(i.longValue()); <span class="comment">// 输出: 123456789000</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(i.multiply(i).longValueExact()); <span class="comment">// 将抛出 java.lang.ArithmeticException</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;BigInteger out of long range&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个示例中，我们创建了一个<em>BigInteger</em>对象，并计算了它的五次方。然后，我们尝试将一个大<em>BigInteger</em>值转换为<em>long</em>类型，当转换结果超出<em>long</em>的范围时，捕获并处理了<em>ArithmeticException</em>异常。</p>
<p>总的来说，<em>BigInteger</em>是一个非常强大的类，它允许Java程序员处理超出标准整数类型范围的数值。不过，需要注意的是，使用<em>BigInteger</em>可能会牺牲一些性能。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>git简单使用</title>
    <url>/2025/03/01/git%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<ul>
<li><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><ul>
<li>直接 <code>git init</code>将对应目录下一个文件夹变成git仓库</li>
<li>使用<code>git clone</code>从github上克隆一个已经有的项目到指定文件夹<blockquote>
<p>检查.git文件创建成功，不能直接ls，因为ls不会显示》.git 得使用ls -a显示</p>
</blockquote>
</li>
</ul>
</li>
<li><h3 id="git仓库包括两种"><a href="#git仓库包括两种" class="headerlink" title="git仓库包括两种:"></a>git仓库包括两种:</h3><ul>
<li>本地仓库</li>
<li>远程仓库</li>
</ul>
</li>
<li><p>commit : 提交，将本地文件和版本信息保存到本地仓库</p>
</li>
<li>push: 推送，将本地仓库和版本信息提交到远程仓库</li>
<li>pull : 拉取，将远程仓库文件和版本信息下载到本地文件</li>
</ul>
<hr>
<ul>
<li>git GUI : 图形界面</li>
</ul>
<hr>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><blockquote>
<p>使用git</p>
</blockquote>
<h4 id="1-全局设置"><a href="#1-全局设置" class="headerlink" title="1. 全局设置"></a>1. 全局设置</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global user.name 你的名字</span><br><span class="line">git confih --global user.email 你的邮箱</span><br></pre></td></tr></table></figure>
<p>查看配置信息:<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure></p>
<ul>
<li>上面设置的是git的初始化仓库，和github和gitee等的账号不一样</li>
</ul>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>版本库：前面看到的.git隐藏文件夹就是版本库，版本库中储存了配置信息，日志文件，版本信息等</li>
<li>工作区： 包含.git文件夹目录的工作区，也称为工作目录，主要用于存放代码</li>
<li>暂存区： .git文件夹有很多文件，其中一个index文件就是暂存区，也可以叫做stage，是一个临时保存文件的地方</li>
</ul>
<p>工作区 ——&gt; (git add) 暂存区 ——-&gt;(git commit)版本库</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git add 文件 //支持多个文件同时加入</span><br></pre></td></tr></table></figure></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git commit -m &#x27;输入提示语&#x27; 文件名字</span><br></pre></td></tr></table></figure>
<h3 id="工作区文件状态"><a href="#工作区文件状态" class="headerlink" title="工作区文件状态"></a>工作区文件状态</h3><blockquote>
<p>git文件工作区分两个状态</p>
</blockquote>
<ul>
<li>untracked 未跟踪(未被纳入版本库)</li>
<li>tracked     已被跟踪(纳入版本控制)<br>  1)Unmodified 未被修改状态<br>  2）Modified   已被修改状态<br>  3）Staged      已暂存状态<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git status // 查看当前工作区的状态</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li>git reset<br>1.把暂存区的东西放回工作区<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git reset + 文件//取消对文件的跟踪（从暂存区取消暂存，返回工作区）</span><br></pre></td></tr></table></figure>
2.回退版本(通过git log 查看版本号)<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git reset --hard 版本号</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>git commit将暂存区的内容提交到版本库<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git commit -m &#x27;你这一次提交的修改内容&#x27; 你要提交或者修改了的文件</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="远程仓库操作"><a href="#远程仓库操作" class="headerlink" title="远程仓库操作"></a>远程仓库操作</h3><p><code>git remote//查看远程仓库</code><br><code>git remote -v//查看详细信息</code></p>
<ul>
<li><p>添加远程仓库</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote add &lt;short name&gt; &lt;url&gt; //short_name一般是origin</span><br></pre></td></tr></table></figure>
</li>
<li><p>推送：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git push [remote_name] [branch_name] // 一般remote用origin代替</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="分支操作"><a href="#分支操作" class="headerlink" title="分支操作"></a>分支操作</h3><ul>
<li>git branch 查看分支</li>
<li>git branch [ name ] 创建分支</li>
<li>git checkout [name] 切换分支</li>
<li>git push [short_name】[name]  推送到远程仓库</li>
<li>git merge [name] 合并分支(把指定代码合并到当前分支)</li>
<li>git branch -d [name] 删除分支</li>
</ul>
<h4 id="分支查看："><a href="#分支查看：" class="headerlink" title="分支查看："></a>分支查看：</h4><ul>
<li>git branch 列出所有本地分支</li>
<li>git branch -r 列出所有远程分支</li>
<li>git branch -a 列出所有本地分支和远程分支</li>
</ul>
<hr>
<blockquote>
<p>标签</p>
</blockquote>
<ul>
<li>git tag 列出已有的标签</li>
<li>git tag [name] 创建标签</li>
<li>git push [short_name] 【name] 将标签推送到远程仓库</li>
<li>git checkout -b [branch] 【name] 检出标签</li>
</ul>
<h3 id="查看最后一次使用某个文件的某人"><a href="#查看最后一次使用某个文件的某人" class="headerlink" title="查看最后一次使用某个文件的某人"></a>查看最后一次使用某个文件的某人</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git log -x 文件名</span><br></pre></td></tr></table></figure>
<ul>
<li>-x是第几次</li>
</ul>
<h3 id="查看修改摩尔个文件中的collections时的提交信息"><a href="#查看修改摩尔个文件中的collections时的提交信息" class="headerlink" title="查看修改摩尔个文件中的collections时的提交信息"></a>查看修改摩尔个文件中的collections时的提交信息</h3><p>git blame , git show<br>或者使用git log</p>
<ul>
<li><code>git config</code>: Git 是一个 <a href="https://git-scm.com/docs/git-config">高度可定制的</a> 工具</li>
<li><code>git clone --depth=1</code>: 浅克隆（shallow clone），不包括完整的版本历史信息</li>
<li><code>git add -p</code>: 交互式暂存</li>
<li><code>git rebase -i</code>: 交互式变基</li>
<li><code>git blame</code>: 查看最后修改某行的人</li>
<li><code>git stash</code>: 暂时移除工作目录下的修改内容</li>
<li><code>git bisect</code>: 通过二分查找搜索历史记录</li>
<li><code>.gitignore</code>: <a href="https://git-scm.com/docs/gitignore">指定</a> 故意不追踪的文件</li>
</ul>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>TCP / UDP</title>
    <url>/2024/12/26/hehehe/</url>
    <content><![CDATA[<ul>
<li>OSI七层网络模型</li>
</ul>
<p>从下往上 ： 物理层， 数据链路层，网络层，运输层， 会话层，表示层，应用层</p>
<ul>
<li>TCP/ IP</li>
</ul>
<h3 id="网络协议是什么"><a href="#网络协议是什么" class="headerlink" title="网络协议是什么"></a><a href="https://so.csdn.net/so/search?q=%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE&amp;spm=1001.2101.3001.7020">网络协议</a>是什么</h3><ul>
<li>在计算机网络要做到井井有条的交换数据，就必须遵守一些事先约定好的规则，比如交换数据的格式、是否需要发送一个应答信息。这些规则被称为网络协议。</li>
</ul>
<h3 id="为什么要对网络协议分层"><a href="#为什么要对网络协议分层" class="headerlink" title="为什么要对网络协议分层"></a>为什么要对网络协议分层</h3><ul>
<li>简化问题难度和复杂度。由于各层之间独立，我们可以分割大问题为小问题。</li>
<li>灵活性好。当其中一层的技术变化时，只要层间接口关系保持不变，其他层不受影响。</li>
<li>易于实现和维护。</li>
<li>促进标准化工作。分开后，每层功能可以相对简单地被描述![[OSI.png]]</li>
</ul>
<p><strong>1、UDP 和 TCP 的特点与区别</strong></p>
<p><strong>用户数据报协议 UDP（User Datagram Protocol）</strong></p>
<p>是无连接的，尽最大可能交付，没有拥塞控制，面向报文（对于应用程序传下来的报文不合并也不拆分，只是添加 UDP 首部），支持一对一、一对多、多对一和多对多的交互通信。</p>
<p><strong>传输控制协议 TCP（Transmission Control Protocol）</strong></p>
<p>是面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，面向字节流（把应用层传下来的报文看成字节流，把字节流组织成大小不等的数据块），每一条 TCP 连接只能是点对点的（一对一）。</p>
<p><strong>TCP拥塞控制</strong>是<a href="https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE" title="传输控制协议">传输控制协议</a>（英语：Transmission Control Protocol，缩写TCP）避免网络拥塞的算法，是<a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91" title="互联网">互联网</a>上主要的一个<a href="https://zh.wikipedia.org/wiki/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6" title="拥塞控制">拥塞控制</a>措施。它使用一套基于<a href="https://zh.wikipedia.org/wiki/%E5%92%8C%E6%80%A7%E5%A2%9E%E9%95%BF/%E4%B9%98%E6%80%A7%E9%99%8D%E4%BD%8E" title="和性增长/乘性降低">线增积减模式</a>的多样化网络拥塞控制方法（包括慢启动和拥塞窗口等模式）来控制拥塞。<a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-1">[1]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-2">[2]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-3">[3]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-4">[4]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-5">[5]</a>在互联网上应用中有相当多的具体实现算法。</p>
<p>![[{3B980C8E-4290-4775-9A0E-701F2F915A2F}.png]]![[{C2356D64-8E5C-4E3A-A3A8-E8D6517C3212}.png]]</p>
<p>TCP结构：<br>序号 :</p>
<p>确认号： </p>
<p>数据偏移：</p>
<p><strong>控制位：</strong>八位从左到右分别是 CWR，ECE，URG，ACK，PSH，RST，SYN，FIN。</p>
<p><strong>CWR：</strong>CWR 标志与后面的 ECE 标志都用于 IP 首部的 ECN 字段，ECE 标志为 1 时，则通知对方已将拥塞窗口缩小；</p>
<p><strong>ECE：</strong>若其值为 1 则会通知对方，从对方到这边的网络有阻塞。在收到数据包的 IP 首部中 ECN 为 1 时将 TCP 首部中的 ECE 设为 1；</p>
<p><strong>URG：</strong>该位设为 1，表示包中有需要紧急处理的数据，对于需要紧急处理的数据，与后面的紧急指针有关；</p>
<p><strong>ACK：</strong>该位设为 1，确认应答的字段有效，TCP规定除了最初建立连接时的 SYN 包之外该位必须设为 1；</p>
<p><strong>PSH：</strong>该位设为 1，表示需要将收到的数据立刻传给上层应用协议，若设为 0，则先将数据进行缓存；</p>
<p><strong>RST：</strong>该位设为 1，表示 TCP 连接出现异常必须强制断开连接；</p>
<p><strong>SYN：</strong>用于建立连接，该位设为 1，表示希望建立连接，并在其序列号的字段进行序列号初值设定；</p>
<p><strong>FIN：</strong>该位设为 1，表示今后不再有数据发送，希望断开连接。当通信结束希望断开连接时，通信双方的主机之间就可以相互交换 FIN 位置为 1 的 TCP 段。</p>
<p>每个主机又对对方的 FIN 包进行确认应答之后可以断开连接。不过，主机收到 FIN 设置为 1 的 TCP 段之后不必马上回复一个 FIN 包，而是可以等到缓冲区中的所有数据都因为已成功发送而被自动删除之后再发 FIN 包；</p>
<p><strong>窗口：</strong>窗口值作为接收方让发送方设置其发送窗口的依据。之所以要有这个限制，是因为接收方的数据缓存空间是有限的。</p>
<h2 id="TCP三次握手"><a href="#TCP三次握手" class="headerlink" title="TCP三次握手"></a>TCP三次握手</h2><ul>
<li><p>第一次 从发送方主机  -&gt; 接收方主机<br>ACK = 0, SYN = 1; 选择一个序列号 Seq = x</p>
</li>
<li><p>第二次 从接收方主机 -&gt; 发送方主机<br>ACK = 1, SYN = 1; 返回Seq = x + 1同时选择一个序列号 ACKnum = y</p>
</li>
<li><p>第三次， 从发送方主机 -&gt; 接受方主机<br>ACK = 1; ACKnum = y + 1</p>
</li>
</ul>
<p>建立连接</p>
<blockquote>
<p>使用TCP三次握手的原因</p>
<ul>
<li>确认双方的发送和接收消息的能力是正常的</li>
</ul>
</blockquote>
<p>注意到建立连接一般是 三次握手 </p>
<h2 id="TCP的四次挥手"><a href="#TCP的四次挥手" class="headerlink" title="TCP的四次挥手"></a>TCP的四次挥手</h2><ul>
<li><p>第一次 从发送方 -&gt; 接送方主机<br>FIN = 1， Seq = x</p>
</li>
<li><p>第二次 从接收方 -&gt; 发送方<br>ACK = 1， ACKnum = x + 1;</p>
</li>
</ul>
<hr>
<pre><code>中间有一段服务端确认（CLOSEWAIT）， 等待 服务端 所有 传输剩下的报文段发送完毕 
</code></pre><ul>
<li><p>第三次 从接收方 -&gt; 发送方<br>FIN = 1， Seq = y</p>
</li>
<li><p>第四次 从发送方 -&gt; 接收方</p>
</li>
</ul>
<hr>
<pre><code>之后是客户端的TIME_WAIT， 等待 2 MSL （报文段最大存活时间）后关闭连接
</code></pre><h2 id="TCP-短连接和长连接的区别"><a href="#TCP-短连接和长连接的区别" class="headerlink" title="TCP 短连接和长连接的区别"></a><strong>TCP 短连接和长连接的区别</strong></h2><p><strong>短连接：</strong>Client 向 Server 发送消息，Server 回应 Client，然后一次读写就完成了，这时候双方任何一个都可以发起 close 操作，不过一般都是 Client 先发起 close 操作。短连接一般只会在 Client/Server 间传递一次读写操作。</p>
<p>短连接的优点：管理起来比较简单，建立存在的连接都是有用的连接，不需要额外的控制手段。</p>
<p><strong>长连接：</strong>Client 与 Server 完成一次读写之后，它们之间的连接并不会主动关闭，后续的读写操作会继续使用这个连接。</p>
<p>在长连接的应用场景下，Client 端一般不会主动关闭它们之间的连接，Client 与 Server 之间的连接如果一直不关闭的话，随着客户端连接越来越多，Server 压力也越来越大，这时候 Server 端需要采取一些策略，如关闭一些长时间没有读写事件发生的连接，这样可以避免一些恶意连接导致 Server 端服务受损；如果条件再允许可以以客户端为颗粒度，限制每个客户端的最大长连接数，从而避免某个客户端连累后端的服务。</p>
<h3 id="粘包和拆包"><a href="#粘包和拆包" class="headerlink" title="粘包和拆包"></a>粘包和拆包</h3><ul>
<li>粘包 ： 在从 客户端 到 服务端过程中两个包连在一起 叫做粘包</li>
<li>拆包 ： ————————————————————————-之后还拆分成两个与原来不同的数据段叫做拆包</li>
</ul>
<blockquote>
<p>什么时候发生粘包和拆包？<br>    答案 : </p>
<pre><code>1. 在发送的数据超过TCP缓冲区最大空间时候可能发生拆包
2. 发送的数据大于MSS（最大报文长度）， 发生拆包
3. 发送的数据小于TCP缓冲区最小空间可能发生粘包
4. 接受数据端应用层没有及时读取缓冲区的数据
</code></pre></blockquote>
<p>粘包拆包解决办法 : </p>
<ul>
<li><strong>消息定长</strong> ： 每个数据包固定长度（不够的拿0去填补），这样接收端每次接受的都是固定长度的数据，就可以分开</li>
<li><strong>设置消息边界</strong> ： 服务端在接受时候， 按照分割边界把消息分割， 如 FTP协议（通过设置一个换行符）</li>
</ul>
<h3 id="TCP的可靠传输"><a href="#TCP的可靠传输" class="headerlink" title="TCP的可靠传输"></a>TCP的可靠传输</h3><blockquote>
<p>TCP采用超时重传实现可靠传输 ： 当某一个信息发送后在超时时间内没有收到确认就重传这个报文段（从发送到接受的时间是RTT， 可以自己计算）</p>
</blockquote>
<h3 id="TCP滑动窗口"><a href="#TCP滑动窗口" class="headerlink" title="TCP滑动窗口"></a>TCP滑动窗口</h3><blockquote>
<p>TCP发送窗口， 和接受窗口内的数据段都是可接受或者可以发送的，当发送方的某个报文段已经被确认后， 窗口会向右移动一段距离， 更新可以接受和被接受的报文段</p>
</blockquote>
<h3 id="TCP的流量控制"><a href="#TCP的流量控制" class="headerlink" title="TCP的流量控制"></a>TCP的流量控制</h3><blockquote>
<p>TCP通过控制窗口大小实现流量的控制<br>为了避免发送不出数据， 接收方会时不时发送一个 <strong>窗口探测</strong> 的数据段（只包含一个字节）来确定最新的窗口大小</p>
</blockquote>
<h2 id="TCP的拥塞控制"><a href="#TCP的拥塞控制" class="headerlink" title="TCP的拥塞控制"></a>TCP的拥塞控制</h2><blockquote>
<p><strong>主要通过四个算法</strong>：慢开始，拥塞避免，快重传，快恢复</p>
</blockquote>
<p>维护一个拥塞窗口（cwnd），注意道拥塞窗口只是一个状态变量</p>
<p>假设接收方有足够大的接收窗口，窗口的大小为报文段</p>
<ul>
<li><p>慢开始和拥塞避免</p>
<pre><code> 最开始执行满开始，让cwnd = 1，之后每当接受确认，就倍增 2 4 8 ....再设置一个慢开始门限ssthresh，当慢开始大于这个门限的时候进入拥塞避免，每个轮次让cwnd + 1
 1   
 如果出现了超时，就另慢开始门限 = cwnd / 2，重新开始慢开始
</code></pre></li>
<li><p>快重传和快恢复</p>
<pre><code>  接收方每次接收报文都应该对最后一次收到的报文进行确认，例如收到了B1， B2， B4
  则在收到B2时候要对B1确认，B4时候要对B2确认
  当发送方重复收到3次接收方发来的某个相同的报文的确认时，立即执行快重传（因为这时候知道有报文丢失），在这种情况下是报文段的丢失，不是网络拥塞，所以直接执行快恢复，让慢开始上限（ssthresh）= 拥塞窗口（cwnd） / 2；注意此时直接进入拥塞避免
</code></pre></li>
</ul>
<blockquote>
<p>注意 慢开始和快恢复的慢和快指的是cwnd的设定值，慢开始cwnd设置成1，快开始cwnd设置成ssthresh</p>
</blockquote>
]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
  </entry>
  <entry>
    <title>分块</title>
    <url>/2025/03/04/%E5%88%86%E5%9D%97/</url>
    <content><![CDATA[<p>分块就是将一段数据分成一些小块， 对每个块单独处理使其不超过时间限制, 分块更多是一种思想，他介于线段树和树状数组之间。</p>
<hr>
<h2 id="一-给出一个长为-n-的数列，以及-n-个操作，操作涉及区间加法，区间求和。"><a href="#一-给出一个长为-n-的数列，以及-n-个操作，操作涉及区间加法，区间求和。" class="headerlink" title="一.给出一个长为 n 的数列，以及 n 个操作，操作涉及区间加法，区间求和。"></a>一.给出一个长为 n 的数列，以及 n 个操作，操作涉及区间加法，区间求和。</h2><p>输入格式</p>
<p>第一行输入一个数字 n。</p>
<p>第二行输入 n 个数字，第 i 个数字为 a_i，以空格隔开。</p>
<p>接下来输入 n 行询问，每行输入四个数字 \mathrm{opt}、l、r、c，以空格隔开。</p>
<p>若 \mathrm{opt} = 0，表示将位于 [l, r] 的之间的数字都加 c。</p>
<p>若 \mathrm{opt} = 1，表示询问位于 [l, r] 的所有数字的和 \bmod (c+1)。</p>
<p><strong>思路</strong> : </p>
<ul>
<li><p>将数组分块每次加的时候，如果L与R在同一块里面，直接遍历该数组，最差时间复杂度O(nsqrt(n))，如果不是<br> 则将与左右两个块相同的数组内数字直接操作，将两个之间的用一个类似Lazytag的数组保存修改两量，</p>
</li>
<li><p>同理对于查询时候，如果L与R属于同一个块，则直接遍历，最差时间复杂度是O(nsqrt(n))</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">p</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        f[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        b[f[i]] += a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](i64 l, i64 r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        i64 g = f[l], h = f[r];</span><br><span class="line">        <span class="keyword">if</span> (g == h) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; f[i] == f[l]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; f[i] == f[r]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = f[l] + <span class="number">1</span>; i &lt; f[r]; i++) &#123;</span><br><span class="line">                p[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](i64 l, i64 r, i64 c) -&gt; i64 &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[l] == f[r]) &#123;</span><br><span class="line">            i64 sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                sum = (sum + a[i] + p[f[i]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i64 sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; f[i] == f[l]; i++) &#123;</span><br><span class="line">                sum = (sum + a[i] + p[f[i]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 j = r; f[j] == f[r]; j--) &#123;</span><br><span class="line">                sum = (sum + a[j] + p[f[j]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = f[l] + <span class="number">1</span>; i &lt; f[r]; i++) &#123;</span><br><span class="line">                sum = (sum + b[i] + p[i] * len) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二-给出一个长为-n-的数列，以及-n-个操作，操作涉及区间加法，询问区间内小于某个值-x-的元素个数。"><a href="#二-给出一个长为-n-的数列，以及-n-个操作，操作涉及区间加法，询问区间内小于某个值-x-的元素个数。" class="headerlink" title="二. 给出一个长为 n 的数列，以及 n 个操作，操作涉及区间加法，询问区间内小于某个值 x 的元素个数。"></a>二. 给出一个长为 n 的数列，以及 n 个操作，操作涉及区间加法，询问区间内小于某个值 x 的元素个数。</h2><p>输入格式</p>
<p>第一行输入一个数字 n。</p>
<p>第二行输入 n 个数字，第 i 个数字为 a_i，以空格隔开。</p>
<p>接下来输入 n 行询问，每行输入四个数字 \mathrm{opt}、l、r、c，以空格隔开。</p>
<p>若 \mathrm{opt} = 0，表示将位于 [l, r] 的之间的数字都加 c。</p>
<p>若 \mathrm{opt} = 1，表示询问 [l, r] 中，小于 c^2 的数字的个数。</p>
<p>输出格式</p>
<p>对于每次询问，输出一行一个数字表示答案。</p>
<p>样例</p>
<p><strong>输入复制</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">1 2 2 3</span><br><span class="line">0 1 3 1</span><br><span class="line">1 1 3 2</span><br><span class="line">1 1 4 1</span><br><span class="line">1 2 3 2</span><br></pre></td></tr></table></figure>
<p><strong>输出复制</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">3</span><br><span class="line">0</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>数据范围与提示</p>
<p>对于 100\% 的数据，1 \leq n \leq 50000, -2^{31} \leq \mathrm{others}、\mathrm{ans} \leq 2^{31}-1。</p>
<p><strong>思路</strong><br>    一样分块后：<br>        加法时：</p>
<pre><code>         - 当$id[l] == id[r]$ 时候直接暴力遍历，最坏复杂度O\(nsqrt\(n\)\)
         - 当$id[l] != id[r]$ 时候： 先处理两个裂块， 暴力维护。对于完整的块，每个块设置一个复制数组，操作后对这个块内进行sort， 时间复杂度$O(log(sqrt(n))$ 套个n后也可以过。
    询问时：
          - 当$id[l] == id[r]$ 时候直接暴力遍历，最坏复杂度O\(nsqrt\(n\)\)
          - 当$id[l] != id[r]$ 时候： 先处理两个裂块， 暴力维护。对于完整的块，块内二分单调复制数组b，找到块内比$c*c$ 小的数字个数。 
</code></pre><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">id</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">g</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">cnt</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        b[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> work = [&amp;](<span class="type">int</span> id) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="type">int</span> st = <span class="number">1</span> + (id - <span class="number">1</span>) * len;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = st; i &lt; <span class="built_in">min</span>(n + <span class="number">1</span>, st + len); i++) &#123;</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(b.<span class="built_in">begin</span>() + st, <span class="built_in">min</span>(b.<span class="built_in">end</span>(), b.<span class="built_in">begin</span>() + st + len));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i += len) &#123;</span><br><span class="line">        <span class="built_in">work</span>(id[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; id[l] == id[i]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; id[r] == id[i]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[r]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                g[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r, i64 c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                <span class="type">int</span> l = <span class="number">1</span> + (i - <span class="number">1</span>) * len, r = i * len;</span><br><span class="line">                <span class="type">int</span> ls = l;</span><br><span class="line">                <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">                    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (g[id[mid]] + b[mid] &lt; c) &#123;</span><br><span class="line">                        l = mid + <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        r = mid - <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> res = <span class="built_in">max</span>(<span class="number">0</span>, r - ls + <span class="number">1</span>);</span><br><span class="line">                sum += res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c * c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三-区间加法，询问区间内小于某个值-x-的前驱（比其小的最大元素）。"><a href="#三-区间加法，询问区间内小于某个值-x-的前驱（比其小的最大元素）。" class="headerlink" title="三. 区间加法，询问区间内小于某个值 x 的前驱（比其小的最大元素）。"></a>三. 区间加法，询问区间内小于某个值 x 的前驱（比其小的最大元素）。</h2><p><strong>题目描述</strong></p>
<p>给出一个长为 n 的数列，以及 n 个操作，操作涉及区间加法，询问区间内小于某个值 x 的前驱（比其小的最大元素）。</p>
<p><strong>输入格式</strong></p>
<p>第一行输入一个数字 n。</p>
<p>第二行输入 n 个数字，第 i 个数字为 a_i，以空格隔开。</p>
<p>接下来输入 n 行询问，每行输入四个数字 \mathrm{opt}、l、r、c，以空格隔开。</p>
<p>若 \mathrm{opt} = 0，表示将位于 [l, r] 的之间的数字都加 c。</p>
<p>若 \mathrm{opt} = 1，表示询问 [l, r] 中 c 的前驱的值（不存在则输出 -1）。</p>
<p><strong>输出格式</strong></p>
<p>对于每次询问，输出一行一个数字表示答案。</p>
<p><strong>样例</strong></p>
<p>输入复制</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">1 2 2 3</span><br><span class="line">0 1 3 1</span><br><span class="line">1 1 4 4</span><br><span class="line">0 1 2 2</span><br><span class="line">1 1 2 4</span><br></pre></td></tr></table></figure>
<p>输出复制</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">3</span><br><span class="line">-1</span><br></pre></td></tr></table></figure>
<p>数据范围与提示</p>
<p>对于 100\% 的数据，1 \leq n \leq 100000, -2^{31} \leq \mathrm{others}、\mathrm{ans} \leq 2^{31}-1。</p>
<p>思路：同题目二，将每个块排序</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">g</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">id</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> work = [&amp;](i64 id) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        i64 st = <span class="number">1</span> + (id - <span class="number">1</span>) * len;</span><br><span class="line">        <span class="keyword">for</span> (i64 i = st; i &lt; <span class="built_in">min</span>(n + <span class="number">1</span>, st + len); i++) &#123;</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(b.<span class="built_in">begin</span>() + st, <span class="built_in">min</span>(b.<span class="built_in">end</span>(), b.<span class="built_in">begin</span>() + st + len));</span><br><span class="line">    &#125;;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i += len) &#123;</span><br><span class="line">        <span class="built_in">work</span>(id[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](i64 l, i64 r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[r]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                g[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](i64 l, i64 r, i64 c) -&gt; i64 &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            i64 ans = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i64 ans = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; id[l] == id[i]; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                i64 l = <span class="number">1</span> + (i - <span class="number">1</span>) * len, r = i * len;</span><br><span class="line">                i64 mid;</span><br><span class="line">                <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">                    mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (b[mid] + g[id[mid]] &lt; c) &#123;</span><br><span class="line">                        ans = <span class="built_in">max</span>(ans, b[mid] + g[id[mid]]);</span><br><span class="line">                        l = mid + <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        r = mid - <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 - 6明天更新</p>
]]></content>
      <categories>
        <category>算法</category>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Tarjan</title>
    <url>/2024/10/03/Tarjan/</url>
    <content><![CDATA[<ul>
<li><h3 id="强连通分量"><a href="#强连通分量" class="headerlink" title="强连通分量"></a>强连通分量</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    st.<span class="built_in">push</span>(u);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (f[v] == <span class="number">0</span>) &#123;</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dfn[u] == low[u]) &#123;</span><br><span class="line">        ++flag;</span><br><span class="line">        <span class="keyword">while</span> (st.<span class="built_in">top</span>() != u) &#123;</span><br><span class="line">            f[st.<span class="built_in">top</span>()] = flag;</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        st.<span class="built_in">pop</span>();</span><br><span class="line">        f[u] = flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dfn[i] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">tarjan</span>(tarjan, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><h3 id="求割点"><a href="#求割点" class="headerlink" title="求割点"></a>求割点</h3></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">cut</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> start = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    <span class="type">int</span> child = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            child++;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (low[v] &gt;= dfn[u] &amp;&amp; !cut[u]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (u != start || child &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    cut[u] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> low[u] = <span class="built_in">min</span>(low[u], dfn[v]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!dfn[i]) start = i, <span class="built_in">tarjan</span>(tarjan, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只要有一个孩子回不到原来的点（也就是low[v] 》 dfn[u] ， 那么这个点就是割点，注意如果是起点要额外加上有两个儿子这个条件</p>
<h2 id="割边"><a href="#割边" class="headerlink" title="割边"></a>割边</h2><h2 id="点双连通分量"><a href="#点双连通分量" class="headerlink" title="点双连通分量"></a>点双连通分量</h2><ul>
<li>在一张连通的无向图中，对于两个点 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> 和 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v">，如果无论删去哪个点（只能删去一个）都不能使它们不连通，我们就说 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> 和 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> <strong>点双连通</strong></li>
</ul>
<h2 id="边双连通分量"><a href="#边双连通分量" class="headerlink" title="边双连通分量"></a>边双连通分量</h2><ul>
<li>在一张连通的无向图中，对于两个点 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> 和 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v">，如果无论删去哪条边（只能删去一个，且不能删 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> 和 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> 自己）都不能使它们不连通，我们就说 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> 和 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> <strong>边双连通</strong></li>
</ul>
<blockquote>
<p>性质：</p>
</blockquote>
<ul>
<li>边双连通具有传递性，即，若x , y <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="x,y"> 边双连通，y, z<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="y,z"> 边双连通，则 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="x,z">x , z 边双连通。</li>
<li>点双连通不具有传递性。</li>
</ul>
<h3 id="边双缩点：边双树"><a href="#边双缩点：边双树" class="headerlink" title="边双缩点：边双树"></a>边双缩点：边双树</h3><p>就像强联通分量缩点一样，我们可以把每一个边双缩成一个点来处理一些问题，然后这些点之间由原来的割边相连形成了一棵树。</p>
<p>最后得出一定是一棵树（森林），如果不是树，那就有环，环就是个边双。</p>
<p>就像强连通分量分解把一般有向图变成了有向无环图一样，我们把无向图的问题转到了树上，更好处理了，同时也保存了原来无向图的信息。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">bridge</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    stk.<span class="built_in">push</span>(u);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> lin = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v == fa) &#123;</span><br><span class="line">            lin++; <span class="keyword">if</span> (lin == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], dfn[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (low[u] == dfn[u]) &#123;</span><br><span class="line">        ++flag;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; g;</span><br><span class="line">        <span class="keyword">while</span> (stk.<span class="built_in">top</span>() != u) &#123;</span><br><span class="line">            f[stk.<span class="built_in">top</span>()] = flag;</span><br><span class="line">            g.<span class="built_in">push_back</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        g.<span class="built_in">push_back</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">        stk.<span class="built_in">pop</span>();</span><br><span class="line">        f[u] = flag;</span><br><span class="line">        ans.<span class="built_in">push_back</span>(g);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!dfn[i]) <span class="built_in">tarjan</span>(tarjan, i, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把边缩掉之后图会变成一颗树，那么在这之上的操作性质会更好</p>
]]></content>
      <categories>
        <category>算法</category>
        <category>图论</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>基环树</title>
    <url>/2024/09/01/%E5%9F%BA%E7%8E%AF%E6%A0%91/</url>
    <content><![CDATA[<p>图中只存在一个环的图就是基环树，<br>分为有向图和无向图</p>
<p>无向图求基环树可以使用bfs ： 先统计入度，然后每次对队列中元素删边，把删后度数为1的点入队，bfs结束后，所有度数 &gt; 1的点就是环上的点，如果只需要求一个点，可以使用dfs，出现了两次的点说明必然有环。</p>
<blockquote>
<p>想法1 ： 可以通过先找出基环树的环， 之后分别对除了环以外的每个点的子树进行操作，把信息合并到环上，之后问题就集中为处理一个环上问题， </p>
<p>想法2 ： 可以先找出基环树的环， 之后删掉基环树上某一条边， 将基环树变成一个树，处理树上问题</p>
</blockquote>
<h3 id="寻找环的办法"><a href="#寻找环的办法" class="headerlink" title="寻找环的办法"></a>寻找环的办法</h3><h4 id="1-：-对于无向图，-使用拓补排序，最后剩下的度数-gt-1-的点就是环上的点"><a href="#1-：-对于无向图，-使用拓补排序，最后剩下的度数-gt-1-的点就是环上的点" class="headerlink" title="1 ： 对于无向图， 使用拓补排序，最后剩下的度数 &gt; 1 的点就是环上的点"></a>1 ： 对于无向图， 使用拓补排序，最后剩下的度数 &gt; 1 的点就是环上的点</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-对于有向图，-使用dfs-寻找，出现了vis两次的点就是环上一个点"><a href="#2-对于有向图，-使用dfs-寻找，出现了vis两次的点就是环上一个点" class="headerlink" title="2 : 对于有向图， 使用dfs 寻找，出现了vis两次的点就是环上一个点"></a>2 : 对于有向图， 使用dfs 寻找，出现了vis两次的点就是环上一个点</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> check_c = [&amp;](<span class="keyword">auto</span> self, i64 u) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        vis[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> now = fa[u];</span><br><span class="line">        <span class="keyword">if</span> (vis[now]) <span class="keyword">return</span> now;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">self</span>(self, now);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>记录深度并返回环内元素个数的板子 : </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">h</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">auto</span> check_c = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> cnt) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    h[u] = cnt;</span><br><span class="line">    vis[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v, cnt + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (vis[v] == <span class="number">1</span>) &#123;</span><br><span class="line">            ++flag, siz.<span class="built_in">push_back</span>(h[u] - h[v] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[u] = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用并查集寻找环上两个断点 : （适用于无向图断环）</p>
<blockquote>
<p>每次输入点的时候将点并入一个并查集，如果输入的点已经在一个集合里面，说明这两个点连接后会形成环，直接记录下两个断点的位置</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>点击跳转 : 例题1 : </p>
</blockquote>
</li>
<li><a href="https://www.luogu.com.cn/problem/P2607">骑士</a><br>前置知识 ： 树形dp， P1352没有上司的舞会， 对于颗树，从根开始跑一遍dp， 使用dp【x】【1 / 0 】， x表示当前的节点，1或者0表示当前节点取或者不取，使用回溯转移，从叶子到节点更新答案， 其中，对于每一个节点u， 用v表示他的子节点， 有： <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">dp[u][<span class="number">1</span>] = ∑dp[v][<span class="number">0</span>] </span><br><span class="line">dp[u][<span class="number">0</span>] = ∑<span class="built_in">max</span>(dp[v][<span class="number">1</span>], dp[v][<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
将所有节点更新完得到答案， 对于这道骑士， 就是在原题的基础上增加了一条边，使得原来的树里面出现了环， 变成一个基环森林， solution : </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    vector&lt;vector&lt;i64&gt;&gt; <span class="built_in">dp</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;i64&gt; (<span class="number">3</span>));</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">val</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> mark;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u;</span><br><span class="line">        cin &gt;&gt; val[i] &gt;&gt; u;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(i); </span><br><span class="line">        fa[i] = u;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dp[u][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[u][<span class="number">1</span>] = val[u];</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == mark) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            dp[u][<span class="number">1</span>] += dp[v][<span class="number">0</span>];</span><br><span class="line">            dp[u][<span class="number">0</span>] += <span class="built_in">max</span>(dp[v][<span class="number">1</span>], dp[v][<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> find = [&amp;](<span class="keyword">auto</span> self, i64 u) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        vis[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> now = fa[u];</span><br><span class="line">        <span class="keyword">if</span> (vis[now]) <span class="keyword">return</span> now;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">self</span>(self, now);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    i64 ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        mark = <span class="built_in">find</span>(find, i);</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, mark);</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[mark][<span class="number">0</span>]);</span><br><span class="line">        mark = fa[mark];</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, mark);</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[mark][<span class="number">0</span>]);</span><br><span class="line">        ans += res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例题2 ： </p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P8943">追逐游戏</a><br>本题如果使用上面的思路，很难实现，不如采用先找出环，之后对于环上每一个点处理，使其满足条件 : <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> dfncnt = <span class="number">0</span>, siz = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; cycle;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs1 = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> Fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dfn[u] = ++dfncnt;</span><br><span class="line">        f[u] = Fa;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == Fa) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">                <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dfn[v] &gt; dfn[u]) &#123;</span><br><span class="line">                <span class="keyword">while</span> (v != u) &#123;</span><br><span class="line">                    cycle.<span class="built_in">push_back</span>(v);</span><br><span class="line">                    siz++;</span><br><span class="line">                    v = f[v];</span><br><span class="line">                &#125;</span><br><span class="line">                cycle.<span class="built_in">push_back</span>(v);</span><br><span class="line">                siz++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dep</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">root</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs2 = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa, <span class="type">int</span> Root) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dep[u] = dep[fa] + <span class="number">1</span>;</span><br><span class="line">        root[u] = Root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == fa || dfn[v]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, v, u, Root);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">dfs1</span>(dfs1, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) dfn[i] = <span class="number">0</span>; <span class="comment">// 转vis</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : cycle) &#123;</span><br><span class="line">        <span class="comment">//cerr &lt;&lt; x &lt;&lt; &#x27; &#x27;;</span></span><br><span class="line">        dfn[x] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; siz; i++) &#123;</span><br><span class="line">        <span class="built_in">dfs2</span>(dfs2, cycle[i], <span class="number">0</span>, cycle[i]);</span><br><span class="line">        dep[cycle[i]] = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (siz == <span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;Deception\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (dfn[a]) cout &lt;&lt; <span class="string">&quot;Survive\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> ned1 = dep[a] - <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> ned2 = <span class="built_in">min</span>(<span class="built_in">abs</span>(dep[root[b]] - dep[root[a]]);</span><br><span class="line">            <span class="type">int</span> siz - <span class="built_in">abs</span>(dep[root[b]] - dep[root[a]]));</span><br><span class="line">            <span class="keyword">if</span> (!dfn[b]) ned2 += dep[b] - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (ned1 &lt; ned2) &#123;</span><br><span class="line">                <span class="comment">//cerr &lt;&lt; ned1 &lt;&lt; ned2 &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Survive\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Deception\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>算法</category>
        <category>图论</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>扫描线</title>
    <url>/2025/02/04/%E6%89%AB%E6%8F%8F%E7%BA%BF/</url>
    <content><![CDATA[<ul>
<li>矩形面积并</li>
</ul>
<p>将矩形划分为每个 行块 ， 一一统计出边和入边， 计算每条边的贡献， 以每条边计算 S<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Scanline</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, num;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; tag;</span><br><span class="line">    vector&lt;i64&gt; len, xx;</span><br><span class="line">    i64 S;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Line</span> &#123;</span><br><span class="line">        i64 y, lx, rx;</span><br><span class="line">        <span class="type">int</span> flag; <span class="comment">// 1是入边，-1是出边</span></span><br><span class="line">        <span class="built_in">Line</span>() &#123;&#125;</span><br><span class="line">        <span class="built_in">Line</span>(i64 y, i64 lx, i64 rx, <span class="type">int</span> flag) </span><br><span class="line">            : <span class="built_in">y</span>(y), <span class="built_in">lx</span>(lx), <span class="built_in">rx</span>(rx), <span class="built_in">flag</span>(flag) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Line&amp; other) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;y &lt; other.y; &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Line&gt; line;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Scanline</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">num</span>(<span class="number">0</span>), <span class="built_in">S</span>(<span class="number">0</span>) &#123;</span><br><span class="line">        tag.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        len.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(i64 x1, i64 x2, i64 y1, i64 y2)</span> </span>&#123;</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y1, x1, x2, <span class="number">1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x1);</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y2, x1, x2, <span class="number">-1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            len[p] = xx[t] - xx[s]; </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s + <span class="number">1</span> == t) &#123;</span><br><span class="line">            len[p] = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            len[p] = len[p * <span class="number">2</span>] + len[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> flag, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            tag[p] += flag;</span><br><span class="line">            <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; m) <span class="built_in">update</span>(l, r, flag, s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">update</span>(l, r, flag, m, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">sort</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(line.<span class="built_in">begin</span>(), line.<span class="built_in">end</span>());</span><br><span class="line">        num = <span class="built_in">unique</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>()) - xx.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; line.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                S += len[<span class="number">1</span>] * (line[i].y - line[i - <span class="number">1</span>].y);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> l = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].lx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="type">int</span> r = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].rx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="built_in">update</span>(l, r, line[i].flag, <span class="number">0</span>, num - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">i64 <span class="title">get_area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> S;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p><strong>注意</strong>： 该线段树使用的是左闭右开区间。</p>
<ul>
<li>矩形周长并：<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Scanline</span> &#123; <span class="comment">//周长并</span></span><br><span class="line">    <span class="type">int</span> n, num;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; tag;</span><br><span class="line">    vector&lt;i64&gt; len, xx;</span><br><span class="line">    i64 C;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Line</span> &#123;</span><br><span class="line">        i64 y, lx, rx;</span><br><span class="line">        <span class="type">int</span> flag; <span class="comment">// 1是入边，-1是出边</span></span><br><span class="line">        <span class="built_in">Line</span>() &#123;&#125;</span><br><span class="line">        <span class="built_in">Line</span>(i64 y, i64 lx, i64 rx, <span class="type">int</span> flag) </span><br><span class="line">            : <span class="built_in">y</span>(y), <span class="built_in">lx</span>(lx), <span class="built_in">rx</span>(rx), <span class="built_in">flag</span>(flag) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Line&amp; other) <span class="type">const</span> &#123; </span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;y != other.y) <span class="keyword">return</span> <span class="keyword">this</span>-&gt;y &lt; other.y;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">this</span>-&gt;flag &gt; other.flag; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Line&gt; line;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Scanline</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">num</span>(<span class="number">0</span>), <span class="built_in">C</span>(<span class="number">0</span>) &#123;</span><br><span class="line">        tag.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        len.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(i64 x1, i64 x2, i64 y1, i64 y2)</span> </span>&#123;</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y1, x1, x2, <span class="number">1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x1);</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y2, x1, x2, <span class="number">-1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            len[p] = xx[t] - xx[s] ;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            len[p] = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            len[p] = len[p * <span class="number">2</span>] + len[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> flag, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            tag[p] += flag;</span><br><span class="line">            <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; m) <span class="built_in">update</span>(l, r, flag, s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">update</span>(l, r, flag, m, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">sort</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(line.<span class="built_in">begin</span>(), line.<span class="built_in">end</span>());</span><br><span class="line">        num = <span class="built_in">unique</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>()) - xx.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="type">int</span> pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; line.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            pre = len[<span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> l = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].lx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="type">int</span> r = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].rx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="built_in">update</span>(l, r, line[i].flag, <span class="number">0</span>, num - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            C += <span class="built_in">abs</span>(len[<span class="number">1</span>] - pre);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">i64 <span class="title">getlen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>算法</category>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Java包装类</title>
    <url>/2025/01/27/%E6%95%B0%E5%AD%97%E5%A4%84%E7%90%86%E7%B1%BB/</url>
    <content><![CDATA[<blockquote>
<p>此处主要记录使用DecimalFormat格式化浮点数的方法</p>
</blockquote>
<p>在Java中，默认格式化形式是:</p>
<ul>
<li>如果数字大于0.001同时小于10000000，则使用常规小数表示</li>
<li>如果不在这个范围内是用科学计数法</li>
</ul>
<p>使用DecimalFormat可以格式化浮点数</p>
<h2 id="1-常见用法"><a href="#1-常见用法" class="headerlink" title="1. 常见用法"></a><strong>1. 常见用法</strong></h2><h3 id="1-1-控制小数位数"><a href="#1-1-控制小数位数" class="headerlink" title="1.1 控制小数位数"></a><strong>1.1 控制小数位数</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">DecimalFormat</span> <span class="variable">df1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.00&quot;</span>); <span class="comment">// 保留2位小数（不足补0）</span></span><br><span class="line">            <span class="type">DecimalFormat</span> <span class="variable">df2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##&quot;</span>); <span class="comment">// 保留最多2位小数（不足不补0）</span></span><br><span class="line">            System.out.println(df1.format(<span class="number">3.1</span>));  <span class="comment">// 输出: 3.10   </span></span><br><span class="line">            System.out.println(df2.format(<span class="number">3.1</span>));  <span class="comment">// 输出: 3.1</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-2-千位分隔符"><a href="#1-2-千位分隔符" class="headerlink" title="1.2 千位分隔符"></a><strong>1.2 千位分隔符</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#,###.00&quot;</span>); </span><br><span class="line">System.out.println(df.format(<span class="number">1234567.89</span>));  <span class="comment">// 输出: 1,234,567.89 </span></span><br><span class="line">System.out.println(df.format(<span class="number">5.2</span>));         <span class="comment">// 输出: 5.20`</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>#,###.00</code>：<strong><code>#</code> 表示可选位，<code>,</code> 表示千位分隔符</strong></li>
<li><strong>若不足两位小数，自动补 0</strong></li>
</ul>
<hr>
<h3 id="1-3-前导零"><a href="#1-3-前导零" class="headerlink" title="1.3 前导零"></a><strong>1.3 前导零</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;00000.00&quot;</span>); </span><br><span class="line">System.out.println(df.format(<span class="number">7.2</span>));  <span class="comment">// 输出: 00007.20`</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>00000.00</code>：<strong>整数部分至少 5 位，不足补 0，小数部分固定 2 位</strong></li>
</ul>
<hr>
<h3 id="1-4-百分比"><a href="#1-4-百分比" class="headerlink" title="1.4 百分比"></a><strong>1.4 百分比</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##%&quot;</span>);</span><br><span class="line">System.out.println(df.format(<span class="number">0.2567</span>));  <span class="comment">// 输出: 25.67%`</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>#%</code>：<strong>自动 ×100，并加 <code>%</code></strong></li>
</ul>
<hr>
<h3 id="1-5-自定义前后缀"><a href="#1-5-自定义前后缀" class="headerlink" title="1.5 自定义前后缀"></a><strong>1.5 自定义前后缀</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;￥#,###.00元&quot;</span>);</span><br><span class="line">System.out.println(df.format(<span class="number">12345.6</span>));  <span class="comment">// 输出: ￥12,345.60元`</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>前后缀</strong>（如 <code>￥</code>、<code>元</code>）会直接加在格式化结果中</li>
</ul>
<hr>
<h3 id="1-6-解析字符串为数字"><a href="#1-6-解析字符串为数字" class="headerlink" title="1.6 解析字符串为数字"></a><strong>1.6 解析字符串为数字</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat; </span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123; </span><br><span class="line">        <span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#,###.00&quot;</span>);</span><br><span class="line">    <span class="type">Number</span> <span class="variable">num</span> <span class="operator">=</span> df.parse(<span class="string">&quot;1,234,567.89&quot;</span>);         </span><br><span class="line">        System.out.println(num.doubleValue()); <span class="comment">// 输出: 1234567.89     </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>parse()</code> 方法能将格式化字符串转换回 <code>Number</code></strong></li>
</ul>
<hr>
<h2 id="2-DecimalFormat-vs-String-format-vs-BigDecimal"><a href="#2-DecimalFormat-vs-String-format-vs-BigDecimal" class="headerlink" title="2. DecimalFormat vs String.format() vs BigDecimal"></a><strong>2. <code>DecimalFormat</code> vs <code>String.format()</code> vs <code>BigDecimal</code></strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>适用场景</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DecimalFormat</code></td>
<td><strong>复杂格式</strong>（前导零、千分位、前后缀）</td>
<td><code>new DecimalFormat(&quot;#,###.00&quot;).format(1234567.89)</code></td>
</tr>
<tr>
<td><code>String.format()</code></td>
<td><strong>简单格式</strong>（小数点、千分位）</td>
<td><code>String.format(&quot;%,.2f&quot;, 1234567.89)</code></td>
</tr>
<tr>
<td><code>BigDecimal</code></td>
<td><strong>高精度计算</strong>（金融/科学计算）</td>
<td><code>new BigDecimal(&quot;1234.56789&quot;).setScale(2, RoundingMode.HALF_UP)</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="通过特殊方法"><a href="#通过特殊方法" class="headerlink" title="通过特殊方法"></a>通过特殊方法</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">ft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>();  </span><br><span class="line">ft.setGroupingSize(<span class="number">2</span>); <span class="comment">//将数字分组为二  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">out</span> <span class="operator">=</span> ft.format(<span class="number">12335.889</span>);  </span><br><span class="line">System.out.println(out);  </span><br><span class="line">ft.setGroupingUsed(<span class="literal">false</span>);  <span class="comment">//设置不可以分组</span></span><br><span class="line">out = ft.format(<span class="number">12335.889</span>);  </span><br><span class="line">System.out.println(out);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="数学运算Math类"><a href="#数学运算Math类" class="headerlink" title="数学运算Math类"></a>数学运算Math类</h2><p>Math类可以实现很多数学运算</p>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><ul>
<li>Math.PI \（pai\）</li>
<li>Math.E</li>
</ul>
<h2 id="常用数学方法"><a href="#常用数学方法" class="headerlink" title="常用数学方法:"></a>常用数学方法:</h2><ul>
<li>double sin(double a)</li>
<li>var cos</li>
<li>tan</li>
<li>asin</li>
<li>acos</li>
<li>atan</li>
<li>toRadians() //将角度转换为弧度</li>
<li>toDegrees() // 将弧度转化为角度</li>
<li>exp() //e的几次方</li>
<li>pow(double a, double b): 取a的b次方</li>
<li>sqrt</li>
<li>cbrt //立方根</li>
<li>log(double a) // lna</li>
<li>log10(double a)</li>
</ul>
<p>都是传入double返回double，所以精度不准确</p>
<h3 id="取整函数用法"><a href="#取整函数用法" class="headerlink" title="取整函数用法:"></a>取整函数用法:</h3><ul>
<li>ceil(double a) : 向上取整</li>
<li>floor</li>
<li>rint(double): 返回和参数最近的整数，如果距离一样则取得偶数</li>
</ul>
<h3 id="最大值最小值绝对值"><a href="#最大值最小值绝对值" class="headerlink" title="最大值最小值绝对值"></a>最大值最小值绝对值</h3><blockquote>
<p>和cpp一样也重载了</p>
</blockquote>
<ul>
<li>max</li>
<li>min</li>
<li>abs</li>
</ul>
<h3 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.Random()</span><br></pre></td></tr></table></figure>
<ul>
<li>默认生产的是 0  - 1 之间的任何double数字，但是稍加处理就可以变成产生任意范围的数字:<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">m + (<span class="type">int</span>)(Math.Random() * n) <span class="comment">// 返回[m, m + n)之间的数字</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>除了Math的Random类，Java有一个Random专门来返回随机数字:</p>
</blockquote>
<p>Random类有以下常见用法：</p>
<ul>
<li>nextInt() 返回随机整数</li>
<li>nextInt(int n) 返回[0, n)的数字</li>
<li>nextLong</li>
<li>nextdouble</li>
</ul>
<h2 id="大数字运算BigInteger"><a href="#大数字运算BigInteger" class="headerlink" title="大数字运算BigInteger"></a>大数字运算BigInteger</h2><p>构造函数：<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">BigInteger</span><span class="params">(String val)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用构造函数:</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;123&quot;</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>注意\” \” 不可以省略</p>
<blockquote>
<p>封装的方法：</p>
</blockquote>
</li>
<li><p>public BigInteger add(BigInteger val) // +，下列省略所有参数</p>
</li>
<li>subtract(BI val) // -</li>
<li>multiply(Bi val) // *</li>
<li>divide(Bi val) // 除法</li>
<li>remainder(Bi val) // 取余</li>
<li>pow(int exponent) // 对它取exponent次方</li>
<li>negate() : 取相反数</li>
<li>shiftLeft(int n): 将数字左移n位，如果n是负数做右移操作</li>
<li>shiftRight(int n)</li>
<li>and()</li>
<li>or()</li>
<li>compareTo() // 大于返回1， 小于返回-1</li>
<li>equals() 比较</li>
<li>min() 最小值</li>
<li>max()取最大值<br>j 7</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式</title>
    <url>/2025/03/03/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<blockquote>
<p>正则表达式用于对字符串的匹配判断中</p>
</blockquote>
<hr>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符:"></a>元字符:</h2><div class="table-container">
<table>
<thead>
<tr>
<th>元字符</th>
<th>正则表达式中的写法</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>.</td>
<td>代表任意一个字符</td>
</tr>
<tr>
<td>\d</td>
<td>\\d</td>
<td>代表0 - 9任意一个数字字符</td>
</tr>
<tr>
<td>\D</td>
<td>\\D</td>
<td>代表任意一个非数字字符</td>
</tr>
<tr>
<td>\s</td>
<td>\\s</td>
<td>代表空白字符， 如’\n’ , ‘\t’</td>
</tr>
<tr>
<td>\S</td>
<td>\S</td>
<td>代表分空白字符</td>
</tr>
<tr>
<td>\w</td>
<td>\w</td>
<td>代表可用作标识符的字符， 但不包括 “$”</td>
</tr>
<tr>
<td>\W</td>
<td>\W</td>
<td>代表不可以用作标识符的字符</td>
</tr>
<tr>
<td>\p{Lower}</td>
<td>\p{Lower}</td>
<td>代表小写字母 a ~ z</td>
</tr>
<tr>
<td>\p{Upper}</td>
<td>\p{Upper}</td>
<td>代表大写字母 A ~ Z</td>
</tr>
<tr>
<td>\p{ASCII}</td>
<td>\p{ASCII}</td>
<td>ASCII 字符</td>
</tr>
<tr>
<td>\p{Alpha}</td>
<td>\p{Alpha}</td>
<td>字母字符</td>
</tr>
<tr>
<td>\p{Digit}</td>
<td>\p{Digit}</td>
<td>十进制数字</td>
</tr>
<tr>
<td>\p{Alnum}</td>
<td>\p{Alnum}</td>
<td>数字或字母字符</td>
</tr>
<tr>
<td>\p{Punct}</td>
<td>\p{Punct}</td>
<td>标点符号 : “!@#$%^&amp;、*()[]“等等</td>
</tr>
<tr>
<td>\p{Graph}</td>
<td>\p{Graph}</td>
<td>可见字符: [\p{Alnum}\p{Punct}]</td>
</tr>
<tr>
<td>\p{Print}</td>
<td>\p{Print}</td>
<td>可打印字符: [\p{Graph}\x20]</td>
</tr>
<tr>
<td>\p{Blank}</td>
<td>\p{Blank}</td>
<td>空格或者制表符: [\t]</td>
</tr>
<tr>
<td>\p{Cntrl}</td>
<td>\p{Cntrl}</td>
<td>控制字符: [\x00-\x1F\x7F]</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>在正则表达式中 “ . “ 代表任意一个字符，所以在使用时候如果要判断有普通意义的”.”需要加斜杆（和Latex特殊字符控制一样）</p>
</blockquote>
<ul>
<li>例子：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\d+&quot;</span>; <span class="comment">// 匹配一个或多个数字</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;12345&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;完全匹配!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;不匹配!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>事实上，String类里面封装了Pattern类，也可以通过一下方式来调用Pattern里面的匹配：<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">input.matches(regex) <span class="comment">//其内部调用了 `Pattern.matches(regex, this)`</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="元字符与基本符号（-important）"><a href="#元字符与基本符号（-important）" class="headerlink" title="元字符与基本符号（!important）"></a>元字符与基本符号（!important）</h3><ul>
<li><strong>.</strong><br>  匹配除换行符外的任意单个字符。例如：<code>a.c</code> 可以匹配 “abc”、”a-c” 等。</li>
</ul>
<hr>
<pre><code>匹配前面的元素 0 次或多次。例如：`ab*c` 可以匹配 &quot;ac&quot;、&quot;abc&quot;、&quot;abbc&quot; 等。
</code></pre><ul>
<li><p><strong>+</strong><br>  匹配前面的元素 1 次或多次。例如：<code>ab+c</code> 不能匹配 “ac”，但可以匹配 “abc”、”abbc” 等。</p>
</li>
<li><p><strong>?</strong><br>  匹配前面的元素 0 次或 1 次。例如：<code>colou?r</code> 可以匹配 “color” 和 “colour”。</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;abcdd?e&quot;</span>; <span class="comment">// 匹配一个或零个数字  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;abcde&quot;</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);  </span><br><span class="line"><span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> (matcher.matches()) &#123;  </span><br><span class="line">    System.out.println(<span class="string">&quot;完全匹配!&quot;</span>);  </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">    System.out.println(<span class="string">&quot;不匹配!&quot;</span>);  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// 结果是匹配，因为该位置的d没有出现（0次），其他基本符号用法同理</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>{}</strong><br>  限定匹配次数：</p>
<ul>
<li><code>&#123;n&#125;</code>：匹配恰好 n 次</li>
<li><code>&#123;n,&#125;</code>：至少 n 次</li>
<li><code>&#123;n,m&#125;</code>：至少 n 次，最多 m 次<br>  例如：<code>\\d&#123;3&#125;</code> 匹配连续3个数字。</li>
</ul>
</li>
<li><p><strong>[]</strong><br>  定义字符集合，例如：<code>[abc]</code> 匹配 ‘a’、’b’ 或 ‘c’；<code>[a-z]</code> 匹配所有小写字母。</p>
</li>
<li><p><strong>^</strong> 和 <strong>$</strong><br>  分别表示字符串的开始和结束。例如：<code>^Hello</code> 表示字符串必须以 “Hello” 开始，<code>world$</code> 表示必须以 “world” 结尾。</p>
</li>
<li><p><strong>|</strong><br>  表示“或”的关系。例如：<code>cat|dog</code> 表示匹配 “cat” 或 “dog”</p>
</li>
</ul>
<hr>
<h2 id="多个元字符代表一个字符-字符集合"><a href="#多个元字符代表一个字符-字符集合" class="headerlink" title="多个元字符代表一个字符(字符集合)"></a>多个元字符代表一个字符(字符集合)</h2><p>在正则表达式中可以使用方括号括起若干字符表示一个元字符，该字符可以表示元字符中的任意一个字符。例如: reg = “[abc]4”, 这样a4, b4, c4都是和正则表达式匹配的字符串。方括号还可以为其他格式。如: </p>
<ul>
<li>[^456]除了456之外的任何字符</li>
<li>[a-r]代表a - r中的任何一个字符</li>
<li>[a-zA-Z]: 代表任何一个英文字母</li>
<li>[a-e[g-z]]: 代表a - e <strong>并</strong> g - z 间的字母</li>
<li>[a-o&amp;&amp;[def]]: 代表字母def， 并运算</li>
<li>[a-d&amp;&amp;[^bc]]: 代表a, d(差运算)</li>
</ul>
<hr>
<h2 id="实际例子"><a href="#实际例子" class="headerlink" title="实际例子"></a>实际例子</h2><h4 id="一-判断字符串是否是邮箱："><a href="#一-判断字符串是否是邮箱：" class="headerlink" title="一. 判断字符串是否是邮箱："></a>一. 判断字符串是否是邮箱：</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// 验证字符串是否是一个邮箱地址  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\w+@\\w+(\\.\\w&#123;2,3&#125;)*\\.\\w&#123;2,3&#125;&quot;</span>;  </span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;511017802@qq.com&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);  </span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine(); <span class="comment">// s = input;  </span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;完全匹配!&quot;</span>);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;不匹配!&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        in.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="二-判断字符串是否是电话号码"><a href="#二-判断字符串是否是电话号码" class="headerlink" title="二. 判断字符串是否是电话号码"></a>二. 判断字符串是否是电话号码</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// 验证字符串是否是一个邮箱地址  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;^(\\+?86)?1[3-9]\\d&#123;9&#125;$&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">int</span> n;  </span><br><span class="line">        n = in.nextInt();  </span><br><span class="line">        in.nextLine();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span> (n-- != <span class="number">0</span>) &#123;  </span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine();  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;是中国大陆电话号码&quot;</span>);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;乱搞&quot;</span>);  </span><br><span class="line">            &#125;      </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="三：判断字符串是否是网址"><a href="#三：判断字符串是否是网址" class="headerlink" title="三：判断字符串是否是网址:"></a>三：判断字符串是否是网址:</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// 验证字符串是否是一个邮箱地址  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;^(https|http)*w&#123;3&#125;\\.\\w+\\.\\w&#123;2,3&#125;&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;www.dreamstartooo.cn&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">            System.out.println(s + <span class="string">&quot;是一个好网站&quot;</span>);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;乱搞&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;&#125;  </span><br><span class="line"><span class="comment">//输出 www.dreamstartooo.cn 是一个好网站!</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>欧拉回路</title>
    <url>/2024/07/22/%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF/</url>
    <content><![CDATA[<p>欧拉回路是这样一个东西（个人理解） ： 从图上某个点出发，每条边不能重复经过，然后从这个点开始把所有的点和边走一遍（同时满足每条边不能重复）后回到这个点。</p>
<p>怎么求？ 一种办法是Fluery , 即每次只找不是桥的边bfs， 当每个点和边都进队后再处理桥， 如果图不连通或者经过桥之后无法遍历整个图，则没有欧拉回路，否则就找到了欧拉回路， 由于这样实现需要先tarjan缩强连通分量后记录桥的位置，之后再每个点遍历，需要时间复杂度大约是O(n ^ 2), 太不牛，我们换下一个算法</p>
<blockquote>
<p><strong>Hierholzer</strong>算法</p>
</blockquote>
<p>（不是这什么鬼名字也太长……）<br>我直接把函数名字写成dfs了，板子如下（自己实现的用起来自己舒服）<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = now[u]; i &lt; e[u].<span class="built_in">size</span>(); i = now[u]) &#123;</span><br><span class="line">        now[u]++;</span><br><span class="line">        <span class="built_in">self</span>(self, e[u][i]);</span><br><span class="line">    &#125;</span><br><span class="line">    s.<span class="built_in">push</span>(u);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>首先说一下有向图欧拉通路的判定 ： （需要满足以下2 之一）</p>
<ul>
<li>所有顶点出度等于入度</li>
<li>有且只有一个顶点出度等于入度加一，同时有另外一个顶点入度等于出度加一（可以想象成每个顶点2个2个删边之后会剩下一条，而这条路如果一开始就走也可以形成欧拉回路）</li>
</ul>
<p>接下来解释一下上面实现 ：<br>    now数组记录经过当前顶点次数（每次走过后让路径穿过这个点， 之后继续dfs下一个点），回来的时候记录，由于是逆序的，所以开了个stack</p>
<p>next is the code of P7771 [洛谷P7771] : <a href="https://www.luogu.com.cn/problem/P7771">https://www.luogu.com.cn/problem/P7771</a></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">in</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">out</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line"></span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        in[v]++;</span><br><span class="line">        out[u]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> vis1 = <span class="number">0</span>, vis2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i] + <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis1) vis1 = i;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i] - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis2) vis2 = i;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = now[u]; i &lt; e[u].<span class="built_in">size</span>(); i = now[u]) &#123;</span><br><span class="line">            now[u]++;</span><br><span class="line">            <span class="built_in">self</span>(self, e[u][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        s.<span class="built_in">push</span>(u);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">sort</span>(e[i].<span class="built_in">begin</span>(), e[i].<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (vis2) <span class="built_in">dfs</span>(dfs, vis2);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; s.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>应用例子:<br>洛谷P1341 字符串匹配，以前cf有一道传送门的题，好像是某场div3 E题也是一模一样：<br>思路，想要拿到一个首尾相链接的串， 则直接跑一边欧拉回路（就好像每个字符串就是一个节点，每个相同的字符就是一个传送门，那么对于相同的字符就建边链接，同时统计每个点的度数，由于欧拉通路判定需要满足以下两个条件之一 : </p>
<ul>
<li>所有点都是偶数度</li>
<li>有奇数度顶点且奇数度顶点有且只有2个<br>在接下来判定时就可以直接使用记录的度数。<br>之后就跑一遍欧拉回路，记录路径， 输出路径， 一遍AC!!!<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> start = inf;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(<span class="number">59</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">59</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">du</span><span class="params">(<span class="number">59</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> u = s[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        <span class="type">int</span> v = s[<span class="number">1</span>] - <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        start = <span class="built_in">min</span>(&#123;start, u, v&#125;);</span><br><span class="line">        e[u][v] = e[v][u] = <span class="number">1</span>;</span><br><span class="line">        du[u]++;</span><br><span class="line">        du[v]++; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">58</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (du[i] &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pos == <span class="number">-1</span>) pos = i;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">58</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (e[u][i]) &#123;</span><br><span class="line">                e[u][i] = e[i][u] = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">self</span>(self, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        s.<span class="built_in">push</span>(u);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cerr &lt;&lt; (char)(start + &#x27;A&#x27;)&lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (cnt == <span class="number">0</span>) <span class="built_in">dfs</span>(dfs, start);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cnt == <span class="number">2</span>) <span class="built_in">dfs</span>(dfs, pos);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No Solution\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">char</span> c = (<span class="type">char</span>)(s.<span class="built_in">top</span>() + <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">        cout &lt;&lt; c;</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>算法</category>
        <category>图论</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>线段树</title>
    <url>/2024/12/26/%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
    <content><![CDATA[<ul>
<li>对于一个数组，如果想要动态的管理它，就使用线段树把</li>
</ul>
<h2 id="区间加-amp-Sum"><a href="#区间加-amp-Sum" class="headerlink" title="区间加 &amp; Sum"></a>区间加 &amp; Sum</h2><blockquote>
<p>区间修改， 区间加和求和</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">    vector&lt;T&gt; f;</span><br><span class="line">    vector&lt;T&gt; tag;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Segment</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Segment</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n) &#123; </span><br><span class="line">        f.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        tag.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, T c, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            f[p] += c * (t - s + <span class="number">1</span>);</span><br><span class="line">            tag[p] += c;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            <span class="built_in">pushdown</span>(s, t, p);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[p] = f[p * <span class="number">2</span>] + f[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        f[p * <span class="number">2</span>] += <span class="number">1LL</span> * (m - s + <span class="number">1</span>) * tag[p];</span><br><span class="line">        f[p * <span class="number">2</span> + <span class="number">1</span>] += <span class="number">1LL</span> * (t - m) * tag[p];</span><br><span class="line">        tag[p * <span class="number">2</span>] += tag[p];</span><br><span class="line">        tag[p * <span class="number">2</span> + <span class="number">1</span>] += tag[p];</span><br><span class="line">        tag[p] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[p];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            <span class="built_in">pushdown</span>(s, t, p);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(s, t, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, T c)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">update</span>(s, t, c, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>我赶时间版本：<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">    vector&lt;T&gt; f;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Segment</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Segment</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n) &#123; </span><br><span class="line">        f.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, T c, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t &amp;&amp; l == s) &#123;</span><br><span class="line">            f[p] = c;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[p];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(s, t, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, T c)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">update</span>(s, t, c, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>算法</category>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Java包装类</title>
    <url>/2025/01/27/%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<p>和cpp一样，不一样的是Java可以使用super.xxx去调用父类的构造函数和成员函数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;  </span><br><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">(Scanner sc)</span> &#123;  </span><br><span class="line">        <span class="type">var</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;11234&quot;</span>);  </span><br><span class="line">        <span class="type">var</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;3421&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        System.out.println(a.compareTo(b));  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Move</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> pos)</span> &#123;&#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in)) &#123;  </span><br><span class="line">            <span class="comment">//int t = scanner.nextInt();  </span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">1</span>;  </span><br><span class="line">            <span class="keyword">while</span> (t-- &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">                solve(scanner);  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Test</span> &#123;             </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">()</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;T1&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;TT1&quot;</span>);  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;  <span class="number">3</span></span><br><span class="line">          </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">T2</span> <span class="keyword">extends</span> <span class="title class_">Test</span> &#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">T2</span><span class="params">()</span> &#123;  </span><br><span class="line">            <span class="built_in">super</span>();  </span><br><span class="line">            System.out.println(<span class="string">&quot;T2&quot;</span>);  </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="meta">@Override</span>  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">            <span class="built_in">super</span>.work();  </span><br><span class="line">            System.out.println(<span class="string">&quot;TT2&quot;</span>);  </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和cpp一样，在子类创建时自动调用父类无参构造函数，想调用带参数的必须使用super显示实例化</p>
<h2 id="Object-类"><a href="#Object-类" class="headerlink" title="Object 类"></a>Object 类</h2><blockquote>
<p>Object 类是Java所有类的父类，所有类都由它继承而来，所以可以省略externs Object,它包含了一系列方法</p>
</blockquote>
<ul>
<li>equals</li>
<li>toString</li>
<li>getClass()</li>
</ul>
<p>注意getClass,notify,notifyAll等都是final类型，不能重写</p>
<h2 id="类的类型转换"><a href="#类的类型转换" class="headerlink" title="类的类型转换"></a>类的类型转换</h2><p>和cpp一样，注意类向下要强制显式类型转换</p>
<h2 id="instanceof操作符号判断对象类型"><a href="#instanceof操作符号判断对象类型" class="headerlink" title="instanceof操作符号判断对象类型"></a>instanceof操作符号判断对象类型</h2><p>在程序执行向下转型时，如果父类对象不是子类的实例，就会发生ClassCastException异常， 所以在向下转型的时候要判断转型的是否是当前类的实例,用法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">myObject <span class="keyword">instanceof</span> ExampleClass</span><br></pre></td></tr></table></figure>
<ul>
<li>myObject 某个类的对象引用</li>
<li>ExampleClass， 某个类</li>
<li>返回值是Boolean, true说明myObject 是ec的实例，</li>
</ul>
<h2 id="抽象类和接口"><a href="#抽象类和接口" class="headerlink" title="抽象类和接口"></a>抽象类和接口</h2><h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p>语法:<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">testAbstract</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><p>接口是抽象类的延申，他说存粹的抽象类，接口中所有的方法都没有方法体</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">draw</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>interface关键字定义接口</li>
<li>注意所有的方法必须是public或者是abstract类型，即使不声明也是默认public</li>
<li>接口中定义的任何字段都是static和final的</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">VALUE</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 等同于 public static final int VALUE = 10;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">VALUE</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">// 这个并不是重写，而是定义了一个新的变量，隐藏了接口的 VALUE</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printValues</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;VALUE from MyClass: &quot;</span> + VALUE);</span><br><span class="line">        System.out.println(<span class="string">&quot;VALUE from Interface: &quot;</span> + MyInterface.VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">        obj.printValues();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="接口与继承"><a href="#接口与继承" class="headerlink" title="接口与继承"></a>接口与继承</h3><p>使用implements关键字可以调用接口<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> extern B implements 接口一， 二...</span><br></pre></td></tr></table></figure></p>
<p>继承是不允许多重继承的但是调用接口的时候可以调用多个，算是一种多种继承。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>comment</title>
    <url>/comment/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>shuoshuo</title>
    <url>/shuoshuo/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>about</title>
    <url>/about/index.html</url>
    <content><![CDATA[<hr>
<h3 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h3><ul>
<li>中国海洋大学本科生一枚。</li>
<li>本站诞生与某天心血来潮，用来分享学习中遇到的问题和算法题解总结。</li>
<li>请各路朋友多多指教 ！</li>
</ul>
<hr>
<h3 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h3><ul>
<li>微信 : a511017802</li>
<li>邮件 : 511017802@qq.com</li>
<li>博客 ：Tansuozhe1num.github.io</li>
</ul>
<hr>
]]></content>
  </entry>
  <entry>
    <title>文章分类</title>
    <url>/categories/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>tags</title>
    <url>/tags/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
