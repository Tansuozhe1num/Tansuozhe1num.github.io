<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>gdb</title>
      <link href="/2025/03/19/gdb/"/>
      <url>/2025/03/19/gdb/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç¼–è¯‘ç¨‹åºæ—¶æ·»åŠ è°ƒè¯•ä¿¡æ¯"><a href="#ç¼–è¯‘ç¨‹åºæ—¶æ·»åŠ è°ƒè¯•ä¿¡æ¯" class="headerlink" title="ç¼–è¯‘ç¨‹åºæ—¶æ·»åŠ è°ƒè¯•ä¿¡æ¯"></a>ç¼–è¯‘ç¨‹åºæ—¶æ·»åŠ è°ƒè¯•ä¿¡æ¯</h2><p>ä¸ºäº†è®© GDB èƒ½å¤Ÿè¯»å–æºç å¹¶å…³è”å˜é‡ä¿¡æ¯ï¼Œä½ å¿…é¡»åœ¨ç¼–è¯‘æ—¶åŠ å…¥è°ƒè¯•ç¬¦å·ã€‚<br>ä¾‹å¦‚ï¼Œå¯¹äº C ç¨‹åºï¼Œå¯ä»¥è¿™æ ·ç¼–è¯‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -o my_program my_program.c</span><br></pre></td></tr></table></figure><p>å¯¹äº C++ ç¨‹åºï¼Œåˆ™ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -g -o my_program my_program.cpp</span><br></pre></td></tr></table></figure><hr><h2 id="å¯åŠ¨-GDB"><a href="#å¯åŠ¨-GDB" class="headerlink" title="å¯åŠ¨ GDB"></a>å¯åŠ¨ GDB</h2><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ GDB è°ƒè¯•å™¨ï¼Œå¹¶åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdb my_program</span><br></pre></td></tr></table></figure><p>è¿›å…¥ GDB åï¼Œä¼šçœ‹åˆ°æç¤ºç¬¦ <code>(gdb)</code>ï¼Œè¿™æ—¶å°±å¯ä»¥å¼€å§‹è°ƒè¯•äº†ã€‚</p><hr><h2 id="å¸¸ç”¨-GDB-å‘½ä»¤"><a href="#å¸¸ç”¨-GDB-å‘½ä»¤" class="headerlink" title="å¸¸ç”¨ GDB å‘½ä»¤"></a>å¸¸ç”¨ GDB å‘½ä»¤</h2><h3 id="æŸ¥çœ‹æºç å’Œè®¾ç½®æ–­ç‚¹"><a href="#æŸ¥çœ‹æºç å’Œè®¾ç½®æ–­ç‚¹" class="headerlink" title="æŸ¥çœ‹æºç å’Œè®¾ç½®æ–­ç‚¹"></a>æŸ¥çœ‹æºç å’Œè®¾ç½®æ–­ç‚¹</h3><ul><li><strong>list (l)</strong><br>  æ˜¾ç¤ºæºç ï¼Œé»˜è®¤æ˜¾ç¤ºå½“å‰åœç•™ä½ç½®é™„è¿‘çš„ä»£ç ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) list</span><br></pre></td></tr></table></figure><ul><li><strong>break (b)</strong><br>  åœ¨æŒ‡å®šçš„å‡½æ•°æˆ–è¡Œè®¾ç½®æ–­ç‚¹ã€‚<br>  ç¤ºä¾‹ï¼šåœ¨ <code>main</code> å‡½æ•°å…¥å£è®¾ç½®æ–­ç‚¹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) break main</span><br></pre></td></tr></table></figure><p>æˆ–åœ¨å…·ä½“æ–‡ä»¶çš„æŸä¸€è¡Œè®¾ç½®æ–­ç‚¹ï¼š<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) break my_program.c:20</span><br></pre></td></tr></table></figure></p><h3 id="å¯åŠ¨å’Œæ§åˆ¶ç¨‹åºè¿è¡Œ"><a href="#å¯åŠ¨å’Œæ§åˆ¶ç¨‹åºè¿è¡Œ" class="headerlink" title="å¯åŠ¨å’Œæ§åˆ¶ç¨‹åºè¿è¡Œ"></a>å¯åŠ¨å’Œæ§åˆ¶ç¨‹åºè¿è¡Œ</h3><ul><li><strong>run (r)</strong><br>  å¯åŠ¨ç¨‹åºæ‰§è¡Œï¼Œå¯ä»¥é™„å¸¦å‘½ä»¤è¡Œå‚æ•°ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) run arg1 arg2</span><br></pre></td></tr></table></figure></li><li><strong>continue (c)</strong><br>  å½“ç¨‹åºåœ¨æ–­ç‚¹å¤„åœæ­¢åï¼Œç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹æˆ–ç¨‹åºç»“æŸã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) <span class="built_in">continue</span></span><br></pre></td></tr></table></figure></li><li><p><strong>step (s)</strong><br>  å•æ­¥æ‰§è¡Œä»£ç ï¼Œé‡åˆ°å‡½æ•°è°ƒç”¨æ—¶ä¼šè¿›å…¥è¯¥å‡½æ•°å†…éƒ¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) step</span><br></pre></td></tr></table></figure></li><li><p><strong>next (n)</strong><br>  å•æ­¥æ‰§è¡Œä»£ç ï¼Œä½†ä¸ä¼šè¿›å…¥å‡½æ•°å†…éƒ¨ï¼Œè€Œæ˜¯æ•´ä½“æ‰§è¡Œå®Œå½“å‰è¡Œçš„å‡½æ•°è°ƒç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) next</span><br></pre></td></tr></table></figure></li><li><p><strong>finish</strong><br>  æ‰§è¡Œå®Œå½“å‰å‡½æ•°ï¼Œè¿”å›åˆ°è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ï¼Œå¹¶æš‚åœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`(gdb) finish`</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å˜é‡å’Œè¡¨è¾¾å¼"><a href="#æŸ¥çœ‹å˜é‡å’Œè¡¨è¾¾å¼" class="headerlink" title="æŸ¥çœ‹å˜é‡å’Œè¡¨è¾¾å¼"></a>æŸ¥çœ‹å˜é‡å’Œè¡¨è¾¾å¼</h3></li><li><p><strong>print (p)</strong><br>  æ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) print x</span><br></pre></td></tr></table></figure><ul><li><strong>display</strong><br>  è®¾ç½®è¡¨è¾¾å¼ï¼Œä½¿å¾—æ¯æ¬¡ç¨‹åºæš‚åœæ—¶è‡ªåŠ¨æ˜¾ç¤ºå…¶å€¼ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) display x</span><br></pre></td></tr></table></figure></li><li><strong>info locals</strong><br>  æŸ¥çœ‹å½“å‰å‡½æ•°å†…æ‰€æœ‰å±€éƒ¨å˜é‡çš„å€¼ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info locals</span><br></pre></td></tr></table></figure></li></ul><h3 id="æŸ¥çœ‹è°ƒç”¨å †æ ˆ"><a href="#æŸ¥çœ‹è°ƒç”¨å †æ ˆ" class="headerlink" title="æŸ¥çœ‹è°ƒç”¨å †æ ˆ"></a>æŸ¥çœ‹è°ƒç”¨å †æ ˆ</h3><ul><li><strong>backtrace (bt)</strong><br>  æ˜¾ç¤ºå½“å‰çš„è°ƒç”¨å †æ ˆï¼Œæœ‰åŠ©äºè¿½è¸ªç¨‹åºæ˜¯å¦‚ä½•è¿›å…¥å½“å‰çŠ¶æ€çš„ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) backtrace</span><br></pre></td></tr></table></figure></li></ul><h3 id="è§‚å¯Ÿç‚¹å’Œæ¡ä»¶æ–­ç‚¹"><a href="#è§‚å¯Ÿç‚¹å’Œæ¡ä»¶æ–­ç‚¹" class="headerlink" title="è§‚å¯Ÿç‚¹å’Œæ¡ä»¶æ–­ç‚¹"></a>è§‚å¯Ÿç‚¹å’Œæ¡ä»¶æ–­ç‚¹</h3><ul><li><p><strong>watch</strong><br>  è®¾ç½®è§‚å¯Ÿç‚¹ï¼Œå½“æŸä¸ªå˜é‡æˆ–å†…å­˜ä½ç½®çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æš‚åœç¨‹åºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) watch x</span><br></pre></td></tr></table></figure></li><li><p><strong>rwatch</strong> å’Œ <strong>awatch</strong><br>  åˆ†åˆ«ç”¨äºåœ¨è¯»å–ï¼ˆrwatchï¼‰å’Œè¯»å†™ï¼ˆawatchï¼‰å˜é‡æ—¶è§¦å‘æš‚åœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) rwatch x (gdb) awatch x</span><br></pre></td></tr></table></figure></li><li><p><strong>æ¡ä»¶æ–­ç‚¹</strong><br>  ä»…åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰è§¦å‘æ–­ç‚¹ã€‚<br>  ä¾‹å¦‚ï¼Œåœ¨ <code>my_function.c</code> æ–‡ä»¶çš„ç¬¬ 50 è¡Œï¼Œå½“å˜é‡ <code>x</code> ç­‰äº 10 æ—¶æ‰åœä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) break my_function.c:50 if x == 10</span><br></pre></td></tr></table></figure></li></ul><h3 id="è¾…åŠ©å‘½ä»¤"><a href="#è¾…åŠ©å‘½ä»¤" class="headerlink" title="è¾…åŠ©å‘½ä»¤"></a>è¾…åŠ©å‘½ä»¤</h3><ul><li><strong>info breakpoints</strong><br>  æŸ¥çœ‹å½“å‰æ‰€æœ‰è®¾ç½®çš„æ–­ç‚¹ä¿¡æ¯ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info breakpoints</span><br></pre></td></tr></table></figure></li><li><strong>delete</strong><br>  åˆ é™¤æŒ‡å®šç¼–å·çš„æ–­ç‚¹ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) delete 1</span><br></pre></td></tr></table></figure></li><li><strong>set args</strong><br>  è®¾ç½®ç¨‹åºå¯åŠ¨æ—¶çš„å‘½ä»¤è¡Œå‚æ•°ï¼ˆåœ¨å¯åŠ¨ run å‰è®¾ç½®ï¼‰ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set args arg1 arg2</span><br></pre></td></tr></table></figure></li><li><strong>help</strong><br>  è·å–æŸä¸ªå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) help break</span><br></pre></td></tr></table></figure></li><li><strong>quit (q)</strong><br>  é€€å‡º GDBã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) quit</span><br></pre></td></tr></table></figure><h3 id="ğŸŒŸ-æ¨èï¼šåŠ ä¸ª-gdb-TUI-ç•Œé¢"><a href="#ğŸŒŸ-æ¨èï¼šåŠ ä¸ª-gdb-TUI-ç•Œé¢" class="headerlink" title="ğŸŒŸ æ¨èï¼šåŠ ä¸ª gdb TUI ç•Œé¢"></a>ğŸŒŸ <strong>æ¨èï¼šåŠ ä¸ª gdb TUI ç•Œé¢</strong></h3></li></ul><p>åœ¨ gdb é‡Œè¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) layout src</span><br></pre></td></tr></table></figure><p>å°±ä¼šè¿›å…¥ <strong>åˆ†å±æ¨¡å¼</strong>ï¼Œä¸Šé¢çœ‹ä»£ç ï¼Œä¸‹é¢è°ƒè¯•ï¼Œéå¸¸èˆ’æœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hutool</title>
      <link href="/2025/03/19/hutool/"/>
      <url>/2025/03/19/hutool/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ğŸ“šç®€ä»‹"><a href="#ğŸ“šç®€ä»‹" class="headerlink" title="ğŸ“šç®€ä»‹"></a>ğŸ“šç®€ä»‹</h2><p>Hutoolæ˜¯ä¸€ä¸ªå°è€Œå…¨çš„Javaå·¥å…·ç±»åº“ï¼Œé€šè¿‡é™æ€æ–¹æ³•å°è£…ï¼Œé™ä½ç›¸å…³APIçš„å­¦ä¹ æˆæœ¬ï¼Œæé«˜å·¥ä½œæ•ˆç‡ï¼Œä½¿Javaæ‹¥æœ‰å‡½æ•°å¼è¯­è¨€èˆ¬çš„ä¼˜é›…ï¼Œè®©Javaè¯­è¨€ä¹Ÿå¯ä»¥â€œç”œç”œçš„â€ã€‚</p><p>Hutoolä¸­çš„å·¥å…·æ–¹æ³•æ¥è‡ªæ¯ä¸ªç”¨æˆ·çš„ç²¾é›•ç»†ç¢ï¼Œå®ƒæ¶µç›–äº†Javaå¼€å‘åº•å±‚ä»£ç ä¸­çš„æ–¹æ–¹é¢é¢ï¼Œå®ƒæ—¢æ˜¯å¤§å‹é¡¹ç›®å¼€å‘ä¸­è§£å†³å°é—®é¢˜çš„åˆ©å™¨ï¼Œä¹Ÿæ˜¯å°å‹é¡¹ç›®ä¸­çš„æ•ˆç‡æ‹…å½“ï¼›</p><p>Hutoolæ˜¯é¡¹ç›®ä¸­â€œutilâ€åŒ…å‹å¥½çš„æ›¿ä»£ï¼Œå®ƒèŠ‚çœäº†å¼€å‘äººå‘˜å¯¹é¡¹ç›®ä¸­å…¬ç”¨ç±»å’Œå…¬ç”¨å·¥å…·æ–¹æ³•çš„å°è£…æ—¶é—´ï¼Œä½¿å¼€å‘ä¸“æ³¨äºä¸šåŠ¡ï¼ŒåŒæ—¶å¯ä»¥æœ€å¤§é™åº¦çš„é¿å…å°è£…ä¸å®Œå–„å¸¦æ¥çš„bugã€‚</p><h3 id="ğŸHutoolåç§°çš„ç”±æ¥"><a href="#ğŸHutoolåç§°çš„ç”±æ¥" class="headerlink" title="#ğŸHutoolåç§°çš„ç”±æ¥"></a><a href="https://doc.hutool.cn/pages/index/#%F0%9F%8E%81hutool%E5%90%8D%E7%A7%B0%E7%9A%84%E7%94%B1%E6%9D%A5">#</a>ğŸHutoolåç§°çš„ç”±æ¥</h3><p>Hutool = Hu + toolï¼Œæ˜¯åŸå…¬å¸é¡¹ç›®åº•å±‚ä»£ç å‰¥ç¦»åçš„å¼€æºåº“ï¼Œâ€œHuâ€æ˜¯å…¬å¸åç§°çš„è¡¨ç¤ºï¼Œtoolè¡¨ç¤ºå·¥å…·ã€‚Hutoolè°éŸ³â€œç³Šæ¶‚â€ï¼Œä¸€æ–¹é¢ç®€æ´æ˜“æ‡‚ï¼Œä¸€æ–¹é¢å¯“æ„â€œéš¾å¾—ç³Šæ¶‚â€ã€‚</p><h3 id="ğŸºHutoolå¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„codingæ–¹å¼"><a href="#ğŸºHutoolå¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„codingæ–¹å¼" class="headerlink" title="#ğŸºHutoolå¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„codingæ–¹å¼"></a><a href="https://doc.hutool.cn/pages/index/#%F0%9F%8D%BAhutool%E5%A6%82%E4%BD%95%E6%94%B9%E5%8F%98%E6%88%91%E4%BB%AC%E7%9A%84coding%E6%96%B9%E5%BC%8F">#</a>ğŸºHutoolå¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„codingæ–¹å¼</h3><p>Hutoolçš„ç›®æ ‡æ˜¯ä½¿ç”¨ä¸€ä¸ªå·¥å…·æ–¹æ³•ä»£æ›¿ä¸€æ®µå¤æ‚ä»£ç ï¼Œä»è€Œæœ€å¤§é™åº¦çš„é¿å…â€œå¤åˆ¶ç²˜è´´â€ä»£ç çš„é—®é¢˜ï¼Œå½»åº•æ”¹å˜æˆ‘ä»¬å†™ä»£ç çš„æ–¹å¼ã€‚</p><p>ä»¥è®¡ç®—MD5ä¸ºä¾‹ï¼š</p><ul><li>ğŸ‘´ã€ä»¥å‰ã€‘æ‰“å¼€æœç´¢å¼•æ“ -&gt; æœâ€œJava MD5åŠ å¯†â€ -&gt; æ‰“å¼€æŸç¯‡åšå®¢-&gt; å¤åˆ¶ç²˜è´´ -&gt; æ”¹æ”¹å¥½ç”¨</li><li>ğŸ‘¦ã€ç°åœ¨ã€‘å¼•å…¥Hutool -&gt; SecureUtil.md5()</li></ul><p>Hutoolçš„å­˜åœ¨å°±æ˜¯ä¸ºäº†å‡å°‘ä»£ç æœç´¢æˆæœ¬ï¼Œé¿å…ç½‘ç»œä¸Šå‚å·®ä¸é½çš„ä»£ç å‡ºç°å¯¼è‡´çš„bugã€‚</p><hr><h2 id="ğŸ› ï¸åŒ…å«ç»„ä»¶"><a href="#ğŸ› ï¸åŒ…å«ç»„ä»¶" class="headerlink" title="#ğŸ› ï¸åŒ…å«ç»„ä»¶"></a><a href="https://doc.hutool.cn/pages/index/#%F0%9F%9B%A0%EF%B8%8F%E5%8C%85%E5%90%AB%E7%BB%84%E4%BB%B6">#</a>ğŸ› ï¸åŒ…å«ç»„ä»¶</h2><p>ä¸€ä¸ªJavaåŸºç¡€å·¥å…·ç±»ï¼Œå¯¹æ–‡ä»¶ã€æµã€åŠ å¯†è§£å¯†ã€è½¬ç ã€æ­£åˆ™ã€çº¿ç¨‹ã€XMLç­‰JDKæ–¹æ³•è¿›è¡Œå°è£…ï¼Œç»„æˆå„ç§Utilå·¥å…·ç±»ï¼ŒåŒæ—¶æä¾›ä»¥ä¸‹ç»„ä»¶ï¼š</p><div class="table-container"><table><thead><tr><th>æ¨¡å—</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>hutool-aop</td><td>JDKåŠ¨æ€ä»£ç†å°è£…ï¼Œæä¾›éIOCä¸‹çš„åˆ‡é¢æ”¯æŒ</td></tr><tr><td>hutool-bloomFilter</td><td>å¸ƒéš†è¿‡æ»¤ï¼Œæä¾›ä¸€äº›Hashç®—æ³•çš„å¸ƒéš†è¿‡æ»¤</td></tr><tr><td>hutool-cache</td><td>ç®€å•ç¼“å­˜å®ç°</td></tr><tr><td>hutool-core</td><td>æ ¸å¿ƒï¼ŒåŒ…æ‹¬Beanæ“ä½œã€æ—¥æœŸã€å„ç§Utilç­‰</td></tr><tr><td>hutool-cron</td><td>å®šæ—¶ä»»åŠ¡æ¨¡å—ï¼Œæä¾›ç±»Crontabè¡¨è¾¾å¼çš„å®šæ—¶ä»»åŠ¡</td></tr><tr><td>hutool-crypto</td><td>åŠ å¯†è§£å¯†æ¨¡å—ï¼Œæä¾›å¯¹ç§°ã€éå¯¹ç§°å’Œæ‘˜è¦ç®—æ³•å°è£…</td></tr><tr><td>hutool-db</td><td>JDBCå°è£…åçš„æ•°æ®æ“ä½œï¼ŒåŸºäºActiveRecordæ€æƒ³</td></tr><tr><td>hutool-dfa</td><td>åŸºäºDFAæ¨¡å‹çš„å¤šå…³é”®å­—æŸ¥æ‰¾</td></tr><tr><td>hutool-extra</td><td>æ‰©å±•æ¨¡å—ï¼Œå¯¹ç¬¬ä¸‰æ–¹å°è£…ï¼ˆæ¨¡æ¿å¼•æ“ã€é‚®ä»¶ã€Servletã€äºŒç»´ç ã€Emojiã€FTPã€åˆ†è¯ç­‰ï¼‰</td></tr><tr><td>hutool-http</td><td>åŸºäºHttpUrlConnectionçš„Httpå®¢æˆ·ç«¯å°è£…</td></tr><tr><td>hutool-log</td><td>è‡ªåŠ¨è¯†åˆ«æ—¥å¿—å®ç°çš„æ—¥å¿—é—¨é¢</td></tr><tr><td>hutool-script</td><td>è„šæœ¬æ‰§è¡Œå°è£…ï¼Œä¾‹å¦‚Javascript</td></tr><tr><td>hutool-setting</td><td>åŠŸèƒ½æ›´å¼ºå¤§çš„Settingé…ç½®æ–‡ä»¶å’ŒPropertieså°è£…</td></tr><tr><td>hutool-system</td><td>ç³»ç»Ÿå‚æ•°è°ƒç”¨å°è£…ï¼ˆJVMä¿¡æ¯ç­‰ï¼‰</td></tr><tr><td>hutool-json</td><td>JSONå®ç°</td></tr><tr><td>hutool-captcha</td><td>å›¾ç‰‡éªŒè¯ç å®ç°</td></tr><tr><td>hutool-poi</td><td>é’ˆå¯¹POIä¸­Excelå’ŒWordçš„å°è£…</td></tr><tr><td>hutool-socket</td><td>åŸºäºJavaçš„NIOå’ŒAIOçš„Socketå°è£…</td></tr><tr><td>hutool-jwt</td><td>JSON Web Token (JWT)å°è£…å®ç°</td></tr></tbody></table></div><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="#å¼•å…¥"></a><a href="https://doc.hutool.cn/pages/index/#%E5%BC%95%E5%85%A5">#</a>å¼•å…¥</h2><p><code>Hutool-all</code>æ˜¯ä¸€ä¸ªHutoolçš„é›†æˆæ‰“åŒ…äº§å“ï¼Œç”±äºè€ƒè™‘åˆ°â€œæ‡’äººâ€ç”¨æˆ·åŠåˆ†ä¸æ¸…å„ä¸ªæ¨¡å—ä½œç”¨çš„ç”¨æˆ·ï¼Œâ€œæ— è„‘â€å¼•å…¥<code>hutool-all</code>æ¨¡å—æ˜¯å¿«é€Ÿå¼€å§‹å’Œæ·±å…¥åº”ç”¨çš„æœ€ä½³æ–¹å¼ã€‚</p><p>èµ·åˆHutoolåªæä¾›äº†ä¸¤ç§å¼•å…¥æ–¹å¼ï¼š</p><ol><li><p>å¼•å…¥<code>hutool-all</code>ä»¥ä¾¿ä½¿ç”¨æ‰€æœ‰å·¥å…·ç±»åŠŸèƒ½</p></li><li><p>å¼•å…¥<code>hutool-xxx</code>å•ç‹¬æ¨¡å—ä½¿ç”¨</p></li></ol><p>åæ¥<code>t-io</code>çš„ä½œè€…è°­æ€»æå‡ºæ˜¯å¦å¯ä»¥å¼•å…¥ä¸€ä¸ªbomåŒ…ï¼Œä¸€æ¬¡æ€§å¼•å…¥æ‰€æœ‰å­æ¨¡å—ï¼Œç„¶åå°†ä¸ç”¨çš„æ¨¡å—æ’é™¤æ‰ã€‚èµ·åˆæˆ‘æ˜¯æ’æ–¥çš„ï¼Œè®¤ä¸ºè¿™ç§æ–¹å¼ç”¨å¤„ä¸å¤§ï¼ˆå…¶å®æ˜¯æˆ‘ä¸ä¼šå†™â€¦â€¦ï¼‰</p><p>å†åæ¥æ¥è§¦äº†Mavençš„è¿™éƒ¨åˆ†ï¼Œäºæ˜¯æœ‰äº†<code>hutool-bom</code>æ¨¡å—ï¼</p><p>å½“ç„¶è¿™ä¸ªæ¨¡å—çš„å­˜åœ¨ä¸€ç›´æœ‰äº‰è®®ï¼Œå› ä¸ºçœŸæ­£çš„bomåŒ…æ˜¯ä¸€ä¸ªæ¨¡å—ç®¡ç†åŒ…ï¼Œæ­£ç¡®çš„æ‰“å¼€æ–¹å¼æ˜¯å¯ä»¥å¼•å…¥ï¼Œå†å¼•å…¥éœ€è¦çš„æ¨¡å—ï¼ˆåªæ˜¯ä¸ç”¨é‡å¤ç‰ˆæœ¬å·è€Œå·²ï¼‰ï¼ŒHutoolä¸­â€æ’é™¤â€æ–¹å¼å°±å˜å¾—éå¸¸å¼‚ç±»ï¼ŒçœŸæ˜¯è®©äººå¤´å¤§ã€‚</p><p>å½“ç„¶è½¬æœºæ¥è‡ªäºä¸€ä¸ªissueï¼š<a href="https://github.com/chinabugotech/hutool/issues/1561">BOM should be declared in dependencyManagement for import(opens new window)</a></p><p>@JasonMing å¤§ç¥ç»™äº†ä¸€ä¸ªéå¸¸æ£’çš„æ–¹æ¡ˆï¼Œå¯ä»¥ä¸¤è€…å…¼å¾—ï¼Œäºæ˜¯çº ç»“ç—‡çš„æˆ‘ç»ˆäºé‡Šæ€€äº†ï¼Œç°åœ¨çš„bomæ¨¡å—å˜å¾—å¼‚å¸¸çµæ´»ï¼</p><p>æ•´ä¸ªbomæ¨¡å—åªç”±ä¸€ä¸ªpom.xmlç»„æˆï¼ŒåŒæ—¶æä¾›äº†<code>dependencyManagement</code>å’Œ<code>dependencies</code>ä¸¤ç§å£°æ˜ã€‚äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹ä¸åŒéœ€è¦å®Œæˆå¼•å…¥ã€‚</p><h3 id="importæ–¹å¼"><a href="#importæ–¹å¼" class="headerlink" title="#importæ–¹å¼"></a><a href="https://doc.hutool.cn/pages/index/#import%E6%96%B9%E5%BC%8F">#</a>importæ–¹å¼</h3><p>å¦‚æœä½ æƒ³åƒSpring-Bootä¸€æ ·å¼•å…¥Hutoolï¼Œå†ç”±å­æ¨¡å—å†³å®šç”¨åˆ°å“ªäº›æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨çˆ¶æ¨¡å—ä¸­åŠ å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;hutool-bom&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;$&#123;hutool.version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">            &lt;!-- æ³¨æ„è¿™é‡Œæ˜¯import --&gt;</span><br><span class="line">            &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure><p>åœ¨å­æ¨¡å—ä¸­å°±å¯ä»¥å¼•å…¥è‡ªå·±éœ€è¦çš„æ¨¡å—äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;hutool-http&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨importçš„æ–¹å¼ï¼Œåªä¼šå¼•å…¥hutool-bomå†…çš„dependencyManagementçš„é…ç½®ï¼Œå…¶å®ƒé…ç½®åœ¨è¿™ä¸ªå¼•ç”¨æ–¹å¼ä¸‹å®Œå…¨ä¸èµ·ä½œç”¨ã€‚</p></blockquote><h3 id="excludeæ–¹å¼"><a href="#excludeæ–¹å¼" class="headerlink" title="#excludeæ–¹å¼"></a><a href="https://doc.hutool.cn/pages/index/#exclude%E6%96%B9%E5%BC%8F">#</a>excludeæ–¹å¼</h3><p>å¦‚æœä½ å¼•å…¥çš„æ¨¡å—æ¯”è¾ƒå¤šï¼Œä½†æ˜¯æŸå‡ ä¸ªæ¨¡å—æ²¡ç”¨ï¼Œä½ å¯ä»¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;hutool-bom&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;$&#123;hutool.version&#125;&lt;/version&gt;</span><br><span class="line">        &lt;!-- åŠ ä¸åŠ è¿™å¥éƒ½èƒ½è·‘ï¼ŒåŒºåˆ«åªæœ‰æ˜¯å¦å‘Šè­¦  --&gt;</span><br><span class="line">        &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">            &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;hutool-system&lt;/artifactId&gt;</span><br><span class="line">            &lt;/exclusion&gt;</span><br><span class="line">        &lt;/exclusions&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªé…ç½®ä¼šä¼ é€’ä¾èµ–hutool-bomå†…æ‰€æœ‰dependenciesçš„å†…å®¹ï¼Œå½“å‰hutool-bomå†…çš„dependencieså…¨éƒ¨è®¾ç½®äº†versionï¼Œå°±æ„å‘³ç€åœ¨maven resolveçš„æ—¶å€™hutool-bomå†…å°±ç®—å­˜åœ¨dependencyManagementä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hutool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPåè®®</title>
      <link href="/2025/03/19/HTTP%E5%8D%8F%E8%AE%AE/"/>
      <url>/2025/03/19/HTTP%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>æ¦‚å¿µï¼š è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè§„å®šäº†æµè§ˆå™¨å’ŒæœåŠ¡å™¨æ•°æ®ä¼ è¾“çš„è§„åˆ™</li></ul><blockquote><p>ä¾‹å­ï¼š</p></blockquote><ul><li><p>Response</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> </span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/html;charset=UTF-8 </span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>10 </span><br><span class="line"><span class="attribute">Date</span><span class="punctuation">: </span>Wed, 19 Mar 2025 08:22:49 GMT </span><br><span class="line"><span class="attribute">Keep-Alive</span><span class="punctuation">: </span>timeout=60 </span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br></pre></td></tr></table></figure></li><li><p>Request</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/hello?name=ith</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate, br, zstd</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ru;q=0.5,eo;q=0.4</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>max-age=0</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>localhost:8080</span><br><span class="line"><span class="attribute">Sec-Fetch-Dest</span><span class="punctuation">: </span>document</span><br><span class="line"><span class="attribute">Sec-Fetch-Mode</span><span class="punctuation">: </span>navigate</span><br><span class="line"><span class="attribute">Sec-Fetch-Site</span><span class="punctuation">: </span>none</span><br><span class="line"><span class="attribute">Sec-Fetch-User</span><span class="punctuation">: </span>?1</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36</span><br><span class="line"><span class="attribute">sec-ch-ua</span><span class="punctuation">: </span>&quot;Google Chrome&quot;;v=&quot;131&quot;, &quot;Chromium&quot;;v=&quot;131&quot;, &quot;Not_A Brand&quot;;v=&quot;24&quot;</span><br><span class="line"><span class="attribute">sec-ch-ua-mobile</span><span class="punctuation">: </span>?0</span><br><span class="line"><span class="attribute">sec-ch-ua-platform</span><span class="punctuation">: </span>&quot;Windows&quot;</span><br></pre></td></tr></table></figure></li></ul><p>ç¬¬ä¸€è¡Œæ˜¯è¯·æ±‚è¡Œï¼Œ æ¥ä¸‹æ¥æ˜¯è¯·æ±‚å¤´</p><h2 id="è¯·æ±‚request"><a href="#è¯·æ±‚request" class="headerlink" title="è¯·æ±‚request"></a>è¯·æ±‚request</h2><p>åˆ†ä¸ºGetå’ŒPost</p><p> ä¸€èˆ¬ç¬¬ä¸€è¡Œæ˜¯è¯·æ±‚è¡Œï¼Œä»¥Getæˆ–è€…Postå¼€å§‹ï¼Œè¡¨ç¤ºRequestçš„ç±»å‹</p><p>æ¥ä¸‹æ¥ ä»¥ key - valueçš„æ˜¯è¯·æ±‚å¤´ï¼Œå¸¸è§çš„è¯·æ±‚å¤´ï¼š</p><ul><li>Host : å…¨çƒçš„ä¸»æœºå</li><li>User-Agent: æµè§ˆå™¨ç‰ˆæœ¬</li><li>Acceptï¼š æµè§ˆå™¨å¯ä»¥æ¥å—çš„èµ„æºç±»å‹</li><li>Accept-Lauguage: æµè§ˆå™¨åå¥½äºä¸€</li><li>Accept-Encoding: æµè§ˆå™¨å¯ä»¥æ”¯æŒçš„å‹ç¼©ç±»å‹, gzip, deflateç­‰</li><li>Content-Type: è¯·æ±‚æ•°æ®ç±»å‹</li><li>Content-Length: è¯·æ±‚ä¸»ä½“çš„å¤§å°</li></ul><p>å¯¹äºPostæ¥è¯´ï¼Œè¿˜æœ‰è¯·æ±‚ä½“ï¼ŒæŠŠæ•°æ®æ”¾åœ¨äº†Postï¼Œå¯ä»¥è¯·æ±‚æ›´å¤šçš„æ•°æ®ï¼Œè€ŒGetæŠŠæ•°æ®ç›´æ¥æ”¾åœ¨è¯·æ±‚è¡Œï¼ˆåœ¨urlåé¢ï¼‰ï¼Œå¤§å°æœ‰é™åˆ¶</p><blockquote><p>Get å’Œ Postçš„åŒºåˆ«</p></blockquote><ul><li>Get çš„è¯·æ±‚æ•°æ®æ˜¯æ”¾åœ¨è¯·æ±‚å¤´</li><li>Postçš„è¯·æ±‚æ•°æ®æ˜¯æ”¾åœ¨è¯·æ±‚ä½“</li></ul><p>Postçš„å®‰å…¨æ€§è¦é«˜äºGetï¼Œ å› ä¸ºGetæ˜æ–‡æŠŠè¯·æ±‚ä¿¡æ¯æ”¾åœ¨äº†è¯·æ±‚ä¿¡æ¯é‡Œé¢ï¼Œ</p><h3 id="è¯·æ±‚åè®®"><a href="#è¯·æ±‚åè®®" class="headerlink" title="è¯·æ±‚åè®®"></a>è¯·æ±‚åè®®</h3><p>ç›¸ä½¿ç”¨HTTPè¦ä½¿ç”¨å°è£…å¥½çš„HttpServletRequest :</p><p>å¸¸è§çš„æ–¹æ³•å’Œä¾‹å­å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.startspringboot;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@RestController</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/request&quot;)</span>  </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">request</span><span class="params">(HttpServletRequest request)</span> &#123;  </span><br><span class="line">        <span class="comment">// 1. è·å–è¯·æ±‚æ–¹å¼  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();  </span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·æ±‚æ–¹å¼:&quot;</span> + method);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–urlåœ°å€  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURL().toString(); <span class="comment">// æ‹¿åˆ°æ•´ä¸ªurlçš„StringBufferå¯¹è±¡  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;url : &quot;</span> + url);  </span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI(); <span class="comment">// æ‹¿åˆ°çš„æ˜¯èµ„æºçš„è®¿é—®è·¯å¾„  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;uri &quot;</span> + uri);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//3.è·å–è¯·æ±‚åè®®  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> request.getProtocol();  </span><br><span class="line">        System.out.println(<span class="string">&quot;åè®®&quot;</span> + protocol);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//4.è·å–è¯·æ±‚å‚æ•° - name        String name = request.getParameter(&quot;name&quot;);  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">age</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;age&quot;</span>);  </span><br><span class="line">        System.out.println(name + <span class="string">&quot; &quot;</span> + age);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//5.è·å–è¯·æ±‚å¤´ - Accept        String accept = request.getHeader(&quot;Accept&quot;);  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;Accept: &quot;</span> + accept);  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨é¡¹ç›®æ‰“å¼€æµè§ˆå™¨è¾“å…¥<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:8080/request?name=ä½ å¥½&amp;age=jj</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºå¤ªè¾“å‡ºäº†å¯¹åº”ä¿¡æ¯<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚æ–¹å¼:GET</span><br><span class="line">url : http://localhost:8080/request</span><br><span class="line">uri /request</span><br><span class="line">åè®®HTTP/1.1</span><br><span class="line">ä½ å¥½ jj</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br></pre></td></tr></table></figure></p><h2 id="å“åº”Response"><a href="#å“åº”Response" class="headerlink" title="å“åº”Response"></a>å“åº”Response</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br><span class="line"><span class="attribute">Transfer-Encoding</span><span class="punctuation">: </span>chunked</span><br><span class="line"><span class="attribute">Data</span><span class="punctuation">: </span>Tie, 10 May 2024 07:51:07 GMT</span><br><span class="line"><span class="attribute">Keep-Alive</span><span class="punctuation">: </span>timeout=60</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"></span><br><span class="line"><span class="language-nix">[&#123;<span class="params">id:</span> <span class="number">1</span>, breadName:<span class="string">&quot;é˜¿é‡Œå·´å·´&quot;</span>, <span class="params">companyName:</span> <span class="string">&quot;è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸&quot;</span>, <span class="params">description:</span> <span class="string">&quot;æ—ºæ—ºæ—º&quot;</span>&#125;]</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œæ˜¯å“åº”è¡Œï¼ˆåè®®ï¼ŒçŠ¶æ€ç ï¼Œæè¿°ï¼‰<br>ä¸‹é¢æ˜¯å“åº”å¤´ï¼šç¬¬äºŒè¡Œå¼€å§‹keyï¼švalue<br>æ¶ˆæ¯ç©ºè¡Œ<br>æœ€åæ˜¯å“åº”ä½“ï¼šå­˜æ”¾å“åº”æ•°æ®</p><h3 id="HTTPå¸¸è§çŠ¶æ€ç "><a href="#HTTPå¸¸è§çŠ¶æ€ç " class="headerlink" title="HTTPå¸¸è§çŠ¶æ€ç "></a><strong>HTTPå¸¸è§çŠ¶æ€ç </strong></h3><p>HTTPçŠ¶æ€ç æ˜¯åº”ç”¨å±‚ï¼ˆHTTPåè®®ï¼‰çš„å“åº”ä»£ç ï¼Œç”¨äºæè¿°HTTPè¯·æ±‚çš„ç»“æœã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„HTTPçŠ¶æ€ç åˆ†ç±»åŠå…¶å«ä¹‰ï¼š</p><h4 id="1xxï¼šä¿¡æ¯æ€§å“åº”"><a href="#1xxï¼šä¿¡æ¯æ€§å“åº”" class="headerlink" title="1xxï¼šä¿¡æ¯æ€§å“åº”"></a><strong>1xxï¼šä¿¡æ¯æ€§å“åº”</strong></h4><ul><li><strong>100 Continue</strong>ï¼šæœåŠ¡å™¨å·²æ”¶åˆ°è¯·æ±‚å¤´ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€è¯·æ±‚ä½“ã€‚</li><li><strong>101 Switching Protocols</strong>ï¼šæœåŠ¡å™¨åŒæ„åˆ‡æ¢åè®®ã€‚</li></ul><h4 id="2xxï¼šæˆåŠŸ"><a href="#2xxï¼šæˆåŠŸ" class="headerlink" title="2xxï¼šæˆåŠŸ"></a><strong>2xxï¼šæˆåŠŸ</strong></h4><ul><li><strong>200 OK</strong>ï¼šè¯·æ±‚æˆåŠŸï¼ŒæœåŠ¡å™¨è¿”å›äº†è¯·æ±‚çš„æ•°æ®ã€‚</li><li><strong>201 Created</strong>ï¼šè¯·æ±‚æˆåŠŸï¼Œå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æºã€‚</li><li><strong>204 No Content</strong>ï¼šè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</li></ul><h4 id="3xxï¼šé‡å®šå‘"><a href="#3xxï¼šé‡å®šå‘" class="headerlink" title="3xxï¼šé‡å®šå‘"></a><strong>3xxï¼šé‡å®šå‘</strong></h4><ul><li><strong>301 Moved Permanently</strong>ï¼šèµ„æºæ°¸ä¹…é‡å®šå‘åˆ°æ–°çš„URLã€‚</li><li><strong>302 Found</strong>ï¼šèµ„æºä¸´æ—¶é‡å®šå‘åˆ°æ–°çš„URLã€‚</li><li><p><strong>304 Not Modified</strong>ï¼šèµ„æºæœªä¿®æ”¹ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚</p><blockquote><p>ä¾‹å­ï¼š è®¿é—®<a href="http://www.baidu.com">http://www.baidu.com</a>, æ‰“å¼€F12ï¼Œçœ‹åˆ°è®¿é—®äº†ä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡å‘ç”Ÿäº†é‡å®šå‘</p><h4 id="4xxï¼šå®¢æˆ·ç«¯é”™è¯¯"><a href="#4xxï¼šå®¢æˆ·ç«¯é”™è¯¯" class="headerlink" title="4xxï¼šå®¢æˆ·ç«¯é”™è¯¯"></a><strong>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯</strong></h4></blockquote></li><li><p><strong>400 Bad Request</strong>ï¼šè¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–å‚æ•°é”™è¯¯ã€‚</p></li><li><strong>401 Unauthorized</strong>ï¼šéœ€è¦èº«ä»½éªŒè¯ã€‚</li><li><strong>403 Forbidden</strong>ï¼šæœåŠ¡å™¨æ‹’ç»æ‰§è¡Œè¯·æ±‚ã€‚</li><li><strong>404 Not Found</strong>ï¼šèµ„æºä¸å­˜åœ¨ã€‚</li></ul><h4 id="5xxï¼šæœåŠ¡å™¨é”™è¯¯"><a href="#5xxï¼šæœåŠ¡å™¨é”™è¯¯" class="headerlink" title="5xxï¼šæœåŠ¡å™¨é”™è¯¯"></a><strong>5xxï¼šæœåŠ¡å™¨é”™è¯¯</strong></h4><ul><li><strong>500 Internal Server Error</strong>ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚</li><li><strong>502 Bad Gateway</strong>ï¼šç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</li><li><strong>503 Service Unavailable</strong>ï¼šæœåŠ¡å™¨æš‚æ—¶è¶…è½½æˆ–ç»´æŠ¤ä¸­ã€‚</li></ul><div class="table-container"><table><thead><tr><th>Content-Type</th><th>å“åº”å†…å®¹</th></tr></thead><tbody><tr><td>Content-Length</td><td>é•¿åº¦</td></tr><tr><td>Content-Encoding</td><td>è¯¥å“åº”çš„å‹ç¼©ç®—æ³•</td></tr><tr><td>Cache-Control</td><td>å®¢æˆ·ç«¯å¦‚ä½•ç¼“å­˜</td></tr><tr><td>Set-Cookie</td><td>å‘Šè¯‰æµè§ˆå™¨ä¸ºå½“å‰é¡µé¢æ‰€åœ¨çš„åŸŸè®¾ç½®cookie</td></tr></tbody></table></div><p>ä½¿ç”¨ï¼š<br>HttpServletResponse</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.startspringboot;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;  </span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@RestController</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseController</span> &#123;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*  </span></span><br><span class="line"><span class="comment">    *æ–¹å¼ä¸€ : HttpServletResponse     */</span>    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/response&quot;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">response</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        <span class="comment">// 1.è®¾ç½®å“åº”çŠ¶æ€ç   </span></span><br><span class="line">        response.setStatus(<span class="number">401</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 2. è®¾ç½®å“åº”å¤´  </span></span><br><span class="line">        response.setHeader(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;cyuan&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 3. è®¾ç½®å“åº”ä½“  </span></span><br><span class="line">        response.getWriter().write(<span class="string">&quot;hello sponse&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*  </span></span><br><span class="line"><span class="comment">    * æ–¹å¼äºŒï¼š Spring    </span></span><br><span class="line"><span class="comment">    * */</span>    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/Response2&quot;)</span>  </span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">response2</span><span class="params">()</span> &#123;  </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(<span class="number">401</span>)  </span><br><span class="line">                .header(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;JavaWeb&quot;</span>)  </span><br><span class="line">                .body(<span class="string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span>);  </span><br><span class="line">    &#125; <span class="comment">// æ³¨æ„è¦å†™å…¨ä¸‰ä¸ªç»„ä»¶ä¸ç„¶æŠ¥é”™  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®å¯ä»¥çœ‹åˆ°å‡ºç°äº†å“åº”æ•°æ®</p><h2 id="HTTPçš„å·¥ä½œåŸç†"><a href="#HTTPçš„å·¥ä½œåŸç†" class="headerlink" title="HTTPçš„å·¥ä½œåŸç†"></a>HTTPçš„å·¥ä½œåŸç†</h2><ul><li>å®¢æˆ·ç«¯è¿æ¥åˆ°WebæœåŠ¡å™¨</li><li>å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼ˆRequestï¼‰</li><li>æœåŠ¡å™¨æ¥å—è¯·æ±‚è¿”å›ä¸€ä¸ªHTTPå“åº”</li><li>é‡Šæ”¾é“¾æ¥æ¥TCP<pre><code> å¦‚æœconnect ä¸ºcloseå°±ä¸»åŠ¨å…³é—­TCPé“¾æ¥ï¼Œçœ‹å®¢æˆ·ç«¯è¢«åŠ¨å…³é—­ï¼Œ å¦‚æœæ˜¯keepaliveåˆ™ä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¯ä»¥ç»§ç»­æ¥å—ä¿¡æ¯</code></pre></li><li>å®¢æˆ·ç«¯è§£æhtmlï¼Œæ˜¾ç¤ºå¯¹åº”å†…å®¹</li></ul><h2 id="HTTPåè®®ç‰¹ç‚¹"><a href="#HTTPåè®®ç‰¹ç‚¹" class="headerlink" title="HTTPåè®®ç‰¹ç‚¹"></a>HTTPåè®®ç‰¹ç‚¹</h2><ul><li>åŸºäºTCPåè®®ï¼šé¢å‘é“¾æ¥ï¼Œå®‰å…¨</li><li>åŸºäºè¯·æ±‚å“åº”æ¨¡å‹ï¼š ä¸€æ¬¡è¯·æ±‚ä¸€æ¬¡å“åº”</li><li>HTTPæ˜¯æ— çŠ¶æ€çš„åè®®ï¼š å¯¹äºäº‹åŠ¡çš„å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚<ul><li>ç¼ºç‚¹ï¼šå¤šæ¬¡è¯·æ±‚é—´ä¸èƒ½å…±äº«æ•°æ®</li><li>ä¼˜ç‚¹ï¼š é€Ÿåº¦å¿«</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Educational-Codeforces-Round-176é¢˜è§£</title>
      <link href="/2025/03/18/Educational-Codeforces-Round-176%E9%A2%98%E8%A7%A3/"/>
      <url>/2025/03/18/Educational-Codeforces-Round-176%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è¿‘æœŸæ¥æ‰“å¾—æœ€å¥½çš„ä¸€åœºï¼Œä½†æ˜¯Bé¢˜ç»†èŠ‚çœŸæœ‰ç‚¹å¤šå•Šå–‚ã€‚ã€‚</p></blockquote><h2 id="A-To-Zero"><a href="#A-To-Zero" class="headerlink" title="A. To Zero"></a>A. To Zero</h2><p>ç»™å®š n, k, æ±‚æŠŠnå˜0æ¬¡æ•°</p><p>k &gt;= n ç­”æ¡ˆæ˜¯1ï¼Œ å¦åˆ™nå…ˆå‡å»kï¼Œä¹‹åæ— è®ºå¦‚ä½•é€‰æ‹©çš„å‡æ•°å¿…ç„¶æ˜¯å¶æ•°ï¼Œç„¶åè®¡ç®—æ¬¡æ•°å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">    i64 ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (k &gt;= n) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    n -= k;</span><br><span class="line">    ans++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (k &amp; <span class="number">1</span>) &#123;</span><br><span class="line">        k--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ans += (n / k) + ((n % k) ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B-Array-Recoloring"><a href="#B-Array-Recoloring" class="headerlink" title="B. Array Recoloring"></a>B. Array Recoloring</h2><p><strong>é¢˜ç›®å¤§æ„</strong><br>ç»™å®šä¸€ä¸ªå¤§å°ä¸º nn çš„æ•´æ•°æ•°ç»„ aa ã€‚æœ€åˆï¼Œæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯çº¢è‰²çš„ã€‚</p><p>æ‚¨å¿…é¡»ç²¾ç¡®åœ°é€‰æ‹©æ•°ç»„ä¸­çš„ kk å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬æ¶‚æˆè“è‰²ã€‚ç„¶åï¼Œè™½ç„¶è‡³å°‘æœ‰ä¸€ä¸ªçº¢è‰²å…ƒç´ ï¼Œä½†æ‚¨å¿…é¡»é€‰æ‹©ä»»ä½•æœ‰è“è‰²é‚»å±…çš„çº¢è‰²å…ƒç´ ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºè“è‰²ã€‚</p><p>ç»˜åˆ¶æ•°ç»„çš„ä»£ä»·å®šä¹‰ä¸ºç¬¬ä¸€ä¸ª kk é€‰æ‹©çš„å…ƒç´ å’Œæœ€åä¸€ä¸ªç»˜åˆ¶çš„å…ƒç´ çš„å’Œã€‚</p><p>æ‚¨çš„ä»»åŠ¡æ˜¯è®¡ç®—ç»™å®šæ•°ç»„ç»˜åˆ¶çš„æœ€å¤§å¯èƒ½æˆæœ¬ã€‚</p><p><strong>æ€è·¯</strong><br>é¦–å…ˆè€ƒè™‘k == 1æƒ…å†µï¼Œæ­¤æ—¶æ— è®ºå¦‚ä½•æœ€åä¸€ä¸ªæ•°å­—æ€»ä¼šæ˜¯å·¦å³ä¸¤ç«¯çš„æ•°å­—ï¼Œé‚£ä¹ˆansæœ€å¤§çš„æƒ…å†µå°±æ˜¯</p><ul><li>a[1] + a[n] æˆ–è€…æ˜¯ 2 - n - 1ä¸­æœ€å¤§çš„å€¼ + max(a[1], a[n])</li></ul><p>ç„¶åçœ‹k &gt;= 2æƒ…å†µï¼Œè¿™æ—¶å€™ä½ ä¼šå‘ç°æ— è®ºä½ æ€ä¹ˆé€‰æ‹©å…ƒç´ ï¼Œæœ€åä¸€ä¸ªæ•°å­—ä¹Ÿéƒ½å¯ä»¥è‡ªå·±é€‰æ‹©ï¼ˆå»çº¸ä¸Šæ‰‹ç©ä¸€ä¸‹å‘ç°ï¼‰ï¼Œæ‰€ä»¥æœ€å¤§å€¼å°±æ˜¯æœ€å¤§çš„k + 1ä¸ªæ•°å­—</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    i64 ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">1</span>) &#123;</span><br><span class="line">        ans = a[<span class="number">1</span>] + a[n];</span><br><span class="line">        i64 r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">            r = <span class="built_in">max</span>(r, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        r += <span class="built_in">max</span>(a[<span class="number">1</span>], a[n]);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, r);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">sort</span>(a.<span class="built_in">begin</span>() + <span class="number">1</span>, a.<span class="built_in">end</span>());</span><br><span class="line">        k++;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            ans += a[i];</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C-Two-Colors"><a href="#C-Two-Colors" class="headerlink" title="C. Two Colors"></a>C. Two Colors</h2><p>æ¯”Bè¿˜ç®€å•çš„æ°´ï¼Œç›´æ¥ä¸Šä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= n) a[x]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">P</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">Q</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        P[i] = P[i - <span class="number">1</span>] + a[i];</span><br><span class="line">        Q[i] = Q[i - <span class="number">1</span>] + i * a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> L = <span class="built_in">max</span>(n - i, <span class="number">1</span>);</span><br><span class="line">        i64 cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (L &lt;= n - <span class="number">1</span>) &#123;</span><br><span class="line">            i64 p = P[n - <span class="number">1</span>] - (L &gt;= <span class="number">1</span> ? P[L - <span class="number">1</span>] : <span class="number">0</span>);</span><br><span class="line">            i64 q = Q[n - <span class="number">1</span>] - (L &gt;= <span class="number">1</span> ? Q[L - <span class="number">1</span>] : <span class="number">0</span>);</span><br><span class="line">            cnt += (i - n + <span class="number">1</span>) * p + q;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt += <span class="number">1LL</span> * a[n] * i;</span><br><span class="line">        s += <span class="number">1LL</span> * a[i] * cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a[n] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        i64 cnt = Q[n<span class="number">-1</span>] + a[n] * (n - <span class="number">1</span>);</span><br><span class="line">        s += a[n] * cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &amp;&amp; <span class="number">2</span> * i &gt;= n) &#123;</span><br><span class="line">            ans += <span class="number">1LL</span> * a[i] * (<span class="number">2</span> * i - n + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ans += <span class="number">1LL</span> * a[n] * (n - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; (s - ans) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;   </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D-Equalization"><a href="#D-Equalization" class="headerlink" title="D. Equalization"></a>D. Equalization</h2><p><strong>é¢˜ç›®å¤§æ„</strong><br>ç»™å®šä¸¤ä¸ªæ­£æ•´æ•° x å’Œ y ã€‚</p><p>æ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œä»»æ„æ¬¡æ•°(å¯èƒ½ä¸ºé›¶)ï¼šé€‰æ‹©ä¸€ä¸ªæ­£æ•´æ•° k ï¼Œç„¶åå°† x æˆ– y é™¤ä»¥ $2^k$ ã€‚è¿™ä¸ªæ“ä½œçš„ä»£ä»·æ˜¯ $2^k$ ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªé¢å¤–çš„çº¦æŸï¼šæ‚¨ä¸èƒ½å¤šæ¬¡é€‰æ‹©ç›¸åŒçš„ kk å€¼ã€‚</p><p>ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—ä½¿ x ç­‰äº y çš„æœ€å°å¯èƒ½ä»£ä»·ã€‚</p><p><strong>æ€è·¯</strong></p><p>æ³¨æ„åˆ°æŸä¸ªæ•°å­—é™¤ä»¥ $2^k$ ç›¸å½“äºå³ç§»kä½ï¼Œè€Œç»™å®šçš„æ•°æ®1e17 æœ€å¤šéœ€è¦61æ¬¡ä¼šå˜æˆ0ï¼Œæ‰€ä»¥å¯ä»¥ä»æš´åŠ›æšä¸¾æ¯ä¸€ä½å…¥æ‰‹ï¼Œå¦‚æœå¾ªç¯åˆ°æŸä¸€ä½æ—¶å€™ç›¸åŒï¼Œå°±è®¡ç®—æœ€å°å€¼</p><p>ç°åœ¨è€ƒè™‘æ€ä¹ˆè®¡ç®—å¾ªç¯æ‰€éœ€è¦çš„è´¹ç”¨ï¼šå¯ä»¥é¢„å…ˆå¤„ç†ä¸€ä¸ªdpæ•°ç»„</p><ul><li><p><code>dp[i][j]</code> è¡¨ç¤ºï¼šå°† x å³ç§» i ä½ã€y å³ç§» j ä½æ‰€éœ€çš„æœ€å°ä»£ä»·ã€‚åˆå§‹çŠ¶æ€ä¸º (0,0)(0,0)(0,0)ï¼Œä»£ä»·ä¸º 0ã€‚</p></li><li><p><strong>çŠ¶æ€è½¬ç§»</strong><br>  å¯¹äºæ¯ä¸ªæ“ä½œæ­¥é•¿ k ä» 1 åˆ° 61ï¼š</p><ul><li>ä½ å¯ä»¥é€‰æ‹©å¯¹ x æˆ– y è¿›è¡Œæ“ä½œã€‚</li><li>å¦‚æœå¯¹ x æ“ä½œï¼šçŠ¶æ€ä» (i, j)(i, j)(i, j) è½¬ç§»åˆ° (i+k, j)(i+k, j)(i+k, j)ï¼Œå¹¶å¢åŠ çš„ä»£ä»·ä¸º $2^k$ã€‚</li><li><p>å¦‚æœå¯¹ y æ“ä½œï¼šçŠ¶æ€ä» (i, j)(i, j)(i, j) è½¬ç§»åˆ° (i, j+k)(i, j+k)(i, j+k)ï¼ŒåŒæ ·å¢åŠ ä»£ä»·ä¸º $2^k$ã€‚</p><p>è¿™é‡Œä½¿ç”¨äº†å¤åˆ¶ <code>dp</code> åˆ° <code>ndp</code> çš„æ–¹å¼ï¼Œä»¥ä¿è¯æ¯æ¬¡æ“ä½œ k åªä½¿ç”¨ä¸€æ¬¡ã€‚</p></li></ul></li><li><p><strong>å­˜å‚¨æ‰€æœ‰çŠ¶æ€</strong><br>  éå† <code>dp</code> æ•°ç»„ï¼Œå°†æ‰€æœ‰å¯è¾¾çŠ¶æ€ï¼ˆå³ <code>dp[i][j] != inf</code>ï¼‰å­˜å…¥ <code>mem</code> å‘é‡ï¼š</p><p>  è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ‰€æœ‰å¯èƒ½çš„å³ç§»ä½æ•°ç»„åˆåŠå…¶å¯¹åº”çš„æ€»ä»£ä»·ã€‚</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    i64 c;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">const</span> i64 inf = std::numeric_limits&lt;i64&gt;::<span class="built_in">max</span>();</span><br><span class="line"></span><br><span class="line"><span class="function">vector <span class="title">dp</span><span class="params">(<span class="number">62</span>, vector&lt;i64&gt; (<span class="number">62</span>, inf))</span></span>;</span><br><span class="line">vector&lt;node&gt; mem;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">61</span>; k++) &#123;</span><br><span class="line">        vector ndp = dp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">61</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">61</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dp[i][j] != inf) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i + k &lt;= <span class="number">61</span>) &#123;</span><br><span class="line">                        ndp[i + k][j] = <span class="built_in">min</span>(ndp[i + k][j], dp[i][j] + (<span class="number">1LL</span> &lt;&lt; k));</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (j + k &lt;= <span class="number">61</span>) &#123;</span><br><span class="line">                        ndp[i][j + k] = <span class="built_in">min</span>(ndp[i][j + k], dp[i][j] + (<span class="number">1LL</span> &lt;&lt; k));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dp = ndp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">61</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">61</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[i][j] != inf) &#123;</span><br><span class="line">                mem.<span class="built_in">emplace_back</span>(i, j, dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 x, y;</span><br><span class="line">    cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line"></span><br><span class="line">    i64 ans = inf;</span><br><span class="line">    vector&lt;node&gt; a;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> tp : mem) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [l, r, c] = tp;</span><br><span class="line">        <span class="keyword">if</span> ((x &gt;&gt; l) == (y &gt;&gt; r)) &#123;</span><br><span class="line">            ans = <span class="built_in">min</span>(ans, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pre</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforceé¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven</title>
      <link href="/2025/03/15/Maven/"/>
      <url>/2025/03/15/Maven/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Mavenæ˜¯ç®¡ç†Javaé¡¹ç›®æ ¹æ®ï¼Œapacheæ——ä¸‹ä¸€ä¸ªä¸œè¥¿</p></blockquote><ul><li>å½“å‰å¸‚åœºä¸Šçš„ä¸»æµæ˜¯Maven</li></ul><h3 id="1-Mavençš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-Mavençš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. Mavençš„åŸºæœ¬æ¦‚å¿µ"></a>1. <strong>Mavençš„åŸºæœ¬æ¦‚å¿µ</strong></h3><ul><li><p><strong>æ„å»ºç”Ÿå‘½å‘¨æœŸ</strong>: Mavené€šè¿‡ä¸€ç»„é¢„å®šä¹‰çš„æ„å»ºç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚æœ€å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸‰ä¸ªï¼š</p><ul><li><strong>clean</strong>: æ¸…ç†é¡¹ç›®çš„è¾“å‡ºç›®å½•ã€‚</li><li><strong>default</strong>: æ‰§è¡Œé¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰ã€‚</li><li><p><strong>site</strong>: ç”Ÿæˆé¡¹ç›®çš„æ–‡æ¡£ã€‚</p><p>æ¯ä¸ªç”Ÿå‘½å‘¨æœŸç”±å¤šä¸ªé˜¶æ®µç»„æˆï¼ŒMavenä¼šæŒ‰ç…§ä¸€å®šçš„é¡ºåºæ‰§è¡Œè¿™äº›é˜¶æ®µã€‚</p></li></ul></li><li><p><strong>æ’ä»¶å’Œç›®æ ‡</strong>: Mavené€šè¿‡æ’ä»¶æ¥æ‰©å±•åŠŸèƒ½ï¼Œæ¯ä¸ªæ’ä»¶åŒ…å«è‹¥å¹²ä¸ªç›®æ ‡ï¼ˆgoalsï¼‰ã€‚æ¯”å¦‚ï¼Œç¼–è¯‘Javaä»£ç çš„æ’ä»¶æ˜¯<code>maven-compiler-plugin</code>ï¼Œå®ƒçš„ç›®æ ‡æ˜¯<code>compile</code>ã€‚</p></li><li><p><strong>ä¾èµ–ç®¡ç†</strong>: Mavenä½¿ç”¨POMæ–‡ä»¶ï¼ˆ<code>pom.xml</code>ï¼‰æ¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€æ„å»ºé…ç½®ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªä¾èµ–éƒ½ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†å®šä¹‰ï¼š</p><ul><li><strong>Group ID</strong>: ä¾èµ–æ‰€å±çš„ç»„ã€‚</li><li><strong>Artifact ID</strong>: ä¾èµ–çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li><strong>Version</strong>: ä¾èµ–çš„ç‰ˆæœ¬ã€‚</li></ul></li><li><strong>ä»“åº“</strong>: Mavené€šè¿‡ä»“åº“æ¥å­˜å‚¨å’Œè·å–ä¾èµ–é¡¹ã€‚å¯ä»¥æ˜¯æœ¬åœ°ä»“åº“ã€ä¸­å¤®ä»“åº“æˆ–ç§æœ‰ä»“åº“ã€‚</li></ul><h3 id="2-Mavençš„ä¼˜ç‚¹"><a href="#2-Mavençš„ä¼˜ç‚¹" class="headerlink" title="2. Mavençš„ä¼˜ç‚¹"></a>2. <strong>Mavençš„ä¼˜ç‚¹</strong></h3><ol><li>æ–¹ä¾¿å¿«æ·çš„ä¾èµ–ç®¡ç†</li></ol><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¦å¼•å…¥jaråŒ…éœ€è¦åœ¨ä¸»ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªlibæ–‡ä»¶ï¼Œåœ¨libæ–‡ä»¶å†…å¼•å…¥ä¸‹è½½å¥½çš„jaråŒ…ï¼Œä½¿ç”¨Mavenç®¡ç†ååªéœ€è¦åœ¨pom.xmlæ–‡ä»¶å†…é…ç½®å¯¹åº”ä¿¡æ¯å³å¯è®©é¡¹ç›®è‡ªåŠ¨ä¸‹è½½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡ªåŠ¨é…ç½®å¥½äº†commons-io, ç›´æ¥å¯ä»¥æ›´æ¢ç‰ˆæœ¬ç­‰ï¼Œå¾ˆæ–¹ä¾¿</p><ol><li><p>æ ‡å‡†åŒ–çš„è·¨å¹³å°çš„é¡¹ç›®æ“ä½œ</p></li><li><p>ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„</p></li></ol><p>Eclipseå’Œideaä¹‹é—´çš„é¡¹ç›®ä¸æ˜¯äº’é€šçš„ï¼Œä½†æ˜¯ä½¿ç”¨Mavenä¹‹åï¼Œä¸ç®¡ç”¨ä»€ä¹ˆå·¥å…·éƒ½å¯ä»¥å…±äº«</p><p>Mavenæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œä¸»è¦ç”¨äºJavaé¡¹ç›®çš„æ„å»ºã€ä¾èµ–ç®¡ç†ã€é¡¹ç›®ç®¡ç†ç­‰ã€‚å®ƒç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚çš„é¡¹ç›®æ—¶ã€‚ä¸‹é¢æ˜¯å¯¹Mavençš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨çš„è¯¦ç»†è®²è§£ï¼š</p><h3 id="3-POMæ–‡ä»¶è¯¦è§£"><a href="#3-POMæ–‡ä»¶è¯¦è§£" class="headerlink" title="3. POMæ–‡ä»¶è¯¦è§£"></a>3. <strong>POMæ–‡ä»¶è¯¦è§£</strong></h3><p><code>pom.xml</code>æ˜¯Mavené¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚å®ƒåŒ…å«äº†é¡¹ç›®çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚é¡¹ç›®ç‰ˆæœ¬ã€ä¾èµ–ã€æ’ä»¶ç­‰ã€‚ä¸€ä¸ªå…¸å‹çš„<code>pom.xml</code>æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>my-app<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Mavençš„å·¥ä½œåŸç†å’Œé…ç½®æ–¹æ³•éå¸¸å¼ºå¤§ï¼Œé€šè¿‡æ­£ç¡®é…ç½®<code>pom.xml</code>å’Œä½¿ç”¨é€‚å½“çš„æ’ä»¶ï¼Œä½ å¯ä»¥å¤§å¤§ç®€åŒ–æ„å»ºè¿‡ç¨‹ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h3 id="4-Maven-åæ ‡"><a href="#4-Maven-åæ ‡" class="headerlink" title="4. Maven åæ ‡"></a>4. Maven åæ ‡</h3><ul><li>åæ ‡æ˜¯èµ„æºjarçš„å”¯ä¸€æ ‡è¯†</li><li>ä¸»è¦ç»„æˆ<ul><li>groupId: å®šä¹‰éš¶å±ç»„ç»‡åç§°</li><li>artifactId: å®šä¹‰Mavené¡¹ç›®åç§°</li><li>version: å®šä¹‰å½“å‰ç‰ˆæœ¬å·<ul><li>SNAPSHOT: åŠŸèƒ½ä¸ç¨³å®š</li><li>RELEASEï¼š åŠŸèƒ½è¶‹äºç¨³å®šï¼Œå¯ä»¥å‘è¡Œï¼ˆå¦‚æœæ²¡å†™é‚£å°±æ˜¯è¿™ä¸ªï¼‰</li></ul></li></ul></li></ul><h3 id="5-Mavenå¯¼å…¥"><a href="#5-Mavenå¯¼å…¥" class="headerlink" title="5. Mavenå¯¼å…¥"></a>5. Mavenå¯¼å…¥</h3><ul><li>æ–¹å¼ä¸€ï¼š File -&gt; Project Structure -&gt; Modules -&gt; Import Module -&gt; é€‰æ‹©mavené¡¹ç›®çš„pom.xml</li><li>æ–¹å¼äºŒï¼š mavené¢æ¿ -&gt; +(Add Maven Project) -&gt; é€‰æ‹©mavençš„pom.xml</li></ul><blockquote><p>æ³¨æ„ï¼Œå¯¼å…¥çš„æ—¶å€™å»ºè®®æ˜¯å…ˆå¯¼å…¥åˆ°è‡ªå·±çš„ç›®å½•ä¸‹ï¼Œç„¶åé€‰æ‹©xmlè¿›è¡Œå¯¼å…¥</p></blockquote><h3 id="6-Mavenä½¿ç”¨"><a href="#6-Mavenä½¿ç”¨" class="headerlink" title="6. Mavenä½¿ç”¨"></a>6. Mavenä½¿ç”¨</h3><ol><li><p><strong>å®‰è£…Maven</strong>: ä½ å¯ä»¥é€šè¿‡<a href="https://maven.apache.org/download.cgi">å®˜ç½‘ä¸‹è½½</a>Mavençš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç„¶åé…ç½®ç¯å¢ƒå˜é‡ï¼ˆ<code>MAVEN_HOME</code>å’Œ<code>PATH</code>ï¼‰ä»¥ä¾¿åœ¨å‘½ä»¤è¡Œä½¿ç”¨ã€‚</p></li><li><p><strong>åˆå§‹åŒ–Mavené¡¹ç›®</strong>: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„Mavené¡¹ç›®ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate -DgroupId=com.example -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=<span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> è¿™ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«<code>pom.xml</code>å’Œé»˜è®¤ç›®å½•ç»“æ„ï¼ˆå¦‚<code>src/main/java</code>ï¼‰çš„Javaé¡¹ç›®ã€‚</p></li><li><p><strong>ç®¡ç†ä¾èµ–</strong>: åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­å®šä¹‰é¡¹ç›®çš„ä¾èµ–ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š<br> ä½¿ç”¨dependenciesï¼Œ å¼•å…¥åæ ‡, å¦‚æœä¸çŸ¥é“ä¾èµ–çš„åæ ‡ä¿¡æ¯ï¼Œå¯ä»¥å»<a href="https://mvnrepository.com/">MVNåæ ‡æœç´¢</a>ä¸­æœç´¢</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><strong>æ’é™¤ä¾èµ–</strong>ï¼š æŒ‡ä¸»åŠ¨æ–­å¼€èµ„æº<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>æ’é™¤ä¾èµ–å†…çš„ä¸éœ€è¦èµ„æº<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>å…·ä½“ä¸œè¥¿<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><blockquote><p>ä¸€æ—¦é…ç½®ä¾èµ–å‘é€æ”¹å˜ï¼Œè®°å¾—å»åˆ·æ–°ï¼Œ å¦‚æœå¼•å…¥ä¾èµ–æœ¬åœ°ä»“åº“ä¸å­˜åœ¨ï¼Œè®°å¾—è¿ç½‘</p></blockquote><h3 id="6-Mavençš„ç”Ÿå‘½å‘¨æœŸ"><a href="#6-Mavençš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6. Mavençš„ç”Ÿå‘½å‘¨æœŸ"></a>6. Mavençš„ç”Ÿå‘½å‘¨æœŸ</h3><p>ç”Ÿå‘½å‘¨æœŸåŒ…å«ä¸‰ä¸ª</p><ul><li>clean<ul><li>clean</li></ul></li><li>default<ul><li>compile</li><li>test</li><li>packet</li><li>install</li></ul></li><li>site</li></ul><blockquote><p>åœ¨<strong>åŒä¸€å¥—</strong>é¡¹ç›®ä¸­ï¼Œè¿è¡Œåé¢çš„é¡¹ç›®çš„æ—¶å€™ï¼Œå‰é¢çš„é¡¹ç›®éƒ½ä¼šè¿è¡Œ(æ³¨æ„åŒä¸€å¥—å“ˆ)</p></blockquote><h3 id="7-Mavenå¸¸ç”¨å‘½ä»¤"><a href="#7-Mavenå¸¸ç”¨å‘½ä»¤" class="headerlink" title="7. Mavenå¸¸ç”¨å‘½ä»¤"></a>7. <strong>Mavenå¸¸ç”¨å‘½ä»¤</strong></h3><ul><li><strong><code>mvn clean</code></strong>: æ¸…ç†é¡¹ç›®ï¼Œåˆ é™¤<code>target</code>ç›®å½•ã€‚</li><li><strong><code>mvn compile</code></strong>: ç¼–è¯‘é¡¹ç›®ã€‚</li><li><strong><code>mvn test</code></strong>: è¿è¡Œå•å…ƒæµ‹è¯•ã€‚</li><li><strong><code>mvn package</code></strong>: æ‰“åŒ…é¡¹ç›®ï¼Œç”Ÿæˆå¯æ‰§è¡Œçš„JARæˆ–WARæ–‡ä»¶ã€‚</li><li><strong><code>mvn install</code></strong>: å°†é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“ã€‚</li><li><strong><code>mvn deploy</code></strong>: å°†é¡¹ç›®éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ã€‚</li></ul><p>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç‚¹å‡»Mavenæ ç›®å†…å¯¹åº”æŒ‰é’®ï¼ˆlifecycleï¼Œ åº•å±‚è°ƒç”¨Plugenä¸­çš„æ’ä»¶ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript</title>
      <link href="/2025/03/15/JavaScript/"/>
      <url>/2025/03/15/JavaScript/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>è„šæœ¬è¯­è¨€ï¼Œä¸ç”¨ç¼–è¯‘ç›´æ¥è¿è¡Œ</li><li>ç»„æˆ<ul><li>ECMAScriptï¼š è§„å®šäº†JSåŸºç¡€è¯­æ³•æ ¸å¿ƒçŸ¥è¯†ï¼ŒåŒ…æ‹¬å˜é‡ï¼Œæ•°æ®ç±»å‹ï¼Œæµç¨‹æ§åˆ¶ï¼Œå‡½æ•°ï¼Œå¯¹è±¡ç­‰</li><li>BOMï¼š æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œç”¨äºæ“ä½œæµè§ˆå™¨æœ¬èº«ï¼Œå¦‚ï¼šé¡µé¢å¼¹çª—ï¼Œåœ°å€æ æ“ä½œï¼Œå…³é—­çª—å£ç­‰ã€‚</li><li>DOMï¼š æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œç”¨æ¥æ“ä½œHTMLæ–‡æ¡£ï¼Œå¦‚æ›´æ”¹æ ‡ç­¾å†…å†…å®¹ï¼Œæ›´æ”¹æ ‡ç­¾å†…å­—ä½“æ ·å¼</li></ul></li></ul><h2 id="JS-æ ¸å¿ƒè¯­æ³•"><a href="#JS-æ ¸å¿ƒè¯­æ³•" class="headerlink" title="JS æ ¸å¿ƒè¯­æ³•"></a>JS æ ¸å¿ƒè¯­æ³•</h2><h3 id="JSå¼•å…¥æ–¹å¼"><a href="#JSå¼•å…¥æ–¹å¼" class="headerlink" title="JSå¼•å…¥æ–¹å¼"></a>JSå¼•å…¥æ–¹å¼</h3><ul><li><p>å†…éƒ¨å¼•å…¥</p><blockquote><ul><li>å¿…é¡»åœ¨\<script\>\</script> ä¹‹é—´</li><li>åœ¨HTMLæ–‡æ¡£ä¸­å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ”¾ä»»ä½•æ•°é‡script</li><li>ä¸€èˆ¬æŠŠè„šæœ¬ç½®äº\<body>å…ƒç´ åº•éƒ¨</li></ul></blockquote></li><li><p>å¤–éƒ¨å¼•å…¥</p><blockquote><p>å†™å®Œäº†å¼•å…¥</p></blockquote></li></ul><p><strong>ä¹¦å†™è§„èŒƒ</strong> : ç»“æŸç¬¦ï¼Œæ¯è¡Œç»“å°¾ä»¥åˆ†å·ç»“å°¾ï¼Œç»“å°¾åˆ†å·å¯æœ‰å¯æ— </p><hr><h2 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ul><li>JSä¸­ç”¨ let å…³é”®å­—å£°æ˜å˜é‡ï¼ˆå¼±ç±»å‹è¯­è¨€ï¼Œ å˜é‡å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">20</span>;</span><br><span class="line">    a = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    <span class="title function_">alert</span>(a);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li>const å£°æ˜å¸¸é‡</li></ul><p>è¾“å‡ºæ–¹å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>() <span class="comment">// è¾“å‡ºåˆ°æ§åˆ¶å°</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>(a) <span class="comment">// å¼¹å‡ºè­¦å‘Šæ¡†</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>() <span class="comment">// è¾“å‡ºåˆ°htmlå†…éƒ¨</span></span><br></pre></td></tr></table></figure></p><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><ul><li>Jsæ•°æ®ç±»å‹åˆ†ä¸ºï¼š åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ï¼‰</li><li><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼š </p><ul><li>numberï¼š æ•°å­—</li><li>boolean</li><li>null ï¼š å¯¹è±¡ä¸ºç©ºï¼ˆæ³¨æ„å¤§å°å†™ï¼‰</li><li>undefinedï¼š å½“å£°æ˜çš„å˜é‡æ²¡æœ‰åˆå§‹åŒ–ï¼Œé»˜è®¤æ˜¯undefined</li><li>string<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> + æ•°æ® <span class="comment">// æŸ¥çœ‹ç±»å‹</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ¨¡æ¿å­—ç¬¦ä¸²ï¼š</p><ul><li>` ` (åå¼•å·)</li><li>å†…å®¹æ‹¼æ¥çš„æ—¶å€™ï¼Œä½¿ç”¨${} åŒ…è£¹å˜é‡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">`Tom`</span>;</span><br><span class="line">    <span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²äº†`</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="å…·åå‡½æ•°"><a href="#å…·åå‡½æ•°" class="headerlink" title="å…·åå‡½æ•°"></a>å…·åå‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">functionName</span>(<span class="params">å‚æ•°ä¸€ï¼Œ å‚æ•°äºŒ</span>) &#123;</span><br><span class="line">    <span class="comment">// è¦æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    (<span class="keyword">return</span> å€¼)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„é“å‡½æ•°å“ªæ€•æœ‰è¿”å›å€¼ä¹Ÿä¸æ˜¾ç¤º</p><ul><li>JSæ˜¯å¼±ç±»å‹ï¼Œå‚æ•°å’Œè¿”å›å€¼éƒ½æ²¡æœ‰æ˜¾ç¤ºç±»å‹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let c = add(a, b);</span><br><span class="line">alert(c);</span><br></pre></td></tr></table></figure><p>è°ƒç”¨æ—¶å€™å¦‚æœä¼ å…¥äº†è¿‡å¤šçš„å‚æ•°ï¼Œåªè°ƒç”¨å‰å‡ ä¸ªå‚æ•°ã€‚</p><h4 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> add = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¯¹è±¡"><a href="#è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="è‡ªå®šä¹‰å¯¹è±¡"></a>è‡ªå®šä¹‰å¯¹è±¡</h3><ul><li>å®šä¹‰æ ¼å¼ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> å¯¹è±¡å = &#123;</span><br><span class="line">    å±æ€§å<span class="number">1</span>ï¼š å±æ€§å€¼<span class="number">1</span></span><br><span class="line">    å±æ€§<span class="number">2</span> : å±æ€§å€¼<span class="number">2</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    æ–¹æ³•åï¼š <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>e.g:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    name = <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">    <span class="attr">sing</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;å”±ç€å¥½è¿æ¥&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„åœ¨å®šä¹‰æ–¹æ³•æ—¶å€™ä¸€èˆ¬ä¸ç”¨ â€œ =&gt; â€œ, ç”±äºæ­¤æ—¶thisæŒ‡å‘çš„ä¸æ˜¯å½“å‰å¯¹è±¡è€Œå¯èƒ½æ˜¯ä»–çš„çˆ¶çº§å¯¹è±¡</p><hr><h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><ul><li>JavaScript Object Notation, JavaScriptå¯¹è±¡æ ‡è®°æ–‡æœ¬ï¼ˆJSå†™çš„æ–‡æœ¬ï¼‰</li><li>å¤šä½œä¸ºæ•°æ®è½½ä½“</li><li>æœ¬è´¨æ˜¯ä¸€äº›å­—ç¬¦ä¸²</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JSON.parse() <span class="comment">// å˜JS</span></span><br><span class="line">JSON.stringify() <span class="comment">// å˜JSON</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;å°¼å¥½&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(person); <span class="comment">// è¾“å‡ºobjectï¼Œçœ‹ä¸å‡ºé‡Œé¢å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(person)) <span class="comment">// è¾“å‡ºå¯¹è±¡é‡Œé¢æ‰€æœ‰å±æ€§ï¼Œå› ä¸ºå˜æˆäº†æ–‡æœ¬</span></span><br></pre></td></tr></table></figure><hr><h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><ul><li>æ–‡æœ¬å¯¹è±¡æ¨¡å‹ï¼Œå°†æ•´ä¸ªæ ‡è®°è¯­è¨€ï¼ˆhtmlï¼‰å°è£…æˆæ–‡æ¡£å¯¹è±¡</li><li><p>åˆ†ä¸ºä»¥ä¸‹éƒ¨åˆ†</p><ul><li>Documentï¼š æ•´ä¸ªæ–‡æ¡£å¯¹è±¡</li><li>Elementï¼š å…ƒç´ å¯¹è±¡</li><li>Attributeï¼š å±æ€§å¯¹è±¡</li><li>Textï¼š æ–‡æœ¬å¯¹è±¡</li><li>Commentï¼š æ³¨é‡Šå¯¹è±¡</li></ul></li><li><p>æ ¸å¿ƒæ€æƒ³ï¼š å°†é¡µé¢ä¸­æ‰€æœ‰å…ƒç´ çœ‹å‡ºå¯¹è±¡</p></li></ul><p><strong>æ“ä½œ</strong> : </p><ul><li>è·å–DOMå…ƒç´ å¯¹è±¡<br>æ ¹æ®CSSé€‰æ‹©å™¨è·å–DOMå…ƒç´ ï¼Œ</li><li>æŸ¥çœ‹æ–‡æ¡£ <a href="https://www.w3school.com.cn/">w3school åœ¨çº¿æ•™ç¨‹</a> è·å¾—å¯¹åº”å±æ€§çš„æ“ä½œ</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span> = <span class="string">&quot;Title1&quot;</span>&gt;</span> 1111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>22222<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>33333<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="comment">// ä¿®æ”¹ç¬¬ä¸€ä¸ªh1æ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="comment">// 1.1 è·å–DOMå¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="keyword">let</span> h1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#Title1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="comment">//1.2 è°ƒç”¨DOMå¯¹è±¡ä¸­çš„å±æ€§æˆ–è€…æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  h1.<span class="property">innerHTML</span> = <span class="string">&#x27;ä¿®æ”¹åçš„æ–‡æœ¬&#x27;</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â Â </span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â Â <span class="comment">// ä½¿ç”¨querySecectorAllè¿”å›ä¸€ä¸ªæ•°ç»„</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="keyword">let</span> hs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;h1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  hs[<span class="number">0</span>].<span class="property">innerHTML</span> = <span class="string">&#x27;ä¿®æ”¹å…ƒç´ &#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">Â  Â  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><ul><li>è¯­æ³•ï¼š <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">äº‹ä»¶æº.<span class="title function_">addEventListener</span>(<span class="string">&#x27;æ—¶é—´ç±»å‹&#x27;</span>, äº‹ä»¶è§¦å‘æ‰§è¡Œå‡½æ•°);</span><br></pre></td></tr></table></figure></li></ul><p>e.g<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‚¹æˆ‘&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  <span class="comment">// äº‹ä»¶ç›‘å¬</span></span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btn1&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  Â  Â  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯•è¯•å°±è¯•è¯•&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">Â  Â  Â  Â  &#125;);</span></span><br><span class="line"><span class="language-javascript">Â  Â  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ï¼ˆå’Œcfä¸€å¼€å§‹æ—¶å€™Go to the task list æ˜¯ä¸€ä¸ªé“ç½¢ï¼‰</p><ul><li>æ—©æœŸå†™æ³•ï¼š <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">äº‹ä»¶æº.<span class="property">on</span>äº‹ä»¶ = <span class="keyword">function</span>(<span class="params"></span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>å¸¸è§äº‹ä»¶</strong></p><ul><li>é¼ æ ‡äº‹ä»¶<ul><li>clickï¼š é¼ æ ‡ç‚¹å‡»</li><li>mouseenter: é¼ æ ‡ç§»å…¥</li><li>mouseleaveï¼š é¼ æ ‡ç§»å‡º<ul><li>é”®ç›˜äº‹ä»¶</li><li>keydown: é”®ç›˜æŒ‰ä¸‹è§¦å‘</li><li>keyup: é”®ç›˜æŠ¬èµ·è§¦å‘</li><li>ç„¦ç‚¹äº‹ä»¶</li><li>focus: è·å¾—ç„¦ç‚¹è§¦å‘</li><li>blur: å¤±å»ç„¦ç‚¹è§¦å‘</li><li>è¡¨å•äº‹ä»¶</li><li>input: ç”¨æˆ·è¾“å…¥æ—¶è§¦å‘</li><li>submit: ç”¨æˆ·æäº¤æ—¶è§¦å‘</li></ul></li></ul></li></ul><blockquote><p>äº‹ä»¶ç›‘å¬ä¼˜åŒ–ï¼š</p></blockquote><p>å¦‚æœæŸä¸ªæ–¹æ³•éœ€è¦å¤šæ¬¡ä½¿ç”¨å¯ä»¥è€ƒè™‘å°†å…¶å•ç‹¬å†™æˆä¸€ä¸ªå·¥å…·ç±»ï¼ˆjsæ–‡ä»¶å†…ï¼ŒåŒæ—¶åœ¨å½“å‰å¼•å…¥JSä½¿å¾—ä¸å¿…è¦å¤ªè¿‡ç¹çï¼‰.</p><p>å®šä¹‰æ—¶å€™export<br>å¼•å…¥çš„æ—¶å€™import</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">printlog</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ( printLog ) <span class="keyword">from</span> <span class="string">&#x27;./XXX.js&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç¼–ç¨‹</title>
      <link href="/2025/03/12/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
      <url>/2025/03/12/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="åŸºæœ¬çš„é€šä¿¡æ¶æ„"><a href="#åŸºæœ¬çš„é€šä¿¡æ¶æ„" class="headerlink" title="åŸºæœ¬çš„é€šä¿¡æ¶æ„"></a>åŸºæœ¬çš„é€šä¿¡æ¶æ„</h2><ul><li>åŸºæœ¬çš„é€šä¿¡æ¶æ„åŒ…æ‹¬ä¸¤ç§ : CSæ¶æ„ï¼ˆClientå®¢æˆ·ç«¯/ServeræœåŠ¡ç«¯), ï¼Œ Céœ€è¦ç¨‹åºå‘˜å¼€å‘</li><li>BSæ¶æ„ï¼ˆBrowseræµè§ˆå™¨/Serveræ¶æ„) : Bä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘</li></ul><blockquote><p>ç½‘ç»œé€šä¿¡ä¸‰è¦ç´  : IP,  ç«¯å£ï¼Œ åè®®</p><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3></blockquote><ul><li>InetAddress</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demoInetAddress;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">package</span> demoInetAddress;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Net</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="comment">// 1. è·å–æœ¬æœºIPå¯¹è±¡  </span></span><br><span class="line">            <span class="type">InetAddress</span> <span class="variable">ip1</span> <span class="operator">=</span> InetAddress.getLocalHost();  </span><br><span class="line">            System.out.println(ip1.getHostName());  </span><br><span class="line">            System.out.println(ip1.getHostAddress());  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// è·å–å¯¹è±¡IP  </span></span><br><span class="line">            <span class="type">InetAddress</span> <span class="variable">ip2</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);  </span><br><span class="line">            System.out.println(ip2.getHostName());  </span><br><span class="line">            System.out.println(ip2.getHostAddress());  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯é€šçš„  </span></span><br><span class="line">            System.out.println(ip2.isReachable(<span class="number">5000</span>));  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h3><p>ç”¨æ¥æ ‡è®°è®¡ç®—æœºè®¾å¤‡ä¸Šæ­£åœ¨è¿è¡Œçš„è®¾å¤‡<br>ç«¯å£åˆ†ç±»</p><ul><li>å‘¨çŸ¥ç«¯å£ï¼š0 - 1023 è¢«é¢„å…ˆå®šä¹‰çš„ç«¯å£ï¼š ï¼ˆHTTPæ˜¯80ï¼Œ FTPæ˜¯21ï¼‰</li><li>æ³¨å†Œç«¯å£: 1024 - 49151</li><li>åŠ¨æ€ç«¯å£ 49152 - 65535</li></ul><p>ä¸€èˆ¬å¼€å‘ä½¿ç”¨æ³¨å†Œç«¯å£ï¼Œä¸”ä¸€ä¸ªè®¾å¤‡ä¸èƒ½å‡ºç°ä¸¤ä¸ªç¨‹åºç«¯å£å·ä¸€æ ·</p><h3 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h3><p>äº‹å…ˆçš„ä¸€äº›è§„åˆ™</p><hr><h2 id="C-S-æ¶æ„ï¼ˆé‡å®ç°ï¼‰"><a href="#C-S-æ¶æ„ï¼ˆé‡å®ç°ï¼‰" class="headerlink" title="C / S æ¶æ„ï¼ˆé‡å®ç°ï¼‰"></a>C / S æ¶æ„ï¼ˆé‡å®ç°ï¼‰</h2><h3 id="UDPé€šä¿¡å®ç°"><a href="#UDPé€šä¿¡å®ç°" class="headerlink" title="UDPé€šä¿¡å®ç°"></a>UDPé€šä¿¡å®ç°</h3><ul><li>ç‰¹ç‚¹ï¼š æ— è¿æ¥ï¼Œä¸å¯é é€šä¿¡</li><li>ä¸äº‹å…ˆå»ºç«‹é“¾æ¥ï¼š å‘é€ç«¯æ¯æ¬¡æŠŠè¦å‘é€çš„æ•°æ®é™åˆ¶åœ¨64Kå†…</li><li>Javaæä¾›ç±»åŒ…ï¼š <strong>java.net.DatagramSocket</strong> å®ç°UDPé€šä¿¡</li></ul><p>ä½¿ç”¨æ–¹æ³• : </p><ul><li>åˆ›å»º<ul><li>å®¢æˆ·ç«¯socket = new socket</li><li>æ¥æ”¶ç«¯socket = new socket(int port)<ul><li>æ¥å—å’Œå‘é€</li><li>socket.receive()</li><li>socket.send</li><li>æ•°æ®åŒ…çš„æ–°å»º</li><li>DatagramPacket(bytes[], length,  ç›®çš„åœ°å€IPï¼Œ ç›®çš„åœ°å€ç«¯å£) // å‘é€ç«¯</li><li>DatagramPacket(bytes[], length)</li></ul></li></ul></li></ul><h4 id="1-å®ç°1-ä¸€å‘ä¸€æ”¶ï¼š"><a href="#1-å®ç°1-ä¸€å‘ä¸€æ”¶ï¼š" class="headerlink" title="1. å®ç°1: ä¸€å‘ä¸€æ”¶ï¼š"></a>1. å®ç°1: ä¸€å‘ä¸€æ”¶ï¼š</h4><blockquote><p>UDPclient:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UDP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;  </span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPclient</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// åˆ›å»ºå‘é€ç«¯  </span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// åˆ›å»ºæ•°æ®åŒ…è¦å‘é€çš„å¯¹è±¡  </span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="string">&quot;æˆ‘æ˜¯å®¢æˆ·ç«¯,çº¦ä½ ä»Šæ™šæ‰“codeforce&quot;</span>.getBytes();  </span><br><span class="line">        <span class="comment">/**  </span></span><br><span class="line"><span class="comment">         * public DatagramPacket(byte[] buf, int len, InetAdress address, int port)         * å‘é€çš„æ•°æ®ï¼Œå­—èŠ‚æ•°ç»„  </span></span><br><span class="line"><span class="comment">         * å‘é€çš„å­—èŠ‚é•¿åº¦  </span></span><br><span class="line"><span class="comment">         * ç›®çš„åœ°å€çš„IP  </span></span><br><span class="line"><span class="comment">         * ç›®çš„åœ°ç«¯å£  </span></span><br><span class="line"><span class="comment">         */</span>  </span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length, InetAddress.getLocalHost(), <span class="number">8080</span>);  </span><br><span class="line">        socket.send(packet);  </span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>UDPserver</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UDP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPserver</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯å¯¹è±¡ï¼Œç»„æµ‹ç«¯å£  </span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">8080</span>);  <span class="comment">// å¿…é¡»è¦è¡¨æ˜åœ¨å“ªä¸ªç«¯å£æ¥æ”¶</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡è´Ÿè´£æ¥æ”¶æ•°æ®  </span></span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">64</span>];  </span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buf, buf.length);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// æ¥å—æ•°æ®  </span></span><br><span class="line">        socket.receive(packet);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// çœ‹åˆ°æ•°æ®æ˜¯å¦æ˜¯æ”¶åˆ°äº†  </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> packet.getLength();  </span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buf, <span class="number">0</span>, len);  </span><br><span class="line">        System.out.println(data);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// è·å–å¯¹æ–¹çš„IPå’Œç«¯å£  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> packet.getAddress().getHostAddress();  </span><br><span class="line">        <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> packet.getPort();  </span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">&quot;å¯¹æ–¹IP : &quot;</span> + ip + <span class="string">&quot; port &quot;</span> + port);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„å…ˆå¯åŠ¨æœåŠ¡ç«¯ç›‘å¬åœ¨ä½¿ç”¨å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ï¼Œå³å¯å®ç°é€šä¿¡</p><h4 id="å¤šå‘å¤šæ”¶"><a href="#å¤šå‘å¤šæ”¶" class="headerlink" title="å¤šå‘å¤šæ”¶"></a>å¤šå‘å¤šæ”¶</h4><blockquote><p>UDPserver:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UDP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPserver</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯å¯¹è±¡ï¼Œç»„æµ‹ç«¯å£  </span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">8080</span>);  </span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">64</span>];  </span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buf, buf.length);  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">            socket.receive(packet);  </span><br><span class="line">  </span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> packet.getLength();  </span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buf, <span class="number">0</span>, len);  </span><br><span class="line">            System.out.println(msg);  </span><br><span class="line">  </span><br><span class="line">            <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> packet.getAddress().getHostAddress();  </span><br><span class="line">            <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> packet.getPort();  </span><br><span class="line">  </span><br><span class="line">            System.out.println(<span class="string">&quot;å¯¹æ–¹IP : &quot;</span> + ip + <span class="string">&quot; port &quot;</span> + port);  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>UDPclient:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> UDP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;  </span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;  </span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPclient</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// åˆ›å»ºå‘é€ç«¯  </span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();  </span><br><span class="line">        <span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> in.nextLine();  </span><br><span class="line">            <span class="type">byte</span>[] bytes = msg.getBytes();  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (msg == <span class="string">&quot;exit&quot;</span>) &#123;  </span><br><span class="line">                socket.close();  </span><br><span class="line">                <span class="keyword">break</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">            </span><br><span class="line">            System.out.println(<span class="string">&quot;å‘é€æˆåŠŸ&quot;</span>);  </span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, bytes.length, InetAddress.getLocalHost(), <span class="number">8080</span>);  </span><br><span class="line">            socket.send(packet);  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><hr><h3 id="TCP-é€šä¿¡å®ç°"><a href="#TCP-é€šä¿¡å®ç°" class="headerlink" title="TCP é€šä¿¡å®ç°"></a>TCP é€šä¿¡å®ç°</h3><p>å‘é€ç«¯ï¼š<br>ä½¿ç”¨Socketåˆ›å»ºå’Œå‘é€ä¿¡æ¯ï¼Œå°†ç®¡é“åŒ…è£…æˆOutputStreamæ–¹ä¾¿ä¼ è¾“å„ç§æ•°æ®<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socket(<span class="type">int</span> IP, <span class="type">int</span> port) <span class="comment">// å‘é€åœ°å€ï¼Œå½“å‰ç«¯å£</span></span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutput;  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// 1. å¸¸è§çš„Socketç®¡é“å¯¹è±¡ï¼Œè¯·æ±‚ä¸æœåŠ¡ç«¯Socketé“¾æ¥ï¼Œå¯é é“¾æ¥  </span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9999</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 2. ä»socketé€šä¿¡ç®¡é“å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµ  </span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 3. ç‰¹æ®Šæ•°æ®æµ  </span></span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(os);  </span><br><span class="line">        dos.writeInt(<span class="number">1</span>);  </span><br><span class="line">        dos.writeUTF(<span class="string">&quot;ä»Šæ—¥ä¸€åˆ«,ä¸çŸ¥ä½•æ—¶ä¸å›å†ç›¸è§&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        socket.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡ç«¯ï¼š<br>ServerSocket :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ServerSocket</span><span class="params">(<span class="type">int</span> port)</span></span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">publicSocket <span class="title function_">accept</span><span class="params">()</span> <span class="comment">// é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯é“¾æ¥ï¼Œä¸€æ—¦æœ‰å®¢æˆ·ç«¯é“¾æ¥æ”¾å›Socketå¯¹è±¡ä»£è¡¨æœåŠ¡ç«¯ç®¡é“</span></span><br></pre></td></tr></table></figure></p><h4 id="å®ç°ï¼š-ä¸€å‘ä¸€æ”¶"><a href="#å®ç°ï¼š-ä¸€å‘ä¸€æ”¶" class="headerlink" title="å®ç°ï¼š ä¸€å‘ä¸€æ”¶"></a>å®ç°ï¼š ä¸€å‘ä¸€æ”¶</h4><blockquote><p>Server:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="comment">// åˆ›å»ºServerSocketå¯¹è±¡ï¼Œç»‘å®šç«¯å£å·ï¼Œç›‘å¬å®¢æˆ·ç«¯é“¾æ¥  </span></span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// è°ƒç”¨acceptæ–¹æ³•ï¼Œé˜»å¡ç­‰å¾…å®¢æˆ·ç«¯é“¾æ¥ï¼Œä¸€æ—¦æœ‰å®¢æˆ·ç«¯é“¾æ¥ä¼šè¿”å›ä¸€ä¸ªSocketç±»å‹å¯¹è±¡  </span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">//è·å–è¾“å…¥æµï¼Œè¯»å–å®¢æˆ·ç«¯å‘é€æ•°æ®  </span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// æŠŠå­—èŠ‚è¾“å…¥æµåŒ…è£…æˆç‰¹æ®Šæ•°æ®æµ  </span></span><br><span class="line">            <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(is);  </span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> dis.readInt();  </span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> dis.readUTF();  </span><br><span class="line">            System.out.println(<span class="string">&quot;id = &quot;</span> + id + <span class="string">&quot; æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯: &quot;</span> + msg);  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// æ‹¿åˆ°IPå’Œç«¯å£  </span></span><br><span class="line">            System.out.println(<span class="string">&quot;IP&quot;</span> + socket.getInetAddress().getHostAddress());  </span><br><span class="line">            System.out.println(<span class="string">&quot;ç«¯å£:&quot;</span> + socket.getPort());  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutput;  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// 1. å¸¸è§çš„Socketç®¡é“å¯¹è±¡ï¼Œè¯·æ±‚ä¸æœåŠ¡ç«¯Socketé“¾æ¥ï¼Œå¯é é“¾æ¥  </span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9999</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 2. ä»socketé€šä¿¡ç®¡é“å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµ  </span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 3. ç‰¹æ®Šæ•°æ®æµ  </span></span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(os);  </span><br><span class="line">        dos.writeInt(<span class="number">1</span>);  </span><br><span class="line">        dos.writeUTF(<span class="string">&quot;ä»Šæ—¥ä¸€åˆ«,ä¸çŸ¥ä½•æ—¶ä¸å›å†ç›¸è§&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        socket.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å¤šå‘å¤šæ”¶-1"><a href="#å¤šå‘å¤šæ”¶-1" class="headerlink" title="å¤šå‘å¤šæ”¶"></a>å¤šå‘å¤šæ”¶</h4><p>Client:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutput;  </span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="comment">// 1. å¸¸è§çš„Socketç®¡é“å¯¹è±¡ï¼Œè¯·æ±‚ä¸æœåŠ¡ç«¯Socketé“¾æ¥ï¼Œå¯é é“¾æ¥  </span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9999</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 2. ä»socketé€šä¿¡ç®¡é“å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµ  </span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 3. ç‰¹æ®Šæ•°æ®æµ  </span></span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(os);  </span><br><span class="line">        <span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) &#123;  </span><br><span class="line">            String s;  </span><br><span class="line">            s = in.nextLine();  </span><br><span class="line">            <span class="keyword">if</span> (s == <span class="string">&quot;exit&quot;</span>) &#123;  </span><br><span class="line">                <span class="keyword">break</span>;  </span><br><span class="line">            &#125;            </span><br><span class="line">            dos.writeUTF(s);  </span><br><span class="line">            dos.flush();  </span><br><span class="line">        &#125;        </span><br><span class="line">        socket.close();  </span><br><span class="line">        dos.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Server<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="comment">// åˆ›å»ºServerSocketå¯¹è±¡ï¼Œç»‘å®šç«¯å£å·ï¼Œç›‘å¬å®¢æˆ·ç«¯é“¾æ¥  </span></span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// è°ƒç”¨acceptæ–¹æ³•ï¼Œé˜»å¡ç­‰å¾…å®¢æˆ·ç«¯é“¾æ¥ï¼Œä¸€æ—¦æœ‰å®¢æˆ·ç«¯é“¾æ¥ä¼šè¿”å›ä¸€ä¸ªSocketç±»å‹å¯¹è±¡  </span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">//è·å–è¾“å…¥æµï¼Œè¯»å–å®¢æˆ·ç«¯å‘é€æ•°æ®  </span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// æŠŠå­—èŠ‚è¾“å…¥æµåŒ…è£…æˆç‰¹æ®Šæ•°æ®æµ  </span></span><br><span class="line">            <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(is);  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> dis.readUTF();  </span><br><span class="line">                System.out.println(<span class="string">&quot; æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯: &quot;</span> + msg);  </span><br><span class="line">  </span><br><span class="line">                <span class="comment">// æ‹¿åˆ°IPå’Œç«¯å£  </span></span><br><span class="line">                System.out.println(<span class="string">&quot;IP&quot;</span> + socket.getInetAddress().getHostAddress());  </span><br><span class="line">                System.out.println(<span class="string">&quot;ç«¯å£:&quot;</span> + socket.getPort());  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨æ„åˆ°ä»¥ä¸Šåªèƒ½æœ‰ä¸€ä¸ªæ¥æ”¶ç«¯ï¼Œå› ä¸ºåªæ¥å—äº†ä¸€ä¸ªsocketï¼Œæƒ³å®ç°å¤šä¸ªæ¥æ”¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼šä½¿ç”¨ä¸»çº¿ç¨‹æ¥å—å®¢æˆ·é“¾æ¥ï¼Œå¯¹äºæ¯ä¸ªå®¢æˆ·æ–°å¼€ä¸€ä¸ªçº¿ç¨‹ã€‚<br>å¯ä»¥æ¥å—å¤šä¸ªClientçš„Server<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> TCP;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;  </span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;  </span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;  </span><br><span class="line"><span class="keyword">import</span> java.net.Socket;  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">K</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> Socket socket;  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">K</span><span class="params">(Socket socket)</span> &#123;  </span><br><span class="line">        <span class="built_in">this</span>.socket = socket;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();  </span><br><span class="line">            <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(is);  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> dis.readUTF();  </span><br><span class="line">                System.out.println(<span class="string">&quot; æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯: &quot;</span> + msg);  </span><br><span class="line">  </span><br><span class="line">                <span class="comment">// æ‹¿åˆ°IPå’Œç«¯å£  </span></span><br><span class="line">                System.out.println(<span class="string">&quot;IP&quot;</span> + socket.getInetAddress().getHostAddress());  </span><br><span class="line">                System.out.println(<span class="string">&quot;ç«¯å£:&quot;</span> + socket.getPort());  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸‹çº¿äº†&quot;</span>); <span class="comment">// æˆ–è€…å†™åœ¨Final</span></span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);  </span><br><span class="line">            <span class="comment">// è°ƒç”¨acceptæ–¹æ³•ï¼Œé˜»å¡ç­‰å¾…å®¢æˆ·ç«¯é“¾æ¥ï¼Œä¸€æ—¦æœ‰å®¢æˆ·ç«¯é“¾æ¥ä¼šè¿”å›ä¸€ä¸ªSocketç±»å‹å¯¹è±¡  </span></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> ss.accept();  </span><br><span class="line">                System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">&quot;ä¸Šçº¿äº†&quot;</span>);  </span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">K</span>(socket).start();  </span><br><span class="line">            &#125;       </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><hr><h2 id="B-Sæ¶æ„"><a href="#B-Sæ¶æ„" class="headerlink" title="B / Sæ¶æ„"></a>B / Sæ¶æ„</h2><p> waiting for learning</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹</title>
      <link href="/2025/03/10/%E7%BA%BF%E7%A8%8B/"/>
      <url>/2025/03/10/%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰"></a>è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰</h2><ul><li>è¿›ç¨‹ï¼š ä¸€ä¸ªåº”ç”¨ç¨‹åº</li><li>çº¿ç¨‹ï¼š ä¸€ä¸ªè¿›ç¨‹å†…çš„å¤šä¸ªå¤„ç†éƒ¨åˆ†</li></ul><p>æ¯å½“å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼ŒCPUä¼šåˆ†é…ç»™è¿›ç¨‹ä¸€éƒ¨åˆ†æ—¶é—´å•å…ƒï¼Œè¿›ç¨‹å†…çš„çº¿ç¨‹å¯ä»¥è°ƒç”¨æœ¬è¿›ç¨‹å†…çš„èµ„æº</p><blockquote><p>eg.</p></blockquote><p>å¯¹äºJavaç¨‹åºæ¥è¯´ï¼Œåœ¨DOSå‘½ä»¤çª—å£ä¸­è¾“å…¥ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java HelloWorld</span><br></pre></td></tr></table></figure></p><p>å›è½¦åï¼Œä¼šå…ˆå¯åŠ¨JVMï¼Œ JVMå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä¹‹åJVMåœ¨å¯åŠ¨ä¸€ä¸ªä¸»çº¿ç¨‹è°ƒç”¨mainæ–¹æ³•ï¼ˆmainå°±æ˜¯ä¸»çº¿ç¨‹ï¼‰<br>åŒæ—¶å¯åŠ¨åƒåœ¾å›æ”¶çº¿ç¨‹å¤åˆ¶çœ‹æŠ¤ï¼Œå›æ”¶åƒåœ¾</p><p>æœ€èµ·ç ï¼ŒJavaç¨‹åºè‡³å°‘æœ‰ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘ï¼Œä¸€ä¸ªæ˜¯<strong>åƒåœ¾å›æ”¶æœºåˆ¶</strong>ï¼Œ ä¸€ä¸ªæ˜¯<strong>mainçš„ä¸»çº¿ç¨‹</strong>ã€‚</p><hr><h2 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><ul><li>å‡ºç”ŸçŠ¶æ€</li><li>å°±ç»ªçŠ¶æ€</li><li>æ‰§è¡ŒçŠ¶æ€</li><li>é˜»å¡çŠ¶æ€</li><li>ç­‰å¾…çŠ¶æ€</li><li>æ­»äº¡çŠ¶æ€</li></ul><hr><h2 id="çº¿ç¨‹çš„æ„é€ æ–¹æ³•"><a href="#çº¿ç¨‹çš„æ„é€ æ–¹æ³•" class="headerlink" title="çº¿ç¨‹çš„æ„é€ æ–¹æ³•"></a>çº¿ç¨‹çš„æ„é€ æ–¹æ³•</h2><blockquote><p>å®ç°çº¿ç¨‹ä¸»è¦æ˜¯é€šè¿‡ä¸¤ç§Javaæä¾›çš„æ–¹å¼ï¼Œ åˆ†åˆ«ä¸ºç»§æ‰¿Java.lang.Threadç±»ä¸å®ç°Java,lang.Runnableæ¥å£</p></blockquote><h3 id="1-ç»§æ‰¿Threadç±»"><a href="#1-ç»§æ‰¿Threadç±»" class="headerlink" title="1. ç»§æ‰¿Threadç±»"></a>1. ç»§æ‰¿Threadç±»</h3><p>Threadç±»å°è£…å¥½äº†çº¿ç¨‹è¿ä½œçš„åŸºæœ¬æ“ä½œï¼Œé€šè¿‡ç»§æ‰¿Threadç±»å®ç°çº¿ç¨‹ï¼Œåªéœ€è¦è¦†ç›–Threadç±»é‡Œé¢çš„runæ–¹æ³•ï¼Œä¹‹åè°ƒç”¨start()æ–¹æ³•å¯ä»¥å¯åŠ¨çº¿ç¨‹ã€‚å¦‚æœæ²¡æœ‰è°ƒç”¨startæ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡åªæ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„çº¿ç¨‹</p><blockquote><p>å®é™…ä¸Šï¼Œstartæ–¹æ³•è°ƒç”¨äº†runæ–¹æ³•,å¦‚æœstartæ–¹æ³•è°ƒç”¨ä¸€ä¸ªå¯åŠ¨äº†çš„çº¿ç¨‹ï¼Œä¼šæŠ›å‡ºIllegalThreadStateExceptionå¼‚å¸¸</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Thread</span><span class="params">(String name)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Thread</span><span class="params">(Runnable target)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Thread</span><span class="params">(Runnable target, String name)</span></span><br></pre></td></tr></table></figure><h3 id="2-å®ç°Runnableæ¥å£"><a href="#2-å®ç°Runnableæ¥å£" class="headerlink" title="2.å®ç°Runnableæ¥å£"></a>2.å®ç°Runnableæ¥å£</h3><p>å¦‚æœä½ çš„ç±»ç»§æ‰¿è‡ªä¸€ä¸ªä¸æ˜¯Threadçš„ç±»ï¼Œä½†æ˜¯ä½ åˆæƒ³å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™æ—¶ä½ éœ€è¦å®ç°Runnableæ¥å£å»å®ç°ã€‚å®è´¨ä¸Šï¼ŒRunnableæ˜¯å…³è”äº†ä¸€ä¸ªThreadç±»ï¼Œå®ç°runæ¥å£ç›¸å½“äºå®ç°äº†Threadç±»çš„runæ–¹æ³•ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwingandThread</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="type">private</span> <span class="variable">JLabel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JLabel</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Thread t;</span><br><span class="line">    <span class="type">private</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Container</span> <span class="variable">container</span> <span class="operator">=</span> getContentPane();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SwingandThread</span><span class="params">()</span> &#123;</span><br><span class="line">        ... <span class="comment">// å†™å…¥ä¸€äº›æ–¹æ³•</span></span><br><span class="line">        t = <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                ...<span class="comment">// å®ç°run</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥è°ƒç”¨è¿™ä¸ªThreadï¼Œ æ³¨æ„é“å†™æ¥å£çš„æ—¶å€™å¯ä»¥ç›´æ¥Lambda</p><h3 id="3-å®ç°Callableæ¥å£"><a href="#3-å®ç°Callableæ¥å£" class="headerlink" title="3. å®ç°Callableæ¥å£"></a>3. å®ç°Callableæ¥å£</h3><blockquote><p>å‰ä¸¤ç§çº¿ç¨‹åˆ›å»ºæ–¹å¼éƒ½å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š </p><ul><li>å‡å¦‚çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åæœ‰ä¸€äº›æ•°æ®éœ€è¦æ”¾å›ï¼Œä½†æ˜¯ä»–ä»¬çš„runæ–¹æ³•éƒ½ä¸èƒ½è¿”å›æ¥å£</li></ul></blockquote><ul><li>JDK 5.0æä¾›äº†Callableæ¥å£å’ŒFutureTaskç±»æ¥å®ç°ï¼ˆå¤šçº¿ç¨‹çš„ç¬¬ä¸‰ç§åˆ›å»ºæ–¹å¼ï¼‰ã€‚</li><li>æœ€å¤§çš„ä¼˜ç‚¹ï¼Œå¯ä»¥æ”¾è¿”å›çº¿ç¨‹ç»“æŸçš„ç»“æœ<br>futureTaskæœ¬èº«æ˜¯ä¸€ä¸ªrunnableç±»çš„å¯¹è±¡ï¼Œå®ç°äº†runnableæ¥å£</li></ul><p>æ­¥éª¤ï¼š</p><ul><li>å®šä¹‰ç±»å®ç°Callableæ¥å£ï¼ŒæŠŠCallableå°è£…æˆFutureTaskç±»</li><li>ç”¨FutureTaskåˆ›å»ºçº¿ç¨‹</li><li>è°ƒç”¨è¿›ç¨‹</li><li>é€šè¿‡FutureTaskç±»å¾—åˆ°æ‰§è¡Œç»“æœ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        Callable&lt;String&gt; t = <span class="keyword">new</span> <span class="title class_">MyCallable</span>(<span class="number">100</span>);  </span><br><span class="line">        FutureTask&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(t);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);  </span><br><span class="line">        t1.start();  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="comment">// å¦‚æœçº¿ç¨‹è¿˜æœªæ‰§è¡Œå®Œæ¯•ï¼Œä¼šè®©å‡ºCPUç­‰ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå¾€ä¸‹æ‰§è¡Œã€‚</span></span><br><span class="line">            System.out.println(s.get()); <span class="comment">// è·å¾—è¿”å›å€¼  </span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> n;  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCallable</span><span class="params">(<span class="type">int</span> c)</span> &#123;  </span><br><span class="line">        n = c;  </span><br><span class="line">    &#125;    <span class="comment">// 2.å®ç°callï¼Œå®šä¹‰çº¿ç¨‹æ‰§è¡Œä½“  </span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;  </span><br><span class="line">            sum += i;  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å­çº¿ç¨‹è®¡ç®—ç»“æœ:&quot;</span> + sum;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ“ä½œçº¿ç¨‹çš„æ–¹æ³•"><a href="#æ“ä½œçº¿ç¨‹çš„æ–¹æ³•" class="headerlink" title="æ“ä½œçº¿ç¨‹çš„æ–¹æ³•"></a>æ“ä½œçº¿ç¨‹çš„æ–¹æ³•</h2><ul><li>run</li><li>start</li><li>String getName() : é»˜è®¤æ˜¯Thread-ç´¢å¼•ï¼Œä¸»çº¿ç¨‹æ˜¯â€main â€œ</li><li>setName(String name)</li><li>public static Thread currentThread() // è·å–å½“å‰æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡</li><li>sleep()</li><li>public final void join().. : è®©è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œ<h3 id="1-çº¿ç¨‹çš„ä¼‘çœ "><a href="#1-çº¿ç¨‹çš„ä¼‘çœ " class="headerlink" title="1. çº¿ç¨‹çš„ä¼‘çœ "></a>1. çº¿ç¨‹çš„ä¼‘çœ </h3></li></ul><p>ä¸€ç§èƒ½è°ƒç”¨çº¿ç¨‹çš„æ–¹æ³•æ˜¯è°ƒç”¨ <strong>sleep()</strong> æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ˆæ¯«ç§’ï¼‰, ä½¿å¾—çº¿ç¨‹ä¼‘çœ </p><ul><li>sleepè¯­æ³•<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-çº¿ç¨‹ä¼˜å…ˆè°ƒç”¨-çº¿ç¨‹æ’é˜Ÿ"><a href="#2-çº¿ç¨‹ä¼˜å…ˆè°ƒç”¨-çº¿ç¨‹æ’é˜Ÿ" class="headerlink" title="2. çº¿ç¨‹ä¼˜å…ˆè°ƒç”¨(çº¿ç¨‹æ’é˜Ÿ)"></a>2. çº¿ç¨‹ä¼˜å…ˆè°ƒç”¨(çº¿ç¨‹æ’é˜Ÿ)</h3><blockquote><p>è®©è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œ</p><ul><li>join</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        Callable&lt;String&gt; t = <span class="keyword">new</span> <span class="title class_">MyCallable</span>(<span class="number">100</span>);  </span><br><span class="line">        FutureTask&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(t);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(s);  </span><br><span class="line">        t1.start();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;  </span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;  </span><br><span class="line">                <span class="keyword">try</span> &#123;  </span><br><span class="line">                    t1.join(); <span class="comment">// è®©t1è·‘å®Œåå†è·‘ä¸»çº¿ç¨‹  </span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">                    e.printStackTrace();  </span><br><span class="line">                &#125;            </span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;çº¿ç¨‹æ‰§è¡Œ&quot;</span> + i);  </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> n;  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCallable</span><span class="params">(<span class="type">int</span> c)</span> &#123;  </span><br><span class="line">        n = c;  </span><br><span class="line">    &#125;    <span class="comment">// 2.å®ç°callï¼Œå®šä¹‰çº¿ç¨‹æ‰§è¡Œä½“  </span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;  </span><br><span class="line">            sum += i;  </span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å­çº¿ç¨‹è®¡ç®—ç»“æœ:&quot;</span> + sum;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨*"></a>çº¿ç¨‹å®‰å…¨*</h2><blockquote><p>å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ“ä½œåŒä¸€ä¸ªè´¡çŒ®èµ„æºçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸šåŠ¡å®‰å…¨é—®é¢˜</p></blockquote><p>å¦‚ ï¼šé“¶è¡Œé‡Œä¸€ä¸ªè´¦æˆ·æœ‰10wï¼Œä¸¤ä¸ªäººåŒæ—¶å»é“¶è¡Œå–é’±ï¼Œéƒ½å–åˆ°10wï¼Œå¦‚æœæ“ä½œçš„å¤ªå¿«ï¼Œé‚£ä¸¤ä¸ªäººéƒ½æ‹¿åˆ°10wï¼Œé“¶è¡Œå°±äºäº†10wå…ƒï¼Œè¿™å¯å¤ªç¥ç§˜ã€‚å‘µå‘µå‘µå‘µã€‚</p><h3 id="çº¿ç¨‹å®‰å…¨å‡ºç°é—®é¢˜åŸå› "><a href="#çº¿ç¨‹å®‰å…¨å‡ºç°é—®é¢˜åŸå› " class="headerlink" title="çº¿ç¨‹å®‰å…¨å‡ºç°é—®é¢˜åŸå› "></a>çº¿ç¨‹å®‰å…¨å‡ºç°é—®é¢˜åŸå› </h3><ul><li>å­˜åœ¨å¤šä¸ªçº¿ç¨‹</li><li>åŒæ—¶è®¿é—®äº†ä¸€ä¸ªå…±äº«èµ„æº</li><li>å­˜åœ¨ä¿®æ”¹è¯¥å…±äº«èµ„æº</li></ul><h3 id="è§£å†³çº¿ç¨‹é—®é¢˜-å¾ˆé‡è¦"><a href="#è§£å†³çº¿ç¨‹é—®é¢˜-å¾ˆé‡è¦" class="headerlink" title="è§£å†³çº¿ç¨‹é—®é¢˜ (å¾ˆé‡è¦)"></a>è§£å†³çº¿ç¨‹é—®é¢˜ (å¾ˆé‡è¦)</h3><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼š è®©å¤šä¸ªçº¿ç¨‹å…ˆåä¾æ¬¡è®¿é—®å…±äº«èµ„æºï¼Œé¿å…å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</p></blockquote><p>å¸¸è§æ–¹æ¡ˆ: <strong>åŠ é”</strong> ï¼š æ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼Œ åŠ é”åæ‰èƒ½è¿›å…¥è®¿é—®ï¼Œè®¿é—®å®Œæ¯•åè‡ªåŠ¨è§£é”ï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰èƒ½åŠ é”è¿›æ¥</p><h4 id="1-åŒæ­¥ä»£ç å—"><a href="#1-åŒæ­¥ä»£ç å—" class="headerlink" title="1. åŒæ­¥ä»£ç å—"></a>1. åŒæ­¥ä»£ç å—</h4><ul><li>synchronized<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(åŒæ­¥é”) &#123;</span><br><span class="line">    è®¿é—®å…±äº«èµ„æºæ ¸å¿ƒä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ³¨æ„é“åŒæ­¥é”å¿…é¡»æ˜¯å”¯ä¸€çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸èƒ½newï¼Œ ä¸èƒ½newï¼Œä¸èƒ½newï¼‰</p><p>åŸç†æ˜¯ï¼Œ è°ƒç”¨åï¼ŒæŠŠé”è¿™ä¸€å—å†…å­˜å ç”¨ï¼Œåˆ«çš„æ¥äº†å¾—ç­‰ï¼Œç­‰å½“å‰å ç”¨å®Œæ¯•åå†äº¤ç»™ä¸‹ä¸€ä¸ª,å»¶ç»­ä¹‹å‰å–é’±é—®é¢˜ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">account</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawmoney</span><span class="params">(<span class="type">double</span> money)</span> &#123;  </span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123; <span class="comment">//æœ€å¥½ç”¨this </span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.money &gt;= money) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;å–é’±æˆåŠŸ&quot;</span>);  </span><br><span class="line">                <span class="built_in">this</span>.money -= money;  </span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰è´¦æˆ·å‰©ä½™&quot;</span> + <span class="built_in">this</span>.money);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;ä½™é¢ä¸è¶³&quot;</span>);  </span><br><span class="line">            &#125;       </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é”å¯¹è±¡é€‰æ‹©çš„æ—¶å€™åˆ«ä¹±é€‰ï¼Œæœ€å¥½æ˜¯è‡ªå·±é€‰æ‹©ä¸€äº›ä¸ªæ–°å¼€åŒ¹é…çš„å”¯ä¸€ç©ºé—´ï¼Œæˆ–è€…æ˜¯ç›´æ¥ç”¨å¯¹è±¡çš„åå­—ï¼Œæˆ–è€…å¯¹äºå®ä¾‹æ˜¯ç›´æ¥ç”¨thisï¼ˆæ¨èï¼Œä¸”æ˜¯é«˜åº¦é¢å‘å¯¹è±¡ï¼‰<br>å¯¹äºé™æ€æ–¹æ³•ï¼Œæœ€å¥½ç›´æ¥ä½¿ç”¨å­—èŠ‚ç ï¼ˆç±»å.class)å¯¹è±¡ä½œä¸ºé”å¯¹è±¡ã€‚</p><h4 id="2-åŒæ­¥æ–¹æ³•"><a href="#2-åŒæ­¥æ–¹æ³•" class="headerlink" title="2. åŒæ­¥æ–¹æ³•"></a>2. åŒæ­¥æ–¹æ³•</h4><ul><li>æŠŠè®¿é—®å…±äº«èµ„æºçš„æ ¸å¿ƒæ–¹æ³•ä¸Šé”ï¼Œä»¥æ­¤ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ï¼ˆHashTableç”¨çš„å°±æ˜¯åŒæ­¥æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹(å½¢å‚åˆ—è¡¨) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ–¹æ³•åº•å±‚åŸç†ï¼š</p><ul><li>åº•å±‚ä¹Ÿæ˜¯æœ‰éšå¼å¯¹è±¡é”ï¼Œé”çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ä»£ç </li><li>å¦‚æœæ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨thisä½œä¸ºé”çš„å¯¹è±¡ã€‚</li><li>å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨ç±»å.classä½œä¸ºé”çš„å¯¹è±¡</li></ul><p>è™½ç„¶æ€§èƒ½å·®ä¸€ç‚¹ï¼Œä½†æ˜¯å®‰å…¨</p><h4 id="3-Locké”"><a href="#3-Locké”" class="headerlink" title="3. Locké”"></a>3. Locké”</h4><ul><li>Locké”æ˜¯JDK5æä¾›çš„é”æ“ä½œï¼Œå¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªé”å¯¹è±¡è¿›è¡ŒåŠ é”å’Œè§£é”</li><li>Lockæ˜¯æ¥å£ï¼Œä¸èƒ½å®ä¾‹åŒ–ï¼Œå¯ä»¥é‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥æ„å»ºLocké”å¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">()</span> <span class="comment">// è·å¾—Locké”çš„å®ç°ç±»å¯¹è±¡</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lock() <span class="comment">//ä¸Šé”</span></span><br><span class="line">unlock() <span class="comment">//è§£é”</span></span><br></pre></td></tr></table></figure><p>ç»§ç»­ä¹‹å‰ä¾‹å­ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;  </span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">account</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">lk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(); <span class="comment">// åŠ ä¸Šäº†finalï¼Œ ä¿è¯é”ä¸ä¼šè¢«æ’¬ï¼ˆä¸ç„¶åˆ«äººæ¥ä¸ªlk = null å“¥ä»¬ä½ ä¸æ˜¯ç‚¸äº†å—ï¼‰  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawmoney</span><span class="params">(<span class="type">double</span> money)</span> &#123;  </span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Thread.currentThread().getName();  </span><br><span class="line">        lk.lock(); <span class="comment">// ä¸Šé”  </span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.money &gt;= money) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;å–é’±æˆåŠŸ&quot;</span>);  </span><br><span class="line">                <span class="built_in">this</span>.money -= money;  </span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰è´¦æˆ·å‰©ä½™&quot;</span> + <span class="built_in">this</span>.money);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;ä½™é¢ä¸è¶³&quot;</span>);  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">            lk.unlock(); <span class="comment">// è§£é”  </span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><h2 id="çº¿ç¨‹æ± ï¼ˆimportant"><a href="#çº¿ç¨‹æ± ï¼ˆimportant" class="headerlink" title="çº¿ç¨‹æ± ï¼ˆimportant)"></a>çº¿ç¨‹æ± ï¼ˆimportant)</h2><blockquote><p><strong>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çº¿ç¨‹çš„æŠ€æœ¯ã€‚</strong> å¦‚æœä¸ç”¨çº¿ç¨‹æ± ï¼Œé‚£æ¯æ¬¡æœ‰æ–°çš„çº¿ç¨‹ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä»¥åŠå…¶æ¶ˆè€—æ€§èƒ½</p></blockquote><p>å·¥ä½œçº¿ç¨‹<br>|<br>|<br>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆåªæœ‰runnableå’Œcallableæ¥å£ï¼‰</p><h3 id="1-åˆ›å»ºçº¿ç¨‹æ± "><a href="#1-åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="1. åˆ›å»ºçº¿ç¨‹æ± "></a>1. åˆ›å»ºçº¿ç¨‹æ± </h3><ul><li>ä½¿ç”¨ExecutorServiceçš„å®ç°ç±»ThreadPoolExecutorè‡ªåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡</li><li><p>ä½¿ç”¨Excutors(çº¿ç¨‹æ± çš„å·¥å…·ç±»)è°ƒç”¨æ–¹æ³•è¿”å›ä¸åŒç‰¹ç‚¹çš„çº¿ç¨‹æ± å¯¹è±¡</p><h4 id="ThreadPoolExrcutor"><a href="#ThreadPoolExrcutor" class="headerlink" title="ThreadPoolExrcutor"></a>ThreadPoolExrcutor</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="type">int</span> corePoolSize, // æ ¸å¿ƒçº¿ç¨‹æ± æ•°é‡</span></span><br><span class="line"><span class="params">    <span class="type">int</span> maximunPoolSize, // æœ€å¤§çº¿ç¨‹æ•°é‡</span></span><br><span class="line"><span class="params">    <span class="type">long</span> keepAliveTime, // ä¸´æ—¶çº¿ç¨‹å­˜æ´»æ—¶é—´</span></span><br><span class="line"><span class="params">    TimeUnit unit, // ä¸´æ—¶å­˜æ´»æ—¶é—´å•ä½</span></span><br><span class="line"><span class="params">    BlockingQueue&lt;Runnable&gt; workQueue, // æŒ‡å®šä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line"><span class="params">    ThreadFactory threadFactort, // æŒ‡å®šçº¿ç¨‹å·¥å‚</span></span><br><span class="line"><span class="params">    RejectedExecutionHandler handler //æŒ‡å®šçº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ï¼ˆå¤ªå¤šäº†çš„å¤„ç†æ–¹å¼ï¼‰</span></span><br><span class="line"><span class="params">)</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">3</span>, <span class="number">5</span>, <span class="number">10</span>, TimeUnit.SECONDS,  </span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>), Executors.defaultThreadFactory(), </span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤„ç†ä»»åŠ¡</strong></p><p>ExecutorServiceå¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li>void execute(Runnable command) ï¼š æ‰§è¡ŒRunnableä»»åŠ¡</li><li><code>Future&lt;T&gt; submit(Callable&lt;T&gt;) task</code> : æ‰§è¡ŒCallableä»»åŠ¡ï¼Œè¿”å›ä»»åŠ¡å¯¹è±¡</li><li>void shutdown() : ç­‰å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œå®Œäº†ä¹‹åå…³é—­çº¿ç¨‹æ± </li><li><code>List&lt;Runnable&gt; shutdownNow()</code> : ç«‹é©¬å…³é—­ï¼Œåœæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›é˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„ä»»åŠ¡ </li></ul><h4 id="é€šè¿‡Executorsåˆ›å»ºçº¿ç¨‹æ± "><a href="#é€šè¿‡Executorsåˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="é€šè¿‡Executorsåˆ›å»ºçº¿ç¨‹æ± "></a>é€šè¿‡Executorsåˆ›å»ºçº¿ç¨‹æ± </h4><ul><li>Executorsæ˜¯çº¿ç¨‹æ± çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•è¿”å›ä¸åŒçš„çº¿ç¨‹æ± å¯¹è±¡</li></ul><p>Javaé€šè¿‡Executorså·¥å‚ç±»æä¾›å››ç§çº¿ç¨‹æ± ï¼Œåˆ†åˆ«ä¸ºï¼š</p><ul><li>newCachedThreadPool ï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œå¦åˆ™æ–°å»ºçº¿ç¨‹ã€‚ï¼ˆçº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ä¸å¯æ§åˆ¶ï¼‰</li><li>newFixedThreadPoolï¼šåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</li><li>newScheduledThreadPool ï¼š åˆ›å»ºä¸€ä¸ªå®šæ—¶çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚</li><li>newSingleThreadExecutor ï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚</li></ul><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„çº¿ç¨‹ä»»åŠ¡ï¼Œæ–¹ä¾¿æµ‹è¯•å››ç§çº¿ç¨‹æ± </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; is running...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>newSingleThreadExecutor<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleThreadExecutorTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            executorService.execute(myRunnable);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>è¾“å‡ºç»“æœ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åº•å±‚å®ç°<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°=1</span></span><br><span class="line"><span class="comment"> * æœ€å¤§çº¿ç¨‹æ± å¤§å°ä¸º1</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹è¿‡æœŸæ—¶é—´ä¸º0ms</span></span><br><span class="line"><span class="comment"> * LinkedBlockingQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newSingleThreadExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FinalizableDelegatedExecutorService</span></span><br><span class="line">        (<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>ä»å‚æ•°å¯ä»¥çœ‹å‡ºæ¥ï¼ŒSingleThreadExecutor ç›¸å½“äºç‰¹æ®Šçš„ FixedThreadPoolï¼Œå®ƒçš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p>çº¿ç¨‹æ± ä¸­æ²¡æœ‰çº¿ç¨‹æ—¶ï¼Œæ–°å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡<br>æœ‰ä¸€ä¸ªçº¿ç¨‹ä»¥åï¼Œå°†ä»»åŠ¡åŠ å…¥é˜»å¡é˜Ÿåˆ—ï¼Œä¸åœçš„åŠ <br>å”¯ä¸€çš„è¿™ä¸€ä¸ªçº¿ç¨‹ä¸åœåœ°å»é˜Ÿåˆ—é‡Œå–ä»»åŠ¡æ‰§è¡Œ<br>SingleThreadExecutor ç”¨äºä¸²è¡Œæ‰§è¡Œä»»åŠ¡çš„åœºæ™¯ï¼Œæ¯ä¸ªä»»åŠ¡å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸éœ€è¦å¹¶å‘æ‰§è¡Œã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FixedThreadPoolTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            executorService.execute(myRunnable);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>è¾“å‡ºç»“æœ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åº•å±‚å®ç°<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°=ä¼ å…¥å‚æ•°</span></span><br><span class="line"><span class="comment"> * æœ€å¤§çº¿ç¨‹æ± å¤§å°ä¸ºä¼ å…¥å‚æ•°</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹è¿‡æœŸæ—¶é—´ä¸º0ms</span></span><br><span class="line"><span class="comment"> * LinkedBlockingQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newFixedThreadPool</span><span class="params">(<span class="type">int</span> nThreads)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(nThreads, nThreads,</span><br><span class="line">                                  <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>å¯ä»¥çœ‹åˆ°ï¼ŒFixedThreadPool çš„æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½æ˜¯æŒ‡å®šå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°åï¼Œä»»åŠ¡éƒ½ä¼šè¢«æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­ã€‚</p><p>æ­¤å¤– keepAliveTime ä¸º 0ï¼Œä¹Ÿå°±æ˜¯å¤šä½™çš„ç©ºä½™çº¿ç¨‹ä¼šè¢«ç«‹å³ç»ˆæ­¢ï¼ˆç”±äºè¿™é‡Œæ²¡æœ‰å¤šä½™çº¿ç¨‹ï¼Œè¿™ä¸ªå‚æ•°ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰äº†ï¼‰ã€‚</p><p>è€Œè¿™é‡Œé€‰ç”¨çš„é˜»å¡é˜Ÿåˆ—æ˜¯ LinkedBlockingQueueï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤å®¹é‡ Integer.MAX_VALUEï¼Œç›¸å½“äºæ²¡æœ‰ä¸Šé™ã€‚</p><p>å› æ­¤è¿™ä¸ªçº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p>çº¿ç¨‹æ•°å°‘äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®çš„çº¿ç¨‹æ•°æ—¶ï¼Œæ–°å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡<br>çº¿ç¨‹æ•°ç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°åï¼Œå°†ä»»åŠ¡åŠ å…¥é˜»å¡é˜Ÿåˆ—<br>ç”±äºé˜Ÿåˆ—å®¹é‡éå¸¸å¤§ï¼Œå¯ä»¥ä¸€ç›´åŠ <br>æ‰§è¡Œå®Œä»»åŠ¡çš„çº¿ç¨‹åå¤å»é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ‰§è¡Œ<br>FixedThreadPool ç”¨äºè´Ÿè½½æ¯”è¾ƒé‡çš„æœåŠ¡å™¨ï¼Œä¸ºäº†èµ„æºçš„åˆç†åˆ©ç”¨ï¼Œéœ€è¦é™åˆ¶å½“å‰çº¿ç¨‹æ•°é‡ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CachedThreadPoolTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            executorService.execute(myRunnable);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>è¾“å‡ºç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">4</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">5</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span> is running...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åº•å±‚å®ç°<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°=0</span></span><br><span class="line"><span class="comment"> *  æœ€å¤§çº¿ç¨‹æ± å¤§å°ä¸ºInteger.MAX_VALUE</span></span><br><span class="line"><span class="comment"> *  çº¿ç¨‹è¿‡æœŸæ—¶é—´ä¸º60s</span></span><br><span class="line"><span class="comment"> *  ä½¿ç”¨SynchronousQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newCachedThreadPool</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                                  <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>å¯ä»¥çœ‹åˆ°ï¼ŒCachedThreadPool æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹ï¼Œéæ ¸å¿ƒçº¿ç¨‹æ•°æ— ä¸Šé™ï¼Œä¹Ÿå°±æ˜¯å…¨éƒ¨ä½¿ç”¨å¤–åŒ…ï¼Œä½†æ˜¯æ¯ä¸ªå¤–åŒ…ç©ºé—²çš„æ—¶é—´åªæœ‰ 60 ç§’ï¼Œè¶…è¿‡åå°±ä¼šè¢«å›æ”¶ã€‚</p><p>CachedThreadPool ä½¿ç”¨çš„é˜Ÿåˆ—æ˜¯ SynchronousQueueï¼Œè¿™ä¸ªé˜Ÿåˆ—çš„ä½œç”¨å°±æ˜¯ä¼ é€’ä»»åŠ¡ï¼Œå¹¶ä¸ä¼šä¿å­˜ã€‚</p><p>å› æ­¤å½“æäº¤ä»»åŠ¡çš„é€Ÿåº¦å¤§äºå¤„ç†ä»»åŠ¡çš„é€Ÿåº¦æ—¶ï¼Œæ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚æç«¯æƒ…å†µä¸‹ä¼šåˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹ï¼Œè€—å°½ CPU å’Œå†…å­˜èµ„æºã€‚</p><p>å®ƒçš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p>æ²¡æœ‰æ ¸å¿ƒçº¿ç¨‹ï¼Œç›´æ¥å‘ SynchronousQueue ä¸­æäº¤ä»»åŠ¡<br>å¦‚æœæœ‰ç©ºé—²çº¿ç¨‹ï¼Œå°±å»å–å‡ºä»»åŠ¡æ‰§è¡Œï¼›å¦‚æœæ²¡æœ‰ç©ºé—²çº¿ç¨‹ï¼Œå°±æ–°å»ºä¸€ä¸ª<br>æ‰§è¡Œå®Œä»»åŠ¡çš„çº¿ç¨‹æœ‰ 60 ç§’ç”Ÿå­˜æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…å¯ä»¥æ¥åˆ°æ–°ä»»åŠ¡ï¼Œå°±å¯ä»¥ç»§ç»­æ´»ä¸‹å»ï¼Œå¦åˆ™å°±æ‹œæ‹œ<br>ç”±äºç©ºé—² 60 ç§’çš„çº¿ç¨‹ä¼šè¢«ç»ˆæ­¢ï¼Œé•¿æ—¶é—´ä¿æŒç©ºé—²çš„ CachedThreadPool ä¸ä¼šå ç”¨ä»»ä½•èµ„æºã€‚<br>CachedThreadPool ç”¨äºå¹¶å‘æ‰§è¡Œå¤§é‡çŸ­æœŸçš„å°ä»»åŠ¡ï¼Œæˆ–è€…æ˜¯è´Ÿè½½è¾ƒè½»çš„æœåŠ¡å™¨ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledThreadPoolTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ScheduledExecutorService</span> <span class="variable">scheduledExecutorService</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">3</span>);</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å‚æ•°1:ç›®æ ‡å¯¹è±¡,å‚æ•°2:éš”å¤šé•¿æ—¶é—´å¼€å§‹æ‰§è¡Œçº¿ç¨‹,å‚æ•°3:æ‰§è¡Œå‘¨æœŸ,å‚æ•°4:æ—¶é—´å•ä½</span></span><br><span class="line">            scheduledExecutorService.scheduleAtFixedRate(myRunnable, <span class="number">1</span>, <span class="number">2</span>, TimeUnit.SECONDS);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>è¾“å‡ºç»“æœ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œ</span><br><span class="line"><span class="comment">// æ‰“å°ã€çº¿ç¨‹ä»»åŠ¡å¼€å§‹æ‰§è¡Œã€‘å1ç§’è¾“å‡º</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line"><span class="comment">// 2ç§’åè¾“å‡º</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span> is running...</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span> is running...</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>åº•å±‚å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°=ä¼ å…¥å‚æ•°</span></span><br><span class="line"><span class="comment"> * æœ€å¤§çº¿ç¨‹æ± å¤§å°ä¸ºInteger.MAX_VALUE</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹è¿‡æœŸæ—¶é—´ä¸º0ms</span></span><br><span class="line"><span class="comment"> * DelayedWorkQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ScheduledThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(corePoolSize, Integer.MAX_VALUE, <span class="number">0</span>, NANOSECONDS,</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">DelayedWorkQueue</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ScheduledThreadPoolExecutor çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p>æ·»åŠ ä¸€ä¸ªä»»åŠ¡<br>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä» DelayQueue ä¸­å–ä»»åŠ¡<br>ç„¶åæ‰§è¡Œä»»åŠ¡<br>å…·ä½“æ‰§è¡Œä»»åŠ¡çš„æ­¥éª¤ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼š</p><p>çº¿ç¨‹ä» DelayQueue ä¸­è·å– time å¤§äºç­‰äºå½“å‰æ—¶é—´çš„ ScheduledFutureTask</p><p>æ‰§è¡Œå®Œåä¿®æ”¹è¿™ä¸ª task çš„ time ä¸ºä¸‹æ¬¡è¢«æ‰§è¡Œçš„æ—¶é—´</p><p>ç„¶åå†æŠŠè¿™ä¸ª task æ”¾å›é˜Ÿåˆ—ä¸­</p><p>ScheduledThreadPoolExecutor ç”¨äºéœ€è¦å¤šä¸ªåå°çº¿ç¨‹æ‰§è¡Œå‘¨æœŸä»»åŠ¡ï¼ŒåŒæ—¶éœ€è¦é™åˆ¶çº¿ç¨‹æ•°é‡çš„åœºæ™¯ã€‚</p><p>Executorså’ŒThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± çš„åŒºåˆ«<br>Executors å„ä¸ªæ–¹æ³•çš„å¼Šç«¯ï¼š</p><p>newFixedThreadPool å’Œ newSingleThreadExecutor:<br>ä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚<br>newCachedThreadPool å’Œ newScheduledThreadPool:<br>ä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOMã€‚<br>ThreaPoolExecutor</p><p>åˆ›å»ºçº¿ç¨‹æ± æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯èµ°å®ƒçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°è‡ªå·±æŒ‡å®š</p><blockquote><p>å¤§å‹å¹¶å‘ç³»ç»Ÿä¸­ä½¿ç”¨Executorså¦‚æœä¸æ³¨æ„å¯èƒ½ä¼šå‡ºç°ç³»ç»Ÿé£é™©ã€‚</p><h3 id="çº¿ç¨‹æ± æ³¨æ„äº‹é¡¹ï¼š"><a href="#çº¿ç¨‹æ± æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="çº¿ç¨‹æ± æ³¨æ„äº‹é¡¹ï¼š"></a>çº¿ç¨‹æ± æ³¨æ„äº‹é¡¹ï¼š</h3></blockquote><ul><li><p>ä»€ä¹ˆæ—¶å€™åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Ÿ<br>æ–°ä»»åŠ¡æäº¤æ—¶å‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¹¶ä¸”å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶æ‰ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹</p></li><li><p>æ ¸å¿ƒçº¿ç¨‹å’Œä¸´æ—¶çº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œæ–°çš„ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šæ‹’ç»ä»»åŠ¡</p></li></ul><blockquote><p>ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼š</p></blockquote><div class="table-container"><table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ThreadPoolExecutor.AbortPolicy()</td><td>ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExeceptionå¼‚å¸¸ï¼Œ<strong>æ˜¯é»˜è®¤çš„ç­–ç•¥</strong></td></tr><tr><td>ThreadPoolExecutor.DiscardPolicy()</td><td>ä¸¢å¼ƒä»»åŠ¡ä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä¸æ¨è</td></tr><tr><td>ThreadPoolExecutor.DiscardOldestPolicy()</td><td>ä¸¢å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ï¼ŒæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—</td></tr><tr><td>ThreadPoolExecutor.CallerRunsPolicy()</td><td>ç”±ä¸»çº¿ç¨‹è´Ÿè´£è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ä»è€Œç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œ</td></tr></tbody></table></div><h2 id="å¤šçº¿ç¨‹å®é™…æ¡ˆä¾‹ä¸é‡åˆ°çš„é—®é¢˜"><a href="#å¤šçº¿ç¨‹å®é™…æ¡ˆä¾‹ä¸é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¤šçº¿ç¨‹å®é™…æ¡ˆä¾‹ä¸é‡åˆ°çš„é—®é¢˜"></a>å¤šçº¿ç¨‹å®é™…æ¡ˆä¾‹ä¸é‡åˆ°çš„é—®é¢˜</h2><blockquote><p>å†™ä¸€ä¸ªæŠ¢çº¢åŒ…ç¨‹åºï¼Œä¸€å…±200ä¸ªçº¢åŒ…ï¼Œ100ä¸ªå‘˜å·¥å»æŠ¢ï¼ŒæŠ¢å®Œäº†ä¹‹åæ’åºè¾“å‡ºé‡‘é¢</p></blockquote><p>Main:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  </span><br><span class="line"><span class="keyword">import</span> java.util.List;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="type">RedPool</span> <span class="variable">rd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedPool</span>();  </span><br><span class="line">        List&lt;peo&gt; p = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»çº¢åŒ…æ•°: &quot;</span> + rd.B.size());  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// åˆ›å»º 100 ä¸ªçº¿ç¨‹  </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;  </span><br><span class="line">            p.add(<span class="keyword">new</span> <span class="title class_">peo</span>(i, rd));  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// å¯åŠ¨æ‰€æœ‰çº¿ç¨‹  </span></span><br><span class="line">        <span class="keyword">for</span> (peo thread : p) &#123;  </span><br><span class="line">            thread.start();  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ  </span></span><br><span class="line">        <span class="keyword">for</span> (peo thread : p) &#123;  </span><br><span class="line">            <span class="keyword">try</span> &#123;  </span><br><span class="line">                thread.join();  </span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  </span><br><span class="line">                e.printStackTrace();  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åè¿›è¡Œæ’åº  </span></span><br><span class="line">        p.sort((a, b) -&gt; Double.compare(b.money, a.money)); <span class="comment">// ä»å¤§åˆ°å°æ’åº  </span></span><br><span class="line">  </span><br><span class="line">        System.out.println(<span class="string">&quot;-------------æ¸¸æˆç»“æŸ-------------&quot;</span>);  </span><br><span class="line">        <span class="keyword">for</span> (peo person : p) &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;ç”¨æˆ· &quot;</span> + person.id + <span class="string">&quot; æ€»å…±æŠ¢åˆ°äº† &quot;</span> + person.money);  </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Peo:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">peo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> money;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> id;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedPool rd;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">peo</span><span class="params">(<span class="type">int</span> id, RedPool r)</span> &#123;  </span><br><span class="line">        <span class="built_in">this</span>.id = id;  </span><br><span class="line">        <span class="built_in">this</span>.money = <span class="number">0</span>;  </span><br><span class="line">        <span class="built_in">this</span>.rd = r;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;  </span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">            RedPool.bao selectedBao;  </span><br><span class="line">            <span class="keyword">synchronized</span> (rd.B) &#123;  </span><br><span class="line">                <span class="keyword">if</span> (rd.B.isEmpty()) &#123;  </span><br><span class="line">                    <span class="keyword">break</span>;  </span><br><span class="line">                &#125;  </span><br><span class="line">                <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> r.nextInt(rd.B.size()); <span class="comment">// éšæœºé€‰çº¢åŒ…  </span></span><br><span class="line">                selectedBao = rd.B.get(idx);  </span><br><span class="line">                rd.B.remove(idx); <span class="comment">// åªåŒæ­¥è¿™ä¸ªæ“ä½œ  </span></span><br><span class="line">            &#125;  <span class="comment">// ğŸ”¥ é‡Šæ”¾é”ï¼Œè®©å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šè¿›å…¥  </span></span><br><span class="line">  </span><br><span class="line">            <span class="comment">// å¤„ç†é‡‘é¢ï¼ˆè¿™éƒ¨åˆ†ä¸éœ€è¦é”ï¼‰  </span></span><br><span class="line">            <span class="built_in">this</span>.money += selectedBao.money();  </span><br><span class="line">            System.out.println(<span class="string">&quot;ç”¨æˆ· &quot;</span> + <span class="built_in">this</span>.id + <span class="string">&quot; æŠ¢åˆ°äº† &quot;</span> + selectedBao.money());  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„é“åœ¨å¤„ç†åŠ é”çš„æ—¶å€™ï¼Œå¦‚æœåŠ é”çš„èŒƒå›´å¤ªå¤§ï¼Œæ¯”å¦‚åŠ åˆ°äº†å¤„ç†é‡‘é¢éƒ¨åˆ†ï¼Œé‚£ä¹ˆä¼šå‡ºç°bugï¼ŒæŸä¸ªç”¨æˆ·æ‹¿åˆ°äº†ç¬¬ä¸€æ¬¡è¿›å…¥é”çš„æœºä¼šï¼Œå°±ä¼šæŠŠæ‰€æœ‰çš„é’±å…¨éƒ¨æŠ¢å®Œï¼ˆå› ä¸ºæŠŠæ‰€æœ‰é€»è¾‘ç»“æŸåä»–åˆå¼€å§‹ç»§ç»­æªé”ä½¿å¾—åˆ«çš„çº¿ç¨‹æ— æ³•run)</p><p>RedPool:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  </span><br><span class="line"><span class="keyword">import</span> java.util.List;  </span><br><span class="line"><span class="keyword">import</span> java.util.Random;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedPool</span> &#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TOT</span> <span class="operator">=</span> <span class="number">200</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">now</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">small</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> List&lt;bao&gt; B = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">f</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">// è§£å†³å¯è§æ€§é—®é¢˜  </span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RedPool</span><span class="params">()</span> &#123;  </span><br><span class="line">        pushr();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushr</span><span class="params">()</span> &#123;  </span><br><span class="line">        <span class="keyword">while</span> (now &lt; TOT) &#123; <span class="comment">// ç”¨å¾ªç¯ä»£æ›¿é€’å½’ï¼Œé˜²æ­¢æ ˆæº¢å‡º  </span></span><br><span class="line">            now++;  </span><br><span class="line">            <span class="type">int</span> <span class="variable">g</span> <span class="operator">=</span> <span class="number">1</span> + (<span class="type">int</span>) (Math.random() * <span class="number">2</span>);  </span><br><span class="line">            <span class="keyword">if</span> (g == <span class="number">1</span> &amp;&amp; small &lt; <span class="number">160</span>) &#123;  </span><br><span class="line">                B.add(<span class="keyword">new</span> <span class="title class_">bao</span>(now, <span class="number">1</span> + Math.random() * <span class="number">30</span>));  </span><br><span class="line">                small++; <span class="comment">// small éœ€è¦å¢åŠ ï¼Œå¦åˆ™å¯èƒ½è¶…å‡º 160 é™åˆ¶  </span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                B.add(<span class="keyword">new</span> <span class="title class_">bao</span>(now, <span class="number">31</span> + Math.random() * <span class="number">70</span>));  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">bao</span><span class="params">(<span class="type">int</span> id, <span class="type">double</span> money)</span> &#123;&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lombok</title>
      <link href="/2025/03/10/lombok/"/>
      <url>/2025/03/10/lombok/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-Lombokç®€ä»‹"><a href="#1-Lombokç®€ä»‹" class="headerlink" title="1.Lombokç®€ä»‹"></a>1.Lombokç®€ä»‹</h2><p>å®˜æ–¹ä»‹ç»<br>Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.Never write another getter or equals method again, with one annotation your class has a fully featured builder, Automate your logging variables, and much more.</p><p>å¤§æ¦‚çš„æ„æ€ï¼šLombokæ˜¯ä¸€ä¸ªJavaåº“ï¼Œèƒ½è‡ªåŠ¨æ’å…¥ç¼–è¾‘å™¨å¹¶æ„å»ºå·¥å…·ï¼Œç®€åŒ–Javaå¼€å‘ã€‚é€šè¿‡æ·»åŠ æ³¨è§£çš„æ–¹å¼ï¼Œä¸éœ€è¦ä¸ºç±»ç¼–å†™getteræˆ–equesæ–¹æ³•ï¼ŒåŒæ—¶å¯ä»¥è‡ªåŠ¨åŒ–æ—¥å¿—å˜é‡ã€‚å®˜ç½‘é“¾æ¥</p><p>ç®€è€Œè¨€ä¹‹ï¼šLombokèƒ½ä»¥ç®€å•çš„æ³¨è§£å½¢å¼æ¥ç®€åŒ–javaä»£ç ï¼Œæé«˜å¼€å‘äººå‘˜çš„å¼€å‘æ•ˆç‡ã€‚<br>åšå®¢åŠæºç GitHubé“¾æ¥</p><h2 id="Lombokä½¿ç”¨"><a href="#Lombokä½¿ç”¨" class="headerlink" title=".Lombokä½¿ç”¨"></a>.Lombokä½¿ç”¨</h2><p>ä½¿ç”¨Lombokéœ€è¦çš„å¼€å‘ç¯å¢ƒJava+Maven+IntelliJ IDEAæˆ–è€…Eclipse(å®‰è£…Lombok Plugin)</p><h3 id="2-1æ·»åŠ mavenä¾èµ–"><a href="#2-1æ·»åŠ mavenä¾èµ–" class="headerlink" title="2.1æ·»åŠ mavenä¾èµ–"></a>2.1æ·»åŠ mavenä¾èµ–</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2å®‰è£…æ’ä»¶"><a href="#2-2å®‰è£…æ’ä»¶" class="headerlink" title="2.2å®‰è£…æ’ä»¶"></a>2.2å®‰è£…æ’ä»¶</h3><p>ä½¿ç”¨Lombokè¿˜éœ€è¦æ’ä»¶çš„é…åˆï¼Œæˆ‘ä½¿ç”¨å¼€å‘å·¥å…·ä¸ºideaï¼Œè¿™é‡Œåªè®²è§£ideaä¸­å®‰è£…lombokæ’ä»¶ï¼Œä½¿ç”¨eclipseå’Œmyeclipseçš„å°ä¼™ä¼´å’Œè‡ªè¡Œgoogleå®‰è£…æ–¹æ³•ã€‚<br>æ‰“å¼€ideaçš„è®¾ç½®ï¼Œç‚¹å‡»Pluginsï¼Œç‚¹å‡»Browse repositoriesï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­æœç´¢lombokï¼Œç„¶åå®‰è£…å³å¯ã€‚</p><h3 id="2-3è§£å†³ç¼–è¯‘æ—¶å‡ºé”™é—®é¢˜"><a href="#2-3è§£å†³ç¼–è¯‘æ—¶å‡ºé”™é—®é¢˜" class="headerlink" title="2.3è§£å†³ç¼–è¯‘æ—¶å‡ºé”™é—®é¢˜"></a>2.3è§£å†³ç¼–è¯‘æ—¶å‡ºé”™é—®é¢˜</h3><p>ç¼–è¯‘æ—¶å‡ºé”™ï¼Œå¯èƒ½æ˜¯æ²¡æœ‰enableæ³¨è§£å¤„ç†å™¨ã€‚Annotation Processors &gt; Enable annotation processingã€‚è®¾ç½®å®Œæˆä¹‹åç¨‹åºæ­£å¸¸è¿è¡Œã€‚</p><h3 id="2-4ç¤ºä¾‹"><a href="#2-4ç¤ºä¾‹" class="headerlink" title="2.4ç¤ºä¾‹"></a>2.4ç¤ºä¾‹</h3><p>ä¸‹é¢ä¸¾ä¸¤ä¸ªæ —å­ï¼Œçœ‹çœ‹ä½¿ç”¨lombokå’Œä¸ä½¿ç”¨çš„åŒºåˆ«ã€‚</p><p>åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç±»</p><p>ä¸ä½¿ç”¨Lombok<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">8054600833969507380L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(id, user.id) &amp;&amp;</span><br><span class="line">                Objects.equals(username, user.username) &amp;&amp;</span><br><span class="line">                Objects.equals(age, user.age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, username, age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨Lombok</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">8054600833969507380L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘æºæ–‡ä»¶ï¼Œç„¶ååç¼–è¯‘classæ–‡ä»¶ï¼Œåç¼–è¯‘ç»“æœå¦‚ä¸‹å›¾ã€‚è¯´æ˜@Dataæ³¨è§£åœ¨ç±»ä¸Šï¼Œä¼šä¸ºç±»çš„æ‰€æœ‰å±æ€§è‡ªåŠ¨ç”Ÿæˆsetter/getterã€equalsã€canEqualã€hashCodeã€toStringæ–¹æ³•ï¼Œå¦‚ä¸ºfinalå±æ€§ï¼Œåˆ™ä¸ä¼šä¸ºè¯¥å±æ€§ç”Ÿæˆsetteræ–¹æ³•ã€‚</p><p>è‡ªåŠ¨åŒ–æ—¥å¿—å˜é‡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping((&quot;/user&quot;))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getUserById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUsername(<span class="string">&quot;é£æ¸…æ‰¬&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">21</span>);</span><br><span class="line">        user.setId(id);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (log.isInfoEnabled()) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;ç”¨æˆ· &#123;&#125;&quot;</span>, user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>é€šè¿‡åç¼–è¯‘å¯ä»¥çœ‹åˆ°@Slf4jæ³¨è§£ç”Ÿæˆäº†logæ—¥å¿—å˜é‡ï¼ˆä¸¥æ ¼æ„ä¹‰æ¥è¯´æ˜¯å¸¸é‡ï¼‰ï¼Œæ— éœ€å»å£°æ˜ä¸€ä¸ªlogå°±å¯ä»¥åœ¨ç±»ä¸­ä½¿ç”¨logè®°å½•æ—¥å¿—ã€‚</p><h3 id="2-5å¸¸ç”¨æ³¨è§£"><a href="#2-5å¸¸ç”¨æ³¨è§£" class="headerlink" title="2.5å¸¸ç”¨æ³¨è§£"></a>2.5å¸¸ç”¨æ³¨è§£</h3><p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£ï¼š</p><ul><li>@Setter æ³¨è§£åœ¨ç±»æˆ–å­—æ®µï¼Œæ³¨è§£åœ¨ç±»æ—¶ä¸ºæ‰€æœ‰å­—æ®µç”Ÿæˆsetteræ–¹æ³•ï¼Œæ³¨è§£åœ¨å­—æ®µä¸Šæ—¶åªä¸ºè¯¥å­—æ®µç”Ÿæˆsetteræ–¹æ³•ã€‚<ul><li>@Getter ä½¿ç”¨æ–¹æ³•åŒä¸Šï¼ŒåŒºåˆ«åœ¨äºç”Ÿæˆçš„æ˜¯getteræ–¹æ³•ã€‚</li><li>@ToString æ³¨è§£åœ¨ç±»ï¼Œæ·»åŠ toStringæ–¹æ³•ã€‚</li><li>@EqualsAndHashCode æ³¨è§£åœ¨ç±»ï¼Œç”ŸæˆhashCodeå’Œequalsæ–¹æ³•ã€‚</li><li>@NoArgsConstructor æ³¨è§£åœ¨ç±»ï¼Œç”Ÿæˆæ— å‚çš„æ„é€ æ–¹æ³•ã€‚</li><li>@RequiredArgsConstructor æ³¨è§£åœ¨ç±»ï¼Œä¸ºç±»ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„å­—æ®µç”Ÿæˆæ„é€ æ–¹æ³•ï¼Œæ¯”å¦‚finalå’Œè¢«@NonNullæ³¨è§£çš„å­—æ®µã€‚</li><li>@AllArgsConstructor æ³¨è§£åœ¨ç±»ï¼Œç”ŸæˆåŒ…å«ç±»ä¸­æ‰€æœ‰å­—æ®µçš„æ„é€ æ–¹æ³•ã€‚</li><li>@Data æ³¨è§£åœ¨ç±»ï¼Œç”Ÿæˆsetter/getterã€equalsã€canEqualã€hashCodeã€toStringæ–¹æ³•ï¼Œå¦‚ä¸ºfinalå±æ€§ï¼Œåˆ™ä¸ä¼šä¸ºè¯¥å±æ€§ç”Ÿæˆsetteræ–¹æ³•ã€‚</li><li>@Slf4j æ³¨è§£åœ¨ç±»ï¼Œç”Ÿæˆlogå˜é‡ï¼Œä¸¥æ ¼æ„ä¹‰æ¥è¯´æ˜¯å¸¸é‡ã€‚private static final Logger log = LoggerFactory.getLogger(UserController.class);</li></ul></li></ul><h2 id="3-Lombokå·¥ä½œåŸç†"><a href="#3-Lombokå·¥ä½œåŸç†" class="headerlink" title="3.Lombokå·¥ä½œåŸç†"></a>3.Lombokå·¥ä½œåŸç†</h2><p>åœ¨Lombokä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ·»åŠ ç›¸åº”çš„æ³¨è§£ï¼Œæ— éœ€å†ä¸ºæ­¤å†™ä»»ä½•ä»£ç ã€‚è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç åˆ°åº•æ˜¯å¦‚ä½•äº§ç”Ÿçš„å‘¢ï¼Ÿ</p><p>æ ¸å¿ƒä¹‹å¤„å°±æ˜¯å¯¹äºæ³¨è§£çš„è§£æä¸Šã€‚JDK5å¼•å…¥äº†æ³¨è§£çš„åŒæ—¶ï¼Œä¹Ÿæä¾›äº†ä¸¤ç§è§£ææ–¹å¼ã€‚</p><p>è¿è¡Œæ—¶è§£æ<br>è¿è¡Œæ—¶èƒ½å¤Ÿè§£æçš„æ³¨è§£ï¼Œå¿…é¡»å°†@Retentionè®¾ç½®ä¸ºRUNTIMEï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡åå°„æ‹¿åˆ°è¯¥æ³¨è§£ã€‚java.lang.reflectåå°„åŒ…ä¸­æä¾›äº†ä¸€ä¸ªæ¥å£AnnotatedElementï¼Œè¯¥æ¥å£å®šä¹‰äº†è·å–æ³¨è§£ä¿¡æ¯çš„å‡ ä¸ªæ–¹æ³•ï¼ŒClassã€Constructorã€Fieldã€Methodã€Packageç­‰éƒ½å®ç°äº†è¯¥æ¥å£ï¼Œå¯¹åå°„ç†Ÿæ‚‰çš„æœ‹å‹åº”è¯¥éƒ½ä¼šå¾ˆç†Ÿæ‚‰è¿™ç§è§£ææ–¹å¼ã€‚</p><p>ç¼–è¯‘æ—¶è§£æ<br>ç¼–è¯‘æ—¶è§£ææœ‰ä¸¤ç§æœºåˆ¶ï¼Œåˆ†åˆ«ç®€å•æè¿°ä¸‹ï¼š</p><h3 id="1ï¼‰Annotation-Processing-Tool"><a href="#1ï¼‰Annotation-Processing-Tool" class="headerlink" title="1ï¼‰Annotation Processing Tool"></a>1ï¼‰Annotation Processing Tool</h3><p>aptè‡ªJDK5äº§ç”Ÿï¼ŒJDK7å·²æ ‡è®°ä¸ºè¿‡æœŸï¼Œä¸æ¨èä½¿ç”¨ï¼ŒJDK8ä¸­å·²å½»åº•åˆ é™¤ï¼Œè‡ªJDK6å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨Pluggable Annotation Processing APIæ¥æ›¿æ¢å®ƒï¼Œaptè¢«æ›¿æ¢ä¸»è¦æœ‰2ç‚¹åŸå› ï¼š</p><p>apiéƒ½åœ¨com.sun.mirroréæ ‡å‡†åŒ…ä¸‹<br>æ²¡æœ‰é›†æˆåˆ°javacä¸­ï¼Œéœ€è¦é¢å¤–è¿è¡Œ</p><h3 id="2ï¼‰Pluggable-Annotation-Processing-API"><a href="#2ï¼‰Pluggable-Annotation-Processing-API" class="headerlink" title="2ï¼‰Pluggable Annotation Processing API"></a>2ï¼‰Pluggable Annotation Processing API</h3><p>JSR 269è‡ªJDK6åŠ å…¥ï¼Œä½œä¸ºaptçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒè§£å†³äº†aptçš„ä¸¤ä¸ªé—®é¢˜ï¼Œjavacåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šè°ƒç”¨å®ç°äº†è¯¥APIçš„ç¨‹åºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯¹ç¼–è¯‘å™¨åšä¸€äº›å¢å¼ºï¼Œjavacæ‰§è¡Œçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>Lombokæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå®ç°äº†â€œJSR 269 APIâ€çš„ç¨‹åºã€‚åœ¨ä½¿ç”¨javacçš„è¿‡ç¨‹ä¸­ï¼Œå®ƒäº§ç”Ÿä½œç”¨çš„å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p>javacå¯¹æºä»£ç è¿›è¡Œåˆ†æï¼Œç”Ÿæˆäº†ä¸€æ£µæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰<br>è¿è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨å®ç°äº†â€œJSR 269 APIâ€çš„Lombokç¨‹åº<br>æ­¤æ—¶Lombokå°±å¯¹ç¬¬ä¸€æ­¥éª¤å¾—åˆ°çš„ASTè¿›è¡Œå¤„ç†ï¼Œæ‰¾åˆ°@Dataæ³¨è§£æ‰€åœ¨ç±»å¯¹åº”çš„è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå¢åŠ getterå’Œsetteræ–¹æ³•å®šä¹‰çš„ç›¸åº”æ ‘èŠ‚ç‚¹<br>javacä½¿ç”¨ä¿®æ”¹åçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå³ç»™classå¢åŠ æ–°çš„èŠ‚ç‚¹ï¼ˆä»£ç å—ï¼‰<br>é€šè¿‡è¯»Lombokæºç ï¼Œå‘ç°å¯¹åº”æ³¨è§£çš„å®ç°éƒ½åœ¨HandleXXXä¸­ï¼Œæ¯”å¦‚@Getteræ³¨è§£çš„å®ç°åœ¨HandleGetter.handle()ã€‚è¿˜æœ‰ä¸€äº›å…¶å®ƒç±»åº“ä½¿ç”¨è¿™ç§æ–¹å¼å®ç°ï¼Œæ¯”å¦‚Google Autoã€Daggerç­‰ç­‰ã€‚</p><h3 id="4-Lombokçš„ä¼˜ç¼ºç‚¹"><a href="#4-Lombokçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="4.Lombokçš„ä¼˜ç¼ºç‚¹"></a>4.Lombokçš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p><p>èƒ½é€šè¿‡æ³¨è§£çš„å½¢å¼è‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€equalsã€hashcodeã€toStringç­‰æ–¹æ³•ï¼Œæé«˜äº†ä¸€å®šçš„å¼€å‘æ•ˆç‡<br>è®©ä»£ç å˜å¾—ç®€æ´ï¼Œä¸ç”¨è¿‡å¤šçš„å»å…³æ³¨ç›¸åº”çš„æ–¹æ³•<br>å±æ€§åšä¿®æ”¹æ—¶ï¼Œä¹Ÿç®€åŒ–äº†ç»´æŠ¤ä¸ºè¿™äº›å±æ€§æ‰€ç”Ÿæˆçš„getter/setteræ–¹æ³•ç­‰<br>ç¼ºç‚¹ï¼š</p><p>ä¸æ”¯æŒå¤šç§å‚æ•°æ„é€ å™¨çš„é‡è½½<br>è™½ç„¶çœå»äº†æ‰‹åŠ¨åˆ›å»ºgetter/setteræ–¹æ³•çš„éº»çƒ¦ï¼Œä½†å¤§å¤§é™ä½äº†æºä»£ç çš„å¯è¯»æ€§å’Œå®Œæ•´æ€§ï¼Œé™ä½äº†é˜…è¯»æºä»£ç çš„èˆ’é€‚åº¦</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å°å‰²</title>
      <link href="/2025/03/09/%E6%9C%80%E5%B0%8F%E5%89%B2/"/>
      <url>/2025/03/09/%E6%9C%80%E5%B0%8F%E5%89%B2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€å°å‰²å°±æ˜¯æœ€å¤§æµï¼Œï¼ˆæ±‚å®Œäº†ä¹‹åçš„æ®‹ç•™ç½‘ç»œå°±æ˜¯æœ€å°å‰²ï¼‰</p><h3 id="æœ€å°å‰²çš„æ±‚è§£æ–¹æ³•"><a href="#æœ€å°å‰²çš„æ±‚è§£æ–¹æ³•" class="headerlink" title="æœ€å°å‰²çš„æ±‚è§£æ–¹æ³•"></a>æœ€å°å‰²çš„æ±‚è§£æ–¹æ³•</h3><p>åœ¨ Dinic ç®—æ³•ä¸­ï¼Œæ±‚å®Œæœ€å¤§æµåï¼Œæ®‹ç•™ç½‘ç»œä¸­ä¸å†å­˜åœ¨ä»æºç‚¹åˆ°æ±‡ç‚¹çš„å¢å¹¿è·¯å¾„ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€æ¬¡ BFSï¼Œä»æºç‚¹å‡ºå‘éå†æ®‹ç•™ç½‘ç»œï¼Œæ ‡è®°æ‰€æœ‰ä»å¯åˆ°è¾¾çš„é¡¶ç‚¹ã€‚ä»£ç ä¸­çš„ <code>minCut()</code> å‡½æ•°æ­£æ˜¯åˆ©ç”¨æœ€åä¸€æ¬¡ BFS è®¡ç®—çš„ç»“æœï¼š</p><p>cpp</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>std::vector&lt;bool&gt; minCut() &#123;     std::vector&lt;bool&gt; c(n);     for (int i = 0; i &lt; n; i++) &#123;         c[i] = (h[i] != -1);     &#125;     return c; &#125;</code></p><p>è¿™é‡Œè¿”å›çš„å¸ƒå°”æ•°ç»„ <code>c</code> è¡¨ç¤ºæ¯ä¸ªé¡¶ç‚¹æ˜¯å¦åœ¨æºç‚¹ s çš„å¯è¾¾é›†åˆ S ä¸­ã€‚æ ¹æ®æœ€å¤§æµæœ€å°å‰²å®šç†ï¼Œä» S åˆ° Tï¼ˆä¸å¯è¾¾éƒ¨åˆ†ï¼‰çš„è¾¹å°±æ˜¯æœ€å°å‰²è¾¹ã€‚è™½ç„¶å‡½æ•°æœ¬èº«åªè¿”å›äº† S é›†åˆçš„ä¿¡æ¯ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ‰«ææ‰€æœ‰è¾¹ï¼Œæ‰¾å‡ºé‚£äº›ä¸€ç«¯åœ¨ Sï¼ˆ<code>c[u] == true</code>ï¼‰è€Œå¦ä¸€ç«¯åœ¨ Tï¼ˆ<code>c[v] == false</code>ï¼‰çš„è¾¹ï¼Œä»è€Œå¾—åˆ°å…·ä½“çš„å‰²è¾¹ã€‚</p><h3 id="dep-æ•°ç»„çš„ä½œç”¨"><a href="#dep-æ•°ç»„çš„ä½œç”¨" class="headerlink" title="dep æ•°ç»„çš„ä½œç”¨"></a>dep æ•°ç»„çš„ä½œç”¨</h3><ul><li><p><strong>å±‚æ¬¡æ ‡å·</strong>ï¼šåœ¨ Dinic ç®—æ³•ä¸­ï¼Œ<code>h</code> æ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªé¡¶ç‚¹åœ¨æ®‹ç•™ç½‘ç»œä¸­è·ç¦»æºç‚¹ s çš„å±‚æ¬¡ï¼ˆæˆ–è€…ç§°â€œé«˜åº¦â€ï¼‰ã€‚åœ¨ BFS è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰é¡¶ç‚¹åˆå§‹å€¼éƒ½è®¾ä¸º -1ï¼Œåªæœ‰ä»æºç‚¹å¯ä»¥åˆ°è¾¾çš„é¡¶ç‚¹ä¼šè¢«èµ‹äºˆéè´Ÿå€¼ï¼Œå…¶ä¸­æºç‚¹ <code>h[s]</code> è¢«è®¾ä¸º 0ï¼Œä¹‹åæ¯ç»è¿‡ä¸€æ¡æ®‹ç•™è¾¹ï¼Œå±‚æ¬¡å¢åŠ  1ã€‚</p></li><li><p><strong>æ„é€ å±‚æ¬¡å›¾</strong>ï¼šåœ¨ BFS éå†ä¸­ï¼Œåªæœ‰é‚£äº›å…·æœ‰æ­£æ®‹é‡çš„è¾¹ä¼šè¢«è€ƒè™‘ï¼Œå› æ­¤ <code>h</code> æ•°ç»„å®é™…æ„é€ äº†ä¸€ä¸ªâ€œå±‚æ¬¡å›¾â€ï¼Œä½¿å¾— DFS åªæ²¿ç€æ»¡è¶³ <code>h[v] == h[u] + 1</code> çš„è¾¹è¿›è¡Œï¼Œä»è€Œæé«˜æœç´¢æ•ˆç‡ã€‚</p></li><li><p><strong>ç¡®å®šæœ€å°å‰²çš„ S é›†åˆ</strong>ï¼šå½“æœ€å¤§æµæ±‚è§£å®Œæˆåï¼Œæœ€åä¸€æ¬¡ BFS è¿‡ç¨‹ä¸­ä»ç„¶èƒ½åˆ°è¾¾çš„é¡¶ç‚¹ï¼Œå…¶ <code>h</code> å€¼ä¸ä¸º -1ã€‚è¿™äº›é¡¶ç‚¹æ„æˆäº† S é›†åˆï¼ˆå³ä»æºç‚¹ s åœ¨æ®‹ç•™ç½‘ç»œä¸­å¯ä»¥è¾¾åˆ°çš„æ‰€æœ‰é¡¶ç‚¹ï¼‰ï¼Œè€Œæ— æ³•åˆ°è¾¾çš„é¡¶ç‚¹æ„æˆ T é›†åˆã€‚æ­£æ˜¯è¿™ç§åˆ’åˆ†å†³å®šäº†æœ€å°å‰²çš„è¾¹ï¼šæ‰€æœ‰ä» S åˆ° T çš„è¾¹ï¼Œå…¶æ€»å®¹é‡å³ä¸ºæœ€å°å‰²çš„å®¹é‡ã€‚</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MaxFlow</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> v;</span><br><span class="line">        T cap;</span><br><span class="line">        <span class="built_in">Edge</span>(<span class="type">int</span> v, T cap) : <span class="built_in">v</span>(v), <span class="built_in">cap</span>(cap) &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Edge&gt; e;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; g;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; dep, cur;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MaxFlow</span>(<span class="type">int</span> n) :<span class="built_in">n</span>(n), <span class="built_in">g</span>(n) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        dep.<span class="built_in">assign</span>(n, <span class="number">-1</span>);</span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(s);</span><br><span class="line">        dep[s] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[u]) &#123;</span><br><span class="line">                <span class="keyword">auto</span> [v, c] = e[i];</span><br><span class="line">                <span class="keyword">if</span> (c &gt; <span class="number">0</span> &amp;&amp; dep[v] == <span class="number">-1</span>) &#123;</span><br><span class="line">                    dep[v] = dep[u] + <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    <span class="keyword">if</span> (v == t) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t, T flow)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (u == t) <span class="keyword">return</span> flow;</span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = cur[u]; i &lt; g[u].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            cur[u] = i;</span><br><span class="line">            <span class="type">int</span> j = g[u][i];</span><br><span class="line">            <span class="keyword">auto</span>&amp; [v, c] = e[j];</span><br><span class="line">            <span class="keyword">if</span> (dep[v] == dep[u] + <span class="number">1</span> &amp;&amp; c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                T f = <span class="built_in">dfs</span>(v, t, <span class="built_in">min</span>(c, flow));</span><br><span class="line">                e[j].cap -= f;</span><br><span class="line">                e[j ^ <span class="number">1</span>].cap += f;</span><br><span class="line">                sum += f;</span><br><span class="line">                flow -= f;</span><br><span class="line">                <span class="keyword">if</span> (flow == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum == <span class="number">0</span>) dep[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dinic</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        T F = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">bfs</span>(s, t)) &#123;</span><br><span class="line">            cur.<span class="built_in">assign</span>(n, <span class="number">0</span>);</span><br><span class="line">            F += <span class="built_in">dfs</span>(s, t, std::numeric_limits&lt;T&gt;::<span class="built_in">max</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> F;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">minCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">c</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            c[i] = (dep[i] == <span class="number">-1</span>) ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, T c)</span> </span>&#123;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(v, c);</span><br><span class="line">        g[v].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(u, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸¾ä¸€ä¸ªåº”ç”¨ï¼ˆæ±‚æœ€å°å‰²è¾¹é›†åˆï¼‰</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MaxFlow</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> v;</span><br><span class="line">        T cap;</span><br><span class="line">        <span class="built_in">Edge</span>(<span class="type">int</span> v, T cap) : <span class="built_in">v</span>(v), <span class="built_in">cap</span>(cap) &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Edge&gt; e;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; g;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; dep, cur;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MaxFlow</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">g</span>(n) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        dep.<span class="built_in">assign</span>(n, <span class="number">-1</span>);</span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(s);</span><br><span class="line">        dep[s] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[u]) &#123;</span><br><span class="line">                <span class="keyword">auto</span> [v, c] = e[i];</span><br><span class="line">                <span class="keyword">if</span> (c &gt; <span class="number">0</span> &amp;&amp; dep[v] == <span class="number">-1</span>) &#123;</span><br><span class="line">                    dep[v] = dep[u] + <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    <span class="keyword">if</span> (v == t) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t, T flow)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (u == t) <span class="keyword">return</span> flow;</span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = cur[u]; i &lt; g[u].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            cur[u] = i;</span><br><span class="line">            <span class="type">int</span> j = g[u][i];</span><br><span class="line">            <span class="keyword">auto</span>&amp; [v, c] = e[j];</span><br><span class="line">            <span class="keyword">if</span> (dep[v] == dep[u] + <span class="number">1</span> &amp;&amp; c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                T f = <span class="built_in">dfs</span>(v, t, <span class="built_in">min</span>(c, flow));</span><br><span class="line">                e[j].cap -= f;</span><br><span class="line">                e[j ^ <span class="number">1</span>].cap += f;</span><br><span class="line">                sum += f;</span><br><span class="line">                flow -= f;</span><br><span class="line">                <span class="keyword">if</span> (flow == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum == <span class="number">0</span>) dep[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dinic</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        T F = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">bfs</span>(s, t)) &#123;</span><br><span class="line">            cur.<span class="built_in">assign</span>(n, <span class="number">0</span>);</span><br><span class="line">            F += <span class="built_in">dfs</span>(s, t, std::numeric_limits&lt;T&gt;::<span class="built_in">max</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> F;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">minCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">c</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            c[i] = (dep[i] == <span class="number">-1</span>) ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, T c)</span> </span>&#123;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(v, c);</span><br><span class="line">        g[v].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(u, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, m, s, t;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="function">MaxFlow&lt;i64&gt; <span class="title">mf</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        i64 w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        mf.<span class="built_in">add</span>(u, v, w);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 k = mf.<span class="built_in">dinic</span>(s, t);</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; p = mf.<span class="built_in">minCut</span>();</span><br><span class="line">    cerr &lt;&lt; k &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    i64 cut = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[i]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> j : mf.g[p[i]]) &#123;</span><br><span class="line">                <span class="keyword">auto</span> [v, w] = mf.e[j];</span><br><span class="line">                <span class="keyword">if</span> (!p[v]) &#123;</span><br><span class="line">                    cut += w;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; k &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; cut &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å¤§æµ</title>
      <link href="/2025/03/09/%E6%9C%80%E5%A4%A7%E6%B5%81/"/>
      <url>/2025/03/09/%E6%9C%80%E5%A4%A7%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>æ±‚è§£ä»æºç‚¹såˆ°æ±‡ç‚¹tçš„æœ€å¤§æµé‡é—®é¢˜</p><h3 id="Fold-fulkerson"><a href="#Fold-fulkerson" class="headerlink" title="Fold - fulkerson"></a>Fold - fulkerson</h3><p>  ä¾èµ–ä¸€ä¸ªæ®‹ç•™ç½‘ç»œï¼Œæ¯æ¬¡æ›´æ–°ä¸€æ¡ä»æºç‚¹åˆ°æ±‡ç‚¹çš„è·¯å¾„çš„æµé‡ï¼Œåœ¨æ›´æ–°çš„æ—¶å€™åŒæ—¶åœ¨æ®‹ç•™ç½‘ç»œå»ºç«‹å¯¹åº”è¾¹çš„åè¾¹ï¼Œç›´åˆ°æ®‹ç•™ç½‘ç»œæ²¡æœ‰ä»s - tçš„è¾¹ï¼Œ</p><p>æœ€å¤§æµæœ€å°å‰²å®šç†<br>    ä¸€ä¸ªæµæ˜¯æœ€å¤§æµï¼Œå½“ä¸”ä»…å½“ä»–çš„æ®‹ç•™ç½‘ç»œä¸åŒ…å«å¢å¹¿è·¯å¾„</p></blockquote><h3 id="Edmonds-Karps"><a href="#Edmonds-Karps" class="headerlink" title="Edmonds-Karps"></a>Edmonds-Karps</h3><p>  å¯¹äºFold - fulkersonç®—æ³•ï¼Œè™½ç„¶å¯ä»¥æ­£ç¡®çš„æ‰¾åˆ°ä»–çš„æœ€å¤§æµï¼Œä½†æ˜¯ä»–çš„æ—¶é—´å¤æ‚åº¦ä¾èµ–äºè¾¹çš„æƒï¼Œ æ¯”å¦‚ã€Šç®—æ³•ç«èµ›ã€‹ P666ï¼Œ </p><p>  å¯¹äºFold - fulkersonæ”¹è¿›ï¼Œä½¿ç”¨bfsï¼Œ æ¯æ¬¡æ‰¾åˆ°æœ€çŸ­çš„å¢å¹¿è·¯å¾„ï¼Œå¯¹è¯¥è·¯å¾„è¿›è¡Œè®¡ç®—ï¼Œå¯ä»¥å¤§å¤§ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦, ä¸€æ¬¡bfsçš„æ—¶é—´å¤æ‚åº¦æ˜¯ o ( m ) , å¯¹äºbfsï¼Œ å¢å¹¿è¦å¤„ç†nä¸ªç‚¹ï¼Œ mæ¡è¾¹ï¼Œ æ•…æ—¶é—´å¤æ‚åº¦ä¸º o ( nm ), ç»¼åˆèµ·æ¥æ—¶é—´å¤æ‚åº¦æ˜¯o ($n ^ 2 * m$)</p><p>ä»£ç  :<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></p><ul><li>å…ˆæ”¾ä¸€ä¸ªjianglyä»£ç  ï¼š <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">1e9</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MaxFlow</span> &#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">_Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> to;</span><br><span class="line">        T cap;</span><br><span class="line">        _Edge(<span class="type">int</span> to, T cap) : <span class="built_in">to</span>(to), <span class="built_in">cap</span>(cap) &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    std::vector&lt;_Edge&gt; e;</span><br><span class="line">    std::vector&lt;std::vector&lt;<span class="type">int</span>&gt;&gt; g;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; cur, h;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MaxFlow</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">MaxFlow</span>(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">init</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">        e.<span class="built_in">clear</span>();</span><br><span class="line">        g.<span class="built_in">assign</span>(n, &#123;&#125;);</span><br><span class="line">        cur.<span class="built_in">resize</span>(n);</span><br><span class="line">        h.<span class="built_in">resize</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        h.<span class="built_in">assign</span>(n, <span class="number">-1</span>);</span><br><span class="line">        std::queue&lt;<span class="type">int</span>&gt; que;</span><br><span class="line">        h[s] = <span class="number">0</span>;</span><br><span class="line">        que.<span class="built_in">push</span>(s);</span><br><span class="line">        <span class="keyword">while</span> (!que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> u = que.<span class="built_in">front</span>();</span><br><span class="line">            que.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i : g[u]) &#123;</span><br><span class="line">                <span class="keyword">auto</span> [v, c] = e[i];</span><br><span class="line">                <span class="keyword">if</span> (c &gt; <span class="number">0</span> &amp;&amp; h[v] == <span class="number">-1</span>) &#123;</span><br><span class="line">                    h[v] = h[u] + <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (v == t) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    que.<span class="built_in">push</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t, T f)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (u == t) &#123;</span><br><span class="line">            <span class="keyword">return</span> f;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">auto</span> r = f;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>&amp; i = cur[u]; i &lt; <span class="built_in">int</span>(g[u].<span class="built_in">size</span>()); ++i) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> j = g[u][i];</span><br><span class="line">            <span class="keyword">auto</span> [v, c] = e[j];</span><br><span class="line">            <span class="keyword">if</span> (c &gt; <span class="number">0</span> &amp;&amp; h[v] == h[u] + <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">auto</span> a = <span class="built_in">dfs</span>(v, t, std::<span class="built_in">min</span>(r, c));</span><br><span class="line">                e[j].cap -= a;</span><br><span class="line">                e[j ^ <span class="number">1</span>].cap += a;</span><br><span class="line">                r -= a;</span><br><span class="line">                <span class="keyword">if</span> (r == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> f;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f - r;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addEdge</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, T c)</span> </span>&#123;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(e.<span class="built_in">size</span>());</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(v, c);</span><br><span class="line">        g[v].<span class="built_in">push_back</span>(e.<span class="built_in">size</span>());</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(u, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">T <span class="title">flow</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        T ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">bfs</span>(s, t)) &#123;</span><br><span class="line">            cur.<span class="built_in">assign</span>(n, <span class="number">0</span>);</span><br><span class="line">            ans += <span class="built_in">dfs</span>(s, t, std::numeric_limits&lt;T&gt;::<span class="built_in">max</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">bool</span>&gt; <span class="title">minCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">std::vector&lt;<span class="type">bool</span>&gt; <span class="title">c</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            c[i] = (h[i] != <span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> from;</span><br><span class="line">        <span class="type">int</span> to;</span><br><span class="line">        T cap;</span><br><span class="line">        T flow;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function">std::vector&lt;Edge&gt; <span class="title">edges</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::vector&lt;Edge&gt; a;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; e.<span class="built_in">size</span>(); i += <span class="number">2</span>) &#123;</span><br><span class="line">            Edge x;</span><br><span class="line">            x.from = e[i + <span class="number">1</span>].to;</span><br><span class="line">            x.to = e[i].to;</span><br><span class="line">            x.cap = e[i].cap + e[i + <span class="number">1</span>].cap;</span><br><span class="line">            x.flow = e[i + <span class="number">1</span>].cap;</span><br><span class="line">            a.<span class="built_in">push_back</span>(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>å¾…ä¼šè‡ªå·±å†™ä¸€ä¸ªï¼Œç”¨ä¸´ç•ŒçŸ©é˜µå…ˆå†™ä¸€ä¸ªEKçš„</p><h4 id="Dinic"><a href="#Dinic" class="headerlink" title="Dinic"></a>Dinic</h4><p>å¯¹äºFFçš„ä¼˜åŒ–ï¼Œç”±äºFFæ¯æ¬¡éƒ½éœ€è¦éšæœºæ‰¾åˆ°ä¸€æ¡å¢å¹¿è·¯å¾„ï¼Œè€ŒDinicå°†å›¾åˆ†å±‚æ¬¡ä¹‹åï¼Œæ¯æ¬¡æ‰¾å¢å¹¿è·¯å¾„åªèƒ½æ‰¾åˆ°è¿™æ¡è·¯å’Œä¸‹ä¸€æ¡è·¯çš„è·¯å¾„ï¼Œè¿™æ ·æå¤§ä¼˜åŒ–äº†æ—¶é—´</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MaxFlow</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">        <span class="type">int</span> v;</span><br><span class="line">        T cap;</span><br><span class="line">        <span class="built_in">Edge</span>(<span class="type">int</span> v, T cap) : <span class="built_in">v</span>(v), <span class="built_in">cap</span>(cap) &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Edge&gt; e;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; g;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; dep, cur;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">MaxFlow</span>(<span class="type">int</span> n) :<span class="built_in">n</span>(n), <span class="built_in">g</span>(n) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        dep.<span class="built_in">assign</span>(n, <span class="number">-1</span>);</span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(s);</span><br><span class="line">        dep[s] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[u]) &#123;</span><br><span class="line">                <span class="keyword">auto</span> [v, c] = e[i];</span><br><span class="line">                <span class="keyword">if</span> (c &gt; <span class="number">0</span> &amp;&amp; dep[v] == <span class="number">-1</span>) &#123;</span><br><span class="line">                    dep[v] = dep[u] + <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(v);</span><br><span class="line">                    <span class="keyword">if</span> (v == t) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> t, T flow)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (u == t) <span class="keyword">return</span> flow;</span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = cur[u]; i &lt; g[u].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            cur[u] = i;</span><br><span class="line">            <span class="type">int</span> j = g[u][i];</span><br><span class="line">            <span class="keyword">auto</span>&amp; [v, c] = e[j];</span><br><span class="line">            <span class="keyword">if</span> (dep[v] == dep[u] + <span class="number">1</span> &amp;&amp; c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                T f = <span class="built_in">dfs</span>(v, t, <span class="built_in">min</span>(c, flow));</span><br><span class="line">                e[j].cap -= f;</span><br><span class="line">                e[j ^ <span class="number">1</span>].cap += f;</span><br><span class="line">                sum += f;</span><br><span class="line">                flow -= f;</span><br><span class="line">                <span class="keyword">if</span> (flow == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum == <span class="number">0</span>) dep[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">dinic</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        T F = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">bfs</span>(s, t)) &#123;</span><br><span class="line">            cur.<span class="built_in">assign</span>(n, <span class="number">0</span>);</span><br><span class="line">            F += <span class="built_in">dfs</span>(s, t, inf);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> F;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, T c)</span> </span>&#123;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(v, c);</span><br><span class="line">        g[v].<span class="built_in">push_back</span>(<span class="built_in">int</span>(e.<span class="built_in">size</span>()));</span><br><span class="line">        e.<span class="built_in">emplace_back</span>(u, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŠ å…¥äº†å½“å‰å¼§ä¼˜åŒ–ï¼Œ ä½¿å¾—æ•ˆç‡æ›´é«˜</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå°„</title>
      <link href="/2025/03/08/%E5%8F%8D%E5%B0%84/"/>
      <url>/2025/03/08/%E5%8F%8D%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-åå°„æœºåˆ¶æ¦‚è¿°"><a href="#1-åå°„æœºåˆ¶æ¦‚è¿°" class="headerlink" title="1. åå°„æœºåˆ¶æ¦‚è¿°"></a>1. åå°„æœºåˆ¶æ¦‚è¿°</h2><p>Java çš„åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è·å–ç±»çš„ä¿¡æ¯ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œè€Œæ— éœ€åœ¨ç¼–è¯‘æ—¶çŸ¥é“å…·ä½“çš„ç±»ç»“æ„ã€‚ç®€å•æ¥è¯´ï¼Œåå°„ä½¿å¾—ç¨‹åºå¯ä»¥åŠ¨æ€åŠ è½½ç±»ã€æ£€æŸ¥ç±»çš„æˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ï¼‰ã€è°ƒç”¨æ–¹æ³•å’Œåˆ›å»ºå¯¹è±¡ã€‚æ­£å› ä¸ºè¿™ç§åŠ¨æ€æ€§ï¼Œåå°„åœ¨å¾ˆå¤šæ¡†æ¶ï¼ˆå¦‚ Springã€Hibernateï¼‰ã€ä¾èµ–æ³¨å…¥ã€åŠ¨æ€ä»£ç†ç­‰é¢†åŸŸä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><hr><h2 id="2-åŸºæœ¬ä½¿ç”¨"><a href="#2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2. åŸºæœ¬ä½¿ç”¨"></a>2. åŸºæœ¬ä½¿ç”¨</h2><h3 id="2-1-è·å–-Class-å¯¹è±¡"><a href="#2-1-è·å–-Class-å¯¹è±¡" class="headerlink" title="2.1 è·å– Class å¯¹è±¡"></a>2.1 è·å– Class å¯¹è±¡</h3><p>åå°„çš„å…¥å£æ˜¯ <code>java.lang.Class</code> å¯¹è±¡ï¼Œè·å–æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ol><li><p><strong>ä½¿ç”¨ <code>.class</code> è¯­æ³•ï¼š</strong></p><p> java</p><p> å¤åˆ¶ç¼–è¾‘</p><p> <code>Class&lt;String&gt; clazz1 = String.class;</code></p></li><li><p><strong>é€šè¿‡å¯¹è±¡çš„ <code>getClass()</code> æ–¹æ³•ï¼š</strong></p><p> java</p><p> å¤åˆ¶ç¼–è¾‘</p><p> <code>String str = &quot;Hello&quot;; Class&lt;?&gt; clazz2 = str.getClass();</code></p></li><li><p><strong>ä½¿ç”¨ <code>Class.forName()</code> æ–¹æ³•ï¼š</strong><br> é€‚åˆåŠ¨æ€åŠ è½½ç±»ï¼Œä¼ å…¥ç±»çš„å…¨é™å®šåã€‚</p><p> java</p><p> å¤åˆ¶ç¼–è¾‘</p><p> <code>Class&lt;?&gt; clazz3 = Class.forName(&quot;java.lang.String&quot;);</code></p></li></ol><h3 id="2-2-è®¿é—®å­—æ®µï¼ˆFieldï¼‰"><a href="#2-2-è®¿é—®å­—æ®µï¼ˆFieldï¼‰" class="headerlink" title="2.2 è®¿é—®å­—æ®µï¼ˆFieldï¼‰"></a>2.2 è®¿é—®å­—æ®µï¼ˆFieldï¼‰</h3><p>å¯ä»¥é€šè¿‡ <code>getField()</code>ï¼ˆä»…é™ public å­—æ®µï¼‰æˆ– <code>getDeclaredField()</code>ï¼ˆåŒ…æ‹¬ private å­—æ®µï¼‰æ¥è·å–å­—æ®µå¯¹è±¡ï¼Œå¹¶é€šè¿‡ <code>Field.set()</code> æˆ– <code>Field.get()</code> è¿›è¡Œè¯»å†™æ“ä½œã€‚</p><ul><li><p><strong>ç¤ºä¾‹ï¼šè®¿é—® public å­—æ®µ</strong></p><p>  java</p><p>  å¤åˆ¶ç¼–è¾‘</p><p>  <code>class Person &#123;     public String name; &#125;  Person p = new Person(); Field nameField = p.getClass().getField(&quot;name&quot;); nameField.set(p, &quot;Alice&quot;); System.out.println(p.name); // è¾“å‡ºï¼šAlice</code></p></li><li><p><strong>ç¤ºä¾‹ï¼šè®¿é—® private å­—æ®µ</strong></p><p>  java</p><p>  å¤åˆ¶ç¼–è¾‘</p><p>  <code>class Person &#123;     private int age; &#125;  Person p = new Person(); Field ageField = p.getClass().getDeclaredField(&quot;age&quot;); ageField.setAccessible(true);  // å…³é—­è®¿é—®æ§åˆ¶æ£€æŸ¥ ageField.set(p, 30); System.out.println(ageField.get(p)); // è¾“å‡ºï¼š30</code></p></li></ul><h3 id="2-3-è°ƒç”¨æ–¹æ³•ï¼ˆMethodï¼‰"><a href="#2-3-è°ƒç”¨æ–¹æ³•ï¼ˆMethodï¼‰" class="headerlink" title="2.3 è°ƒç”¨æ–¹æ³•ï¼ˆMethodï¼‰"></a>2.3 è°ƒç”¨æ–¹æ³•ï¼ˆMethodï¼‰</h3><p>åŒæ ·åœ°ï¼Œåˆ©ç”¨ <code>getMethod()</code> å’Œ <code>getDeclaredMethod()</code> åˆ†åˆ«è·å– public å’Œæ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬ privateï¼‰ï¼Œé€šè¿‡ <code>Method.invoke()</code> æ¥è°ƒç”¨æ–¹æ³•ã€‚</p><ul><li><p><strong>ç¤ºä¾‹ï¼šè°ƒç”¨ public æ–¹æ³•</strong></p><p>  java</p><p>  å¤åˆ¶ç¼–è¾‘</p><p>  <code>class Dog &#123;     public void bark() &#123;         System.out.println(&quot;Woof!&quot;);     &#125; &#125;  Dog dog = new Dog(); Method barkMethod = dog.getClass().getMethod(&quot;bark&quot;); barkMethod.invoke(dog);  // è¾“å‡ºï¼šWoof!</code></p></li><li><p><strong>ç¤ºä¾‹ï¼šè°ƒç”¨ private æ–¹æ³•</strong></p><p>  java</p><p>  å¤åˆ¶ç¼–è¾‘</p><p>  <code>class Dog &#123;     private void secret() &#123;         System.out.println(&quot;Secret method invoked!&quot;);     &#125; &#125;  Dog dog = new Dog(); Method secretMethod = dog.getClass().getDeclaredMethod(&quot;secret&quot;); secretMethod.setAccessible(true); secretMethod.invoke(dog);  // è¾“å‡ºï¼šSecret method invoked!</code></p></li></ul><h3 id="2-4-æ„é€ å‡½æ•°å’Œå¯¹è±¡åˆ›å»ºï¼ˆConstructorï¼‰"><a href="#2-4-æ„é€ å‡½æ•°å’Œå¯¹è±¡åˆ›å»ºï¼ˆConstructorï¼‰" class="headerlink" title="2.4 æ„é€ å‡½æ•°å’Œå¯¹è±¡åˆ›å»ºï¼ˆConstructorï¼‰"></a>2.4 æ„é€ å‡½æ•°å’Œå¯¹è±¡åˆ›å»ºï¼ˆConstructorï¼‰</h3><p>é€šè¿‡åå°„ä¹Ÿå¯ä»¥è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œå³ä½¿æ„é€ å‡½æ•°æ˜¯ private çš„</p><ul><li>isVarArgs : æ˜¯å¦æ³›å‹</li><li>getParamaterTypes:  ä»¥Classæ•°ç»„å½¢å¼æŒ‰ç…§å£°æ˜é¡ºåºè·å¾—æ„é€ æ–¹æ³•çš„å„ä¸ªå‚æ•°ç±»å‹</li><li>getExceptionTypes: ä»¥Classæ•°ç»„å½¢å¼è·å¾—è¯¥æ„é€ æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸</li><li>newInstance() : é€šè¿‡å¯¹åº”å‚æ•°çš„æ„é€ æ–¹æ³•è°ƒç”¨ <strong>public</strong> æˆ–è€… <strong>protected</strong> æ„é€ å‡½æ•°</li><li>setAccessible() : è®¾ç½®æƒé™ï¼ˆtrueï¼Œ falseï¼‰</li><li>getModifiers() : è·å¾—å¯ä»¥è§£æå‡ºè¯¥æ„é€ æ–¹æ³•æ‰€ä¿®é¥°çš„æ•´æ•°</li></ul><blockquote><p>Modifiersç±»ï¼š</p></blockquote><ul><li>isPublic</li><li>isProtected</li><li>isPrivate</li><li>isStatic</li><li>isFinal</li><li>toString</li></ul><ul><li><strong>ç¤ºä¾‹ï¼šé€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;  </span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ex1</span> &#123;  </span><br><span class="line">    String s;  </span><br><span class="line">    <span class="type">int</span> i, i2, i3;  </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ex1</span><span class="params">()</span> &#123;  </span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">ex1</span><span class="params">(String s, <span class="type">int</span> i)</span> &#123;  </span><br><span class="line">        <span class="built_in">this</span>.s = s;  </span><br><span class="line">        <span class="built_in">this</span>.i = i;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ex1</span><span class="params">(String... strings)</span> <span class="keyword">throws</span> NumberFormatException &#123;  </span><br><span class="line">        <span class="keyword">if</span> (strings.length &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">            i = Integer.valueOf(strings[<span class="number">0</span>]);  </span><br><span class="line">        &#125;        <span class="keyword">if</span> (strings.length &gt; <span class="number">1</span>) &#123;  </span><br><span class="line">            i = Integer.valueOf(strings[<span class="number">1</span>]);  </span><br><span class="line">        &#125;        <span class="keyword">if</span> (strings.length &gt; <span class="number">2</span>) &#123;  </span><br><span class="line">            i = Integer.valueOf(strings[<span class="number">2</span>]);  </span><br><span class="line">        &#125;    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;s = &quot;</span> + s);  </span><br><span class="line">        System.out.println(<span class="string">&quot;i = &quot;</span> + i);  </span><br><span class="line">        System.out.println(<span class="string">&quot;i2 = &quot;</span> + i2);  </span><br><span class="line">        System.out.println(<span class="string">&quot;i3 = &quot;</span> + i3);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="type">ex1</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ex1</span>(<span class="string">&quot;10&quot;</span>, <span class="string">&quot;20&quot;</span>, <span class="string">&quot;30&quot;</span>);  </span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">ex1</span>&gt; exc = e.getClass();  </span><br><span class="line">        Constructor[] declareConstructors = e.getClass().getDeclaredConstructors();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; declareConstructors.length; i++) &#123;  </span><br><span class="line">            Constructor&lt;?&gt; constructor = declareConstructors[i];  </span><br><span class="line">            System.out.println(<span class="string">&quot;æŸ¥çœ‹æ˜¯å¦å¯å˜åŒ–å‚æ•°å˜é‡:&quot;</span> + constructor.isVarArgs());  </span><br><span class="line">  </span><br><span class="line">            System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•çš„å‚æ•°ä¾æ¬¡æ˜¯:&quot;</span>);  </span><br><span class="line">            Class[] parameterTypes = constructor.getParameterTypes();  </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> x : parameterTypes) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot; &quot;</span> + x);  </span><br><span class="line">            &#125;  </span><br><span class="line">            System.out.println(<span class="string">&quot;å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸&quot;</span>);  </span><br><span class="line">            Class[] exceptionTypes = constructor.getExceptionTypes();  </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> x : exceptionTypes) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot; &quot;</span> + x);  </span><br><span class="line">            &#125;  </span><br><span class="line">            <span class="type">ex1</span> <span class="variable">ex2</span> <span class="operator">=</span> <span class="literal">null</span>;  </span><br><span class="line">            <span class="keyword">while</span> (ex2 == <span class="literal">null</span>) &#123;  </span><br><span class="line">                <span class="keyword">try</span> &#123;  </span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;  </span><br><span class="line">                        ex2 = (ex1)constructor.newInstance();  </span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;  </span><br><span class="line">                        ex2 = (ex1)constructor.newInstance(<span class="string">&quot;7&quot;</span>, <span class="number">5</span>);  </span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                        Object[] tp = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="string">&quot;100&quot;</span>, <span class="string">&quot;200&quot;</span>, <span class="string">&quot;300&quot;</span> &#125;&#125;;  </span><br><span class="line">                        ex2 = (ex1)constructor.newInstance(tp);  </span><br><span class="line">                    &#125;                </span><br><span class="line">                &#125; <span class="keyword">catch</span>(Exception err) &#123;  </span><br><span class="line">                    System.out.println(<span class="string">&quot;è®¿é—®é‡ç§æœ‰æ„é€ æ–¹æ³•ï¼Œä¸‹é¢æ‰§è¡ŒsetAccessibleæ–¹æ³•&quot;</span>);  </span><br><span class="line">                    constructor.setAccessible(<span class="literal">true</span>);  </span><br><span class="line">                &#125;            </span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="keyword">if</span> (ex2 != <span class="literal">null</span>) &#123;  </span><br><span class="line">                ex2.print();  </span><br><span class="line">                System.out.println();  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-å®ç°åŸç†"><a href="#3-å®ç°åŸç†" class="headerlink" title="3. å®ç°åŸç†"></a>3. å®ç°åŸç†</h2><p>Java åå°„æœºåˆ¶ä¾èµ–äº JVM åœ¨åŠ è½½ç±»æ—¶å°†ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆå¦‚ç±»åã€å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ã€æ³¨è§£ç­‰ï¼‰å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ <code>Class</code> å¯¹è±¡ä¸­ã€‚åå°„ API å°±æ˜¯é€šè¿‡è¯»å–è¿™äº›å…ƒæ•°æ®å®ç°åŠ¨æ€æ“ä½œçš„ï¼š</p><ul><li><p><strong>ç±»å…ƒæ•°æ®ï¼š</strong><br>  æ¯ä¸ªè¢«åŠ è½½çš„ç±»éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ <code>Class</code> å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰ç±»çš„ç»“æ„ä¿¡æ¯ã€‚è¿™ä¸ªä¿¡æ¯ä¸»è¦æ¥æºäºç¼–è¯‘åçš„ <code>.class</code> æ–‡ä»¶ã€‚</p></li><li><p><strong>å®‰å…¨æ£€æŸ¥ï¼š</strong><br>  é€šè¿‡åå°„æ“ä½œæ—¶ï¼ˆä¾‹å¦‚è®¿é—® private å­—æ®µï¼‰ï¼ŒJVM ä¼šè¿›è¡Œå®‰å…¨æ£€æŸ¥ã€‚å¦‚æœå­˜åœ¨å®‰å…¨ç®¡ç†å™¨ï¼ˆSecurityManagerï¼‰ï¼Œåœ¨è°ƒç”¨ <code>setAccessible(true)</code> æ—¶ä¼šéªŒè¯æƒé™ï¼Œé˜²æ­¢éšæ„çªç ´å°è£…ã€‚</p></li><li><p><strong>åŠ¨æ€è°ƒç”¨ï¼š</strong><br>  å½“ä½ è°ƒç”¨ <code>Method.invoke()</code> æ—¶ï¼ŒJVM å†…éƒ¨ä¼šåŠ¨æ€æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å¹¶æ‰§è¡Œã€‚ç”±äºè¿™ç§åŠ¨æ€æŸ¥æ‰¾æœºåˆ¶ï¼Œç›¸æ¯”äºç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œåå°„é€šå¸¸è¦æ…¢ä¸€äº›ã€‚</p></li><li><p><strong>ä¼˜åŒ–æ‰‹æ®µï¼š</strong><br>  ä¸ºäº†å‡å°‘æ€§èƒ½æŸå¤±ï¼Œå¸¸è§çš„åšæ³•æ˜¯<strong>ç¼“å­˜</strong>åå°„å¾—åˆ°çš„ <code>Method</code>ã€<code>Field</code> æˆ– <code>Constructor</code> å¯¹è±¡ã€‚æ­¤å¤–ï¼ŒJava 7 å¼•å…¥äº† <code>MethodHandle</code>ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥è·å¾—æ¯”ä¼ ç»Ÿåå°„æ›´é«˜æ•ˆçš„è°ƒç”¨ã€‚</p></li></ul><h2 id="Java-æ³¨è§£ï¼ˆAnnotationï¼‰è¯¦è§£"><a href="#Java-æ³¨è§£ï¼ˆAnnotationï¼‰è¯¦è§£" class="headerlink" title="Java æ³¨è§£ï¼ˆAnnotationï¼‰è¯¦è§£"></a>Java æ³¨è§£ï¼ˆAnnotationï¼‰è¯¦è§£</h2><h3 id="1-ä»€ä¹ˆæ˜¯-Annotationï¼ˆæ³¨è§£ï¼‰ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-Annotationï¼ˆæ³¨è§£ï¼‰ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Annotationï¼ˆæ³¨è§£ï¼‰ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯ Annotationï¼ˆæ³¨è§£ï¼‰ï¼Ÿ</h3><p><strong>æ³¨è§£ï¼ˆAnnotationï¼‰</strong> æ˜¯ Java è¯­è¨€æä¾›çš„ä¸€ç§<strong>å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶</strong>ï¼Œå¯ä»¥ç”¨æ¥<strong>æ ‡æ³¨ä»£ç </strong>ï¼Œä¸ºç¼–è¯‘å™¨ã€è¿è¡Œæ—¶ç¯å¢ƒæˆ–å…¶ä»–å·¥å…·æä¾›é¢å¤–çš„ä¿¡æ¯ã€‚</p><p>æ³¨è§£æœ¬èº«ä¸ä¼šå½±å“ä»£ç çš„é€»è¾‘è¿è¡Œï¼Œå®ƒä»¬é€šå¸¸ç”¨äºï¼š</p><ul><li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥</strong>ï¼ˆå¦‚ <code>@Override</code>ï¼‰</li><li><strong>ä»£ç ç”Ÿæˆ</strong>ï¼ˆå¦‚ Lombok çš„ <code>@Getter</code>ã€<code>@Setter</code>ï¼‰</li><li><strong>è¿è¡Œæ—¶å¤„ç†</strong>ï¼ˆå¦‚ Spring æ¡†æ¶çš„ <code>@Autowired</code>ï¼‰</li></ul><hr><h3 id="2-æ³¨è§£çš„å¸¸è§ä½œç”¨"><a href="#2-æ³¨è§£çš„å¸¸è§ä½œç”¨" class="headerlink" title="2. æ³¨è§£çš„å¸¸è§ä½œç”¨"></a>2. æ³¨è§£çš„å¸¸è§ä½œç”¨</h3><ol><li><strong>æä¾›ä¿¡æ¯ç»™ç¼–è¯‘å™¨</strong><ul><li>å¸®åŠ©ç¼–è¯‘å™¨æ£€æŸ¥é”™è¯¯ï¼Œä¾‹å¦‚ <code>@Override</code></li></ul></li><li><strong>åœ¨è¿è¡Œæ—¶è¿›è¡Œåå°„æ“ä½œ</strong><ul><li>é€šè¿‡åå°„è·å–æ³¨è§£ä¿¡æ¯ï¼Œå®ç°<strong>é…ç½®é©±åŠ¨</strong>å¼€å‘ï¼Œå¦‚ Spring çš„ <code>@Component</code></li></ul></li><li><strong>ç”Ÿæˆä»£ç </strong><ul><li>ä¾‹å¦‚ Lombok è‡ªåŠ¨ç”Ÿæˆ <code>getter/setter</code> æ–¹æ³•</li></ul></li><li><strong>æ›¿ä»£ XML é…ç½®</strong><ul><li>ä¾‹å¦‚ Spring Boot ç”¨ <code>@Configuration</code> ä»£æ›¿ XML è¿›è¡Œ Bean é…ç½®</li></ul></li></ol><hr><h3 id="3-å¸¸è§çš„-Java-å†…ç½®æ³¨è§£ï¼ˆæ ‡å‡†æ³¨è§£ï¼‰"><a href="#3-å¸¸è§çš„-Java-å†…ç½®æ³¨è§£ï¼ˆæ ‡å‡†æ³¨è§£ï¼‰" class="headerlink" title="3. å¸¸è§çš„ Java å†…ç½®æ³¨è§£ï¼ˆæ ‡å‡†æ³¨è§£ï¼‰"></a>3. å¸¸è§çš„ Java å†…ç½®æ³¨è§£ï¼ˆæ ‡å‡†æ³¨è§£ï¼‰</h3><h4 id="ï¼ˆ1ï¼‰ç¼–è¯‘æ—¶æ³¨è§£"><a href="#ï¼ˆ1ï¼‰ç¼–è¯‘æ—¶æ³¨è§£" class="headerlink" title="ï¼ˆ1ï¼‰ç¼–è¯‘æ—¶æ³¨è§£"></a>ï¼ˆ1ï¼‰ç¼–è¯‘æ—¶æ³¨è§£</h4><div class="table-container"><table><thead><tr><th>æ³¨è§£å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Override</code></td><td>æ ‡è®°ä¸€ä¸ªæ–¹æ³•é‡å†™äº†çˆ¶ç±»æ–¹æ³•ï¼Œé¿å…æ‹¼å†™é”™è¯¯</td></tr><tr><td><code>@Deprecated</code></td><td>æ ‡è®°æ–¹æ³•å·²è¿‡æ—¶ï¼Œè°ƒç”¨æ—¶ä¼šæœ‰è­¦å‘Š</td></tr><tr><td><code>@SuppressWarnings</code></td><td>å…³é—­ç¼–è¯‘å™¨è­¦å‘Šï¼Œå¦‚ <code>@SuppressWarnings(&quot;unchecked&quot;)</code></td></tr><tr><td><code>@SafeVarargs</code></td><td>è®©ç¼–è¯‘å™¨å¿½ç•¥æ³›å‹å‚æ•°çš„ç±»å‹å®‰å…¨è­¦å‘Š</td></tr></tbody></table></div><h4 id="ï¼ˆ2ï¼‰å…ƒæ³¨è§£ï¼ˆç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼‰"><a href="#ï¼ˆ2ï¼‰å…ƒæ³¨è§£ï¼ˆç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰å…ƒæ³¨è§£ï¼ˆç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼‰"></a>ï¼ˆ2ï¼‰å…ƒæ³¨è§£ï¼ˆç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼‰</h4><div class="table-container"><table><thead><tr><th>æ³¨è§£å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Retention</code></td><td>æŒ‡å®šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆSOURCE / CLASS / RUNTIMEï¼‰</td></tr><tr><td><code>@Target</code></td><td>æŒ‡å®šæ³¨è§£å¯ç”¨äºå“ªäº›å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼‰</td></tr><tr><td><code>@Documented</code></td><td>ä½¿æ³¨è§£å‡ºç°åœ¨ JavaDoc æ–‡æ¡£ä¸­</td></tr><tr><td><code>@Inherited</code></td><td>è®©æ³¨è§£å¯è¢«å­ç±»ç»§æ‰¿</td></tr><tr><td></td></tr></tbody></table></div><hr><h3 id="4-è‡ªå®šä¹‰æ³¨è§£"><a href="#4-è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="4. è‡ªå®šä¹‰æ³¨è§£"></a>4. è‡ªå®šä¹‰æ³¨è§£</h3><h4 id="ï¼ˆ1ï¼‰å®šä¹‰ä¸€ä¸ªç®€å•çš„æ³¨è§£"><a href="#ï¼ˆ1ï¼‰å®šä¹‰ä¸€ä¸ªç®€å•çš„æ³¨è§£" class="headerlink" title="ï¼ˆ1ï¼‰å®šä¹‰ä¸€ä¸ªç®€å•çš„æ³¨è§£"></a><strong>ï¼ˆ1ï¼‰å®šä¹‰ä¸€ä¸ªç®€å•çš„æ³¨è§£</strong></h4><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>import java.lang.annotation.*;  @Retention(RetentionPolicy.RUNTIME) // è¿è¡Œæ—¶å¯ç”¨ @Target(ElementType.METHOD) // åªèƒ½ç”¨äºæ–¹æ³• public @interface MyAnnotation &#123;     String value() default &quot;é»˜è®¤å€¼&quot;; // æ³¨è§£çš„å‚æ•° &#125;</code></p><h4 id="ï¼ˆ2ï¼‰åœ¨æ–¹æ³•ä¸Šä½¿ç”¨è¯¥æ³¨è§£"><a href="#ï¼ˆ2ï¼‰åœ¨æ–¹æ³•ä¸Šä½¿ç”¨è¯¥æ³¨è§£" class="headerlink" title="ï¼ˆ2ï¼‰åœ¨æ–¹æ³•ä¸Šä½¿ç”¨è¯¥æ³¨è§£"></a><strong>ï¼ˆ2ï¼‰åœ¨æ–¹æ³•ä¸Šä½¿ç”¨è¯¥æ³¨è§£</strong></h4><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>class Test &#123;     @MyAnnotation(value = &quot;Hello&quot;)     public void sayHello() &#123;         System.out.println(&quot;Hello, Annotation!&quot;);     &#125; &#125;</code></p><h4 id="ï¼ˆ3ï¼‰é€šè¿‡åå°„è¯»å–æ³¨è§£"><a href="#ï¼ˆ3ï¼‰é€šè¿‡åå°„è¯»å–æ³¨è§£" class="headerlink" title="ï¼ˆ3ï¼‰é€šè¿‡åå°„è¯»å–æ³¨è§£"></a><strong>ï¼ˆ3ï¼‰é€šè¿‡åå°„è¯»å–æ³¨è§£</strong></h4><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>import java.lang.reflect.Method;  public class Main &#123;     public static void main(String[] args) throws Exception &#123;         Method method = Test.class.getMethod(&quot;sayHello&quot;);         if (method.isAnnotationPresent(MyAnnotation.class)) &#123;             MyAnnotation annotation = method.getAnnotation(MyAnnotation.class);             System.out.println(&quot;æ³¨è§£å€¼ï¼š&quot; + annotation.value());         &#125;     &#125; &#125;</code></p><p><strong>è¾“å‡ºï¼š</strong></p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>æ³¨è§£å€¼ï¼šHello</code></p><hr><h3 id="5-æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆRetentionPolicyï¼‰"><a href="#5-æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆRetentionPolicyï¼‰" class="headerlink" title="5. æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆRetentionPolicyï¼‰"></a>5. æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆRetentionPolicyï¼‰</h3><p>æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸç”± <code>@Retention</code> æŒ‡å®šï¼Œæœ‰ä¸‰ç§ï¼š</p><div class="table-container"><table><thead><tr><th>å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>SOURCE</code></td><td>ä»…å­˜åœ¨äº<strong>æºç </strong>ä¸­ï¼Œç¼–è¯‘åä¼šè¢«ä¸¢å¼ƒï¼ˆå¦‚ <code>@Override</code>ï¼‰</td></tr><tr><td><code>CLASS</code></td><td>å­˜åœ¨äº<strong>class æ–‡ä»¶</strong>ä¸­ï¼Œä½†ä¸ä¼šè¿›å…¥ JVM è¿è¡Œæ—¶</td></tr><tr><td><code>RUNTIME</code></td><td>å­˜åœ¨äº<strong>è¿è¡Œæ—¶</strong>ï¼Œå¯ä»¥é€šè¿‡<strong>åå°„</strong>è·å–ï¼ˆå¦‚ Spring çš„ <code>@Autowired</code>ï¼‰</td></tr></tbody></table></div><hr><h3 id="6-Target-æ³¨è§£çš„ä½œç”¨"><a href="#6-Target-æ³¨è§£çš„ä½œç”¨" class="headerlink" title="6. @Target æ³¨è§£çš„ä½œç”¨"></a>6. <code>@Target</code> æ³¨è§£çš„ä½œç”¨</h3><p><code>@Target</code> æŒ‡å®šæ³¨è§£å¯ä»¥ä½œç”¨çš„ä»£ç å…ƒç´ ï¼š</p><div class="table-container"><table><thead><tr><th>å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ElementType.TYPE</code></td><td>åªèƒ½ä½œç”¨äº<strong>ç±»</strong></td></tr><tr><td><code>ElementType.FIELD</code></td><td>åªèƒ½ä½œç”¨äº<strong>å­—æ®µ</strong></td></tr><tr><td><code>ElementType.METHOD</code></td><td>åªèƒ½ä½œç”¨äº<strong>æ–¹æ³•</strong></td></tr><tr><td><code>ElementType.PARAMETER</code></td><td>åªèƒ½ä½œç”¨äº<strong>å‚æ•°</strong></td></tr><tr><td><code>ElementType.CONSTRUCTOR</code></td><td>åªèƒ½ä½œç”¨äº<strong>æ„é€ æ–¹æ³•</strong></td></tr><tr><td><code>ElementType.LOCAL_VARIABLE</code></td><td>åªèƒ½ä½œç”¨äº<strong>å±€éƒ¨å˜é‡</strong></td></tr><tr><td><code>ElementType.ANNOTATION_TYPE</code></td><td>åªèƒ½ä½œç”¨äº<strong>æ³¨è§£</strong></td></tr><tr><td><code>ElementType.PACKAGE</code></td><td>åªèƒ½ä½œç”¨äº<strong>åŒ…</strong></td></tr></tbody></table></div><hr><h3 id="7-Java-æ¡†æ¶ä¸­å¸¸è§çš„æ³¨è§£"><a href="#7-Java-æ¡†æ¶ä¸­å¸¸è§çš„æ³¨è§£" class="headerlink" title="7. Java æ¡†æ¶ä¸­å¸¸è§çš„æ³¨è§£"></a>7. Java æ¡†æ¶ä¸­å¸¸è§çš„æ³¨è§£</h3><h4 id="ï¼ˆ1ï¼‰Spring-ç›¸å…³"><a href="#ï¼ˆ1ï¼‰Spring-ç›¸å…³" class="headerlink" title="ï¼ˆ1ï¼‰Spring ç›¸å…³"></a><strong>ï¼ˆ1ï¼‰Spring ç›¸å…³</strong></h4><div class="table-container"><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Component</code></td><td>æ ‡è®°ä¸º Spring ç»„ä»¶ï¼ˆBeanï¼‰</td></tr><tr><td><code>@Service</code></td><td>æ ‡è®°ä¸ºä¸šåŠ¡å±‚ç»„ä»¶</td></tr><tr><td><code>@Repository</code></td><td>æ ‡è®°ä¸ºæ•°æ®è®¿é—®å±‚ç»„ä»¶</td></tr><tr><td><code>@Autowired</code></td><td>è‡ªåŠ¨æ³¨å…¥ä¾èµ–</td></tr><tr><td><code>@Transactional</code></td><td>äº‹åŠ¡ç®¡ç†</td></tr><tr><td><code>@RestController</code></td><td>ç»„åˆäº† <code>@Controller + @ResponseBody</code></td></tr></tbody></table></div><h4 id="ï¼ˆ2ï¼‰Junit-ç›¸å…³"><a href="#ï¼ˆ2ï¼‰Junit-ç›¸å…³" class="headerlink" title="ï¼ˆ2ï¼‰Junit ç›¸å…³"></a><strong>ï¼ˆ2ï¼‰Junit ç›¸å…³</strong></h4><div class="table-container"><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Test</code></td><td>æ ‡è®°æµ‹è¯•æ–¹æ³•</td></tr><tr><td><code>@BeforeEach</code></td><td>åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰æ‰§è¡Œ</td></tr><tr><td><code>@AfterEach</code></td><td>åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•åæ‰§è¡Œ</td></tr></tbody></table></div><h4 id="ï¼ˆ3ï¼‰Lombok"><a href="#ï¼ˆ3ï¼‰Lombok" class="headerlink" title="ï¼ˆ3ï¼‰Lombok"></a><strong>ï¼ˆ3ï¼‰Lombok</strong></h4><div class="table-container"><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Getter</code></td><td>è‡ªåŠ¨ç”Ÿæˆ getter æ–¹æ³•</td></tr><tr><td><code>@Setter</code></td><td>è‡ªåŠ¨ç”Ÿæˆ setter æ–¹æ³•</td></tr><tr><td><code>@Data</code></td><td>ç»„åˆ <code>@Getter</code>ã€<code>@Setter</code>ã€<code>@ToString</code></td></tr><tr><td><code>@Builder</code></td><td>ç”Ÿæˆå»ºé€ è€…æ¨¡å¼ä»£ç </td></tr></tbody></table></div><hr><h3 id="8-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ³¨è§£ï¼Ÿ"><a href="#8-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ³¨è§£ï¼Ÿ" class="headerlink" title="8. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ³¨è§£ï¼Ÿ"></a>8. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ³¨è§£ï¼Ÿ</h3><ul><li><strong>ç®€åŒ–ä»£ç </strong>ï¼šä¾‹å¦‚ Lombok è‡ªåŠ¨ç”Ÿæˆ <code>getter/setter</code></li><li><strong>é…ç½®é©±åŠ¨</strong>ï¼šSpring ä¾èµ–æ³¨å…¥ï¼ˆ<code>@Autowired</code>ï¼‰</li><li><strong>è¿è¡Œæ—¶å¤„ç†</strong>ï¼šSpring AOPï¼ˆ<code>@Transactional</code>ï¼‰</li><li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥</strong>ï¼š<code>@Override</code> é¿å…æ‹¼å†™é”™è¯¯</li><li><strong>æ›¿ä»£ XML</strong>ï¼šSpring <code>@Configuration</code> ä»£æ›¿ XML é…ç½®</li></ul><hr><h3 id="9-æ€»ç»“"><a href="#9-æ€»ç»“" class="headerlink" title="9. æ€»ç»“"></a>9. æ€»ç»“</h3><ul><li><strong>æ³¨è§£æ˜¯ Java çš„å…ƒæ•°æ®æœºåˆ¶</strong>ï¼Œå¯ä»¥æ ‡è®°ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰</li><li><strong>æ³¨è§£ä¸ä¼šå½±å“ç¨‹åºé€»è¾‘</strong>ï¼Œä½†å¯ä»¥æä¾›é¢å¤–ä¿¡æ¯ç»™ç¼–è¯‘å™¨ã€å·¥å…·æˆ–æ¡†æ¶</li><li><strong>å¸¸è§å†…ç½®æ³¨è§£</strong>ï¼š<code>@Override</code>ã€<code>@Deprecated</code>ã€<code>@SuppressWarnings</code></li><li><strong>æ³¨è§£æœ‰ç”Ÿå‘½å‘¨æœŸï¼ˆSOURCEã€CLASSã€RUNTIMEï¼‰</strong>ï¼Œå½±å“å…¶èƒ½å¦è¢«åå°„è·å–</li><li><strong>å¯ä»¥è‡ªå®šä¹‰æ³¨è§£</strong>ï¼Œå¹¶é€šè¿‡<strong>åå°„</strong>è·å–æ³¨è§£ä¿¡æ¯</li><li><strong>æ³¨è§£åœ¨ Java æ¡†æ¶ï¼ˆå¦‚ Springã€Junitã€Lombokï¼‰ä¸­å¹¿æ³›ä½¿ç”¨</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç±»å­—èŠ‚ç </title>
      <link href="/2025/03/08/%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/"/>
      <url>/2025/03/08/%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="JVM-åŸºç¡€-ç±»å­—èŠ‚ç è¯¦è§£"><a href="#JVM-åŸºç¡€-ç±»å­—èŠ‚ç è¯¦è§£" class="headerlink" title="JVM åŸºç¡€ - ç±»å­—èŠ‚ç è¯¦è§£"></a>JVM åŸºç¡€ - ç±»å­—èŠ‚ç è¯¦è§£</h1><blockquote><p>æºä»£ç é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œå†é€šè¿‡ç±»åŠ è½½å­ç³»ç»Ÿè¿›è¡ŒåŠ è½½åˆ°JVMä¸­è¿è¡Œã€‚@pdai</p></blockquote><h2 id="å¤šè¯­è¨€ç¼–è¯‘ä¸ºå­—èŠ‚ç åœ¨JVMè¿è¡Œ"><a href="#å¤šè¯­è¨€ç¼–è¯‘ä¸ºå­—èŠ‚ç åœ¨JVMè¿è¡Œ" class="headerlink" title="# å¤šè¯­è¨€ç¼–è¯‘ä¸ºå­—èŠ‚ç åœ¨JVMè¿è¡Œ"></a><a href="#å¤šè¯­è¨€ç¼–è¯‘ä¸ºå­—èŠ‚ç åœ¨jvmè¿è¡Œ">#</a> å¤šè¯­è¨€ç¼–è¯‘ä¸ºå­—èŠ‚ç åœ¨JVMè¿è¡Œ</h2><p>è®¡ç®—æœºæ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œjavaä»£ç çš„ï¼Œå¿…é¡»è¦å…ˆè¿è¡Œjavaè™šæ‹Ÿæœºï¼Œå†ç”±javaè™šæ‹Ÿæœºè¿è¡Œç¼–è¯‘åçš„javaä»£ç ã€‚è¿™ä¸ªç¼–è¯‘åçš„javaä»£ç ï¼Œå°±æ˜¯æœ¬æ–‡è¦ä»‹ç»çš„javaå­—èŠ‚ç ã€‚</p><p>ä¸ºä»€ä¹ˆjvmä¸èƒ½ç›´æ¥è¿è¡Œjavaä»£ç å‘¢ï¼Œè¿™æ˜¯å› ä¸ºåœ¨cpuå±‚é¢çœ‹æ¥è®¡ç®—æœºä¸­æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ä¸€ä¸ªä¸ªæŒ‡ä»¤çš„è¿è¡Œæ±‡é›†è€Œæˆçš„ï¼Œjavaæ˜¯é«˜çº§è¯­è¨€ï¼Œåªæœ‰äººç±»æ‰èƒ½ç†è§£å…¶é€»è¾‘ï¼Œè®¡ç®—æœºæ˜¯æ— æ³•è¯†åˆ«çš„ï¼Œæ‰€ä»¥javaä»£ç å¿…é¡»è¦å…ˆç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼Œjvmæ‰èƒ½æ­£ç¡®è¯†åˆ«ä»£ç è½¬æ¢åçš„æŒ‡ä»¤å¹¶å°†å…¶è¿è¡Œã€‚</p><ul><li>Javaä»£ç é—´æ¥ç¿»è¯‘æˆå­—èŠ‚ç ï¼Œå‚¨å­˜å­—èŠ‚ç çš„æ–‡ä»¶å†äº¤ç”±è¿è¡Œäºä¸åŒå¹³å°ä¸Šçš„JVMè™šæ‹Ÿæœºå»è¯»å–æ‰§è¡Œï¼Œä»è€Œå®ç°ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œçš„ç›®çš„ã€‚</li><li>JVMä¹Ÿä¸å†åªæ”¯æŒJavaï¼Œç”±æ­¤è¡ç”Ÿå‡ºäº†è®¸å¤šåŸºäºJVMçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚Groovy, Scala, Koltinç­‰ç­‰ã€‚</li></ul><h2 id="Javaå­—èŠ‚ç æ–‡ä»¶"><a href="#Javaå­—èŠ‚ç æ–‡ä»¶" class="headerlink" title="# Javaå­—èŠ‚ç æ–‡ä»¶"></a><a href="#javaå­—èŠ‚ç æ–‡ä»¶">#</a> Javaå­—èŠ‚ç æ–‡ä»¶</h2><p>classæ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä»¥8ä½å­—èŠ‚ä¸ºåŸºç¡€å•ä½çš„äºŒè¿›åˆ¶æµï¼Œå„ä¸ªæ•°æ®é¡¹ç›®ä¸¥æ ¼æŒ‰ç…§é¡ºåºç´§å‡‘çš„æ’åˆ—åœ¨classæ–‡ä»¶ä¸­ã€‚jvmæ ¹æ®å…¶ç‰¹å®šçš„è§„åˆ™è§£æè¯¥äºŒè¿›åˆ¶æ•°æ®ï¼Œä»è€Œå¾—åˆ°ç›¸å…³ä¿¡æ¯ã€‚</p><p>Classæ–‡ä»¶é‡‡ç”¨ä¸€ç§ä¼ªç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œå®ƒæœ‰ä¸¤ç§ç±»å‹ï¼šæ— ç¬¦å·æ•°å’Œè¡¨ã€‚è¿™é‡Œæš‚ä¸è¯¦ç»†çš„è®²ã€‚</p><p>æœ¬æ–‡å°†é€šè¿‡ç®€å•çš„javaä¾‹å­ç¼–è¯‘åçš„æ–‡ä»¶æ¥ç†è§£ã€‚</p><h3 id="Classæ–‡ä»¶çš„ç»“æ„å±æ€§"><a href="#Classæ–‡ä»¶çš„ç»“æ„å±æ€§" class="headerlink" title="# Classæ–‡ä»¶çš„ç»“æ„å±æ€§"></a><a href="#classæ–‡ä»¶çš„ç»“æ„å±æ€§">#</a> Classæ–‡ä»¶çš„ç»“æ„å±æ€§</h3><p>åœ¨ç†è§£ä¹‹å‰å…ˆä»æ•´ä½“çœ‹ä¸‹javaå­—èŠ‚ç æ–‡ä»¶åŒ…å«äº†å“ªäº›ç±»å‹çš„æ•°æ®ï¼š</p><h3 id="ä»ä¸€ä¸ªä¾‹å­å¼€å§‹"><a href="#ä»ä¸€ä¸ªä¾‹å­å¼€å§‹" class="headerlink" title="# ä»ä¸€ä¸ªä¾‹å­å¼€å§‹"></a><a href="#ä»ä¸€ä¸ªä¾‹å­å¼€å§‹">#</a> ä»ä¸€ä¸ªä¾‹å­å¼€å§‹</h3><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥é€æ­¥è®²è§£å­—èŠ‚ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Main.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> m;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">inc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> m + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤, å¯ä»¥åœ¨å½“å‰æ‰€åœ¨è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªMain.classæ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac Main.java</span><br></pre></td></tr></table></figure><p>ä»¥æ–‡æœ¬çš„å½¢å¼æ‰“å¼€ç”Ÿæˆçš„classæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cafe babe 0000 0034 0013 0a00 0400 0f09</span><br><span class="line">0003 0010 0700 1107 0012 0100 016d 0100</span><br><span class="line">0149 0100 063c 696e 6974 3e01 0003 2829</span><br><span class="line">5601 0004 436f 6465 0100 0f4c 696e 654e</span><br><span class="line">756d 6265 7254 6162 6c65 0100 0369 6e63</span><br><span class="line">0100 0328 2949 0100 0a53 6f75 7263 6546</span><br><span class="line">696c 6501 0009 4d61 696e 2e6a 6176 610c</span><br><span class="line">0007 0008 0c00 0500 0601 0010 636f 6d2f</span><br><span class="line">7268 7974 686d 372f 4d61 696e 0100 106a</span><br><span class="line">6176 612f 6c61 6e67 2f4f 626a 6563 7400</span><br><span class="line">2100 0300 0400 0000 0100 0200 0500 0600</span><br><span class="line">0000 0200 0100 0700 0800 0100 0900 0000</span><br><span class="line">1d00 0100 0100 0000 052a b700 01b1 0000</span><br><span class="line">0001 000a 0000 0006 0001 0000 0003 0001</span><br><span class="line">000b 000c 0001 0009 0000 001f 0002 0001</span><br><span class="line">0000 0007 2ab4 0002 0460 ac00 0000 0100</span><br><span class="line">0a00 0000 0600 0100 0000 0800 0100 0d00</span><br><span class="line">0000 0200 0e</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶å¼€å¤´çš„4ä¸ªå­—èŠ‚(â€œcafe babeâ€)ç§°ä¹‹ä¸º <code>é­”æ•°</code>ï¼Œå”¯æœ‰ä»¥â€cafe babeâ€å¼€å¤´çš„classæ–‡ä»¶æ–¹å¯è¢«è™šæ‹Ÿæœºæ‰€æ¥å—ï¼Œè¿™4ä¸ªå­—èŠ‚å°±æ˜¯å­—èŠ‚ç æ–‡ä»¶çš„èº«ä»½è¯†åˆ«ã€‚</li><li>0000æ˜¯ç¼–è¯‘å™¨jdkç‰ˆæœ¬çš„æ¬¡ç‰ˆæœ¬å·0ï¼Œ0034è½¬åŒ–ä¸ºåè¿›åˆ¶æ˜¯52,æ˜¯ä¸»ç‰ˆæœ¬å·ï¼Œjavaçš„ç‰ˆæœ¬å·ä»45å¼€å§‹ï¼Œé™¤1.0å’Œ1.1éƒ½æ˜¯ä½¿ç”¨45.xå¤–,ä»¥åæ¯å‡ä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·åŠ ä¸€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–è¯‘ç”Ÿæˆè¯¥classæ–‡ä»¶çš„jdkç‰ˆæœ¬ä¸º1.8.0ã€‚</li></ul><p>é€šè¿‡java -versionå‘½ä»¤ç¨åŠ éªŒè¯, å¯å¾—ç»“æœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_131-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)</span><br></pre></td></tr></table></figure><p>ç»§ç»­å¾€ä¸‹æ˜¯å¸¸é‡æ± â€¦ çŸ¥é“æ˜¯è¿™ä¹ˆåˆ†æçš„å°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡å·¥å…·åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶ç»§ç»­å»çœ‹ã€‚</p><h3 id="åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶"><a href="#åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶" class="headerlink" title="# åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶"></a><a href="#åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶">#</a> åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶</h3><blockquote><p>ä½¿ç”¨åˆ°javaå†…ç½®çš„ä¸€ä¸ªåç¼–è¯‘å·¥å…·javapå¯ä»¥åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶, ç”¨æ³•: <code>javap &lt;options&gt; &lt;classes&gt;</code></p></blockquote><p>å…¶ä¸­<code>&lt;options&gt;</code>é€‰é¡¹åŒ…æ‹¬:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">help</span>  --<span class="built_in">help</span>  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯</span><br><span class="line">-version                 ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">-v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯</span><br><span class="line">-l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨</span><br><span class="line">-public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line">-protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line">-package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»</span><br><span class="line">                         å’Œæˆå‘˜ (é»˜è®¤)</span><br><span class="line">-p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜</span><br><span class="line">-c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–</span><br><span class="line">-s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å</span><br><span class="line">-sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„</span><br><span class="line">                         ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)</span><br><span class="line">-constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡</span><br><span class="line">-classpath &lt;path&gt;        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">-<span class="built_in">cp</span> &lt;path&gt;               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line">-bootclasspath &lt;path&gt;    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®</span><br></pre></td></tr></table></figure><p>è¾“å…¥å‘½ä»¤<code>javap -verbose -p Main.class</code>æŸ¥çœ‹è¾“å‡ºå†…å®¹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Classfile /E:/JavaCode/TestProj/out/production/TestProj/com/rhythm7/Main.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2018</span>-<span class="number">4</span>-<span class="number">7</span>; size <span class="number">362</span> bytes</span><br><span class="line">  MD5 checksum 4aed8540b098992663b7ba08c65312de</span><br><span class="line">  Compiled from <span class="string">&quot;Main.java&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">com</span>.rhythm7.Main</span><br><span class="line">  minor version: <span class="number">0</span></span><br><span class="line">  major version: <span class="number">52</span></span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   #<span class="number">1</span> = Methodref          #<span class="number">4.</span>#<span class="number">18</span>         <span class="comment">// java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   #<span class="number">2</span> = Fieldref           #<span class="number">3.</span>#<span class="number">19</span>         <span class="comment">// com/rhythm7/Main.m:I</span></span><br><span class="line">   #<span class="number">3</span> = Class              #<span class="number">20</span>            <span class="comment">// com/rhythm7/Main</span></span><br><span class="line">   #<span class="number">4</span> = Class              #<span class="number">21</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">5</span> = Utf8               m</span><br><span class="line">   #<span class="number">6</span> = Utf8               I</span><br><span class="line">   #<span class="number">7</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">8</span> = Utf8               ()V</span><br><span class="line">   #<span class="number">9</span> = Utf8               Code</span><br><span class="line">  #<span class="number">10</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">11</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">12</span> = Utf8               <span class="built_in">this</span></span><br><span class="line">  #<span class="number">13</span> = Utf8               Lcom/rhythm7/Main;</span><br><span class="line">  #<span class="number">14</span> = Utf8               inc</span><br><span class="line">  #<span class="number">15</span> = Utf8               ()I</span><br><span class="line">  #<span class="number">16</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">17</span> = Utf8               Main.java</span><br><span class="line">  #<span class="number">18</span> = NameAndType        #<span class="number">7</span>:#<span class="number">8</span>          <span class="comment">// &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  #<span class="number">19</span> = NameAndType        #<span class="number">5</span>:#<span class="number">6</span>          <span class="comment">// m:I</span></span><br><span class="line">  #<span class="number">20</span> = Utf8               com/rhythm7/Main</span><br><span class="line">  #<span class="number">21</span> = Utf8               java/lang/Object</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> m;</span><br><span class="line">    descriptor: I</span><br><span class="line">    flags: ACC_PRIVATE</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> com.rhythm7.Main();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lcom/rhythm7/Main;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">inc</span><span class="params">()</span>;</span><br><span class="line">    descriptor: ()I</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: getfield      #<span class="number">2</span>                  <span class="comment">// Field m:I</span></span><br><span class="line">         <span class="number">4</span>: iconst_1</span><br><span class="line">         <span class="number">5</span>: iadd</span><br><span class="line">         <span class="number">6</span>: ireturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">8</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">7</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lcom/rhythm7/Main;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">&quot;Main.java&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å­—èŠ‚ç æ–‡ä»¶ä¿¡æ¯"><a href="#å­—èŠ‚ç æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="# å­—èŠ‚ç æ–‡ä»¶ä¿¡æ¯"></a><a href="#å­—èŠ‚ç æ–‡ä»¶ä¿¡æ¯">#</a> å­—èŠ‚ç æ–‡ä»¶ä¿¡æ¯</h3><p>å¼€å¤´çš„7è¡Œä¿¡æ¯åŒ…æ‹¬:Classæ–‡ä»¶å½“å‰æ‰€åœ¨ä½ç½®ï¼Œæœ€åä¿®æ”¹æ—¶é—´ï¼Œæ–‡ä»¶å¤§å°ï¼ŒMD5å€¼ï¼Œç¼–è¯‘è‡ªå“ªä¸ªæ–‡ä»¶ï¼Œç±»çš„å…¨é™å®šåï¼Œjdkæ¬¡ç‰ˆæœ¬å·ï¼Œä¸»ç‰ˆæœ¬å·ã€‚</p><p>ç„¶åç´§æ¥ç€çš„æ˜¯è¯¥ç±»çš„è®¿é—®æ ‡å¿—ï¼šACC_PUBLIC, ACC_SUPERï¼Œè®¿é—®æ ‡å¿—çš„å«ä¹‰å¦‚ä¸‹:</p><div class="table-container"><table><thead><tr><th>æ ‡å¿—åç§°</th><th>æ ‡å¿—å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ACC_PUBLIC</td><td>0x0001</td><td>æ˜¯å¦ä¸ºPublicç±»å‹</td></tr><tr><td>ACC_FINAL</td><td>0x0010</td><td>æ˜¯å¦è¢«å£°æ˜ä¸ºfinalï¼Œåªæœ‰ç±»å¯ä»¥è®¾ç½®</td></tr><tr><td>ACC_SUPER</td><td>0x0020</td><td>æ˜¯å¦å…è®¸ä½¿ç”¨invokespecialå­—èŠ‚ç æŒ‡ä»¤çš„æ–°è¯­ä¹‰ï¼</td></tr><tr><td>ACC_INTERFACE</td><td>0x0200</td><td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ¥å£</td></tr><tr><td>ACC_ABSTRACT</td><td>0x0400</td><td>æ˜¯å¦ä¸ºabstractç±»å‹ï¼Œå¯¹äºæ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è¯´ï¼Œæ¬¡æ ‡å¿—å€¼ä¸ºçœŸï¼Œå…¶ä»–ç±»å‹ä¸ºå‡</td></tr><tr><td>ACC_SYNTHETIC</td><td>0x1000</td><td>æ ‡å¿—è¿™ä¸ªç±»å¹¶éç”±ç”¨æˆ·ä»£ç äº§ç”Ÿ</td></tr><tr><td>ACC_ANNOTATION</td><td>0x2000</td><td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ³¨è§£</td></tr><tr><td>ACC_ENUM</td><td>0x4000</td><td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæšä¸¾</td></tr></tbody></table></div><h3 id="å¸¸é‡æ± "><a href="#å¸¸é‡æ± " class="headerlink" title="# å¸¸é‡æ± "></a><a href="#å¸¸é‡æ± ">#</a> å¸¸é‡æ± </h3><p><code>Constant pool</code>æ„ä¸ºå¸¸é‡æ± ã€‚</p><p>å¸¸é‡æ± å¯ä»¥ç†è§£æˆClassæ–‡ä»¶ä¸­çš„èµ„æºä»“åº“ã€‚ä¸»è¦å­˜æ”¾çš„æ˜¯ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡(Literal)å’Œç¬¦å·å¼•ç”¨(Symbolic References)ã€‚å­—é¢é‡ç±»ä¼¼äºjavaä¸­çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œfinalå¸¸é‡ç­‰ï¼Œè€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰ç§:</p><ul><li>ç±»å’Œæ¥å£çš„å…¨é™å®šå(Fully Qualified Name)</li><li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦å·(Descriptor)</li><li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</li></ul><p>ä¸åŒäºC/C++, JVMæ˜¯åœ¨åŠ è½½Classæ–‡ä»¶çš„æ—¶å€™æ‰è¿›è¡Œçš„åŠ¨æ€é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å­—æ®µå’Œæ–¹æ³•ç¬¦å·å¼•ç”¨åªæœ‰åœ¨è¿è¡ŒæœŸè½¬æ¢åæ‰èƒ½è·å¾—çœŸæ­£çš„å†…å­˜å…¥å£åœ°å€ã€‚å½“è™šæ‹Ÿæœºè¿è¡Œæ—¶ï¼Œéœ€è¦ä»å¸¸é‡æ± è·å¾—å¯¹åº”çš„ç¬¦å·å¼•ç”¨ï¼Œå†åœ¨ç±»åˆ›å»ºæˆ–è¿è¡Œæ—¶è§£æå¹¶ç¿»è¯‘åˆ°å…·ä½“çš„å†…å­˜åœ°å€ä¸­ã€‚ ç›´æ¥é€šè¿‡åç¼–è¯‘æ–‡ä»¶æ¥æŸ¥çœ‹å­—èŠ‚ç å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#1 = Methodref          #4.#18         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">#4 = Class              #21            // java/lang/Object</span><br><span class="line">#7 = Utf8               &lt;init&gt;</span><br><span class="line">#8 = Utf8               ()V</span><br><span class="line">#18 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">#21 = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€ä¸ªå¸¸é‡</strong>æ˜¯ä¸€ä¸ªæ–¹æ³•å®šä¹‰ï¼ŒæŒ‡å‘äº†ç¬¬4å’Œç¬¬18ä¸ªå¸¸é‡ã€‚ä»¥æ­¤ç±»æ¨æŸ¥çœ‹ç¬¬4å’Œç¬¬18ä¸ªå¸¸é‡ã€‚æœ€åå¯ä»¥æ‹¼æ¥æˆç¬¬ä¸€ä¸ªå¸¸é‡å³ä¾§çš„æ³¨é‡Šå†…å®¹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br></pre></td></tr></table></figure><p>è¿™æ®µå¯ä»¥ç†è§£ä¸ºè¯¥ç±»çš„å®ä¾‹æ„é€ å™¨çš„å£°æ˜ï¼Œç”±äºMainç±»æ²¡æœ‰é‡å†™æ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚æ­¤å¤„ä¹Ÿè¯´æ˜äº†Mainç±»çš„ç›´æ¥çˆ¶ç±»æ˜¯Objectã€‚ è¯¥æ–¹æ³•é»˜è®¤è¿”å›å€¼æ˜¯V, ä¹Ÿå°±æ˜¯voidï¼Œæ— è¿”å›å€¼ã€‚</p><p><strong>ç¬¬äºŒä¸ªå¸¸é‡</strong>åŒç†å¯å¾—:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#2 = Fieldref           #3.#19         // com/rhythm7/Main.m:I</span><br><span class="line">#3 = Class              #20            // com/rhythm7/Main</span><br><span class="line">#5 = Utf8               m</span><br><span class="line">#6 = Utf8               I</span><br><span class="line">#19 = NameAndType        #5:#6          // m:I</span><br><span class="line">#20 = Utf8               com/rhythm7/Main</span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä»£ç æ­¤å¤„å£°æ˜äº†ä¸€ä¸ªå­—æ®µmï¼Œç±»å‹ä¸ºI, Iå³æ˜¯intç±»å‹ã€‚å…³äºå­—èŠ‚ç çš„ç±»å‹å¯¹åº”å¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th>æ ‡è¯†å­—ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>B</td><td>åŸºæœ¬ç±»å‹byte</td></tr><tr><td>C</td><td>åŸºæœ¬ç±»å‹char</td></tr><tr><td>D</td><td>åŸºæœ¬ç±»å‹double</td></tr><tr><td>F</td><td>åŸºæœ¬ç±»å‹float</td></tr><tr><td>I</td><td>åŸºæœ¬ç±»å‹int</td></tr><tr><td>J</td><td>åŸºæœ¬ç±»å‹long</td></tr><tr><td>S</td><td>åŸºæœ¬ç±»å‹short</td></tr><tr><td>Z</td><td>åŸºæœ¬ç±»å‹boolean</td></tr><tr><td>V</td><td>ç‰¹æ®Šç±»å‹void</td></tr><tr><td>L</td><td>å¯¹è±¡ç±»å‹ï¼Œä»¥åˆ†å·ç»“å°¾ï¼Œå¦‚Ljava/lang/Object;</td></tr></tbody></table></div><p>å¯¹äºæ•°ç»„ç±»å‹ï¼Œæ¯ä¸€ä½ä½¿ç”¨ä¸€ä¸ªå‰ç½®çš„<code>[</code>å­—ç¬¦æ¥æè¿°ï¼Œå¦‚å®šä¹‰ä¸€ä¸ª<code>java.lang.String[][]</code>ç±»å‹çš„ç»´æ•°ç»„ï¼Œå°†è¢«è®°å½•ä¸º<code>[[Ljava/lang/String;</code></p><h3 id="æ–¹æ³•è¡¨é›†åˆ"><a href="#æ–¹æ³•è¡¨é›†åˆ" class="headerlink" title="# æ–¹æ³•è¡¨é›†åˆ"></a><a href="#æ–¹æ³•è¡¨é›†åˆ">#</a> æ–¹æ³•è¡¨é›†åˆ</h3><p>åœ¨å¸¸é‡æ± ä¹‹åçš„æ˜¯å¯¹ç±»å†…éƒ¨çš„æ–¹æ³•æè¿°ï¼Œåœ¨å­—èŠ‚ç ä¸­ä»¥è¡¨çš„é›†åˆå½¢å¼è¡¨ç°ï¼Œæš‚ä¸”ä¸ç®¡å­—èŠ‚ç æ–‡ä»¶çš„16è¿›åˆ¶æ–‡ä»¶å†…å®¹å¦‚ä½•ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹åç¼–è¯‘åçš„å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private int m;</span><br><span class="line">  descriptor: I</span><br><span class="line">  flags: ACC_PRIVATE</span><br></pre></td></tr></table></figure><p>æ­¤å¤„å£°æ˜äº†ä¸€ä¸ªç§æœ‰å˜é‡mï¼Œç±»å‹ä¸ºintï¼Œè¿”å›å€¼ä¸ºint</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> com.rhythm7.Main();</span><br><span class="line">   descriptor: ()V</span><br><span class="line">   flags: ACC_PUBLIC</span><br><span class="line">   Code:</span><br><span class="line">     stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">        <span class="number">0</span>: aload_0</span><br><span class="line">        <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">        <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">     LineNumberTable:</span><br><span class="line">       line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">     LocalVariableTable:</span><br><span class="line">       Start  Length  Slot  Name   Signature</span><br><span class="line">           <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lcom/rhythm7/Main;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯æ„é€ æ–¹æ³•ï¼šMain()ï¼Œè¿”å›å€¼ä¸ºvoid, å…¬å¼€æ–¹æ³•ã€‚</p><p>codeå†…çš„ä¸»è¦å±æ€§ä¸º:</p><ul><li><p><strong>stack</strong>: æœ€å¤§æ“ä½œæ•°æ ˆï¼ŒJVMè¿è¡Œæ—¶ä¼šæ ¹æ®è¿™ä¸ªå€¼æ¥åˆ†é…æ ˆå¸§(Frame)ä¸­çš„æ“ä½œæ ˆæ·±åº¦,æ­¤å¤„ä¸º1</p></li><li><p><strong>locals</strong>: å±€éƒ¨å˜é‡æ‰€éœ€çš„å­˜å‚¨ç©ºé—´ï¼Œå•ä½ä¸ºSlot, Slotæ˜¯è™šæ‹Ÿæœºä¸ºå±€éƒ¨å˜é‡åˆ†é…å†…å­˜æ—¶æ‰€ä½¿ç”¨çš„æœ€å°å•ä½ï¼Œä¸º4ä¸ªå­—èŠ‚å¤§å°ã€‚æ–¹æ³•å‚æ•°(åŒ…æ‹¬å®ä¾‹æ–¹æ³•ä¸­çš„éšè—å‚æ•°this)ï¼Œæ˜¾ç¤ºå¼‚å¸¸å¤„ç†å™¨çš„å‚æ•°(try catchä¸­çš„catchå—æ‰€å®šä¹‰çš„å¼‚å¸¸)ï¼Œæ–¹æ³•ä½“ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡éƒ½éœ€è¦ä½¿ç”¨å±€éƒ¨å˜é‡è¡¨æ¥å­˜æ”¾ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œlocalsçš„å¤§å°å¹¶ä¸ä¸€å®šç­‰äºæ‰€æœ‰å±€éƒ¨å˜é‡æ‰€å çš„Slotä¹‹å’Œï¼Œå› ä¸ºå±€éƒ¨å˜é‡ä¸­çš„Slotæ˜¯å¯ä»¥é‡ç”¨çš„ã€‚</p></li><li><p><strong>args_size</strong>: æ–¹æ³•å‚æ•°çš„ä¸ªæ•°ï¼Œè¿™é‡Œæ˜¯1ï¼Œå› ä¸ºæ¯ä¸ªå®ä¾‹æ–¹æ³•éƒ½ä¼šæœ‰ä¸€ä¸ªéšè—å‚æ•°this</p></li><li><p><strong>attribute_info</strong>: æ–¹æ³•ä½“å†…å®¹ï¼Œ0,1,4ä¸ºå­—èŠ‚ç â€è¡Œå·â€ï¼Œè¯¥æ®µä»£ç çš„æ„æ€æ˜¯å°†ç¬¬ä¸€ä¸ªå¼•ç”¨ç±»å‹æœ¬åœ°å˜é‡æ¨é€è‡³æ ˆé¡¶ï¼Œç„¶åæ‰§è¡Œè¯¥ç±»å‹çš„å®ä¾‹æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡æ± å­˜æ”¾çš„ç¬¬ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå°±æ˜¯æ³¨é‡Šé‡Œçš„<code>java/lang/Object.&quot;&quot;:()V</code>, ç„¶åæ‰§è¡Œè¿”å›è¯­å¥ï¼Œç»“æŸæ–¹æ³•ã€‚</p></li><li><p><strong>LineNumberTable</strong>: è¯¥å±æ€§çš„ä½œç”¨æ˜¯æè¿°æºç è¡Œå·ä¸å­—èŠ‚ç è¡Œå·(å­—èŠ‚ç åç§»é‡)ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚å¯ä»¥ä½¿ç”¨ -g:none æˆ–-g:linesé€‰é¡¹æ¥å–æ¶ˆæˆ–è¦æ±‚ç”Ÿæˆè¿™é¡¹ä¿¡æ¯ï¼Œå¦‚æœé€‰æ‹©ä¸ç”ŸæˆLineNumberTableï¼Œå½“ç¨‹åºè¿è¡Œå¼‚å¸¸æ—¶å°†æ— æ³•è·å–åˆ°å‘ç”Ÿå¼‚å¸¸çš„æºç è¡Œå·ï¼Œä¹Ÿæ— æ³•æŒ‰ç…§æºç çš„è¡Œæ•°æ¥è°ƒè¯•ç¨‹åºã€‚</p></li><li><p><strong>LocalVariableTable</strong>: è¯¥å±æ€§çš„ä½œç”¨æ˜¯æè¿°å¸§æ ˆä¸­å±€éƒ¨å˜é‡ä¸æºç ä¸­å®šä¹‰çš„å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å¯ä»¥ä½¿ç”¨ -g:none æˆ– -g:varsæ¥å–æ¶ˆæˆ–ç”Ÿæˆè¿™é¡¹ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ç”Ÿæˆè¿™é¡¹ä¿¡æ¯ï¼Œé‚£ä¹ˆå½“åˆ«äººå¼•ç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå°†æ— æ³•è·å–åˆ°å‚æ•°åç§°ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯arg0, arg1è¿™æ ·çš„å ä½ç¬¦ã€‚ start è¡¨ç¤ºè¯¥å±€éƒ¨å˜é‡åœ¨å“ªä¸€è¡Œå¼€å§‹å¯è§ï¼Œlengthè¡¨ç¤ºå¯è§è¡Œæ•°ï¼ŒSlotä»£è¡¨æ‰€åœ¨å¸§æ ˆä½ç½®ï¼ŒNameæ˜¯å˜é‡åç§°ï¼Œç„¶åæ˜¯ç±»å‹ç­¾åã€‚</p></li></ul><p>åŒç†å¯ä»¥åˆ†æMainç±»ä¸­çš„å¦ä¸€ä¸ªæ–¹æ³•â€inc()â€:</p><p>æ–¹æ³•ä½“å†…çš„å†…å®¹æ˜¯ï¼šå°†thiså…¥æ ˆï¼Œè·å–å­—æ®µ#2å¹¶ç½®äºæ ˆé¡¶, å°†intç±»å‹çš„1å…¥æ ˆï¼Œå°†æ ˆå†…é¡¶éƒ¨çš„ä¸¤ä¸ªæ•°å€¼ç›¸åŠ ï¼Œè¿”å›ä¸€ä¸ªintç±»å‹çš„å€¼ã€‚</p><h3 id="ç±»å"><a href="#ç±»å" class="headerlink" title="# ç±»å"></a><a href="#ç±»å">#</a> ç±»å</h3><p>æœ€åå¾ˆæ˜¾ç„¶æ˜¯æºç æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SourceFile: &quot;Main.java&quot;</span><br></pre></td></tr></table></figure><h2 id="å†çœ‹ä¸¤ä¸ªç¤ºä¾‹"><a href="#å†çœ‹ä¸¤ä¸ªç¤ºä¾‹" class="headerlink" title="# å†çœ‹ä¸¤ä¸ªç¤ºä¾‹"></a><a href="#å†çœ‹ä¸¤ä¸ªç¤ºä¾‹">#</a> å†çœ‹ä¸¤ä¸ªç¤ºä¾‹</h2><h3 id="åˆ†ætry-catch-finally"><a href="#åˆ†ætry-catch-finally" class="headerlink" title="# åˆ†ætry-catch-finally"></a><a href="#åˆ†ætry-catch-finally">#</a> åˆ†ætry-catch-finally</h3><p>é€šè¿‡ä»¥ä¸Šä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå¯ä»¥å¤§è‡´äº†è§£æºç è¢«ç¼–è¯‘æˆå­—èŠ‚ç åæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ ä¸‹é¢åˆ©ç”¨æ‰€å­¦çš„çŸ¥è¯†ç‚¹æ¥åˆ†æä¸€äº›Javaé—®é¢˜:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            x = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            x = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            x = <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯•é—®å½“ä¸å‘ç”Ÿå¼‚å¸¸å’Œå‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œfoo()çš„è¿”å›å€¼åˆ†åˆ«æ˜¯å¤šå°‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac TestCode.java</span><br><span class="line">javap -verbose TestCode.class</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å­—èŠ‚ç çš„fooæ–¹æ³•å†…å®¹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">    descriptor: ()I</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">5</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: iconst_1 <span class="comment">//intå‹1å…¥æ ˆ -&gt;æ ˆé¡¶=1</span></span><br><span class="line">         <span class="number">1</span>: istore_1 <span class="comment">//å°†æ ˆé¡¶çš„intå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªå±€éƒ¨å˜é‡ -&gt;å±€éƒ¨2=1</span></span><br><span class="line">         <span class="number">2</span>: iload_1 <span class="comment">//å°†ç¬¬äºŒä¸ªintå‹å±€éƒ¨å˜é‡æ¨é€è‡³æ ˆé¡¶ -&gt;æ ˆé¡¶=1</span></span><br><span class="line">         <span class="number">3</span>: istore_2 <span class="comment">//!!å°†æ ˆé¡¶intå‹æ•°å€¼å­˜å…¥ç¬¬ä¸‰ä¸ªå±€éƒ¨å˜é‡ -&gt;å±€éƒ¨3=1</span></span><br><span class="line">         </span><br><span class="line">         <span class="number">4</span>: iconst_3 <span class="comment">//intå‹3å…¥æ ˆ -&gt;æ ˆé¡¶=3</span></span><br><span class="line">         <span class="number">5</span>: istore_1 <span class="comment">//å°†æ ˆé¡¶çš„intå‹æ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªå±€éƒ¨å˜é‡ -&gt;å±€éƒ¨2=3</span></span><br><span class="line">         <span class="number">6</span>: iload_2 <span class="comment">//!!å°†ç¬¬ä¸‰ä¸ªintå‹å±€éƒ¨å˜é‡æ¨é€è‡³æ ˆé¡¶ -&gt;æ ˆé¡¶=1</span></span><br><span class="line">         <span class="number">7</span>: ireturn <span class="comment">//ä»å½“å‰æ–¹æ³•è¿”å›æ ˆé¡¶intæ•°å€¼ -&gt;1</span></span><br><span class="line">         </span><br><span class="line">         <span class="number">8</span>: astore_2 <span class="comment">// -&gt;å±€éƒ¨3=Exception</span></span><br><span class="line">         <span class="number">9</span>: iconst_2 <span class="comment">// -&gt;æ ˆé¡¶=2</span></span><br><span class="line">        <span class="number">10</span>: istore_1 <span class="comment">// -&gt;å±€éƒ¨2=2</span></span><br><span class="line">        <span class="number">11</span>: iload_1 <span class="comment">//-&gt;æ ˆé¡¶=2</span></span><br><span class="line">        <span class="number">12</span>: istore_3 <span class="comment">//!! -&gt;å±€éƒ¨4=2</span></span><br><span class="line">        </span><br><span class="line">        <span class="number">13</span>: iconst_3 <span class="comment">// -&gt;æ ˆé¡¶=3</span></span><br><span class="line">        <span class="number">14</span>: istore_1 <span class="comment">// -&gt;å±€éƒ¨1=3</span></span><br><span class="line">        <span class="number">15</span>: iload_3 <span class="comment">//!! -&gt;æ ˆé¡¶=2</span></span><br><span class="line">        <span class="number">16</span>: ireturn <span class="comment">// -&gt; 2</span></span><br><span class="line">        </span><br><span class="line">        <span class="number">17</span>: astore        <span class="number">4</span> <span class="comment">//å°†æ ˆé¡¶å¼•ç”¨å‹æ•°å€¼å­˜å…¥ç¬¬äº”ä¸ªå±€éƒ¨å˜é‡=any</span></span><br><span class="line">        <span class="number">19</span>: iconst_3 <span class="comment">//å°†intå‹æ•°å€¼3å…¥æ ˆ -&gt; æ ˆé¡¶3</span></span><br><span class="line">        <span class="number">20</span>: istore_1 <span class="comment">//å°†æ ˆé¡¶ç¬¬ä¸€ä¸ªintæ•°å€¼å­˜å…¥ç¬¬äºŒä¸ªå±€éƒ¨å˜é‡ -&gt; å±€éƒ¨2=3</span></span><br><span class="line">        <span class="number">21</span>: aload         <span class="number">4</span> <span class="comment">//å°†å±€éƒ¨ç¬¬äº”ä¸ªå±€éƒ¨å˜é‡(å¼•ç”¨å‹)æ¨é€è‡³æ ˆé¡¶</span></span><br><span class="line">        <span class="number">23</span>: athrow <span class="comment">//å°†æ ˆé¡¶çš„å¼‚å¸¸æŠ›å‡º</span></span><br><span class="line">      Exception table:</span><br><span class="line">         from    to  target type</span><br><span class="line">             <span class="number">0</span>     <span class="number">4</span>     <span class="number">8</span>   Class java/lang/Exception <span class="comment">//0åˆ°4è¡Œå¯¹åº”çš„å¼‚å¸¸ï¼Œå¯¹åº”#8ä¸­å‚¨å­˜çš„å¼‚å¸¸</span></span><br><span class="line">             <span class="number">0</span>     <span class="number">4</span>    <span class="number">17</span>   any <span class="comment">//Exeptionä¹‹å¤–çš„å…¶ä»–å¼‚å¸¸</span></span><br><span class="line">             <span class="number">8</span>    <span class="number">13</span>    <span class="number">17</span>   any</span><br><span class="line">            <span class="number">17</span>    <span class="number">19</span>    <span class="number">17</span>   any</span><br></pre></td></tr></table></figure><p>åœ¨å­—èŠ‚ç çš„4,5ï¼Œä»¥åŠ13,14ä¸­æ‰§è¡Œçš„æ˜¯åŒä¸€ä¸ªæ“ä½œï¼Œå°±æ˜¯å°†intå‹çš„3å…¥æ“ä½œæ•°æ ˆé¡¶ï¼Œå¹¶å­˜å…¥ç¬¬äºŒä¸ªå±€éƒ¨å˜é‡ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æºç åœ¨finallyè¯­å¥å—ä¸­å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒJVMåœ¨å¤„ç†å¼‚å¸¸æ—¶ï¼Œä¼šåœ¨æ¯ä¸ªå¯èƒ½çš„åˆ†æ”¯éƒ½å°†finallyè¯­å¥é‡å¤æ‰§è¡Œä¸€éã€‚</p><p>é€šè¿‡ä¸€æ­¥æ­¥åˆ†æå­—èŠ‚ç ï¼Œå¯ä»¥å¾—å‡ºæœ€åçš„è¿è¡Œç»“æœæ˜¯ï¼š</p><ul><li>ä¸å‘ç”Ÿå¼‚å¸¸æ—¶: return 1</li><li>å‘ç”Ÿå¼‚å¸¸æ—¶: return 2</li><li>å‘ç”ŸéExceptionåŠå…¶å­ç±»çš„å¼‚å¸¸ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä¸è¿”å›å€¼</li></ul><blockquote><p>ä»¥ä¸Šä¾‹å­æ¥è‡ªäºã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹, å…³äºè™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤è¡¨ï¼Œä¹Ÿå¯ä»¥åœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ-é™„å½•Bã€‹ä¸­è·å–ã€‚</p></blockquote><h3 id="kotlin-å‡½æ•°æ‰©å±•çš„å®ç°"><a href="#kotlin-å‡½æ•°æ‰©å±•çš„å®ç°" class="headerlink" title="# kotlin å‡½æ•°æ‰©å±•çš„å®ç°"></a><a href="#kotlin-å‡½æ•°æ‰©å±•çš„å®ç°">#</a> kotlin å‡½æ•°æ‰©å±•çš„å®ç°</h3><p>kotlinæä¾›äº†æ‰©å±•å‡½æ•°çš„è¯­è¨€ç‰¹æ€§ï¼Œå€ŸåŠ©è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»»æ„å¯¹è±¡æ·»åŠ è‡ªå®šä¹‰æ–¹æ³•ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä¸ºObjectæ·»åŠ â€sayHelloâ€æ–¹æ³•</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SayHello.kt</span></span><br><span class="line"><span class="keyword">package</span> com.rhythm7</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> Any.<span class="title">sayHello</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åï¼Œä½¿ç”¨javapæŸ¥çœ‹ç”ŸæˆSayHelloKt.classæ–‡ä»¶çš„å­—èŠ‚ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Classfile /E:/JavaCode/TestProj/out/production/TestProj/com/rhythm7/SayHelloKt.class</span><br><span class="line">Last modified 2018-4-8; size 958 bytes</span><br><span class="line"> MD5 checksum 780a04b75a91be7605cac4655b499f19</span><br><span class="line"> Compiled from &quot;SayHello.kt&quot;</span><br><span class="line">public final class com.rhythm7.SayHelloKt</span><br><span class="line"> minor version: 0</span><br><span class="line"> major version: 52</span><br><span class="line"> flags: ACC_PUBLIC, ACC_FINAL, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">    //çœç•¥å¸¸é‡æ± éƒ¨åˆ†å­—èŠ‚ç </span><br><span class="line">&#123;</span><br><span class="line"> public static final void sayHello(java.lang.Object);</span><br><span class="line">   descriptor: (Ljava/lang/Object;)V</span><br><span class="line">   flags: ACC_PUBLIC, ACC_STATIC, ACC_FINAL</span><br><span class="line">   Code:</span><br><span class="line">     stack=2, locals=2, args_size=1</span><br><span class="line">        0: aload_0</span><br><span class="line">        1: ldc           #9                  // String $receiver</span><br><span class="line">        3: invokestatic  #15                 // Method kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull:(Ljava/lang/Object;Ljava/lang/String;)V</span><br><span class="line">        6: ldc           #17                 // String Hello</span><br><span class="line">        8: astore_1</span><br><span class="line">        9: getstatic     #23                 // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">       12: aload_1</span><br><span class="line">       13: invokevirtual #28                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V</span><br><span class="line">       16: return</span><br><span class="line">     LocalVariableTable:</span><br><span class="line">       Start  Length  Slot  Name   Signature</span><br><span class="line">           0      17     0 $receiver   Ljava/lang/Object;</span><br><span class="line">     LineNumberTable:</span><br><span class="line">       line 4: 6</span><br><span class="line">       line 5: 16</span><br><span class="line">   RuntimeInvisibleParameterAnnotations:</span><br><span class="line">     0:</span><br><span class="line">       0: #7()</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: &quot;SayHello.kt&quot;</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿå¤´éƒ¨å‘ç°,koltinä¸ºæ–‡ä»¶SayHelloç”Ÿæˆäº†ä¸€ä¸ªç±»ï¼Œç±»åâ€com.rhythm7.SayHelloKtâ€.</p><p>ç”±äºæˆ‘ä»¬ä¸€å¼€å§‹ç¼–å†™SayHello.ktæ—¶å¹¶ä¸å¸Œæœ›SayHelloæ˜¯ä¸€ä¸ªå¯å®ä¾‹åŒ–çš„å¯¹è±¡ç±»ï¼Œæ‰€ä»¥ï¼ŒSayHelloKtæ˜¯æ— æ³•è¢«å®ä¾‹åŒ–çš„ï¼ŒSayHelloKtå¹¶æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ„é€ å™¨ã€‚</p><p>å†è§‚å¯Ÿå”¯ä¸€çš„ä¸€ä¸ªæ–¹æ³•ï¼šå‘ç°Any.sayHello()çš„å…·ä½“å®ç°æ˜¯é™æ€ä¸å¯å˜æ–¹æ³•çš„å½¢å¼:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">(java.lang.Object)</span>;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å½“æˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨Any.sayHello()æ—¶ï¼Œäº‹å®ä¸Šç­‰åŒäºè°ƒç”¨javaçš„SayHelloKt.sayHello(Object)æ–¹æ³•ã€‚</p><p>é¡ºä¾¿ä¸€æçš„æ˜¯ï¼Œå½“æ‰©å±•çš„æ–¹æ³•ä¸ºAnyæ—¶ï¼Œæ„å‘³ç€Anyæ˜¯non-nullçš„ï¼Œè¿™æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æ–¹æ³•ä½“çš„å¼€å¤´æ£€æŸ¥å‚æ•°çš„éç©ºï¼Œå³è°ƒç”¨ <code>kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull(Object value, String paramName)</code> æ–¹æ³•æ¥æ£€æŸ¥ä¼ å…¥çš„Anyç±»å‹å¯¹è±¡æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœæˆ‘ä»¬æ‰©å±•çš„å‡½æ•°ä¸º<code>Any?.sayHello()</code>ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘åçš„æ–‡ä»¶ä¸­åˆ™ä¸ä¼šæœ‰è¿™æ®µå­—èŠ‚ç çš„å‡ºç°ã€‚</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="# å‚è€ƒæ–‡ç« "></a><a href="#å‚è€ƒæ–‡ç« ">#</a> å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://www.cnblogs.com/paddix/p/5282004.html">https://www.cnblogs.com/paddix/p/5282004.html</a></li><li><a href="https://blog.csdn.net/sinat_37191123/article/details/84582438">https://blog.csdn.net/sinat_37191123/article/details/84582438</a></li><li><a href="https://blog.csdn.net/tyyj90/article/details/78472986">https://blog.csdn.net/tyyj90/article/details/78472986</a></li><li><a href="https://blog.csdn.net/a15089415104/article/details/83215598">https://blog.csdn.net/a15089415104/article/details/83215598</a></li><li>å’¸é±¼ä¸æ€è®® <a href="https://juejin.im/post/5aca2c366fb9a028c97a5609">https://juejin.im/post/5aca2c366fb9a028c97a5609</a></li><li><a href="https://pdai.tech/md/java/jvm/java-jvm-class.html">https://pdai.tech/md/java/jvm/java-jvm-class.html</a></li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java14æ–°ç‰¹æ€§-Recordç±»</title>
      <link href="/2025/03/05/Java14%E6%96%B0%E7%89%B9%E6%80%A7-Record%E7%B1%BB/"/>
      <url>/2025/03/05/Java14%E6%96%B0%E7%89%B9%E6%80%A7-Record%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Java-ä¸­çš„-Record-ç±»"><a href="#Java-ä¸­çš„-Record-ç±»" class="headerlink" title="Java ä¸­çš„ Record ç±»"></a>Java ä¸­çš„ Record ç±»</h2><p>Record ç±»æ˜¯ Java 14 å¼•å…¥çš„ä¸€ç§æ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ç®€åŒ–ä¸å¯å˜æ•°æ®ç±»çš„å®šä¹‰ã€‚å®ƒç±»ä¼¼äºæšä¸¾ç±»ï¼Œç”¨äºæ ‡è®°ä¸å¯å˜çš„æ•°æ®ç±»ã€‚Record ç±»é€šè¿‡å‡å°‘æ ·æ¿ä»£ç ï¼Œä½¿å¾—ç±»çš„å®šä¹‰æ›´åŠ ç®€æ´å’Œç´§å‡‘<a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a><a href="https://www.jianshu.com/p/bf99938a369b">2</a>ã€‚</p><p>Record ç±»çš„å®šä¹‰</p><p>ä½¿ç”¨ <em>record</em> å…³é”®å­—å¯ä»¥å®šä¹‰ä¸€ä¸ª Record ç±»ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªåŒ…å« <em>start</em> å’Œ <em>end</em> ä¸¤ä¸ªå­—æ®µçš„ <em>range</em> ç±»ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><p>public record range(int start, int end) {}</p><p>è¿™ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ª <em>final</em> ç±»ï¼Œå¹¶è‡ªåŠ¨å®ç°äº† <em>equals</em>ã€<em>hashCode</em> å’Œ <em>toString</em> æ–¹æ³•<a href="https://www.jianshu.com/p/bf99938a369b">2</a>ã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Record ç±»çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>Â <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>Â <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">range</span> <span class="variable">r</span> <span class="operator">=</span>Â <span class="keyword">new</span>Â <span class="title class_">range</span>(<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">        System.out.println(r.start());Â <span class="comment">// è¾“å‡º: 100</span></span><br><span class="line">        System.out.println(r.end());Â <span class="comment">// è¾“å‡º: 200</span></span><br><span class="line">        System.out.println(r);Â <span class="comment">// è¾“å‡º: range[start=100, end=200]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<em>range</em> ç±»è‡ªåŠ¨ç”Ÿæˆäº†æ„é€ æ–¹æ³•ã€å­—æ®µè®¿é—®æ–¹æ³•ä»¥åŠ <em>toString</em> æ–¹æ³•ç‰¹ç‚¹å’Œä¼˜åŠ¿<br>Record ç±»å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼š</p><ol><li><p><strong>ç®€æ´æ€§</strong>ï¼šä½¿ç”¨ <em>record</em> å…³é”®å­—å¯ä»¥ä¸€è¡Œä»£ç å®šä¹‰ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå‡å°‘äº†æ ·æ¿ä»£ç <a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a>ã€‚</p></li><li><p><strong>è‡ªåŠ¨ç”Ÿæˆæ–¹æ³•</strong>ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ æ–¹æ³•ã€<em>equals</em>ã€<em>hashCode</em> å’Œ <em>toString</em> æ–¹æ³•<a href="https://www.jianshu.com/p/bf99938a369b">2</a>ã€‚</p></li><li><p><strong>ä¸å¯å˜æ€§</strong>ï¼šRecord ç±»æ˜¯ <em>final</em> ç±»ï¼Œæ‰€æœ‰å­—æ®µä¹Ÿæ˜¯ <em>final</em> çš„ï¼Œä¿è¯äº†ç±»çš„ä¸å¯å˜æ€§<a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>ã€‚</p></li></ol><p>æ‰©å±•åŠŸèƒ½</p><p>è™½ç„¶ Record ç±»ç®€åŒ–äº†ç±»çš„å®šä¹‰ï¼Œä½†å®ƒä»ç„¶å…è®¸æ·»åŠ è‡ªå®šä¹‰æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œæ„é€ æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä¸º <em>range</em> ç±»æ·»åŠ ä¸€ä¸ªè®¡ç®—è·ç¦»çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>Â <span class="keyword">record</span> <span class="title class_">range</span><span class="params">(<span class="type">int</span>Â start,Â <span class="type">int</span>Â end)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>Â <span class="title function_">distance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>Â end - start;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥æ·»åŠ é™æ€æ–¹æ³•æ¥åˆ›å»ºå®ä¾‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>Â <span class="keyword">record</span> <span class="title class_">range</span><span class="params">(<span class="type">int</span>Â start,Â <span class="type">int</span>Â end)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>Â range <span class="title function_">of</span><span class="params">(<span class="type">int</span>Â start,Â <span class="type">int</span>Â end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span>Â <span class="title class_">range</span>(start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡è¿™äº›æ‰©å±•åŠŸèƒ½ï¼ŒRecord ç±»ä¸ä»…ç®€åŒ–äº†ç±»çš„å®šä¹‰ï¼Œè¿˜æä¾›äº†çµæ´»æ€§<a href="https://www.jianshu.com/p/bf99938a369b">2</a><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>ã€‚</p><p>Record ç±»æ˜¯ Java 14 å¼•å…¥çš„ä¸€ç§æ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ç®€åŒ–ä¸å¯å˜æ•°æ®ç±»çš„å®šä¹‰ã€‚å®ƒé€šè¿‡å‡å°‘æ ·æ¿ä»£ç ï¼Œä½¿å¾—ç±»çš„å®šä¹‰æ›´åŠ ç®€æ´å’Œç´§å‡‘ï¼ŒåŒæ—¶æä¾›äº†è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å’Œä¸å¯å˜æ€§<a href="https://blog.csdn.net/cz20010101/article/details/123957405">1</a><a href="https://www.jianshu.com/p/bf99938a369b">2</a>ã€‚æ­¤å¤–ï¼ŒRecord ç±»è¿˜å…è®¸æ·»åŠ è‡ªå®šä¹‰æ–¹æ³•å’Œé™æ€æ–¹æ³•ï¼Œæä¾›äº†çµæ´»æ€§<a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1331429187256353">3</a>ã€‚</p><h2 id="ä¾‹é¢˜-Codeforce-Problem-D-Codeforces"><a href="#ä¾‹é¢˜-Codeforce-Problem-D-Codeforces" class="headerlink" title="ä¾‹é¢˜: Codeforce Problem - D - Codeforces"></a>ä¾‹é¢˜: Codeforce <a href="https://codeforces.com/contest/1714/problem/D">Problem - D - Codeforces</a></h2><p>é‡‡ç”¨recordè®°å½•pairå¿«é€Ÿæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">(Scanner sc)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> sc.next();</span><br><span class="line">        <span class="type">var</span> <span class="variable">h</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">var</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; cp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Collections.nCopies(n + <span class="number">1</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cp.set(i, sc.next());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">var</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">int</span>[h + <span class="number">1</span>];</span><br><span class="line">        Map&lt;Integer, Integer&gt; res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; h; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">maxp</span> <span class="operator">=</span> <span class="number">0</span>, P = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= n; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ck(cp.get(k), s, i, is) &amp;&amp; maxp &lt; cp.get(k).length()) &#123;</span><br><span class="line">                    maxp = cp.get(k).length();</span><br><span class="line">                    P = k;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (P != -<span class="number">1</span>) &#123;</span><br><span class="line">                res.put(i, P);</span><br><span class="line">                work(cp.get(P), is, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; h; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;Move&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> entry : res.entrySet()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> entry.getKey(), y = entry.getValue();</span><br><span class="line">            <span class="type">int</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cp.get(y).length(); i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (is[x + i] &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    tp++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tp == cp.get(y).length()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; cp.get(y).length(); i++) &#123;</span><br><span class="line">                    is[x + i]--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ans.add(<span class="keyword">new</span> <span class="title class_">Move</span>(y, x));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(ans.size());</span><br><span class="line">        <span class="keyword">for</span> (Move move : ans) &#123;</span><br><span class="line">            System.out.println(move.k() + <span class="string">&quot; &quot;</span> + (move.pos() + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">ck</span><span class="params">(String p, String s, <span class="type">int</span> pos, <span class="type">int</span>[] is)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>, h = s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + pos &gt;= h || p.charAt(i) != s.charAt(pos + i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (is[i + pos] &gt; <span class="number">0</span>) c++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c != p.length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">(String p, <span class="type">int</span>[] is, <span class="type">int</span> pos)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">            is[pos + i]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Move</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> pos)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in)) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">while</span> (t-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                solve(scanner);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å—</title>
      <link href="/2025/03/04/%E5%88%86%E5%9D%97/"/>
      <url>/2025/03/04/%E5%88%86%E5%9D%97/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ†å—å°±æ˜¯å°†ä¸€æ®µæ•°æ®åˆ†æˆä¸€äº›å°å—ï¼Œ å¯¹æ¯ä¸ªå—å•ç‹¬å¤„ç†ä½¿å…¶ä¸è¶…è¿‡æ—¶é—´é™åˆ¶, åˆ†å—æ›´å¤šæ˜¯ä¸€ç§æ€æƒ³ï¼Œä»–ä»‹äºçº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„ä¹‹é—´ã€‚</p><hr><h2 id="ä¸€-ç»™å‡ºä¸€ä¸ªé•¿ä¸º-n-çš„æ•°åˆ—ï¼Œä»¥åŠ-n-ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼ŒåŒºé—´æ±‚å’Œã€‚"><a href="#ä¸€-ç»™å‡ºä¸€ä¸ªé•¿ä¸º-n-çš„æ•°åˆ—ï¼Œä»¥åŠ-n-ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼ŒåŒºé—´æ±‚å’Œã€‚" class="headerlink" title="ä¸€.ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ—ï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼ŒåŒºé—´æ±‚å’Œã€‚"></a>ä¸€.ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ—ï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼ŒåŒºé—´æ±‚å’Œã€‚</h2><p>è¾“å…¥æ ¼å¼</p><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°å­— nã€‚</p><p>ç¬¬äºŒè¡Œè¾“å…¥ n ä¸ªæ•°å­—ï¼Œç¬¬ i ä¸ªæ•°å­—ä¸º a_iï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>æ¥ä¸‹æ¥è¾“å…¥ n è¡Œè¯¢é—®ï¼Œæ¯è¡Œè¾“å…¥å››ä¸ªæ•°å­— \mathrm{opt}ã€lã€rã€cï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>è‹¥ \mathrm{opt} = 0ï¼Œè¡¨ç¤ºå°†ä½äº [l, r] çš„ä¹‹é—´çš„æ•°å­—éƒ½åŠ  cã€‚</p><p>è‹¥ \mathrm{opt} = 1ï¼Œè¡¨ç¤ºè¯¢é—®ä½äº [l, r] çš„æ‰€æœ‰æ•°å­—çš„å’Œ \bmod (c+1)ã€‚</p><p><strong>æ€è·¯</strong> : </p><ul><li><p>å°†æ•°ç»„åˆ†å—æ¯æ¬¡åŠ çš„æ—¶å€™ï¼Œå¦‚æœLä¸Råœ¨åŒä¸€å—é‡Œé¢ï¼Œç›´æ¥éå†è¯¥æ•°ç»„ï¼Œæœ€å·®æ—¶é—´å¤æ‚åº¦O(nsqrt(n))ï¼Œå¦‚æœä¸æ˜¯<br> åˆ™å°†ä¸å·¦å³ä¸¤ä¸ªå—ç›¸åŒçš„æ•°ç»„å†…æ•°å­—ç›´æ¥æ“ä½œï¼Œå°†ä¸¤ä¸ªä¹‹é—´çš„ç”¨ä¸€ä¸ªç±»ä¼¼Lazytagçš„æ•°ç»„ä¿å­˜ä¿®æ”¹ä¸¤é‡ï¼Œ</p></li><li><p>åŒç†å¯¹äºæŸ¥è¯¢æ—¶å€™ï¼Œå¦‚æœLä¸Rå±äºåŒä¸€ä¸ªå—ï¼Œåˆ™ç›´æ¥éå†ï¼Œæœ€å·®æ—¶é—´å¤æ‚åº¦æ˜¯O(nsqrt(n))</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">p</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        f[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        b[f[i]] += a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](i64 l, i64 r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        i64 g = f[l], h = f[r];</span><br><span class="line">        <span class="keyword">if</span> (g == h) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; f[i] == f[l]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; f[i] == f[r]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">                b[f[i]] += c;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = f[l] + <span class="number">1</span>; i &lt; f[r]; i++) &#123;</span><br><span class="line">                p[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](i64 l, i64 r, i64 c) -&gt; i64 &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[l] == f[r]) &#123;</span><br><span class="line">            i64 sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                sum = (sum + a[i] + p[f[i]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i64 sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; f[i] == f[l]; i++) &#123;</span><br><span class="line">                sum = (sum + a[i] + p[f[i]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 j = r; f[j] == f[r]; j--) &#123;</span><br><span class="line">                sum = (sum + a[j] + p[f[j]]) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = f[l] + <span class="number">1</span>; i &lt; f[r]; i++) &#123;</span><br><span class="line">                sum = (sum + b[i] + p[i] * len) % (c + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒ-ç»™å‡ºä¸€ä¸ªé•¿ä¸º-n-çš„æ•°åˆ—ï¼Œä»¥åŠ-n-ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼-x-çš„å…ƒç´ ä¸ªæ•°ã€‚"><a href="#äºŒ-ç»™å‡ºä¸€ä¸ªé•¿ä¸º-n-çš„æ•°åˆ—ï¼Œä»¥åŠ-n-ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼-x-çš„å…ƒç´ ä¸ªæ•°ã€‚" class="headerlink" title="äºŒ. ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ—ï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼ x çš„å…ƒç´ ä¸ªæ•°ã€‚"></a>äºŒ. ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ—ï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼ x çš„å…ƒç´ ä¸ªæ•°ã€‚</h2><p>è¾“å…¥æ ¼å¼</p><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°å­— nã€‚</p><p>ç¬¬äºŒè¡Œè¾“å…¥ n ä¸ªæ•°å­—ï¼Œç¬¬ i ä¸ªæ•°å­—ä¸º a_iï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>æ¥ä¸‹æ¥è¾“å…¥ n è¡Œè¯¢é—®ï¼Œæ¯è¡Œè¾“å…¥å››ä¸ªæ•°å­— \mathrm{opt}ã€lã€rã€cï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>è‹¥ \mathrm{opt} = 0ï¼Œè¡¨ç¤ºå°†ä½äº [l, r] çš„ä¹‹é—´çš„æ•°å­—éƒ½åŠ  cã€‚</p><p>è‹¥ \mathrm{opt} = 1ï¼Œè¡¨ç¤ºè¯¢é—® [l, r] ä¸­ï¼Œå°äº c^2 çš„æ•°å­—çš„ä¸ªæ•°ã€‚</p><p>è¾“å‡ºæ ¼å¼</p><p>å¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•°å­—è¡¨ç¤ºç­”æ¡ˆã€‚</p><p>æ ·ä¾‹</p><p><strong>è¾“å…¥å¤åˆ¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">1 2 2 3</span><br><span class="line">0 1 3 1</span><br><span class="line">1 1 3 2</span><br><span class="line">1 1 4 1</span><br><span class="line">1 2 3 2</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºå¤åˆ¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">0</span><br><span class="line">2</span><br></pre></td></tr></table></figure><p>æ•°æ®èŒƒå›´ä¸æç¤º</p><p>å¯¹äº 100\% çš„æ•°æ®ï¼Œ1 \leq n \leq 50000, -2^{31} \leq \mathrm{others}ã€\mathrm{ans} \leq 2^{31}-1ã€‚</p><p><strong>æ€è·¯</strong><br>    ä¸€æ ·åˆ†å—åï¼š<br>        åŠ æ³•æ—¶ï¼š</p><pre><code>         - å½“$id[l] == id[r]$ æ—¶å€™ç›´æ¥æš´åŠ›éå†ï¼Œæœ€åå¤æ‚åº¦O\(nsqrt\(n\)\)         - å½“$id[l] != id[r]$ æ—¶å€™ï¼š å…ˆå¤„ç†ä¸¤ä¸ªè£‚å—ï¼Œ æš´åŠ›ç»´æŠ¤ã€‚å¯¹äºå®Œæ•´çš„å—ï¼Œæ¯ä¸ªå—è®¾ç½®ä¸€ä¸ªå¤åˆ¶æ•°ç»„ï¼Œæ“ä½œåå¯¹è¿™ä¸ªå—å†…è¿›è¡Œsortï¼Œ æ—¶é—´å¤æ‚åº¦$O(log(sqrt(n))$ å¥—ä¸ªnåä¹Ÿå¯ä»¥è¿‡ã€‚    è¯¢é—®æ—¶ï¼š          - å½“$id[l] == id[r]$ æ—¶å€™ç›´æ¥æš´åŠ›éå†ï¼Œæœ€åå¤æ‚åº¦O\(nsqrt\(n\)\)          - å½“$id[l] != id[r]$ æ—¶å€™ï¼š å…ˆå¤„ç†ä¸¤ä¸ªè£‚å—ï¼Œ æš´åŠ›ç»´æŠ¤ã€‚å¯¹äºå®Œæ•´çš„å—ï¼Œå—å†…äºŒåˆ†å•è°ƒå¤åˆ¶æ•°ç»„bï¼Œæ‰¾åˆ°å—å†…æ¯”$c*c$ å°çš„æ•°å­—ä¸ªæ•°ã€‚ </code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">id</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">g</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">cnt</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        b[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> work = [&amp;](<span class="type">int</span> id) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="type">int</span> st = <span class="number">1</span> + (id - <span class="number">1</span>) * len;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = st; i &lt; <span class="built_in">min</span>(n + <span class="number">1</span>, st + len); i++) &#123;</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(b.<span class="built_in">begin</span>() + st, <span class="built_in">min</span>(b.<span class="built_in">end</span>(), b.<span class="built_in">begin</span>() + st + len));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i += len) &#123;</span><br><span class="line">        <span class="built_in">work</span>(id[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; id[l] == id[i]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; id[r] == id[i]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[r]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                g[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r, i64 c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                <span class="type">int</span> l = <span class="number">1</span> + (i - <span class="number">1</span>) * len, r = i * len;</span><br><span class="line">                <span class="type">int</span> ls = l;</span><br><span class="line">                <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">                    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (g[id[mid]] + b[mid] &lt; c) &#123;</span><br><span class="line">                        l = mid + <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        r = mid - <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> res = <span class="built_in">max</span>(<span class="number">0</span>, r - ls + <span class="number">1</span>);</span><br><span class="line">                sum += res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c * c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰-åŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼-x-çš„å‰é©±ï¼ˆæ¯”å…¶å°çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚"><a href="#ä¸‰-åŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼-x-çš„å‰é©±ï¼ˆæ¯”å…¶å°çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚" class="headerlink" title="ä¸‰. åŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼ x çš„å‰é©±ï¼ˆæ¯”å…¶å°çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚"></a>ä¸‰. åŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼ x çš„å‰é©±ï¼ˆæ¯”å…¶å°çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚</h2><p><strong>é¢˜ç›®æè¿°</strong></p><p>ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ—ï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´åŠ æ³•ï¼Œè¯¢é—®åŒºé—´å†…å°äºæŸä¸ªå€¼ x çš„å‰é©±ï¼ˆæ¯”å…¶å°çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°å­— nã€‚</p><p>ç¬¬äºŒè¡Œè¾“å…¥ n ä¸ªæ•°å­—ï¼Œç¬¬ i ä¸ªæ•°å­—ä¸º a_iï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>æ¥ä¸‹æ¥è¾“å…¥ n è¡Œè¯¢é—®ï¼Œæ¯è¡Œè¾“å…¥å››ä¸ªæ•°å­— \mathrm{opt}ã€lã€rã€cï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>è‹¥ \mathrm{opt} = 0ï¼Œè¡¨ç¤ºå°†ä½äº [l, r] çš„ä¹‹é—´çš„æ•°å­—éƒ½åŠ  cã€‚</p><p>è‹¥ \mathrm{opt} = 1ï¼Œè¡¨ç¤ºè¯¢é—® [l, r] ä¸­ c çš„å‰é©±çš„å€¼ï¼ˆä¸å­˜åœ¨åˆ™è¾“å‡º -1ï¼‰ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>å¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•°å­—è¡¨ç¤ºç­”æ¡ˆã€‚</p><p><strong>æ ·ä¾‹</strong></p><p>è¾“å…¥å¤åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">1 2 2 3</span><br><span class="line">0 1 3 1</span><br><span class="line">1 1 4 4</span><br><span class="line">0 1 2 2</span><br><span class="line">1 1 2 4</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¤åˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">-1</span><br></pre></td></tr></table></figure><p>æ•°æ®èŒƒå›´ä¸æç¤º</p><p>å¯¹äº 100\% çš„æ•°æ®ï¼Œ1 \leq n \leq 100000, -2^{31} \leq \mathrm{others}ã€\mathrm{ans} \leq 2^{31}-1ã€‚</p><p>æ€è·¯ï¼šåŒé¢˜ç›®äºŒï¼Œå°†æ¯ä¸ªå—æ’åº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">g</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">id</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> work = [&amp;](i64 id) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        i64 st = <span class="number">1</span> + (id - <span class="number">1</span>) * len;</span><br><span class="line">        <span class="keyword">for</span> (i64 i = st; i &lt; <span class="built_in">min</span>(n + <span class="number">1</span>, st + len); i++) &#123;</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(b.<span class="built_in">begin</span>() + st, <span class="built_in">min</span>(b.<span class="built_in">end</span>(), b.<span class="built_in">begin</span>() + st + len));</span><br><span class="line">    &#125;;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i += len) &#123;</span><br><span class="line">        <span class="built_in">work</span>(id[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](i64 l, i64 r, i64 c) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[l]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                a[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">work</span>(id[r]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                g[i] += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](i64 l, i64 r, i64 c) -&gt; i64 &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            i64 ans = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i64 ans = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 i = l; id[l] == id[i]; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] + g[id[i]] &lt; c) &#123;</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, a[i] + g[id[i]]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (i64 i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">                i64 l = <span class="number">1</span> + (i - <span class="number">1</span>) * len, r = i * len;</span><br><span class="line">                i64 mid;</span><br><span class="line">                <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">                    mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (b[mid] + g[id[mid]] &lt; c) &#123;</span><br><span class="line">                        ans = <span class="built_in">max</span>(ans, b[mid] + g[id[mid]]);</span><br><span class="line">                        l = mid + <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        r = mid - <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        i64 opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r, c) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">add</span>(l, r, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°åˆ—4ï¼šå¼€æ–¹ï¼ŒåŒºé—´æ±‚å’Œ"><a href="#æ•°åˆ—4ï¼šå¼€æ–¹ï¼ŒåŒºé—´æ±‚å’Œ" class="headerlink" title="æ•°åˆ—4ï¼šå¼€æ–¹ï¼ŒåŒºé—´æ±‚å’Œ"></a>æ•°åˆ—4ï¼šå¼€æ–¹ï¼ŒåŒºé—´æ±‚å’Œ</h2><p>ç»™å‡ºä¸€ä¸ªé•¿ä¸º n çš„æ•°åˆ— a_1 \ldots a_nï¼Œä»¥åŠ n ä¸ªæ“ä½œï¼Œæ“ä½œæ¶‰åŠåŒºé—´å¼€æ–¹ï¼ŒåŒºé—´æ±‚å’Œã€‚</p><p>è¾“å…¥æ ¼å¼</p><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°å­— nã€‚</p><p>ç¬¬äºŒè¡Œè¾“å…¥ n ä¸ªæ•°å­—ï¼Œç¬¬ i ä¸ªæ•°å­—ä¸º a_iï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>æ¥ä¸‹æ¥è¾“å…¥ n è¡Œè¯¢é—®ï¼Œæ¯è¡Œè¾“å…¥å››ä¸ªæ•°å­— \mathrm{opt}, l, r, cï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><p>è‹¥ \mathrm{opt} = 0ï¼Œè¡¨ç¤ºå°†ä½äº [l, r] çš„ä¹‹é—´çš„æ•°å­—éƒ½å¼€æ–¹ã€‚å¯¹äºåŒºé—´ä¸­æ¯ä¸ª a_i(l\le i\le r),\: a_i \leftarrow \left\lfloor \sqrt{a_i}\right\rfloor</p><p>è‹¥ \mathrm{opt} = 1ï¼Œè¡¨ç¤ºè¯¢é—®ä½äº [l, r] çš„æ‰€æœ‰æ•°å­—çš„å’Œã€‚</p><blockquote><p>æ€è·¯ï¼š</p></blockquote><p>å¯¹äº1e9èŒƒå›´å†…çš„æ•´æ•°ï¼Œå¼€æ–¹æœ€å¤š7æ¬¡å°±ä¼šå˜æˆ1ï¼Œ å’Œçº¿æ®µæ ‘ä¸€æ ·ï¼Œå¦‚æœåŒºé—´å†…æ‰€æœ‰éƒ½æ˜¯1å°±è·³è¿‡ï¼Œå¦åˆ™éå†å¼€æ–¹ï¼Œæ›´æ–°ç°åœ¨çŠ¶æ€</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="type">int</span> siz = n / len + ((n % len) ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//cerr &lt;&lt; siz &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">id</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">c</span><span class="params">(siz + <span class="number">1</span>)</span>, <span class="title">ov</span><span class="params">(siz + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        c[id[i]]++;</span><br><span class="line">        b[id[i]] += a[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">            ov[id[i]]++; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> f = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] != <span class="number">1</span>) &#123;</span><br><span class="line">                    b[id[i]] -= a[i];</span><br><span class="line">                    a[i] = (i64)<span class="built_in">sqrt</span>(a[i]);</span><br><span class="line">                    b[id[i]] += a[i];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                        ov[id[i]]++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] != <span class="number">1</span>) &#123;</span><br><span class="line">                b[id[i]] -= a[i];</span><br><span class="line">                a[i] = (i64)<span class="built_in">sqrt</span>(a[i]);</span><br><span class="line">                b[id[i]] += a[i];</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                    ov[id[i]]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] != <span class="number">1</span>) &#123;</span><br><span class="line">                b[id[i]] -= a[i];</span><br><span class="line">                a[i] = (i64)<span class="built_in">sqrt</span>(a[i]);</span><br><span class="line">                b[id[i]] += a[i];</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (a[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                    ov[id[i]]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ov[i] != c[i]) &#123;</span><br><span class="line">                <span class="comment">//cerr &lt;&lt; &quot;F:&quot; &lt;&lt; i &lt;&lt; &#x27; &#x27;;</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span> + (i - <span class="number">1</span>) * len; j &lt;= i * len; j++) &#123;</span><br><span class="line">                    <span class="comment">//cout &lt;&lt; id[j] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                    <span class="keyword">if</span> (a[j] != <span class="number">1</span>) &#123;</span><br><span class="line">                        b[id[j]] -= a[j];</span><br><span class="line">                        a[j] = (<span class="type">int</span>)<span class="built_in">sqrt</span>(a[j]);</span><br><span class="line">                        b[id[j]] += a[j];</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (a[j] == <span class="number">1</span>) &#123;</span><br><span class="line">                            ov[id[j]]++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> query = [&amp;](<span class="type">int</span> l, <span class="type">int</span> r) -&gt; i64 &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">            i64 ans = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">                ans += a[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; id[i] == id[l]; i++) &#123;</span><br><span class="line">            res += a[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">            res += b[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = r; id[i] == id[r]; i--) &#123;</span><br><span class="line">            res += a[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> opt, l, r, c;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; l &gt;&gt; r &gt;&gt; c;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">f</span>(l, r);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query</span>(l, r) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2025/03/03/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2025/03/03/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>æ­£åˆ™è¡¨è¾¾å¼ç”¨äºå¯¹å­—ç¬¦ä¸²çš„åŒ¹é…åˆ¤æ–­ä¸­</p></blockquote><hr><h2 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦:"></a>å…ƒå­—ç¬¦:</h2><div class="table-container"><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å†™æ³•</th><th>æ„ä¹‰</th></tr></thead><tbody><tr><td>.</td><td>.</td><td>ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>\d</td><td>\\d</td><td>ä»£è¡¨0 - 9ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦</td></tr><tr><td>\D</td><td>\\D</td><td>ä»£è¡¨ä»»æ„ä¸€ä¸ªéæ•°å­—å­—ç¬¦</td></tr><tr><td>\s</td><td>\\s</td><td>ä»£è¡¨ç©ºç™½å­—ç¬¦ï¼Œ å¦‚â€™\nâ€™ , â€˜\tâ€™</td></tr><tr><td>\S</td><td>\S</td><td>ä»£è¡¨åˆ†ç©ºç™½å­—ç¬¦</td></tr><tr><td>\w</td><td>\w</td><td>ä»£è¡¨å¯ç”¨ä½œæ ‡è¯†ç¬¦çš„å­—ç¬¦ï¼Œ ä½†ä¸åŒ…æ‹¬ â€œ$â€</td></tr><tr><td>\W</td><td>\W</td><td>ä»£è¡¨ä¸å¯ä»¥ç”¨ä½œæ ‡è¯†ç¬¦çš„å­—ç¬¦</td></tr><tr><td>\p{Lower}</td><td>\p{Lower}</td><td>ä»£è¡¨å°å†™å­—æ¯ a ~ z</td></tr><tr><td>\p{Upper}</td><td>\p{Upper}</td><td>ä»£è¡¨å¤§å†™å­—æ¯ A ~ Z</td></tr><tr><td>\p{ASCII}</td><td>\p{ASCII}</td><td>ASCII å­—ç¬¦</td></tr><tr><td>\p{Alpha}</td><td>\p{Alpha}</td><td>å­—æ¯å­—ç¬¦</td></tr><tr><td>\p{Digit}</td><td>\p{Digit}</td><td>åè¿›åˆ¶æ•°å­—</td></tr><tr><td>\p{Alnum}</td><td>\p{Alnum}</td><td>æ•°å­—æˆ–å­—æ¯å­—ç¬¦</td></tr><tr><td>\p{Punct}</td><td>\p{Punct}</td><td>æ ‡ç‚¹ç¬¦å· : â€œ!@#$%^&amp;ã€*()[]â€œç­‰ç­‰</td></tr><tr><td>\p{Graph}</td><td>\p{Graph}</td><td>å¯è§å­—ç¬¦: [\p{Alnum}\p{Punct}]</td></tr><tr><td>\p{Print}</td><td>\p{Print}</td><td>å¯æ‰“å°å­—ç¬¦: [\p{Graph}\x20]</td></tr><tr><td>\p{Blank}</td><td>\p{Blank}</td><td>ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦: [\t]</td></tr><tr><td>\p{Cntrl}</td><td>\p{Cntrl}</td><td>æ§åˆ¶å­—ç¬¦: [\x00-\x1F\x7F]</td></tr></tbody></table></div><blockquote><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ â€œ . â€œ ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶å€™å¦‚æœè¦åˆ¤æ–­æœ‰æ™®é€šæ„ä¹‰çš„â€.â€éœ€è¦åŠ æ–œæ†ï¼ˆå’ŒLatexç‰¹æ®Šå­—ç¬¦æ§åˆ¶ä¸€æ ·ï¼‰</p></blockquote><ul><li>ä¾‹å­ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\d+&quot;</span>; <span class="comment">// åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;12345&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å®Œå…¨åŒ¹é…!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸åŒ¹é…!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>äº‹å®ä¸Šï¼ŒStringç±»é‡Œé¢å°è£…äº†Patternç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹å¼æ¥è°ƒç”¨Patterné‡Œé¢çš„åŒ¹é…ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">input.matches(regex) <span class="comment">//å…¶å†…éƒ¨è°ƒç”¨äº† `Pattern.matches(regex, this)`</span></span><br></pre></td></tr></table></figure></p><hr><h3 id="å…ƒå­—ç¬¦ä¸åŸºæœ¬ç¬¦å·ï¼ˆ-importantï¼‰"><a href="#å…ƒå­—ç¬¦ä¸åŸºæœ¬ç¬¦å·ï¼ˆ-importantï¼‰" class="headerlink" title="å…ƒå­—ç¬¦ä¸åŸºæœ¬ç¬¦å·ï¼ˆ!importantï¼‰"></a>å…ƒå­—ç¬¦ä¸åŸºæœ¬ç¬¦å·ï¼ˆ!importantï¼‰</h3><ul><li><strong>.</strong><br>  åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼š<code>a.c</code> å¯ä»¥åŒ¹é… â€œabcâ€ã€â€a-câ€ ç­‰ã€‚</li></ul><hr><pre><code>åŒ¹é…å‰é¢çš„å…ƒç´  0 æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼š`ab*c` å¯ä»¥åŒ¹é… &quot;ac&quot;ã€&quot;abc&quot;ã€&quot;abbc&quot; ç­‰ã€‚</code></pre><ul><li><p><strong>+</strong><br>  åŒ¹é…å‰é¢çš„å…ƒç´  1 æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼š<code>ab+c</code> ä¸èƒ½åŒ¹é… â€œacâ€ï¼Œä½†å¯ä»¥åŒ¹é… â€œabcâ€ã€â€abbcâ€ ç­‰ã€‚</p></li><li><p><strong>?</strong><br>  åŒ¹é…å‰é¢çš„å…ƒç´  0 æ¬¡æˆ– 1 æ¬¡ã€‚ä¾‹å¦‚ï¼š<code>colou?r</code> å¯ä»¥åŒ¹é… â€œcolorâ€ å’Œ â€œcolourâ€ã€‚</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;abcdd?e&quot;</span>; <span class="comment">// åŒ¹é…ä¸€ä¸ªæˆ–é›¶ä¸ªæ•°å­—  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;abcde&quot;</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);  </span><br><span class="line"><span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> (matcher.matches()) &#123;  </span><br><span class="line">    System.out.println(<span class="string">&quot;å®Œå…¨åŒ¹é…!&quot;</span>);  </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸åŒ¹é…!&quot;</span>);  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// ç»“æœæ˜¯åŒ¹é…ï¼Œå› ä¸ºè¯¥ä½ç½®çš„dæ²¡æœ‰å‡ºç°ï¼ˆ0æ¬¡ï¼‰ï¼Œå…¶ä»–åŸºæœ¬ç¬¦å·ç”¨æ³•åŒç†</span></span><br></pre></td></tr></table></figure></li><li><p><strong>{}</strong><br>  é™å®šåŒ¹é…æ¬¡æ•°ï¼š</p><ul><li><code>&#123;n&#125;</code>ï¼šåŒ¹é…æ°å¥½ n æ¬¡</li><li><code>&#123;n,&#125;</code>ï¼šè‡³å°‘ n æ¬¡</li><li><code>&#123;n,m&#125;</code>ï¼šè‡³å°‘ n æ¬¡ï¼Œæœ€å¤š m æ¬¡<br>  ä¾‹å¦‚ï¼š<code>\\d&#123;3&#125;</code> åŒ¹é…è¿ç»­3ä¸ªæ•°å­—ã€‚</li></ul></li><li><p><strong>[]</strong><br>  å®šä¹‰å­—ç¬¦é›†åˆï¼Œä¾‹å¦‚ï¼š<code>[abc]</code> åŒ¹é… â€˜aâ€™ã€â€™bâ€™ æˆ– â€˜câ€™ï¼›<code>[a-z]</code> åŒ¹é…æ‰€æœ‰å°å†™å­—æ¯ã€‚</p></li><li><p><strong>^</strong> å’Œ <strong>$</strong><br>  åˆ†åˆ«è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸã€‚ä¾‹å¦‚ï¼š<code>^Hello</code> è¡¨ç¤ºå­—ç¬¦ä¸²å¿…é¡»ä»¥ â€œHelloâ€ å¼€å§‹ï¼Œ<code>world$</code> è¡¨ç¤ºå¿…é¡»ä»¥ â€œworldâ€ ç»“å°¾ã€‚</p></li><li><p><strong>|</strong><br>  è¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼š<code>cat|dog</code> è¡¨ç¤ºåŒ¹é… â€œcatâ€ æˆ– â€œdogâ€</p></li></ul><hr><h2 id="å¤šä¸ªå…ƒå­—ç¬¦ä»£è¡¨ä¸€ä¸ªå­—ç¬¦-å­—ç¬¦é›†åˆ"><a href="#å¤šä¸ªå…ƒå­—ç¬¦ä»£è¡¨ä¸€ä¸ªå­—ç¬¦-å­—ç¬¦é›†åˆ" class="headerlink" title="å¤šä¸ªå…ƒå­—ç¬¦ä»£è¡¨ä¸€ä¸ªå­—ç¬¦(å­—ç¬¦é›†åˆ)"></a>å¤šä¸ªå…ƒå­—ç¬¦ä»£è¡¨ä¸€ä¸ªå­—ç¬¦(å­—ç¬¦é›†åˆ)</h2><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·æ‹¬èµ·è‹¥å¹²å­—ç¬¦è¡¨ç¤ºä¸€ä¸ªå…ƒå­—ç¬¦ï¼Œè¯¥å­—ç¬¦å¯ä»¥è¡¨ç¤ºå…ƒå­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚: reg = â€œ[abc]4â€, è¿™æ ·a4, b4, c4éƒ½æ˜¯å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚æ–¹æ‹¬å·è¿˜å¯ä»¥ä¸ºå…¶ä»–æ ¼å¼ã€‚å¦‚: </p><ul><li>[^456]é™¤äº†456ä¹‹å¤–çš„ä»»ä½•å­—ç¬¦</li><li>[a-r]ä»£è¡¨a - rä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦</li><li>[a-zA-Z]: ä»£è¡¨ä»»ä½•ä¸€ä¸ªè‹±æ–‡å­—æ¯</li><li>[a-e[g-z]]: ä»£è¡¨a - e <strong>å¹¶</strong> g - z é—´çš„å­—æ¯</li><li>[a-o&amp;&amp;[def]]: ä»£è¡¨å­—æ¯defï¼Œ å¹¶è¿ç®—</li><li>[a-d&amp;&amp;[^bc]]: ä»£è¡¨a, d(å·®è¿ç®—)</li></ul><hr><h2 id="å®é™…ä¾‹å­"><a href="#å®é™…ä¾‹å­" class="headerlink" title="å®é™…ä¾‹å­"></a>å®é™…ä¾‹å­</h2><h4 id="ä¸€-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯é‚®ç®±ï¼š"><a href="#ä¸€-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯é‚®ç®±ï¼š" class="headerlink" title="ä¸€. åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯é‚®ç®±ï¼š"></a>ä¸€. åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯é‚®ç®±ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªé‚®ç®±åœ°å€  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\w+@\\w+(\\.\\w&#123;2,3&#125;)*\\.\\w&#123;2,3&#125;&quot;</span>;  </span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;511017802@qq.com&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);  </span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine(); <span class="comment">// s = input;  </span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;å®Œå…¨åŒ¹é…!&quot;</span>);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸åŒ¹é…!&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        in.close();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒ-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”µè¯å·ç "><a href="#äºŒ-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”µè¯å·ç " class="headerlink" title="äºŒ. åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”µè¯å·ç "></a>äºŒ. åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç”µè¯å·ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªé‚®ç®±åœ°å€  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;^(\\+?86)?1[3-9]\\d&#123;9&#125;$&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">int</span> n;  </span><br><span class="line">        n = in.nextInt();  </span><br><span class="line">        in.nextLine();  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span> (n-- != <span class="number">0</span>) &#123;  </span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> in.nextLine();  </span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;æ˜¯ä¸­å›½å¤§é™†ç”µè¯å·ç &quot;</span>);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                System.out.println(<span class="string">&quot;ä¹±æ&quot;</span>);  </span><br><span class="line">            &#125;      </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸‰ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç½‘å€"><a href="#ä¸‰ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç½‘å€" class="headerlink" title="ä¸‰ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç½‘å€:"></a>ä¸‰ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç½‘å€:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªé‚®ç®±åœ°å€  </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;^(https|http)*w&#123;3&#125;\\.\\w+\\.\\w&#123;2,3&#125;&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;www.dreamstartooo.cn&quot;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (s.matches(regex)) &#123;  </span><br><span class="line">            System.out.println(s + <span class="string">&quot;æ˜¯ä¸€ä¸ªå¥½ç½‘ç«™&quot;</span>);  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;ä¹±æ&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;&#125;  </span><br><span class="line"><span class="comment">//è¾“å‡º www.dreamstartooo.cn æ˜¯ä¸€ä¸ªå¥½ç½‘ç«™!</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitç®€å•ä½¿ç”¨</title>
      <link href="/2025/03/01/git%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/03/01/git%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li><h3 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><ul><li>ç›´æ¥ <code>git init</code>å°†å¯¹åº”ç›®å½•ä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹å˜æˆgitä»“åº“</li><li>ä½¿ç”¨<code>git clone</code>ä»githubä¸Šå…‹éš†ä¸€ä¸ªå·²ç»æœ‰çš„é¡¹ç›®åˆ°æŒ‡å®šæ–‡ä»¶å¤¹<blockquote><p>æ£€æŸ¥.gitæ–‡ä»¶åˆ›å»ºæˆåŠŸï¼Œä¸èƒ½ç›´æ¥lsï¼Œå› ä¸ºlsä¸ä¼šæ˜¾ç¤ºã€‹.git å¾—ä½¿ç”¨ls -aæ˜¾ç¤º</p></blockquote></li></ul></li><li><h3 id="gitä»“åº“åŒ…æ‹¬ä¸¤ç§"><a href="#gitä»“åº“åŒ…æ‹¬ä¸¤ç§" class="headerlink" title="gitä»“åº“åŒ…æ‹¬ä¸¤ç§:"></a>gitä»“åº“åŒ…æ‹¬ä¸¤ç§:</h3><ul><li>æœ¬åœ°ä»“åº“</li><li>è¿œç¨‹ä»“åº“</li></ul></li><li><p>commit : æäº¤ï¼Œå°†æœ¬åœ°æ–‡ä»¶å’Œç‰ˆæœ¬ä¿¡æ¯ä¿å­˜åˆ°æœ¬åœ°ä»“åº“</p></li><li>push: æ¨é€ï¼Œå°†æœ¬åœ°ä»“åº“å’Œç‰ˆæœ¬ä¿¡æ¯æäº¤åˆ°è¿œç¨‹ä»“åº“</li><li>pull : æ‹‰å–ï¼Œå°†è¿œç¨‹ä»“åº“æ–‡ä»¶å’Œç‰ˆæœ¬ä¿¡æ¯ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶</li></ul><hr><ul><li>git GUI : å›¾å½¢ç•Œé¢</li></ul><hr><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><blockquote><p>ä½¿ç”¨git</p></blockquote><h4 id="1-å…¨å±€è®¾ç½®"><a href="#1-å…¨å±€è®¾ç½®" class="headerlink" title="1. å…¨å±€è®¾ç½®"></a>1. å…¨å±€è®¾ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name ä½ çš„åå­—</span><br><span class="line">git confih --global user.email ä½ çš„é‚®ç®±</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹é…ç½®ä¿¡æ¯:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure></p><ul><li>ä¸Šé¢è®¾ç½®çš„æ˜¯gitçš„åˆå§‹åŒ–ä»“åº“ï¼Œå’Œgithubå’Œgiteeç­‰çš„è´¦å·ä¸ä¸€æ ·</li></ul><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><ul><li>ç‰ˆæœ¬åº“ï¼šå‰é¢çœ‹åˆ°çš„.gitéšè—æ–‡ä»¶å¤¹å°±æ˜¯ç‰ˆæœ¬åº“ï¼Œç‰ˆæœ¬åº“ä¸­å‚¨å­˜äº†é…ç½®ä¿¡æ¯ï¼Œæ—¥å¿—æ–‡ä»¶ï¼Œç‰ˆæœ¬ä¿¡æ¯ç­‰</li><li>å·¥ä½œåŒºï¼š åŒ…å«.gitæ–‡ä»¶å¤¹ç›®å½•çš„å·¥ä½œåŒºï¼Œä¹Ÿç§°ä¸ºå·¥ä½œç›®å½•ï¼Œä¸»è¦ç”¨äºå­˜æ”¾ä»£ç </li><li>æš‚å­˜åŒºï¼š .gitæ–‡ä»¶å¤¹æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªindexæ–‡ä»¶å°±æ˜¯æš‚å­˜åŒºï¼Œä¹Ÿå¯ä»¥å«åšstageï¼Œæ˜¯ä¸€ä¸ªä¸´æ—¶ä¿å­˜æ–‡ä»¶çš„åœ°æ–¹</li></ul><p>å·¥ä½œåŒº â€”â€”&gt; (git add) æš‚å­˜åŒº â€”â€”-&gt;(git commit)ç‰ˆæœ¬åº“</p><h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add æ–‡ä»¶ //æ”¯æŒå¤šä¸ªæ–‡ä»¶åŒæ—¶åŠ å…¥</span><br></pre></td></tr></table></figure></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &#x27;è¾“å…¥æç¤ºè¯­&#x27; æ–‡ä»¶åå­—</span><br></pre></td></tr></table></figure><h3 id="å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€"><a href="#å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€" class="headerlink" title="å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€"></a>å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€</h3><blockquote><p>gitæ–‡ä»¶å·¥ä½œåŒºåˆ†ä¸¤ä¸ªçŠ¶æ€</p></blockquote><ul><li>untracked æœªè·Ÿè¸ª(æœªè¢«çº³å…¥ç‰ˆæœ¬åº“)</li><li>tracked     å·²è¢«è·Ÿè¸ª(çº³å…¥ç‰ˆæœ¬æ§åˆ¶)<br>  1)Unmodified æœªè¢«ä¿®æ”¹çŠ¶æ€<br>  2ï¼‰Modified   å·²è¢«ä¿®æ”¹çŠ¶æ€<br>  3ï¼‰Staged      å·²æš‚å­˜çŠ¶æ€<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status // æŸ¥çœ‹å½“å‰å·¥ä½œåŒºçš„çŠ¶æ€</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li>git reset<br>1.æŠŠæš‚å­˜åŒºçš„ä¸œè¥¿æ”¾å›å·¥ä½œåŒº<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset + æ–‡ä»¶//å–æ¶ˆå¯¹æ–‡ä»¶çš„è·Ÿè¸ªï¼ˆä»æš‚å­˜åŒºå–æ¶ˆæš‚å­˜ï¼Œè¿”å›å·¥ä½œåŒºï¼‰</span><br></pre></td></tr></table></figure>2.å›é€€ç‰ˆæœ¬(é€šè¿‡git log æŸ¥çœ‹ç‰ˆæœ¬å·)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard ç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure></li></ul><ul><li>git commitå°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°ç‰ˆæœ¬åº“<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &#x27;ä½ è¿™ä¸€æ¬¡æäº¤çš„ä¿®æ”¹å†…å®¹&#x27; ä½ è¦æäº¤æˆ–è€…ä¿®æ”¹äº†çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure></li></ul><h3 id="è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="è¿œç¨‹ä»“åº“æ“ä½œ"></a>è¿œç¨‹ä»“åº“æ“ä½œ</h3><p><code>git remote//æŸ¥çœ‹è¿œç¨‹ä»“åº“</code><br><code>git remote -v//æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</code></p><ul><li><p>æ·»åŠ è¿œç¨‹ä»“åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add &lt;short name&gt; &lt;url&gt; //short_nameä¸€èˆ¬æ˜¯origin</span><br></pre></td></tr></table></figure></li><li><p>æ¨é€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote_name] [branch_name] // ä¸€èˆ¬remoteç”¨originä»£æ›¿</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ†æ”¯æ“ä½œ"><a href="#åˆ†æ”¯æ“ä½œ" class="headerlink" title="åˆ†æ”¯æ“ä½œ"></a>åˆ†æ”¯æ“ä½œ</h3><ul><li>git branch æŸ¥çœ‹åˆ†æ”¯</li><li>git branch [ name ] åˆ›å»ºåˆ†æ”¯</li><li>git checkout [name] åˆ‡æ¢åˆ†æ”¯</li><li>git push [short_nameã€‘[name]  æ¨é€åˆ°è¿œç¨‹ä»“åº“</li><li>git merge [name] åˆå¹¶åˆ†æ”¯(æŠŠæŒ‡å®šä»£ç åˆå¹¶åˆ°å½“å‰åˆ†æ”¯)</li><li>git branch -d [name] åˆ é™¤åˆ†æ”¯</li></ul><h4 id="åˆ†æ”¯æŸ¥çœ‹ï¼š"><a href="#åˆ†æ”¯æŸ¥çœ‹ï¼š" class="headerlink" title="åˆ†æ”¯æŸ¥çœ‹ï¼š"></a>åˆ†æ”¯æŸ¥çœ‹ï¼š</h4><ul><li>git branch åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</li><li>git branch -r åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</li><li>git branch -a åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</li></ul><hr><blockquote><p>æ ‡ç­¾</p></blockquote><ul><li>git tag åˆ—å‡ºå·²æœ‰çš„æ ‡ç­¾</li><li>git tag [name] åˆ›å»ºæ ‡ç­¾</li><li>git push [short_name] ã€name] å°†æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“</li><li>git checkout -b [branch] ã€name] æ£€å‡ºæ ‡ç­¾</li></ul><h3 id="æŸ¥çœ‹æœ€åä¸€æ¬¡ä½¿ç”¨æŸä¸ªæ–‡ä»¶çš„æŸäºº"><a href="#æŸ¥çœ‹æœ€åä¸€æ¬¡ä½¿ç”¨æŸä¸ªæ–‡ä»¶çš„æŸäºº" class="headerlink" title="æŸ¥çœ‹æœ€åä¸€æ¬¡ä½¿ç”¨æŸä¸ªæ–‡ä»¶çš„æŸäºº"></a>æŸ¥çœ‹æœ€åä¸€æ¬¡ä½¿ç”¨æŸä¸ªæ–‡ä»¶çš„æŸäºº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -x æ–‡ä»¶å</span><br></pre></td></tr></table></figure><ul><li>-xæ˜¯ç¬¬å‡ æ¬¡</li></ul><h3 id="æŸ¥çœ‹ä¿®æ”¹æ‘©å°”ä¸ªæ–‡ä»¶ä¸­çš„collectionsæ—¶çš„æäº¤ä¿¡æ¯"><a href="#æŸ¥çœ‹ä¿®æ”¹æ‘©å°”ä¸ªæ–‡ä»¶ä¸­çš„collectionsæ—¶çš„æäº¤ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ä¿®æ”¹æ‘©å°”ä¸ªæ–‡ä»¶ä¸­çš„collectionsæ—¶çš„æäº¤ä¿¡æ¯"></a>æŸ¥çœ‹ä¿®æ”¹æ‘©å°”ä¸ªæ–‡ä»¶ä¸­çš„collectionsæ—¶çš„æäº¤ä¿¡æ¯</h3><p>git blame , git show<br>æˆ–è€…ä½¿ç”¨git log</p><ul><li><code>git config</code>: Git æ˜¯ä¸€ä¸ª <a href="https://git-scm.com/docs/git-config">é«˜åº¦å¯å®šåˆ¶çš„</a> å·¥å…·</li><li><code>git clone --depth=1</code>: æµ…å…‹éš†ï¼ˆshallow cloneï¼‰ï¼Œä¸åŒ…æ‹¬å®Œæ•´çš„ç‰ˆæœ¬å†å²ä¿¡æ¯</li><li><code>git add -p</code>: äº¤äº’å¼æš‚å­˜</li><li><code>git rebase -i</code>: äº¤äº’å¼å˜åŸº</li><li><code>git blame</code>: æŸ¥çœ‹æœ€åä¿®æ”¹æŸè¡Œçš„äºº</li><li><code>git stash</code>: æš‚æ—¶ç§»é™¤å·¥ä½œç›®å½•ä¸‹çš„ä¿®æ”¹å†…å®¹</li><li><code>git bisect</code>: é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æœç´¢å†å²è®°å½•</li><li><code>.gitignore</code>: <a href="https://git-scm.com/docs/gitignore">æŒ‡å®š</a> æ•…æ„ä¸è¿½è¸ªçš„æ–‡ä»¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML</title>
      <link href="/2025/03/01/HTML/"/>
      <url>/2025/03/01/HTML/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>html æ˜¯ä¸€é—¨åˆ¶ä½œç½‘é¡µçš„è¯­è¨€ã€‚</p><h2 id="1-htmlåŸºæœ¬ç»“æ„-éª¨æ¶æ ‡ç­¾"><a href="#1-htmlåŸºæœ¬ç»“æ„-éª¨æ¶æ ‡ç­¾" class="headerlink" title="1.htmlåŸºæœ¬ç»“æ„(éª¨æ¶æ ‡ç­¾)"></a>1.htmlåŸºæœ¬ç»“æ„(éª¨æ¶æ ‡ç­¾)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>//å£°æ˜htmlç±»å‹ï¼ˆhtml5)</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>//è¯­è¨€æ˜¯ä»€ä¹ˆ</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">title</span>&gt;</span>yrb.ä¸ªäººç½‘é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">Â  Â  æˆ‘åªèƒ½è¯´æ•™æ•™æˆ‘</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ ‡ç­¾éƒ½æ˜¯æˆå¯¹å­˜åœ¨ï¼Œç§°ä¸ºåŒæ ‡ç­¾<br>ä½†æ˜¯æœ‰çš„å•æ ‡ç­¾ä¸ç”¨å¦‚&lt; br / &gt;</p></blockquote><ul><li><h4 id="htmlæ ‡ç­¾"><a href="#htmlæ ‡ç­¾" class="headerlink" title="htmlæ ‡ç­¾"></a>htmlæ ‡ç­¾</h4> headæ ‡ç­¾ä»£è¡¨é¡µé¢çš„å¤´ï¼Œï¼Œå®šä¹‰ä¸€äº›ç‰¹æ®Šçš„å†…å®¹ï¼Œè¿™äº›å†…å®¹å¾€å¾€éƒ½æ˜¯â€œä¸å¯è§çš„å†…å®¹â€ï¼ˆæµè§ˆå™¨é¡µé¢ä¸å¯è§ï¼‰</li></ul><div class="table-container"><table><thead><tr><th>&lt; head &gt;</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&lt; title &gt;</td><td>å®šä¹‰ç½‘é¡µçš„æ ‡é¢˜</td></tr><tr><td>&lt; meta &gt;</td><td>å®šä¹‰ç½‘é¡µçš„åŸºæœ¬ä¿¡æ¯</td></tr><tr><td>&lt; style &gt;</td><td>å®šä¹‰CSSæ ·å¼</td></tr><tr><td>&lt; link &gt;</td><td>é“¾æ¥å¤–éƒ¨çš„CSSæ–‡ä»¶æˆ–è€…è„šæœ¬æ–‡ä»¶</td></tr><tr><td>&lt; scripe &gt;</td><td>å®šä¹‰è„šæœ¬è¯­è¨€</td></tr><tr><td>&lt; base &gt;</td><td>å®šä¹‰æ‰€æœ‰é¡µé¢çš„åŸºç¡€å®šä½</td></tr></tbody></table></div><ul><li><h4 id="bodyæ ‡ç­¾"><a href="#bodyæ ‡ç­¾" class="headerlink" title="bodyæ ‡ç­¾"></a>bodyæ ‡ç­¾</h4><p>  bodyæ ‡ç­¾ä»£è¡¨é¡µé¢çš„èº«ä½“ï¼Œå®šä¹‰ç½‘é¡µçš„å†…å®¹ï¼Œè¿™äº›å†…å®¹å¾€å¾€éƒ½æ˜¯â€œå¯è§çš„â€ï¼Œåœ¨æµè§ˆå™¨é‡Œé¢</p></li><li><h3 id="æ ‡ç­¾å…³ç³»ï¼š"><a href="#æ ‡ç­¾å…³ç³»ï¼š" class="headerlink" title="æ ‡ç­¾å…³ç³»ï¼š"></a>æ ‡ç­¾å…³ç³»ï¼š</h3><ul><li>åŒ…å«å…³ç³»ï¼š</li><li>å¹¶åˆ—å…³ç³»ï¼š</li></ul></li></ul><h2 id="2-æ®µè½ä¸æ–‡å­—"><a href="#2-æ®µè½ä¸æ–‡å­—" class="headerlink" title="2.æ®µè½ä¸æ–‡å­—"></a>2.æ®µè½ä¸æ–‡å­—</h2><ul><li><h3 id="æ®µè½æ ‡ç­¾"><a href="#æ®µè½æ ‡ç­¾" class="headerlink" title="æ®µè½æ ‡ç­¾"></a>æ®µè½æ ‡ç­¾</h3>  æ®µè½ä¸æ–‡å­—æ ‡ç­¾ï¼š</li></ul><div class="table-container"><table><thead><tr><th>æ ‡ç­¾</th><th>è¯­ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&lt; h1&gt;~&lt; h6&gt;</td><td>header</td><td>æ ‡é¢˜</td></tr><tr><td>&lt; p&gt;</td><td>paragraph</td><td>æ®µè½</td></tr><tr><td>&lt; br&gt;</td><td>break</td><td>æ¢è¡Œ<br></td></tr><tr><td>&lt; hr&gt;</td><td>horizontal rule</td><td>æ°´å¹³çº¿</td></tr><tr><td>&lt; div&gt;</td><td>division</td><td>åˆ†å‰²å…ƒç´ å—ï¼ˆå—å…ƒç´ ï¼‰</td></tr><tr><td>&lt; span&gt;</td><td>span</td><td>åŒºåŸŸï¼ˆè¡Œå†…å…ƒç´ ï¼‰</td></tr></tbody></table></div><hr><blockquote><p>&lt; html  lang=â€  â€œ&gt;å¼•å·é‡Œé¢æŒ‡åç½‘é¡µçš„è¯­è¨€ï¼š(å®šä¹‰ä¸ºä¸­æ–‡è‹±æ–‡éƒ½å¯ä»¥äº’é€š)</p><ul><li>enä¸ºè‹±è¯­<ul><li>zh-CNä¸ºä¸­æ–‡</li></ul></li><li>frä¸ºæ³•è¯­</li></ul><p>&lt; meta charset =â€UTF-8â€&gt;å­—ç¬¦é›†<br>ä¸å†™ç¼–ç å½¢å¼ä¼šå‡ºç°ä¹±ç </p><ul><li>å¸¸ç”¨çš„GB2312ï¼ŒBIG5,GBK,UTF-8ï¼Œå…¶ä¸­UTF-8ç§°ä¸ºä¸‡å›½ç </li></ul></blockquote><hr><h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><blockquote><p>h1 - h6</p></blockquote><p>htmlæä¾›äº†å„ç­‰çº§çš„æ ‡é¢˜æ ‡ç­¾ï¼Œ</p><ul><li>åŠ äº†æ ‡é¢˜æ ‡ç­¾çš„æ–‡å­—ä¼šè¢«åŠ ç²—ï¼Œå­—å·ä¹Ÿä¼šå˜å¾—æ›´å¤§</li><li>ä¸€ä¸ªæ ‡é¢˜ä¼šç‹¬å ä¸€è¡Œ</li></ul><blockquote><p>æ®µè½æ ‡ç­¾å’Œæ¢è¡Œæ ‡ç­¾<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½æ ‡ç­¾<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><br>å¯ä»¥æŠŠæ–‡å­—åˆ†ä¸ºä¸åŒçš„æ®µè½</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span>æ˜¯ç©ºè¡Œï¼Œ<span class="tag">&lt;<span class="name">br</span> /&gt;</span>å¼ºåˆ¶æ¢è¡Œ</span><br></pre></td></tr></table></figure><p>bræ˜¯ä¸€ä¸ªå•æ ‡ç­¾</p><hr><h3 id="æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾"><a href="#æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾" class="headerlink" title="æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾"></a>æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾</h3><h3 id="æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾-1"><a href="#æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾-1" class="headerlink" title="æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾"></a>æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾</h3><div class="table-container"><table><thead><tr><th>æ ‡ç­¾</th><th>è¯­ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&lt; strong&gt;&lt; /strong&gt;æˆ–è€…&lt; b&gt;</td><td>strongï¼ˆåŠ å¼ºï¼‰</td><td>åŠ ç²—</td></tr><tr><td>&lt; em&gt;</td><td>emphaseizedï¼ˆå¼ºè°ƒï¼‰</td><td>æ–œä½“</td></tr><tr><td>&lt; cite&gt;</td><td>citeï¼ˆå¼•ç”¨ï¼‰</td><td>æ–œä½“</td></tr><tr><td>&lt; sup&gt;</td><td>superscripted</td><td>ä¸Šæ ‡</td></tr><tr><td>&lt; sub&gt;</td><td>subscripted</td><td>ä¸‹æ ‡</td></tr><tr><td>&lt; del&gt;</td><td></td><td>åˆ é™¤çº¿</td></tr><tr><td>&lt; ins&gt;</td><td></td><td>ä¸‹åˆ’çº¿</td></tr></tbody></table></div><hr><h3 id="lt-div-gt-å’Œ-lt-span-gt-æ ‡ç­¾"><a href="#lt-div-gt-å’Œ-lt-span-gt-æ ‡ç­¾" class="headerlink" title="&lt; div&gt;å’Œ&lt; span&gt;æ ‡ç­¾"></a>&lt; div&gt;å’Œ&lt; span&gt;æ ‡ç­¾</h3><blockquote><p>æ²¡æœ‰è¯­ä¹‰çš„ç”¨æ¥è£…å†…å®¹ï¼Œå½“æˆä¸€ä¸ªç›’å­</p></blockquote><ul><li>&lt; div&gt;å ç”¨ä¸€å“ˆ</li><li>&lt; span&gt;è·¨è·æ˜¾ç¤ºï¼Œä¸€è¡Œæœ‰å¤šä¸ª</li></ul><hr><h3 id="å›¾åƒæ ‡ç­¾å’Œè·¯å¾„"><a href="#å›¾åƒæ ‡ç­¾å’Œè·¯å¾„" class="headerlink" title="å›¾åƒæ ‡ç­¾å’Œè·¯å¾„"></a>å›¾åƒæ ‡ç­¾å’Œè·¯å¾„</h3><h5 id="1-å›¾åƒæ ‡ç­¾"><a href="#1-å›¾åƒæ ‡ç­¾" class="headerlink" title="1.å›¾åƒæ ‡ç­¾"></a>1.å›¾åƒæ ‡ç­¾</h5><p>åœ¨htmlä¸­ï¼Œ&lt; img&gt;ç”¨æ¥å®šä¹‰ä¸€ä¸ªå›¾åƒï¼ˆimaging)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;å›¾åƒURL&quot;/&gt;</span><br></pre></td></tr></table></figure></p><ul><li>srcæ˜¯å¿…é¡»å±æ€§ï¼Œå®ƒç”¨äºæŒ‡å®šå›¾åƒæ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶åï¼ˆå±æ€§å°±æ˜¯è¿™ä¸ªå›¾åƒæ ‡ç­¾çš„ç‰¹æ€§)</li><li>ä½¿ç”¨æ—¶æŠŠå›¾ç‰‡å‘åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢</li></ul><div class="table-container"><table><thead><tr><th>src</th><th>å›¾åƒè·¯å¾„</th></tr></thead><tbody><tr><td>alt</td><td>æ–‡æœ¬æç¤ºï¼ˆåœ¨å›¾åƒæ— æ³•æ˜¾ç¤ºæ—¶å€™ä¼šæç¤ºï¼‰</td></tr><tr><td>title</td><td>å›¾åƒæç¤º</td></tr><tr><td>width</td><td>å®½åº¦è®¾ç½®</td></tr><tr><td>height</td><td>é«˜åº¦è®¾ç½®</td></tr><tr><td>border</td><td>å›¾åƒçš„è¾¹æ¡†</td></tr></tbody></table></div><ul><li>å›¾åƒå¯ä»¥æœ‰å¤šä¸ªå±æ€§ï¼Œä½†æ˜¯éƒ½æ”¾åœ¨imgåé¢ï¼Œä¸”å„ä¸ªå±æ€§æ²¡æœ‰å…ˆåä¹‹åˆ†</li><li>éœ€è¦ç”¨ç©ºæ ¼éš”å¼€</li><li>é‡‡å–å±æ€§é”®å¯¹</li></ul><hr><h2 id="è¶…é“¾æ¥æ ‡ç­¾ï¼ˆé‡ç‚¹ï¼‰"><a href="#è¶…é“¾æ¥æ ‡ç­¾ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="è¶…é“¾æ¥æ ‡ç­¾ï¼ˆé‡ç‚¹ï¼‰"></a>è¶…é“¾æ¥æ ‡ç­¾ï¼ˆé‡ç‚¹ï¼‰</h2><blockquote><p>åœ¨htmlä¸­ï¼Œ&lt; a&gt;æ ‡ç­¾ç”¨äºå®šä¹‰è¶…é“¾æ¥ï¼Œä½œç”¨ä»ä¸€ä¸ªé¡µé¢é“¾æ¥åˆ°å¦ä¸€ä¸ªé¡µé¢</p></blockquote><h5 id="è¶…é“¾æ¥çš„è¯­æ³•æ ¼å¼"><a href="#è¶…é“¾æ¥çš„è¯­æ³•æ ¼å¼" class="headerlink" title="è¶…é“¾æ¥çš„è¯­æ³•æ ¼å¼"></a>è¶…é“¾æ¥çš„è¯­æ³•æ ¼å¼</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;è·³è½¬ç›®æ ‡&quot;</span> <span class="attr">target</span>=<span class="string">&quot;çª—å£å¼¹å‡ºæ–¹å¼&quot;</span>&gt;</span>æ–‡æœ¬æˆ–è€…å›¾åƒ<span class="tag">&lt;<span class="name">a</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>é“¾æ¥åˆ†ç±»ï¼š</p><ul><li>å¤–éƒ¨é“¾æ¥ï¼šå¿…é¡»å†™ä¸Šç»å¯¹è·¯å¾„,åŠ ä¸Šhttps://</li><li>å†…éƒ¨é“¾æ¥ï¼ˆåŒä¸€ç›®å½•ã€çº§åˆ«ã€‘ä¸‹çš„é“¾æ¥ï¼‰ï¼šç›´æ¥å†™é¡µé¢çš„åç§°å¦‚â€index.htmlâ€</li><li>ç©ºé“¾æ¥ï¼š#</li><li>ä¸‹è½½é“¾æ¥ï¼šåœ°å€é“¾æ¥çš„æ˜¯ æ–‡ä»¶.exe æˆ–è€…æ˜¯ .zip ç­‰å‹ç¼©åŒ…å½¢å¼,ä¼šç›´æ¥ä¸‹è½½è¿™ä¸ªexeæˆ–è€…zipï¼ŒéŸ³é¢‘ç­‰ã€‚</li><li>ç½‘é¡µé“¾æ¥å…ƒç´ ï¼Œåœ¨ç½‘é¡µé‡Œçš„å„ç§ç½‘é¡µå…ƒç´ ï¼Œå¦‚æ–‡æœ¬ï¼Œå›¾åƒï¼Œè¡¨æ ¼ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘éƒ½å¯ä»¥æ·»åŠ è¶…é“¾æ¥ã€‚</li><li>é”šç‚¹é“¾æ¥ï¼šç‚¹å‡»è¯¥å¤„å¯ä»¥å¿«é€Ÿå®šä½åˆ°ç½‘é¡µçš„æŸä¸€ä¸ªä½ç½®ï¼ˆä¹Ÿå¯ä»¥å®ç°è·³è½¬åˆ°é¡¶éƒ¨ç­‰ç­‰ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">target:</span><br><span class="line">  _selfåœ¨å½“å‰é¡µé¢æ‰“å¼€(é»˜è®¤çš„ï¼‰ï¼Œ_blankåœ¨æ–°çš„çª—å£æ‰“å¼€</span><br></pre></td></tr></table></figure><ul><li>é”šç‚¹é“¾æ¥çš„å…·ä½“æ“ä½œï¼š<h2 id="å…ˆæŠŠå­—ä¸²é‡Œé¢çš„å†™å…¥â€-ä¸€æ®µidâ€-ä¹‹åæ‰¾åˆ°ç›®æ ‡çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¹‹ååŠ ä¸Šâ€id-â€è¿™æ®µidçš„åå­—â€â€å°±å¯ä»¥å®ç°é”šç‚¹è·³è½¬ã€‚"><a href="#å…ˆæŠŠå­—ä¸²é‡Œé¢çš„å†™å…¥â€-ä¸€æ®µidâ€-ä¹‹åæ‰¾åˆ°ç›®æ ‡çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¹‹ååŠ ä¸Šâ€id-â€è¿™æ®µidçš„åå­—â€â€å°±å¯ä»¥å®ç°é”šç‚¹è·³è½¬ã€‚" class="headerlink" title="å…ˆæŠŠå­—ä¸²é‡Œé¢çš„å†™å…¥â€#ä¸€æ®µidâ€,ä¹‹åæ‰¾åˆ°ç›®æ ‡çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¹‹ååŠ ä¸Šâ€id=â€è¿™æ®µidçš„åå­—â€â€å°±å¯ä»¥å®ç°é”šç‚¹è·³è½¬ã€‚"></a>å…ˆæŠŠå­—ä¸²é‡Œé¢çš„å†™å…¥â€#ä¸€æ®µidâ€,ä¹‹åæ‰¾åˆ°ç›®æ ‡çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¹‹ååŠ ä¸Šâ€id=â€è¿™æ®µidçš„åå­—â€â€å°±å¯ä»¥å®ç°é”šç‚¹è·³è½¬ã€‚</h2><h3 id="æ³¨é‡Šæ ‡ç­¾"><a href="#æ³¨é‡Šæ ‡ç­¾" class="headerlink" title="æ³¨é‡Šæ ‡ç­¾"></a>æ³¨é‡Šæ ‡ç­¾</h3><blockquote><p> htmlä¸­æ³¨é‡Šå½¢å¼å¦‚ä¸‹:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨é‡Š --&gt;</span></span><br></pre></td></tr></table></figure></blockquote></li><li>å¯ä»¥ä½¿ç”¨â€Ctrl + /æˆ–?â€ç›´æ¥å¿«æ·é”®æ‰“å‡ºæ¥</li><li>æ³¨é‡Šä¸ä¼šæ˜¾ç¤ºï¼Œåªæ˜¯ç”¨æ¥</li></ul><hr><h4 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h4><p>  <img src="file:///d%3A/cworkspace/web/%E7%AC%94%E8%AE%B01.png" alt="D:\cworkspace\web\ç¬”è®°1.png"></p><h2 id="é‡ç‚¹è®°ä½ç©ºæ ¼å’Œå¤§äºå°äºå·ã€‚"><a href="#é‡ç‚¹è®°ä½ç©ºæ ¼å’Œå¤§äºå°äºå·ã€‚" class="headerlink" title="   - é‡ç‚¹è®°ä½ç©ºæ ¼å’Œå¤§äºå°äºå·ã€‚"></a>   - é‡ç‚¹è®°ä½ç©ºæ ¼å’Œå¤§äºå°äºå·ã€‚</h2><h2 id="1-è¡¨æ ¼æ ‡ç­¾"><a href="#1-è¡¨æ ¼æ ‡ç­¾" class="headerlink" title="1.è¡¨æ ¼æ ‡ç­¾"></a>1.è¡¨æ ¼æ ‡ç­¾</h2><h4 id="1-1è¡¨æ ¼çš„ä¸»è¦ä½œç”¨"><a href="#1-1è¡¨æ ¼çš„ä¸»è¦ä½œç”¨" class="headerlink" title="1.1è¡¨æ ¼çš„ä¸»è¦ä½œç”¨"></a>1.1è¡¨æ ¼çš„ä¸»è¦ä½œç”¨</h4><blockquote><p>è¡¨æ ¼ä¸»è¦æ˜¯ç”¨æ¥æ˜¾ç¤ºï¼Œå±•ç¤ºæ•°æ®ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©æ•°æ®æ˜¾ç¤ºçš„éå¸¸è§„å¾‹ï¼Œå¯è¯»æ€§éå¸¸å¥½ï¼Œè¡¨æ ¼ä¸æ˜¯ç”¨æ¥å¸ƒå±€é¡µé¢çš„ï¼Œè€Œæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®çš„ã€‚</p><h4 id="1-2è¡¨æ ¼çš„åŸºæœ¬è¯­æ³•"><a href="#1-2è¡¨æ ¼çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="1.2è¡¨æ ¼çš„åŸºæœ¬è¯­æ³•"></a>1.2è¡¨æ ¼çš„åŸºæœ¬è¯­æ³•</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span>//è¡¨æ ¼é‡Œçš„è¡Œ</span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>å•å…ƒæ ¼å†…çš„æ–‡å­—<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    Â·Â·Â·</span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>&lt; table&gt;æ˜¯ç”¨æ¥å®šä¹‰è¡¨æ ¼çš„æ ‡ç­¾</li><li>&lt; tr&gt;&lt; /tr&gt;ç”¨æ¥å®šä¹‰è¡Œï¼Œå¿…é¡»å®šä¹‰åœ¨tableå†…éƒ¨</li><li>&lt; td&gt;&lt; /td&gt;ç”¨æ¥å®šä¹‰å•å…ƒæ ¼ï¼Œå¿…é¡»å®šä¹‰åœ¨&lt; tr&gt;å†…</li><li>&lt; th&gt;&lt; /th&gt;è¡¨å¤´å•å…ƒæ ¼æ ‡ç­¾ï¼Œï¼ˆtable head)ï¼Œè¡¨å¤´å†…å®¹ä¼šè¢«åŠ ç²—ï¼ŒåŒæ—¶å±…ä¸­ã€‚</li></ul></blockquote><h4 id="1-2è¡¨æ ¼å±æ€§-åˆ°è¿™é‡Œå»ç»ƒä¹ ä¸€ä¸‹"><a href="#1-2è¡¨æ ¼å±æ€§-åˆ°è¿™é‡Œå»ç»ƒä¹ ä¸€ä¸‹" class="headerlink" title="1.2è¡¨æ ¼å±æ€§(åˆ°è¿™é‡Œå»ç»ƒä¹ ä¸€ä¸‹)"></a>1.2è¡¨æ ¼å±æ€§(åˆ°è¿™é‡Œå»ç»ƒä¹ ä¸€ä¸‹)</h4><blockquote><p>ä¸å¸¸ç”¨ï¼Œå› ä¸ºåé¢ä¼šä½¿ç”¨CSS</p></blockquote><ul><li>align ï¼ˆå±æ€§å€¼ï¼šleft ,right , center),è®¾ç½®è¡¨æ ¼çš„ä½ç½®</li><li>border (1 æˆ– â€œâ€ ),è§„å®šè¡¨æ ¼æ˜¯å¦å…·æœ‰è¾¹æ¡†ï¼Œé»˜è®¤ä¸ºâ€â€ï¼Œè¡¨ç¤ºæ²¡æœ‰è¾¹æ¡†</li><li>width ï¼ˆåƒç´ å€¼æˆ–ç™¾åˆ†æ¯”ï¼‰ï¼Œè§„å®šè¡¨æ ¼çš„å®½åº¦</li><li>height (åƒç´ å€¼æˆ–ç™¾åˆ†æ¯”) ï¼Œ è§„å®šè¡¨æ ¼çš„é•¿åº¦</li><li>cellpadding (åƒç´ å€¼)ï¼Œè§„å®šå•å…ƒè¾¹æ²¿ä¸å…¶å†…å®¹ä¹‹é—´çš„ç©ºç™½ï¼Œé»˜è®¤åƒç´ ä¸º1ã€‚</li><li>cellspacing ï¼ˆåƒç´ å€¼ï¼‰ï¼Œè§„å®šå•å…ƒæ ¼ä¹‹é—´çš„ç©ºç™½ï¼Œé»˜è®¤åƒç´ å€¼ä¸º2.</li></ul><h4 id="1-3è¡¨æ ¼ç»“æ„æ ‡ç­¾"><a href="#1-3è¡¨æ ¼ç»“æ„æ ‡ç­¾" class="headerlink" title="1.3è¡¨æ ¼ç»“æ„æ ‡ç­¾"></a>1.3è¡¨æ ¼ç»“æ„æ ‡ç­¾</h4><blockquote><p>ä½¿ç”¨åœºæ™¯ï¼šå› ä¸ºè¡¨æ ¼å¯èƒ½å¾ˆé•¿ï¼Œ</p></blockquote><hr><h4 id="éŸ³é¢‘æ–‡ä»¶"><a href="#éŸ³é¢‘æ–‡ä»¶" class="headerlink" title="éŸ³é¢‘æ–‡ä»¶"></a>éŸ³é¢‘æ–‡ä»¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//htmlé‡Œå¦‚æœå±æ€§åå­—å’Œå±æ€§å€¼å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥åªå†™å±æ€§åå­—ã€‚</span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">//ç­‰åŒäº<span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>controlsä¸ºæ˜¾ç¤ºæ§åˆ¶é¢æ¿</li><li>loopæ˜¯å¾ªç¯æ’­æ”¾</li><li>autoplayè‡ªåŠ¨æ’­æ”¾</li><li>æ”¯æŒmp3,WebM,Oggæ–‡ä»¶</li></ul><hr><h4 id="è§†é¢‘æ–‡ä»¶"><a href="#è§†é¢‘æ–‡ä»¶" class="headerlink" title="è§†é¢‘æ–‡ä»¶"></a>è§†é¢‘æ–‡ä»¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;  .mp4&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>loopå¾ªç¯æ’­æ”¾</li><li>muteé™éŸ³æ’­æ”¾</li><li>autoplayè‡ªåŠ¨æ’­æ”¾</li><li>æ”¯æŒmp4,WebM,Oggæ–‡ä»¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces-1007div2é¢˜è§£</title>
      <link href="/2025/03/01/Codeforces-1007div2%E9%A2%98%E8%A7%A3/"/>
      <url>/2025/03/01/Codeforces-1007div2%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="A-D1é¢˜è§£"><a href="#A-D1é¢˜è§£" class="headerlink" title="A - D1é¢˜è§£"></a>A - D1é¢˜è§£</h2><p>è¿ç»­æ‰åˆ†ing, ä»€ä¹ˆæ—¶å€™æ‰èƒ½å˜å¾—åˆå¿«åˆçŒ›å‘¢heheheã€‚ã€‚ã€‚</p><h2 id="A-The-Play-Never-Ends"><a href="#A-The-Play-Never-Ends" class="headerlink" title="A. The Play Never Ends"></a>A. The Play Never Ends</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 k;</span><br><span class="line">    cin &gt;&gt; k;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (k % <span class="number">3</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B-Perfecto"><a href="#B-Perfecto" class="headerlink" title="B. Perfecto"></a>B. Perfecto</h2><p>æ‰“è¡¨è§‚å¯Ÿ ä» 1 åˆ° 300 sumçš„å’Œæ˜¯å¹³æ–¹æ•°çš„æ•°å­—ï¼Œå‘ç°å’Œæ˜¯å¹³æ–¹æ•°çš„åªæœ‰  1 36 1225â€¦..ï¼Œ æƒ³è¦ä¸å‡ºç°å¹³æ–¹æ•°ï¼Œåªéœ€è¦åœ¨å‰ i ä¸ªï¼ˆå…¶ä¸­ i æ˜¯ä½¿å¾—sumæ˜¯å¹³æ–¹æ•°çš„æ•°å­—ï¼‰ä¸å…¨æ˜¯içš„æ’åˆ—ï¼Œä¹Ÿå°±æ˜¯æŠŠæ¯ä¸ªæ»¡è¶³å’Œæ˜¯å¹³æ–¹æ•°çš„æœ€åä¸€ä¸ªæ•°å­—å’Œä¸‹ä¸€ä¸ªæ•°å­—æ›¿æ¢ï¼Œå¦‚æœä¸è¶…å‡ºèŒƒå›´å°±å¯ä»¥ï¼Œå¦åˆ™-1</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        a[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        i64 g = <span class="built_in">sqrt</span>(sum);</span><br><span class="line">        <span class="keyword">if</span> (g * g == sum) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &gt; n) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sum -= a[i];</span><br><span class="line">            <span class="built_in">swap</span>(a[i], a[i + <span class="number">1</span>]);</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    i64 t;</span><br><span class="line">    cin &gt;&gt; t;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C-Trapmigiano-Reggiano"><a href="#C-Trapmigiano-Reggiano" class="headerlink" title="C. Trapmigiano Reggiano"></a>C. Trapmigiano Reggiano</h2><p> ä»¥enä¸ºæ ¹ï¼Œ å¯¹æ ‘è¿›è¡Œåˆ†å±‚ï¼Œæ¯æ¬¡å–æ·±åº¦è¾ƒå¤§çš„èŠ‚ç‚¹ï¼Œä¹‹åå–æ·±åº¦è¾ƒå°çš„èŠ‚ç‚¹ï¼Œèµ°æœ€æ·±çš„æƒ…å†µæ˜¯ä¸€æ¡é“¾ï¼Œè¿™æ—¶å€™ä¼šèµ° n / 2ä¸ªç‚¹ï¼Œä¹‹ån / 2ä¸ªæ“ä½œåˆä¼šå›åˆ°æ ¹ï¼Œå…¶ä»–æƒ…å†µä¼šåœ¨æŸæ¡æœ€é•¿é“¾çš„æŸä¸ªèŠ‚ç‚¹æ¥åè·³ï¼ˆå› ä¸ºæœ‰åˆ«çš„æ ‘é“¾ï¼‰ï¼Œå¦‚æœæœ€åå›åˆ°åŸç‚¹ç›´æ¥è¾“å‡ºï¼Œå¦åˆ™-1</p><blockquote><p>update: çœ‹äº†å¤§ä½¬ä»¬è¯´ç­”æ¡ˆä¼¼ä¹ä¸å¯èƒ½å‡ºç°-1ï¼Œ å¥½åƒå¯ä»¥ç›´æ¥ååºéå†ï¼Œç­”æ¡ˆæ€»ä¼šå­˜åœ¨</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, st, en;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; st &gt;&gt; en;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dis</span><span class="params">(n + <span class="number">1</span>, <span class="number">-1</span>)</span></span>;</span><br><span class="line">    dis[en] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v != fa) &#123;</span><br><span class="line">                dis[v] = dis[u] + <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">dfs</span>(dfs, en, <span class="number">-1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        ans[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(ans.<span class="built_in">begin</span>() + <span class="number">1</span>, ans.<span class="built_in">end</span>(), </span><br><span class="line">        [&amp;](<span class="type">int</span> a, <span class="type">int</span> b) &#123;</span><br><span class="line">            <span class="keyword">return</span> dis[a] &gt; dis[b];</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//cerr &lt;&lt; &quot;dis:&quot; &lt;&lt; dis[st] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (dis[st] == <span class="number">-1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == n];</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D1-Infinite-Sequence-Easy-Version"><a href="#D1-Infinite-Sequence-Easy-Version" class="headerlink" title="D1. Infinite Sequence (Easy Version)"></a>D1. Infinite Sequence (Easy Version)</h2><p> æ‰‹ç©æ ·ä¾‹ï¼Œ å‘ç° 7 = 8, 78 = 79â€¦â€¦, é‚£ä¹ˆæ¯å¯¹åœ¨ â€œ^â€ å†…ï¼ˆä¹Ÿå°±æ˜¯é™¤ä»¥äºŒä¸€æ ·ï¼‰çš„æ•°å­—æ€»æ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬ä½œä¸ºä¸‹ä¸€ä¸ªæ•°å­—çš„å¼‚æˆ–å’Œçš„æ—¶å€™æ€»æ˜¯ä¸åšè´¡çŒ®ï¼Œå¯ä»¥å¿½ç•¥ã€‚</p><p>æˆ‘ä»¬ä¸å¦¨è¡¥å…¨ç»™å®šçš„næ•°ç»„ï¼Œä½¿å¾—næ€»æ˜¯å¥‡æ•°ï¼ˆè¿™æ ·ä¸‹ä¸€ä½ç½®å¼€å§‹æ—¶å€™æ€»æ˜¯å‡ºç°ä¸¤ä¸¤ç›¸ç­‰æƒ…å†µï¼‰</p><p>ç»§ç»­è§‚å¯Ÿï¼Œå‘ç°</p><ul><li>å½“ x / 2æ˜¯å¥‡æ•°æ—¶å€™ï¼Œè¿™æ—¶é™¤äº†å‰nä¸ªç»™å®šçš„æ•°å­—ï¼Œå…¶ä»–æ€»æ˜¯ä¸¤ä¸¤æˆå¯¹å‡ºç°ï¼Œ æ­¤æ—¶ x = s[ n ] &amp; 1;</li><li>å½“ x / 2æ˜¯å¶æ•°çš„æ—¶å€™ï¼Œé™¤äº†x / 2,åœ¨n + 1åˆ°x / 2ä¹‹é—´çš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œä¸å‚ä¸è®¡ç®—ï¼Œæ•… x = s[ n ] &amp; (x / 2),</li></ul><p>è¿™æ ·é€’å½’ä¸‹å»å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸ºo(logn);</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n, l, r;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; l &gt;&gt; r;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">s</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        s[i] = s[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        n++;</span><br><span class="line">        a.<span class="built_in">push_back</span>(s[n / <span class="number">2</span>] &amp; <span class="number">1</span>);</span><br><span class="line">        s.<span class="built_in">push_back</span>(s[n - <span class="number">1</span>] + a[n]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> f = [&amp;](<span class="keyword">auto</span> self, i64 x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> a[x];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x / <span class="number">2</span> &lt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> (s[x / <span class="number">2</span>] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> g;</span><br><span class="line">        <span class="keyword">if</span> ((((x / <span class="number">2</span>) - n) &amp; <span class="number">1</span>)) &#123;</span><br><span class="line">            g = <span class="built_in">self</span>(self, x / <span class="number">2</span>) ^ (s[n] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            g = (s[n] &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> g;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if (l &lt;= n * 2) &#123;</span></span><br><span class="line">    <span class="comment">//     for (int i = n + 1; i &lt;= l; i++) &#123;</span></span><br><span class="line">    <span class="comment">//         a.push_back(s[i / 2] &amp; 1);</span></span><br><span class="line">    <span class="comment">//         s.push_back(a[i] + s[i - 1]);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; a[l] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="comment">//     return;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>(f, l) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforceé¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeTonRound4-div1+div2é¢˜è§£</title>
      <link href="/2025/02/27/CodeTonRound4-div1-div2%E9%A2%98%E8%A7%A3/"/>
      <url>/2025/02/27/CodeTonRound4-div1-div2%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é¢˜è§£-A-E"><a href="#é¢˜è§£-A-E" class="headerlink" title="é¢˜è§£ A - E"></a>é¢˜è§£ A - E</h2><hr><blockquote><p>Dream is so far ~</p></blockquote><h4 id="A-Beautiful-Sequence"><a href="#A-Beautiful-Sequence" class="headerlink" title="A. Beautiful Sequence"></a>A. Beautiful Sequence</h4><p>æ£€æŸ¥æ¯ä¸€ä½å¯¹åº”çš„æ•°å­—æ˜¯å¦å°äºç­‰äºä½ç½®ï¼Œå¦‚æœå¯ä»¥è¯´æ˜è¿™ä¸ªæ•°å­—å¯ä»¥ç§»åŠ¨åˆ°å¯¹åº”ä½ç½®ä¸Šï¼Œ éå†å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &lt;= i) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="B-Candies"><a href="#B-Candies" class="headerlink" title="B. Candies"></a>B. Candies</h4><p>è€ƒè™‘åˆ°ä»ä¸€å¼€å§‹å¾€åé¢å˜ï¼Œä¸”æ¯æ¬¡åªèƒ½å˜ä¸º $2 <em> n - 1$ æˆ– $2 </em> n + 1$ ï¼Œ æ˜¾ç„¶è¿™äº›æ•°éƒ½æ˜¯å¥‡æ•°ï¼Œ è€ƒè™‘ä»æœ«ä½å¾€å‰å¤„ç†ï¼Œ æ¯æ¬¡é™¤ä»¥äºŒå¦‚æœæ˜¯å¥‡æ•°è¯´æ˜è¿™ä¸€æ¬¡é€‰äº†2æ¥åˆ°è¿™ä¸€æ­¥ï¼Œå¦åˆ™å°†é™¤ä»¥äºŒç»“æœåŠ ä¸€ï¼ŒåŒæ—¶æ„å‘³ç€è¿™ä¸€æ­¥é€‰äº†1ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> now = n / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(now &amp; <span class="number">1</span>)) &#123;</span><br><span class="line">            now ++;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        n = now;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans.<span class="built_in">size</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = ans.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="C-Make-It-Permutation"><a href="#C-Make-It-Permutation" class="headerlink" title="C. Make It Permutation"></a>C. Make It Permutation</h4><p>é¦–å…ˆè€ƒè™‘æœ‰ä¸€ä¸ªä»¥ä¸Šæ•°å­—ï¼Œæ˜¾ç„¶éœ€è¦ä½¿ç”¨ç¬¬äºŒæ­¥æ“ä½œå»æ‰ï¼ˆå¦åˆ™å°†ä¸ä¼šå½¢æˆä¸€æ’åˆ—ï¼‰ï¼Œ<br>ä¹‹åå¯¹äºå»é‡åæ•°ç»„ï¼Œ å°†å…¶æ’åºï¼Œ ä»åé¢å¾€å‰é¢dpè¿‡å»ï¼Œ è€ƒè™‘æŠŠåé¢å…¨éƒ¨åˆ æ‰æˆ–è€…æ˜¯åœ¨è¿™ä¸¤ä½ä¹‹é—´è¡¥é½å‰©ä¸‹çš„æ•°å­—ï¼Œ æœ‰<br>$dp[i] = min(dp[i + 1] + (b[i + 1] - b[i] - 1) <em> d, c </em> (nn - 1 - i));$<br>å³å½“å‰ä½ç½®æœ€å°éœ€è¦ç­‰äºä¸Šä¸€ä½åˆ°è¿™ä¸€ä½ä¹‹é—´éœ€è¦è¡¥é½æ•°å­—å’ŒæŠŠåé¢å…¨éƒ¨åˆ æ‰çš„æ•°å­—ã€‚<br>æ³¨æ„ä¸€å¼€å§‹çš„1è¦è¡¥ä¸Šï¼ˆif no one in this array)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 n, c, d;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; c &gt;&gt; d;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(a.<span class="built_in">begin</span>() + <span class="number">1</span>, a.<span class="built_in">end</span>());</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; b;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[<span class="number">1</span>] != <span class="number">1</span>) &#123;</span><br><span class="line">        b.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">        sum += d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    b.<span class="built_in">push_back</span>(a[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == a[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            sum += c;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        b.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> nn = b.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">dp</span><span class="params">(nn)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = nn - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        dp[i] = <span class="built_in">min</span>&lt;i64&gt;(dp[i + <span class="number">1</span>] + (b[i + <span class="number">1</span>] - b[i] - <span class="number">1</span>) * d, c * (nn - <span class="number">1</span> - i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; dp[<span class="number">0</span>] + sum &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="D-Climbing-The-Tree"><a href="#D-Climbing-The-Tree" class="headerlink" title="D. Climbing The Tree"></a>D. Climbing The Tree</h4><p>èœ—ç‰›çˆ¬æ ‘ï¼Œå¾ˆå¥½ç©çš„æ•°å­¦é¢˜ï¼Œ ç›´æ¥ç»™ä»£ç  ï¼š æ€è·¯è§ä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun</span> <span class="params">(<span class="type">int</span> h, <span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (h &lt;= x) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">ceil</span> ( (h - x) * <span class="number">1.0</span> / (x - y) ) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    <span class="type">bool</span> f = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    <span class="keyword">while</span> (q --) &#123;</span><br><span class="line">        <span class="type">int</span> op, a, b, n;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line">            cin &gt;&gt; n;</span><br><span class="line">            <span class="keyword">if</span> (!f) &#123;</span><br><span class="line">                <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">                    l = <span class="number">1</span>;</span><br><span class="line">                    r = a;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = a * n - b * n - a + <span class="number">2</span> * b + <span class="number">1</span>;</span><br><span class="line">                    r = a * n - b * n + b;</span><br><span class="line">                &#125;</span><br><span class="line">                f = <span class="literal">true</span>;</span><br><span class="line">                cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> x, y;</span><br><span class="line">                <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">                    x = <span class="number">1</span>;</span><br><span class="line">                    y = a;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    x = a * n - b * n - a + <span class="number">2</span> * b + <span class="number">1</span>;</span><br><span class="line">                    y = a * n - b * n + b;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">max</span> (x, l) &gt; <span class="built_in">min</span> (y, r) ) cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = <span class="built_in">max</span> (x, l);</span><br><span class="line">                    r = <span class="built_in">min</span> (y, r);</span><br><span class="line">                    cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!f) cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">fun</span> (l, a, b) == <span class="built_in">fun</span> (r, a, b) ) cout &lt;&lt; <span class="built_in">fun</span> (l, a, b) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (t --) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E-Monster"><a href="#E-Monster" class="headerlink" title="E. Monster"></a>E. Monster</h4><p>ç»™å‡ºä¸€å¼ å›¾ï¼Œ ç‚¹ u çš„éå†éœ€è¦å…ˆç»è¿‡è¿™ä¸€ä¸ªç‚¹æ‰€éœ€æƒå€¼ a[ u ] ä¸ªç‚¹åæ‰å¯éå†ï¼Œ ä¸€å¼€å§‹æƒ³è¿™é“é¢˜ä¼šæƒ³ç€å…ˆé€‰å‡ºæ‰€æœ‰ç‚¹æƒä¸º 0 çš„ç‚¹ï¼Œ ä»¥è¿™ä¸ªç‚¹ä½œä¸ºèµ·ç‚¹å¼€å§‹bfs ç»´æŠ¤ä¸€ä¸ªKrusalæ ‘ï¼Œæƒ³ç€æƒ³ç€ä¸çŸ¥é“æ€ä¹ˆå†™äº†ï¼Œæ¢ä¸ªäº†æ€è·¯ï¼Œ ç”¨ä¸€ä¸ªå°æ ¹å †è®°å½•å½“å‰èƒ½åˆ°è¾¾çš„ç‚¹çš„ç›¸é‚»æ‰€æœ‰ç‚¹ï¼Œ ä¸€å¼€å§‹æŠŠæ‰€æœ‰0çš„ç‚¹å‹å…¥å †ä¸­ï¼Œ ç”¨ä¸ªå˜é‡è®°å½•å½“å‰å·²ç»èµ°è¿‡çš„ç‚¹çš„æ•°é‡ï¼Œä¹‹åæ¯æ¬¡ä»å †ä¸­å–å‡ºä¸€ä¸ªç‚¹ï¼Œ æ£€æŸ¥è¿™ä¸ªç‚¹çš„æƒæ˜¯å¦å°äºå·²ç»èµ°è¿‡çš„ç‚¹çš„æ•°é‡ï¼Œ å¦‚æœå¤§äºè¯´æ˜ä¸èƒ½åˆ°è¾¾ï¼Œç›´æ¥åœæ­¢ï¼ˆå› ä¸ºå¼€çš„æ˜¯å°æ ¹å †ï¼‰ï¼Œ å¦åˆ™å¯¹è¿™ä¸ªç‚¹å‘¨å›´çš„ç‚¹è¿›è¡Œéå†ï¼Œå¦‚æœå¯ä»¥åˆ°è¾¾å°±è®©èµ°è¿‡çš„ç‚¹++ ï¼Œ å¦åˆ™å‹å…¥å †ä¸­ç­‰å¾…å¤„ç†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">    <span class="type">int</span> u, w;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&gt;(<span class="type">const</span> node&amp; a) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;w &gt; a.w; &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> fun = [&amp;](<span class="type">int</span> s) -&gt; <span class="type">bool</span> &#123;</span><br><span class="line">        priority_queue&lt;node, vector&lt;node&gt;, greater&lt;node&gt;&gt; q;</span><br><span class="line">        <span class="comment">//queue&lt;int&gt; Q;</span></span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        q.<span class="built_in">push</span>(&#123;s, a[s]&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [u, w] = q.<span class="built_in">top</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span> (vis[u] == s) <span class="keyword">continue</span>;</span><br><span class="line">            vis[u] = s;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (cnt &gt;= w) &#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) <span class="keyword">if</span> (vis[v] != s) &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;v, a[v]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//cerr &lt;&lt; &quot;cnt : &quot; &lt;&lt; cnt &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        <span class="keyword">return</span> (cnt == n);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == <span class="number">0</span> &amp;&amp; !vis[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">fun</span>(i)) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforceé¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Educational-codeforce-Round174é¢˜è§£</title>
      <link href="/2025/02/27/Educational-codeforce-Round174%E9%A2%98%E8%A7%A3/"/>
      <url>/2025/02/27/Educational-codeforce-Round174%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://codeforces.com/contest/2069">Edu174</a></p><h2 id="A-Was-there-an-Array"><a href="#A-Was-there-an-Array" class="headerlink" title="A Was there an Array?"></a>A Was there an Array?</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è§‚å¯Ÿé¢˜ç›®å‘ç°å¦‚æœç»™å®šçš„B[i] = 1, å·¦å³éƒ½å¾—æ˜¯ç›¸ç­‰çš„ï¼Œ å¦‚æœå‡ºç°äº†è¿ç»­ä¸‰ä¸ªæ•°å­—( i - 1, i , i + 1 ) å¯¹åº”æ˜¯ 1 0 1ï¼Œåˆ™æœ‰ a[i - 1] = a[ i ], a[ i ] = a[i + 1],  å¾—å‡º a[i - 1] = a[i + 1], ä½†æ˜¯i == 0 åˆæ¨å‡º a[i - 1] != a[i + 1]çŸ›ç›¾ï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å‡ºç°äº†è¿™ç§ç»“æ„å³å¯</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; b[i];</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b[i] == <span class="number">0</span> &amp;&amp; b[i - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; b[i + <span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B-Set-of-Strangers"><a href="#B-Set-of-Strangers" class="headerlink" title="B. Set of Strangers"></a>B. Set of Strangers</h2><p>è§‚å¯Ÿåˆ°å¦‚æœå‡ºç°æœ‰ç›¸é‚»çš„ç›¸åŒæ•°å­—ï¼Œåˆ™å¯¹åº”æ•°å­—éœ€è¦æ“ä½œä¸¤æ¬¡æ‰èƒ½å˜æˆå¦å¤–ä¸€ä¸ªæ•°å­—ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°ç›¸é‚»ï¼Œé‚£ä¹ˆåŒä¸€ç§æ•°å­—æ€»æ˜¯éœ€è¦1æ¬¡å³å¯å®Œæˆæ“ä½œï¼Œ</p><p>æš´åŠ›ç»Ÿè®¡æ¯ä¸ªæ•°å­—éœ€è¦çš„æ“ä½œæ¬¡æ•°ï¼Œå–æœ€å°çš„ n - 1 æ¬¡ç´¯è®¡æ±‚å’Œå°±æ˜¯ç­”æ¡ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">int</span> way[<span class="number">4</span>][<span class="number">2</span>] = &#123; <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span> &#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector <span class="title">a</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt; (m + <span class="number">1</span>))</span>, <span class="title">vis</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt; (m + <span class="number">1</span>))</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            cin &gt;&gt; a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="type">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> g) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        vis[x][y] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> dx = x + way[i][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> dy = y + way[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (dx &lt;= <span class="number">0</span> || dy &lt;= <span class="number">0</span> || dx &gt; n || dy &gt; m || vis[dx][dy] || a[dx][dy] != g) <span class="keyword">continue</span>;</span><br><span class="line">            f = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, dx, dy, g);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis[i][j]) &#123;</span><br><span class="line">                f = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">dfs</span>(dfs, i, j, a[i][j]);</span><br><span class="line">                <span class="keyword">if</span> (f) &#123;</span><br><span class="line">                    mp[a[i][j]] = <span class="number">2</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!mp.<span class="built_in">count</span>(a[i][j])) &#123;</span><br><span class="line">                        mp[a[i][j]] = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; b;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> [x, y] : mp) &#123;</span><br><span class="line">        b.<span class="built_in">push_back</span>(y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(b.<span class="built_in">begin</span>(), b.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; b.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        ans += b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="C-Beautiful-Sequence"><a href="#C-Beautiful-Sequence" class="headerlink" title="C. Beautiful Sequence"></a>C. Beautiful Sequence</h2><p>æˆ‘çš„æ€è·¯ ï¼š </p><p>é¢˜ç›®è¦æ±‚Beautifulåºåˆ—æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li><strong>å·¦ä¾§æ¡ä»¶</strong>ï¼šé™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ å·¦ä¾§å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ ã€‚</li><li><strong>å³ä¾§æ¡ä»¶</strong>ï¼šé™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ å³ä¾§å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ã€‚</li></ol><p>å½“å…ƒç´ åªèƒ½å–1ã€2ã€3æ—¶ï¼Œåºåˆ—ç»“æ„å¿…ä¸º <code>[1, 2, ..., 2, 3]</code>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><h3 id="é¦–å…ƒç´ å¿…é¡»ä¸º1"><a href="#é¦–å…ƒç´ å¿…é¡»ä¸º1" class="headerlink" title="é¦–å…ƒç´ å¿…é¡»ä¸º1"></a>é¦–å…ƒç´ å¿…é¡»ä¸º1</h3><ul><li>è‹¥é¦–å…ƒç´ ä¸º2æˆ–3ï¼Œåç»­å…ƒç´ æ— æ³•æ»¡è¶³å·¦ä¾§æ¡ä»¶ï¼ˆå¦‚é¦–å…ƒç´ ä¸º2æ—¶åªèƒ½æ¥3ï¼Œä½†é•¿åº¦ä¸è¶³ï¼›é¦–å…ƒç´ ä¸º3æ—¶æ— åç»­å…ƒç´ ï¼‰ã€‚</li></ul><h3 id="æœ«å…ƒç´ å¿…é¡»ä¸º3"><a href="#æœ«å…ƒç´ å¿…é¡»ä¸º3" class="headerlink" title="æœ«å…ƒç´ å¿…é¡»ä¸º3"></a>æœ«å…ƒç´ å¿…é¡»ä¸º3</h3><ul><li>è‹¥æœ«å…ƒç´ é3ï¼ˆå¦‚1æˆ–2ï¼‰ï¼Œå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ æ— æ³•æ»¡è¶³å³ä¾§æ¡ä»¶ï¼ˆå¦‚æœ«å…ƒç´ ä¸º2æ—¶ï¼Œå³ä¾§æ— æ›´å¤§å…ƒç´ ï¼‰ã€‚</li></ul><h3 id="ä¸­é—´å…ƒç´ å¿…é¡»å…¨ä¸º2"><a href="#ä¸­é—´å…ƒç´ å¿…é¡»å…¨ä¸º2" class="headerlink" title="ä¸­é—´å…ƒç´ å¿…é¡»å…¨ä¸º2"></a>ä¸­é—´å…ƒç´ å¿…é¡»å…¨ä¸º2</h3><ul><li>ä¸­é—´å…ƒç´ ä¸èƒ½ä¸º1ï¼ˆå·¦ä¾§æ— æ›´å°å…ƒç´ ï¼‰æˆ–3ï¼ˆå³ä¾§æ— æ›´å¤§å…ƒç´ ï¼‰ï¼Œå› æ­¤åªèƒ½ç”±2æ„æˆï¼Œä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª2ï¼ˆé•¿åº¦â‰¥3ï¼‰ã€‚</li></ul><p>ç»¼ä¸Šï¼ŒBeautifulåºåˆ—çš„ç»“æ„å¿…ä¸ºï¼š</p><p> [ 1 2 2 2   â€¦ 3 ]</p><hr>ç»Ÿè®¡æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—ï¼š1. é€‰æ‹©ä¸€ä¸ª1çš„ä½ç½®`i`ä½œä¸ºé¦–å…ƒç´ ã€‚2. é€‰æ‹©ä¸€ä¸ª3çš„ä½ç½®`j`ï¼ˆ`j > i`ï¼‰ä½œä¸ºæœ«å…ƒç´ ã€‚3. ä¸­é—´åŒºé—´`(i, j)`ä¸­è‡³å°‘æœ‰ä¸€ä¸ª2ï¼Œä¸”æ‰€æœ‰å…ƒç´ ä¸º2ã€‚è®¾åŒºé—´`(i, j)`ä¸­æœ‰`c`ä¸ª2ï¼Œåˆ™ä¸­é—´éƒ¨åˆ†çš„å­åºåˆ—ç»„åˆæ•°ä¸ºï¼š$$2^c - 1$$æ€»ç­”æ¡ˆä¸ºæ‰€æœ‰`(i, j)`å¯¹çš„ç»„åˆæ•°ä¹‹å’Œï¼š$$\text{ans} = \sum_{\substack{i: a[i]=1}} \sum_{\substack{j>i: a[j]=3}} \left(2^{\text{\#}\{k \in (i,j): a[k]=2\}} - 1\right)$$---### å‰ç¼€å’Œæ•°ç»„å®šä¹‰å‰ç¼€å’Œæ•°ç»„`P`ï¼Œå…¶ä¸­ï¼š$$P[i] = \text{æ•°ç»„å‰}i\text{ä¸ªå…ƒç´ ä¸­2çš„ä¸ªæ•°}$$åŒºé—´`(i, j)`ä¸­2çš„æ•°é‡ä¸ºï¼š$$P[j-1] - P[i]$$### ä¼˜åŒ–å†…å±‚æ±‚å’Œå°†å†…å±‚æ±‚å’Œè½¬æ¢ä¸ºçº¿æ€§éå†ï¼š- å¯¹äºæ¯ä¸ªä½ç½®`j`ï¼ˆ`a[j]=3`ï¼‰ï¼Œè®¡ç®—`X = P[j-1]`ã€‚- ç´¯åŠ æ‰€æœ‰`i < j`ä¸”`a[i]=1`çš„è´¡çŒ®ï¼š  $$  \sum_{\substack{i: a[i]=1 \\ i < j}} \left(2^{X - P[i]} - 1\right)  $$é€šè¿‡åˆ†è§£å…¬å¼ï¼š$$2^{X - P[i]} = 2^X \cdot 2^{-P[i]}$$å®šä¹‰ç´¯åŠ é‡ï¼š- `sumInv`ï¼šæ‰€æœ‰å·¦ä¾§1å¯¹åº”çš„`2^{-P[i]`ä¹‹å’Œã€‚- `cntOne`ï¼šå·¦ä¾§1çš„ä¸ªæ•°ã€‚åˆ™å½“å‰`j`çš„è´¡çŒ®ä¸ºï¼š$$2^X \cdot \text{sumInv} - \text{cntOne}$$### å®ç°æ­¥éª¤1. **éå†æ•°ç»„**ï¼Œç»´æŠ¤å‰ç¼€å’Œ`P`ã€‚2. **é‡åˆ°1æ—¶**ï¼šæ›´æ–°`cntOne`å’Œ`sumInv += 2^{-P[i]}`ã€‚3. **é‡åˆ°3æ—¶**ï¼šæ ¹æ®å½“å‰`X = P[j-1]`è®¡ç®—è´¡çŒ®å¹¶ç´¯åŠ ã€‚---<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="ç»“æ„é™åˆ¶"><a href="#ç»“æ„é™åˆ¶" class="headerlink" title="ç»“æ„é™åˆ¶"></a>ç»“æ„é™åˆ¶</h3><ul><li>Beautifulåºåˆ—ä¸¥æ ¼éµå¾ª<code>[1, 2, ..., 2, 3]</code>å½¢å¼ï¼Œä¸­é—´è‡³å°‘ä¸€ä¸ª2ã€‚</li></ul><h3 id="è®¡æ•°å…¬å¼"><a href="#è®¡æ•°å…¬å¼" class="headerlink" title="è®¡æ•°å…¬å¼"></a>è®¡æ•°å…¬å¼</h3><ul><li>æ¯ä¸ªåˆæ³•çš„<code>(i, j)</code>å¯¹è´¡çŒ®ä¸º<code>2^&#123;ä¸­é—´2çš„ä¸ªæ•°&#125; - 1</code>ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> T <span class="title">power</span><span class="params">(T a, i64 b, T mod)</span> </span>&#123;</span><br><span class="line">    T res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = a * a % mod) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">            res = (res * a) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200005</span>;</span><br><span class="line"><span class="function">vector&lt;i64&gt; <span class="title">pow2</span><span class="params">(N)</span>, <span class="title">inv</span><span class="params">(N)</span></span>;</span><br><span class="line"></span><br><span class="line">i64 inv2 = <span class="built_in">power</span>&lt;i64&gt;(<span class="number">2</span>, mod - <span class="number">2</span>, mod);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">P</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        P[i] = P[i - <span class="number">1</span>] + (a[i] == <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 one = <span class="number">0</span>, sum = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[j] == <span class="number">1</span>) &#123;</span><br><span class="line">            one = (one + <span class="number">1</span>) % mod;</span><br><span class="line">            sum = (sum + inv[P[j]]) % mod;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[j] == <span class="number">2</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> X = P[j - <span class="number">1</span>];</span><br><span class="line">            i64 g = ((pow2[X] * sum) % mod - one) % mod;</span><br><span class="line">            <span class="keyword">if</span> (g &lt; <span class="number">0</span>) g += mod;</span><br><span class="line">            ans = (ans + g) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans % mod &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    pow2[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        pow2[i] = (pow2[i - <span class="number">1</span>] * <span class="number">2</span>) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    inv[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        inv[i] = (inv[i - <span class="number">1</span>] * inv2) % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¢˜è§£dpæ€è·¯ :<br> ç­‰æˆ‘çœ‹å®Œäº†å†update</p><h2 id="D-Palindrome-Shuffle"><a href="#D-Palindrome-Shuffle" class="headerlink" title="D. Palindrome Shuffle"></a>D. Palindrome Shuffle</h2><p>é¦–å…ˆçŸ¥é“å‰åæœ¬æ¥å°±å›æ–‡çš„å­—æ¯å¯ä»¥å…ˆç§»é™¤ï¼Œæ‰€ä»¥åªéœ€è¦å¤„ç†ä¸€ä¸ªå‰åä¸¤ä¸ªå­—æ¯ä¸ä¸€æ ·çš„å­—ç¬¦ä¸²å³å¯ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆå¤„ç†ä¸€ä¸ªå­—ç¬¦ä¸²Sï¼Œ åªèƒ½é‡æ–°æ’åˆ—Sçš„æŸä¸ªå‰ç¼€æˆ–è€…åç¼€å­ä¸²ä½¿å¾—å®ƒå˜æˆPalindrome</p><p>æ¥çœ‹æ ·ä¾‹4 : </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acbacddacbca</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºéœ€è¦å†4 - 5è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨ 4 - 6, 4 - 7 ç­‰ç­‰é•¿åº¦å¤§äºä»–çš„å­ä¸²ï¼ˆåªéœ€è¦åŒ…å«ä»–ï¼‰è¿›è¡Œæ“ä½œï¼Œå³é•¿åº¦å…·æœ‰å•è°ƒæ€§ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†ç­”æ¡ˆã€‚</p><p>æˆ‘ä»¬å¤„ç†ä»å‰å¼€å§‹ç¿»è½¬æƒ…å†µï¼Œé‚£ä¹ˆä»åå¼€å§‹ç¿»è½¬æƒ…å†µå¯ä»¥reverseåå¥—ç”¨ä»å‰é¢å¼€å§‹çš„æƒ…å†µè¿›è¡Œæ“ä½œã€‚</p><p> <strong>checkå‡½æ•°</strong>ï¼š</p><blockquote><p>é¦–å…ˆç»Ÿè®¡å¾…å¤„ç†å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œä¹‹ååˆ†ä¸¤ç§æƒ…å†µ : </p></blockquote><ul><li><p>æƒ…å†µä¸€ ï¼š <strong>Lï¼ˆå·¦å­—ç¬¦ä¸²èµ·å§‹ä½ç½®ï¼‰ + len - 1 &lt;= n / 2</strong><br>æ­¤æ—¶å’Œæ ·ä¾‹4ä¸€æ ·ï¼Œéœ€è¦åœ¨lenèŒƒå›´å†…å‰ç¼€å’Œåç¼€é‡Œé¢çš„æ‰€æœ‰å­—ç¬¦æ•°é‡ç›¸åŒï¼ŒåŒæ—¶ä¿è¯æ²¡æ“ä½œåˆ°çš„å­—ç¬¦æœ¬æ¥å°±æ˜¯å›æ–‡çš„ï¼ˆå¯ä»¥å¤šå¼€ä¸€ä¸ªæ•°ç»„é¢„å¤„ç†è®°å½•ï¼Œçœ‹ä»£ç is, nedéƒ¨åˆ†ï¼‰</p><ul><li>æƒ…å†µäºŒ ï¼š <strong>Lï¼ˆå·¦å­—ç¬¦ä¸²èµ·å§‹ä½ç½®ï¼‰ + len - 1 &gt; n / 2</strong><br>åªéœ€è¦å·¦è¾¹çš„æ¯ä¸ªå­—ç¬¦æ•°é‡å…¨éƒ¨<strong>å¤§äºæˆ–ç­‰äº</strong>å³è¾¹å‰©ä¸‹çš„å³å¯ã€‚</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line"></span><br><span class="line">    s = <span class="string">&#x27; &#x27;</span> + s;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (s[l] == s[r] &amp;&amp; l &lt;= r) &#123;</span><br><span class="line">        l++, r--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">c</span><span class="params">(<span class="number">27</span> + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        c[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">is</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ned</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != s[n - i + <span class="number">1</span>]) &#123;</span><br><span class="line">            is[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is[i + <span class="number">1</span>] == <span class="number">1</span> || ned[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            ned[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> ck = [&amp;](<span class="type">int</span> len) -&gt; <span class="type">bool</span> &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; <span class="built_in">g</span>(<span class="number">28</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= l + len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            g[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (l + len - <span class="number">1</span> &lt;= n / <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = r; i &gt;= r - len + <span class="number">1</span>; i--) &#123;</span><br><span class="line">                g[s[i] - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (g[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ned[l + len - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (c[i] - g[i] &gt; g[i]) &#123;</span><br><span class="line">                    <span class="comment">//cout &lt;&lt; len &lt;&lt; &#x27; &#x27; &lt;&lt; char(i + &#x27;a&#x27;) &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> lo = <span class="number">2</span>, ri = r - l;</span><br><span class="line">    <span class="keyword">while</span> (lo &lt;= ri) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (lo + ri) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">ck</span>(mid)) &#123;</span><br><span class="line">            ri = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = lo;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>() + <span class="number">1</span>, s.<span class="built_in">end</span>());</span><br><span class="line">    n = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    l = <span class="number">1</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (s[l] == s[r] &amp;&amp; l &lt;= r) &#123;</span><br><span class="line">        l++, r--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">h</span><span class="params">(<span class="number">27</span> + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        h[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">is2</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ned2</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != s[n - i + <span class="number">1</span>]) &#123;</span><br><span class="line">            is2[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is2[i + <span class="number">1</span>] == <span class="number">1</span> || ned2[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            ned2[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ll = <span class="number">2</span>, rr = r - l;</span><br><span class="line">    <span class="keyword">while</span> (ll &lt;= rr) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (ll + rr) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">ck</span>(mid)) &#123;</span><br><span class="line">            rr = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ll = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans = <span class="built_in">min</span>(ans, ll);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforceé¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaDataç±»å­¦ä¹ </title>
      <link href="/2025/02/27/JavaData%E7%B1%BB%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/02/27/JavaData%E7%B1%BB%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>Javaçš„DATAç±»</li></ul><h2 id="Dateç±»çš„æ¦‚è¿°"><a href="#Dateç±»çš„æ¦‚è¿°" class="headerlink" title="Dateç±»çš„æ¦‚è¿°"></a>Dateç±»çš„æ¦‚è¿°</h2><ol><li><p>java.util,Date è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„ç±»</p></li><li><p>ç±» Date è¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°åƒåˆ†ä¹‹ä¸€ç§’ï¼ˆæ¯«ç§’ï¼‰</p></li><li><p>å®ä¾‹å¼•å…¥ï¼šè·å–æ—¶é—´åŸç‚¹åˆ°å½“å‰ç³»ç»Ÿæ—¶é—´ç»å†äº†å¤šå°‘ç§’</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// æ—¶é—´åŸç‚¹ï¼š1970 å¹´ 01 æœˆ 01 æ—¥ 00:00:00 </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;       </span><br><span class="line">            System.out.println(System.currentTimeMillis());    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;       </span><br></pre></td></tr></table></figure></li></ol><h2 id="Dateç±»å¸¸ç”¨çš„æ„é€ æ–¹æ³•å’Œæˆå‘˜æ–¹æ³•"><a href="#Dateç±»å¸¸ç”¨çš„æ„é€ æ–¹æ³•å’Œæˆå‘˜æ–¹æ³•" class="headerlink" title="Dateç±»å¸¸ç”¨çš„æ„é€ æ–¹æ³•å’Œæˆå‘˜æ–¹æ³•"></a>Dateç±»å¸¸ç”¨çš„æ„é€ æ–¹æ³•å’Œæˆå‘˜æ–¹æ³•</h2><h3 id="æˆå‘˜æ–¹æ³•"><a href="#æˆå‘˜æ–¹æ³•" class="headerlink" title="æˆå‘˜æ–¹æ³•"></a>æˆå‘˜æ–¹æ³•</h3><p>getTime()æ–¹æ³•ã€‚è¿”å›ï¼šæ—¶é—´åŸç‚¹ä»¥æ¥ï¼Œæ­¤Dateå¯¹è±¡è¡¨ç¤ºçš„æ¯«ç§’æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoGetTime</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();        </span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> date.getTime();                <span class="comment">// è¾“å‡ºï¼š1578728202850       </span></span><br><span class="line">     <span class="comment">// è¯¥æ–¹æ³•ç±»ä¼¼äº System.currentTimeMillis()        </span></span><br><span class="line">         System.out.println(time);   </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><h4 id="Dateç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚"><a href="#Dateç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚" class="headerlink" title="Dateç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚"></a>Dateç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</h4><p>è¿”å›ï¼šå½“å‰ç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate1</span> &#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;       </span><br><span class="line">         <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();         <span class="comment">// è¾“å‡ºï¼šSat Jan 11 15:40:50 CST 2020      </span></span><br><span class="line">        System.out.println(date);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Dateç±»çš„å¸¦å‚æ„é€ æ–¹æ³•"><a href="#Dateç±»çš„å¸¦å‚æ„é€ æ–¹æ³•" class="headerlink" title="Dateç±»çš„å¸¦å‚æ„é€ æ–¹æ³•"></a>Dateç±»çš„å¸¦å‚æ„é€ æ–¹æ³•</h4><p>Date(long date) å‚æ•°ä¸ºä¸€ä¸ªæ¯«ç§’å€¼ï¼ŒæŠŠä¼ å…¥çš„æ¯«ç§’å€¼è½¬æ¢ä¸ºDateæ—¥æœŸ</p><p>è¿”å›ï¼šä¼ å…¥å‚æ•°ï¼ˆæ¯«ç§’å€¼ï¼‰å¯¹åº”çš„çš„æ—¥æœŸå’Œæ—¶é—´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoDate2</span> &#123;   </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">0L</span>);         <span class="comment">// è¿™é‡Œè¾“å‡ºçš„æ˜¯0æ¯«ç§’æ—¶çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œå³æ—¶é—´åŸç‚¹çš„æ—¥æœŸå’Œæ—¶é—´        // è¾“å‡ºï¼šThu Jan 01 08:00:00 CST 1970        </span></span><br><span class="line">        System.out.println(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="DateFormatæŠ½è±¡ç±»å’ŒSimpleDateFormatå®ç°ç±»"><a href="#DateFormatæŠ½è±¡ç±»å’ŒSimpleDateFormatå®ç°ç±»" class="headerlink" title="DateFormatæŠ½è±¡ç±»å’ŒSimpleDateFormatå®ç°ç±»"></a>DateFormatæŠ½è±¡ç±»å’ŒSimpleDateFormatå®ç°ç±»</h2><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><ol><li><p>java.text.DateFormatç±»ï¼Œæ˜¯æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–å­ç±»çš„æŠ½è±¡ç±»</p></li><li><p>ä½œç”¨ï¼šæ ¼å¼åŒ–(ä¹Ÿå°±æ˜¯æ—¥æœŸ-&gt;æ–‡æœ¬)ã€è§£æ(æ–‡æœ¬-&gt;æ—¥æœŸ)</p></li><li><p>æˆå‘˜æ–¹æ³•</p><ol><li>string format( Datedate)æŒ‰ç…§æŒ‡å®šçš„æ¨¡å¼,æŠŠDateæ—¥æœŸ,æ ¼å¼åŒ–ä¸ºç¬¦åˆæ¨¡å¼çš„å­—ç¬¦ä¸²</li><li>Date parse( string source)æŠŠç¬¦åˆæ¨¡å¼çš„å­—ç¬¦ä¸²,è§£æä¸ºDoteæ—¥æœŸ</li></ol></li><li><p>DateFormatç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,æ— æ³•ç›´æ¥åˆ›å»ºå¯¹è±¡ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ DateFormatç±»çš„å­ç±»<strong>java.text.SimpleDateFormat extends DateFormat</strong></p></li><li><p>æ„é€ æ–¹æ³•ï¼š<strong>SimpleDateFormat(String pattern)</strong>ç”¨ç»™å®šçš„æ¨¡å¼å’Œé»˜è®¤è¯­è¨€ç¯å¢ƒçš„æ—¥æœŸæ ¼å¼ç¬¦å·æ„é€ SimpleDateFormat</p></li></ol><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><ol><li><p>æµ‹è¯•DateFormatç±»çš„formatæ–¹æ³•ï¼Œè¾“å‡ºæŒ‡å®šæ ¼å¼çš„æ—¥æœŸã€æ—¶é—´</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01FormatMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºSimpleDateFormatå¯¹è±¡ï¼Œåœ¨SimpleDateFormat(String pattern)æ„é€ æ–¹æ³•ä¸­ä¼ å…¥æŒ‡å®šçš„æ¨¡å¼</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy å¹´ MM æœˆ dd æ—¥ HH æ—¶ mm åˆ† ss ç§’&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è°ƒç”¨DateFormatçš„å®ç°ç±»SimpleDateFormatä¸­çš„formatæ–¹æ³•ï¼Œ</span></span><br><span class="line">        <span class="comment">// æŒ‰ç…§æ„é€ æ–¹æ³•ä¸­æŒ‡å®šçš„æ¨¡å¼ï¼ŒæŠŠDateè§£æä¸ºç¬¦åˆæ¨¡å¼çš„å­—ç¬¦ä¸²ï¼ˆæ–‡æœ¬ï¼‰</span></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">dateFormat</span> <span class="operator">=</span> simpleDateFormat.format(date);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Sat Jan 11 16:24:43 CST 2020</span></span><br><span class="line">        System.out.println(date);</span><br><span class="line">        <span class="comment">// 2020 å¹´ 01 æœˆ 11 æ—¥ 16 æ—¶ 24 åˆ† 43 ç§’</span></span><br><span class="line">        System.out.println(dateFormat);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•DateFormatç±»çš„parseæ–¹æ³•ï¼ŒæŠŠç¬¦åˆæ„é€ æ–¹æ³•ä¸­æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œè§£æä¸ºDateæ—¥æœŸ</p></li></ol><pre><code class="lang-java">import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;public class Demo01ParseMethod &#123;    public static void main(String[] args)            throws ParseException &#123;        // åˆ›å»ºSimpleDateFormatå¯¹è±¡ï¼Œåœ¨SimpleDateFormat(String pattern)æ„é€ æ–¹æ³•ä¸­ä¼ å…¥æŒ‡å®šçš„æ¨¡å¼        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy å¹´ MM æœˆ dd æ—¥ HH æ—¶ mm åˆ† ss ç§’&quot;);        // è°ƒç”¨ SimpleDateFormatå¯¹è±¡ä¸­çš„ parseæ–¹æ³•ï¼ŒæŠŠç¬¦åˆæ„SimpleDateFormat(String pattern)é€ æ–¹æ³•ä¸­æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œè§£æä¸ºDateæ—¥æœŸ        Date dateParse = simpleDateFormat.parse(&quot;2020 å¹´ 01 æœˆ 11 æ—¥ 16 æ—¶ 24 åˆ† 43 ç§’&quot;);        // Sat Jan 11 16:24:43 CST 2020        System.out.println(dateParse);    &#125;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰«æçº¿</title>
      <link href="/2025/02/04/%E6%89%AB%E6%8F%8F%E7%BA%BF/"/>
      <url>/2025/02/04/%E6%89%AB%E6%8F%8F%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>çŸ©å½¢é¢ç§¯å¹¶</li></ul><p>å°†çŸ©å½¢åˆ’åˆ†ä¸ºæ¯ä¸ª è¡Œå— ï¼Œ ä¸€ä¸€ç»Ÿè®¡å‡ºè¾¹å’Œå…¥è¾¹ï¼Œ è®¡ç®—æ¯æ¡è¾¹çš„è´¡çŒ®ï¼Œ ä»¥æ¯æ¡è¾¹è®¡ç®— S<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Scanline</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, num;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; tag;</span><br><span class="line">    vector&lt;i64&gt; len, xx;</span><br><span class="line">    i64 S;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Line</span> &#123;</span><br><span class="line">        i64 y, lx, rx;</span><br><span class="line">        <span class="type">int</span> flag; <span class="comment">// 1æ˜¯å…¥è¾¹ï¼Œ-1æ˜¯å‡ºè¾¹</span></span><br><span class="line">        <span class="built_in">Line</span>() &#123;&#125;</span><br><span class="line">        <span class="built_in">Line</span>(i64 y, i64 lx, i64 rx, <span class="type">int</span> flag) </span><br><span class="line">            : <span class="built_in">y</span>(y), <span class="built_in">lx</span>(lx), <span class="built_in">rx</span>(rx), <span class="built_in">flag</span>(flag) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Line&amp; other) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;y &lt; other.y; &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Line&gt; line;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Scanline</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">num</span>(<span class="number">0</span>), <span class="built_in">S</span>(<span class="number">0</span>) &#123;</span><br><span class="line">        tag.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        len.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(i64 x1, i64 x2, i64 y1, i64 y2)</span> </span>&#123;</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y1, x1, x2, <span class="number">1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x1);</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y2, x1, x2, <span class="number">-1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            len[p] = xx[t] - xx[s]; </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s + <span class="number">1</span> == t) &#123;</span><br><span class="line">            len[p] = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            len[p] = len[p * <span class="number">2</span>] + len[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> flag, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            tag[p] += flag;</span><br><span class="line">            <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; m) <span class="built_in">update</span>(l, r, flag, s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">update</span>(l, r, flag, m, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">sort</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(line.<span class="built_in">begin</span>(), line.<span class="built_in">end</span>());</span><br><span class="line">        num = <span class="built_in">unique</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>()) - xx.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; line.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                S += len[<span class="number">1</span>] * (line[i].y - line[i - <span class="number">1</span>].y);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> l = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].lx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="type">int</span> r = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].rx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="built_in">update</span>(l, r, line[i].flag, <span class="number">0</span>, num - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">i64 <span class="title">get_area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> S;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><strong>æ³¨æ„</strong>ï¼š è¯¥çº¿æ®µæ ‘ä½¿ç”¨çš„æ˜¯å·¦é—­å³å¼€åŒºé—´ã€‚</p><ul><li>çŸ©å½¢å‘¨é•¿å¹¶ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Scanline</span> &#123; <span class="comment">//å‘¨é•¿å¹¶</span></span><br><span class="line">    <span class="type">int</span> n, num;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; tag;</span><br><span class="line">    vector&lt;i64&gt; len, xx;</span><br><span class="line">    i64 C;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Line</span> &#123;</span><br><span class="line">        i64 y, lx, rx;</span><br><span class="line">        <span class="type">int</span> flag; <span class="comment">// 1æ˜¯å…¥è¾¹ï¼Œ-1æ˜¯å‡ºè¾¹</span></span><br><span class="line">        <span class="built_in">Line</span>() &#123;&#125;</span><br><span class="line">        <span class="built_in">Line</span>(i64 y, i64 lx, i64 rx, <span class="type">int</span> flag) </span><br><span class="line">            : <span class="built_in">y</span>(y), <span class="built_in">lx</span>(lx), <span class="built_in">rx</span>(rx), <span class="built_in">flag</span>(flag) &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Line&amp; other) <span class="type">const</span> &#123; </span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;y != other.y) <span class="keyword">return</span> <span class="keyword">this</span>-&gt;y &lt; other.y;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">this</span>-&gt;flag &gt; other.flag; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    vector&lt;Line&gt; line;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Scanline</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n), <span class="built_in">num</span>(<span class="number">0</span>), <span class="built_in">C</span>(<span class="number">0</span>) &#123;</span><br><span class="line">        tag.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        len.<span class="built_in">assign</span>(n * <span class="number">16</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(i64 x1, i64 x2, i64 y1, i64 y2)</span> </span>&#123;</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y1, x1, x2, <span class="number">1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x1);</span><br><span class="line">        line.<span class="built_in">emplace_back</span>(y2, x1, x2, <span class="number">-1</span>);</span><br><span class="line">        xx.<span class="built_in">push_back</span>(x2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            len[p] = xx[t] - xx[s] ;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            len[p] = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            len[p] = len[p * <span class="number">2</span>] + len[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> flag, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            tag[p] += flag;</span><br><span class="line">            <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; m) <span class="built_in">update</span>(l, r, flag, s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">update</span>(l, r, flag, m, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">sort</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(line.<span class="built_in">begin</span>(), line.<span class="built_in">end</span>());</span><br><span class="line">        num = <span class="built_in">unique</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>()) - xx.<span class="built_in">begin</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">init</span>();</span><br><span class="line">        <span class="type">int</span> pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; line.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            pre = len[<span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> l = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].lx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="type">int</span> r = <span class="built_in">lower_bound</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">begin</span>() + num, line[i].rx) - xx.<span class="built_in">begin</span>();</span><br><span class="line">            <span class="built_in">update</span>(l, r, line[i].flag, <span class="number">0</span>, num - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            C += <span class="built_in">abs</span>(len[<span class="number">1</span>] - pre);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">i64 <span class="title">getlen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚å¸¸å¤„ç†</title>
      <link href="/2025/02/03/%E9%9B%86%E5%90%88%E7%B1%BB/"/>
      <url>/2025/02/03/%E9%9B%86%E5%90%88%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-Collectionç±»"><a href="#1-Collectionç±»" class="headerlink" title="1. Collectionç±»"></a>1. Collectionç±»</h2><p><code>Collection</code> æ¥å£æ˜¯ Java é›†åˆæ¡†æ¶ä¸­çš„æ ¹æ¥å£ä¹‹ä¸€ï¼Œå®šä¹‰äº†æ‰€æœ‰é›†åˆç±»å…±æœ‰çš„åŸºæœ¬æ“ä½œå’Œè¡Œä¸ºã€‚å®ƒä½äº <code>java.util</code> åŒ…ä¸­ï¼Œç»§æ‰¿è‡ª <code>Iterable</code> æ¥å£ï¼Œå› æ­¤æ‰€æœ‰å®ç°äº† <code>Collection</code> çš„ç±»éƒ½å¯ä»¥ä½¿ç”¨å¢å¼º for å¾ªç¯è¿›è¡Œéå†ã€‚</p><hr><h3 id="ä¸»è¦ç‰¹ç‚¹å’Œæ–¹æ³•"><a href="#ä¸»è¦ç‰¹ç‚¹å’Œæ–¹æ³•" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹å’Œæ–¹æ³•"></a><strong>ä¸»è¦ç‰¹ç‚¹å’Œæ–¹æ³•</strong></h3><ul><li><p><strong>åŸºç¡€æ“ä½œ</strong>ï¼š</p><ul><li><code>add(E e)</code>ï¼šå‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>remove(Object o)</code>ï¼šä»é›†åˆä¸­åˆ é™¤æŒ‡å®šçš„å…ƒç´ ã€‚</li><li><code>clear()</code>ï¼šæ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li><li><code>size()</code>ï¼šè¿”å›é›†åˆä¸­å…ƒç´ çš„æ•°é‡ã€‚</li><li><code>isEmpty()</code>ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</li><li><code>contains(Object o)</code>ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ã€‚</li></ul></li><li><p><strong>éå†åŠŸèƒ½</strong>ï¼š</p><ul><li>ç»§æ‰¿è‡ª <code>Iterable</code> çš„ <code>iterator()</code> æ–¹æ³•ï¼Œå¯ä»¥è·å–ä¸€ä¸ªè¿­ä»£å™¨éå†é›†åˆä¸­çš„å…ƒç´ ã€‚</li><li>ä» Java 8 å¼€å§‹ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>stream()</code> æ–¹æ³•ä½¿ç”¨ Stream API è¿›è¡Œæµå¼æ“ä½œã€‚</li></ul></li><li><p><strong>æ‰¹é‡æ“ä½œ</strong>ï¼š</p><ul><li><code>addAll(Collection&lt;? extends E&gt; c)</code>ï¼šå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å½“å‰é›†åˆä¸­ã€‚</li><li><code>removeAll(Collection&lt;?&gt; c)</code>ï¼šåˆ é™¤å½“å‰é›†åˆä¸­åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li><li><code>retainAll(Collection&lt;?&gt; c)</code>ï¼šä¿ç•™å½“å‰é›†åˆä¸­ä¸æŒ‡å®šé›†åˆå…±æœ‰çš„å…ƒç´ ã€‚</li></ul></li></ul><hr><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a><strong>æ³¨æ„äº‹é¡¹</strong></h3><ul><li><p><strong>æŠ½è±¡æ€§è´¨</strong>ï¼š<br>  <code>Collection</code> æ¥å£ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ï¼Œè€Œæ˜¯ç”±å…¶å­æ¥å£ï¼ˆå¦‚ <code>List</code>ã€<code>Set</code>ã€<code>Queue</code> ç­‰ï¼‰æ¥å…·ä½“å®ç°ã€‚</p></li><li><p><strong>æ— ç´¢å¼•è®¿é—®</strong>ï¼š<br>  <code>Collection</code> æ¥å£æ²¡æœ‰å®šä¹‰åŸºäºç´¢å¼•çš„è®¿é—®æ–¹æ³•ï¼ˆä¾‹å¦‚ <code>get(int index)</code>ï¼‰ï¼Œå¦‚æœéœ€è¦ç´¢å¼•è®¿é—®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>List</code> æ¥å£åŠå…¶å®ç°ç±»ï¼ˆå¦‚ <code>ArrayList</code>ï¼‰ã€‚</p></li><li><p><strong>æ‰©å±•æ€§</strong>ï¼š<br>  æ‰€æœ‰ Java é›†åˆç±»éƒ½éµå¾ª <code>Collection</code> æ¥å£å®šä¹‰çš„å¥‘çº¦ï¼Œè¿™ä½¿å¾—é›†åˆç±»ä¹‹é—´å¯ä»¥è¿›è¡Œé€šç”¨çš„ç¼–ç¨‹ï¼Œè€Œä¸ç”¨å…³æ³¨å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p></li></ul><hr><h2 id="2-List"><a href="#2-List" class="headerlink" title="2. List"></a>2. List</h2><ul><li>get(int index) : è¿”å›ç¬¬indexä¸ªå…ƒç´ </li><li>set(int index, Object obj) : æŠŠç¬¬indexä¸ªå…ƒç´ è®¾ç½®æˆobj</li></ul><ul><li><p><strong>æœ‰åºæ€§</strong>ï¼š<br>  <code>List</code> ä¸­çš„å…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºæ’åˆ—ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰æ¥è®¿é—®ã€æ’å…¥æˆ–åˆ é™¤å…ƒç´ ã€‚</p></li><li><p><strong>å…è®¸é‡å¤</strong>ï¼š<br>  ä¸ <code>Set</code> ä¸åŒï¼Œ<code>List</code> å…è®¸é›†åˆä¸­å­˜åœ¨é‡å¤å…ƒç´ ã€‚</p></li><li><p><strong>æ‰©å±• Collection æ¥å£</strong>ï¼š<br>  é™¤äº† <code>Collection</code> ä¸­çš„åŸºæœ¬æ“ä½œå¤–ï¼Œ<code>List</code> è¿˜æä¾›äº†ä¸ç´¢å¼•æœ‰å…³çš„æ“ä½œï¼Œå¦‚ <code>get(int index)</code>ã€<code>set(int index, E element)</code>ã€<code>add(int index, E element)</code> å’Œ <code>remove(int index)</code>ã€‚</p></li></ul><hr><h3 id="ä¸»è¦æ–¹æ³•"><a href="#ä¸»è¦æ–¹æ³•" class="headerlink" title="ä¸»è¦æ–¹æ³•"></a>ä¸»è¦æ–¹æ³•</h3><p>é™¤äº† <code>Collection</code> æä¾›çš„å¸¸ç”¨æ–¹æ³•ï¼Œ<code>List</code> æ¥å£è¿˜å¢åŠ äº†ä»¥ä¸‹ä¸ç´¢å¼•ç›¸å…³çš„æ“ä½œï¼š</p><ul><li><p><strong>æ·»åŠ å’Œæ’å…¥</strong></p><ul><li><code>boolean add(E e)</code>ï¼šåœ¨åˆ—è¡¨æœ«å°¾è¿½åŠ å…ƒç´ ã€‚</li><li><code>void add(int index, E element)</code>ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ï¼Œå…¶åçš„å…ƒç´ ä¾æ¬¡åç§»ã€‚</li></ul></li><li><p><strong>è®¿é—®å…ƒç´ </strong></p><ul><li><code>E get(int index)</code>ï¼šè¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</li><li><code>E set(int index, E element)</code>ï¼šæ›¿æ¢æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›åŸæ¥çš„å€¼ã€‚</li></ul></li><li><p><strong>åˆ é™¤å…ƒç´ </strong></p><ul><li><code>E remove(int index)</code>ï¼šåˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´ ã€‚</li><li><code>boolean remove(Object o)</code>ï¼šåˆ é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå¯¹è±¡ï¼ˆè‹¥å­˜åœ¨ï¼‰ã€‚</li></ul></li><li><p><strong>æŸ¥æ‰¾å…ƒç´ </strong></p><ul><li><code>int indexOf(Object o)</code>ï¼šè¿”å›å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› -1ã€‚</li><li><code>int lastIndexOf(Object o)</code>ï¼šè¿”å›å…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</li></ul></li><li><p><strong>å­åˆ—è¡¨æ“ä½œ</strong></p><ul><li><code>List&lt;E&gt; subList(int fromIndex, int toIndex)</code>ï¼šè¿”å›åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´çš„è§†å›¾ï¼Œè§†å›¾ä¸­çš„ä¿®æ”¹ä¼šåæ˜ åœ¨åŸåˆ—è¡¨ä¸Šã€‚</li></ul></li><li><p><strong>åˆ—è¡¨è¿­ä»£å™¨</strong></p><ul><li><code>ListIterator&lt;E&gt; listIterator()</code>ï¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨è¿­ä»£å™¨ï¼Œå¯åŒå‘éå†åˆ—è¡¨ï¼Œå¹¶åœ¨éå†è¿‡ç¨‹ä¸­è¿›è¡Œä¿®æ”¹æ“ä½œã€‚</li></ul></li></ul><hr><h3 id="å¸¸è§çš„å®ç°ç±»"><a href="#å¸¸è§çš„å®ç°ç±»" class="headerlink" title="å¸¸è§çš„å®ç°ç±»"></a>å¸¸è§çš„å®ç°ç±»</h3><p>Java æä¾›äº†å¤šä¸ª <code>List</code> æ¥å£çš„å®ç°ï¼Œæ¯ç§å®ç°éƒ½æœ‰å„è‡ªçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š</p><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a><strong>ArrayList</strong></h3><ul><li><strong>åº•å±‚å®ç°</strong>ï¼šåŠ¨æ€æ•°ç»„</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>éšæœºè®¿é—®éå¸¸å¿«ï¼ˆæ—¶é—´å¤æ‚åº¦ O(1)ï¼‰</li><li>æ’å…¥å’Œåˆ é™¤ï¼ˆå°¤å…¶æ˜¯ä¸­é—´ä½ç½®ï¼‰å¯èƒ½è¾ƒæ…¢ï¼Œå› ä¸ºéœ€è¦ç§»åŠ¨æ•°ç»„å…ƒç´ </li><li>é»˜è®¤åˆå§‹å®¹é‡é€šå¸¸ä¸º 10ï¼Œè‡ªåŠ¨æ‰©å®¹æ—¶é‡‡ç”¨ä¸€å®šçš„å¢é•¿ç­–ç•¥</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé¢‘ç¹è¯»å–ï¼Œè¾ƒå°‘ä¿®æ”¹ï¼ˆå°¤å…¶æ˜¯å°¾éƒ¨æ·»åŠ ï¼‰çš„åœºæ™¯</li></ul><h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a><strong>LinkedList</strong></h3><ul><li><strong>åº•å±‚å®ç°</strong>ï¼šåŒå‘é“¾è¡¨</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>æ’å…¥å’Œåˆ é™¤æ“ä½œå¿«ï¼ˆç‰¹åˆ«æ˜¯åœ¨åˆ—è¡¨ä¸¤ç«¯æˆ–å·²çŸ¥èŠ‚ç‚¹å¤„è¿›è¡Œæ“ä½œï¼‰</li><li>éšæœºè®¿é—®è¾ƒæ…¢ï¼ˆéœ€è¦éå†èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)ï¼‰</li><li>é™¤äº†ä½œä¸º <code>List</code>ï¼Œå®ƒè¿˜å®ç°äº† <code>Deque</code> æ¥å£ï¼Œé€‚åˆå½“ä½œé˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—ä½¿ç”¨</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé¢‘ç¹åœ¨ä¸­é—´æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„åœºæ™¯</li></ul><h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a><strong>Vector</strong></h3><ul><li><strong>åº•å±‚å®ç°</strong>ï¼šåŠ¨æ€æ•°ç»„</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li>ä¸ <code>ArrayList</code> ç±»ä¼¼ï¼Œä½†æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤çº¿ç¨‹å®‰å…¨</li><li>ç”±äºåŒæ­¥å¼€é”€ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒä½</li><li>ä½œä¸ºè¾ƒæ—©æœŸçš„é›†åˆç±»ï¼Œç°å¤šæ¨èä½¿ç”¨ <code>ArrayList</code>ï¼ˆå¦‚æœçº¿ç¨‹å®‰å…¨éœ€æ±‚ï¼Œåˆ™å¯è€ƒè™‘ <code>Collections.synchronizedList</code> æˆ– <code>CopyOnWriteArrayList</code> ç­‰ï¼‰</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šéœ€è¦çº¿ç¨‹å®‰å…¨ä¸”å¯¹æ€§èƒ½è¦æ±‚ä¸å¤ªè‹›åˆ»çš„åœºæ™¯</li></ul><hr><h3 id="æ€§èƒ½ä¸ä½¿ç”¨æ³¨æ„"><a href="#æ€§èƒ½ä¸ä½¿ç”¨æ³¨æ„" class="headerlink" title="æ€§èƒ½ä¸ä½¿ç”¨æ³¨æ„"></a>æ€§èƒ½ä¸ä½¿ç”¨æ³¨æ„</h3><ul><li><p><strong>éšæœºè®¿é—® vs æ’å…¥åˆ é™¤</strong></p><ul><li>å¦‚æœä½ çš„åº”ç”¨éœ€è¦é¢‘ç¹é€šè¿‡ç´¢å¼•éšæœºè®¿é—®å…ƒç´ ï¼Œå»ºè®®ä½¿ç”¨ <code>ArrayList</code>ã€‚</li><li>å¦‚æœéœ€è¦åœ¨åˆ—è¡¨ä¸­é—´è¿›è¡Œå¤§é‡æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œ<code>LinkedList</code> ä¼šæ›´é«˜æ•ˆã€‚</li></ul></li><li><p><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ArrayList</code> å’Œ <code>LinkedList</code> éƒ½ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœéœ€è¦çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>Collections.synchronizedList(new ArrayList&lt;&gt;())</code> æˆ–é€‰æ‹©å¹¶å‘é›†åˆå¦‚ <code>CopyOnWriteArrayList</code>ï¼ˆé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯ï¼‰ã€‚</li></ul></li><li><p><strong>å†…å­˜å ç”¨</strong></p><ul><li><code>ArrayList</code> åœ¨æ‰©å®¹æ—¶å¯èƒ½ä¼šåˆ†é…è¾ƒå¤§çš„è¿ç»­å†…å­˜å—ï¼Œè€Œ <code>LinkedList</code> æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦é¢å¤–çš„æŒ‡é’ˆç©ºé—´ã€‚</li></ul></li></ul><hr><h2 id="3-Set"><a href="#3-Set" class="headerlink" title="3. Set"></a>3. Set</h2><h4 id="3-1-HashSet"><a href="#3-1-HashSet" class="headerlink" title="3.1 HashSet"></a>3.1 HashSet</h4><p>ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œ å’Œcpp un_ordersetä¸€æ ·,æ— åºï¼Œ $O(1)$ æ’å…¥æŸ¥è¯¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">se</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;E&gt;();</span><br><span class="line">se.add(??);</span><br><span class="line"></span><br><span class="line">sout  se.contain(???) ;</span><br></pre></td></tr></table></figure><h3 id="3-2-TreeSet"><a href="#3-2-TreeSet" class="headerlink" title="3.2 TreeSet"></a>3.2 TreeSet</h3><p>ä½¿ç”¨çº¢é»‘æ ‘å®ç°ï¼Œ å’Œcppæ™®é€šsetä¸€æ ·, $O(logn)$ æ’å…¥æŸ¥è¯¢<br>å­˜å‚¨çš„å…ƒç´ å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ï¼Œæˆ–è€…åœ¨æ„é€ æ—¶æä¾› <code>Comparator</code>ã€‚é»˜è®¤æ˜¯æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¤§å°ä»å°åˆ°å¤§æ’åºé¢ï¼Œ<br>Comparable æ¥å£é‡Œé¢çš„compareTo(Object O) ç”¨äºæ’åˆ—, å’ŒStruct é‡Œé¢çš„bool operator &gt; ä¸€æ ·</p><ul><li>comparator() : è¿”å›æ¯”è¾ƒå™¨ï¼Œæœ€æ™®é€šçš„NULL</li><li>first() æœ€å°çš„å…ƒç´ </li><li>last()</li><li>headSet()</li><li>tailSet()</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Record</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Record</span><span class="params">(String name, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">&quot;: &quot;</span> + score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šå®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ TreeSet å¹¶æä¾›è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼ŒæŒ‰ score é™åºæ’åˆ—</span></span><br><span class="line">        TreeSet&lt;Record&gt; recordSet = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Record&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Record r1, Record r2)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(r2.score, r1.score); <span class="comment">// é™åºæ’åº</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">85</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">92</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">78</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;David&quot;</span>, <span class="number">92</span>)); <span class="comment">// score ç›¸åŒï¼ŒComparator éœ€è¦å¤„ç†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå† TreeSet</span></span><br><span class="line">        <span class="keyword">for</span> (Record r : recordSet) &#123;</span><br><span class="line">            System.out.println(r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lambdaï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetLambdaExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®šä¹‰ Comparator</span></span><br><span class="line">        TreeSet&lt;Record&gt; recordSet = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(</span><br><span class="line">            (r1, r2) -&gt; r2.score != r1.score ? Integer.compare(r2.score, r1.score) : r1.name.compareTo(r2.name)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">85</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">92</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">78</span>));</span><br><span class="line">        recordSet.add(<span class="keyword">new</span> <span class="title class_">Record</span>(<span class="string">&quot;David&quot;</span>, <span class="number">92</span>)); <span class="comment">// å¤„ç†åˆ†æ•°ç›¸åŒçš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå† TreeSet</span></span><br><span class="line">        recordSet.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>Mapæ²¡æœ‰ç»§æ‰¿Collectionæ¥å£ã€‚</p><ul><li>put(key, value)</li><li>containsKey(key)</li><li>containsValue(Object value)</li><li>get(Object key)</li><li>keySet(): è¿”å›keyå€¼å½¢æˆçš„é›†åˆ</li><li>values() : è¿”å›valueså½¢æˆçš„Collectionsé›†åˆ</li><li>entrySet() : è¿”å›ä¸€ä¸ªMap.Entryç±»å‹çš„Setï¼Œ é‡Œé¢æœ‰getKeyå’ŒgetValueæ–¹æ³•ï¼ˆMap.Entry)</li><li>merge(T Key, T Value, Operation) ï¼š Opeå¯ä»¥ä½¿ç”¨Lambdaï¼Œ å¯¹å·²ç»æœ‰çš„Keyè¿›è¡Œåˆå¹¶æ“ä½œ</li></ul><hr><ul><li><code>V getOrDefault(Object key, V defaultValue)</code>ï¼šè·å–é”®å¯¹åº”çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼ã€‚</li><li><code>void forEach(BiConsumer&lt;? super K, ? super V&gt; action)</code>ï¼šéå† Map ä¸­æ‰€æœ‰é”®å€¼å¯¹ã€‚</li><li><code>V computeIfAbsent(K key, Function&lt;? super K, ? extends V&gt; mappingFunction)</code>ï¼šå¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡ç»™å®šå‡½æ•°æˆä¸€ä¸ªå€¼å¹¶æ’å…¥ã€‚   </li><li><code>V computeIfPresent(K key, BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction)</code>ï¼šå¦‚æœé”®å­˜åœ¨ï¼Œåˆ™å¯¹å…¶å€¼è¿›è¡Œé‡æ–°è®¡ç®—ã€‚</li><li><code>V merge(K key, V value, BiFunction&lt;? super V, ? super V, ? extends V&gt; remappingFunction)</code>ï¼šåˆå¹¶é”®å¯¹åº”çš„å€¼ï¼Œå¯ç”¨äºç»Ÿè®¡å’Œèšåˆæ“ä½œã€‚</li></ul><hr><h3 id="å¸¸è§å®ç°ç±»"><a href="#å¸¸è§å®ç°ç±»" class="headerlink" title="å¸¸è§å®ç°ç±»"></a>å¸¸è§å®ç°ç±»</h3><p>Java æä¾›äº†å¤šç§ Map çš„å®ç°ï¼Œæ ¹æ®ä¸åŒéœ€æ±‚å¯ä»¥é€‰æ‹©åˆé€‚çš„å®ç°ç±»ï¼š</p><div class="table-container"><table><thead><tr><th>å®ç°ç±»</th><th>åº•å±‚ç»“æ„</th><th>æ’åº/é¡ºåº</th><th>çº¿ç¨‹å®‰å…¨æ€§</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>HashMap</strong></td><td>å“ˆå¸Œè¡¨</td><td>æ— åº</td><td>éçº¿ç¨‹å®‰å…¨</td><td>å…è®¸ null é”®å’Œ null å€¼</td></tr><tr><td><strong>LinkedHashMap</strong></td><td>å“ˆå¸Œè¡¨ + é“¾è¡¨</td><td>ç»´æŠ¤æ’å…¥é¡ºåºï¼ˆæˆ–è®¿é—®é¡ºåºï¼‰</td><td>éçº¿ç¨‹å®‰å…¨</td><td>ç›¸æ¯” HashMapï¼Œå¤šäº†é¡ºåºç»´æŠ¤ï¼Œæ€§èƒ½ç•¥ä½</td></tr><tr><td><strong>TreeMap</strong></td><td>çº¢é»‘æ ‘</td><td>æŒ‰é”®çš„è‡ªç„¶é¡ºåºæˆ– Comparator æ’åº</td><td>éçº¿ç¨‹å®‰å…¨</td><td>é”®å¿…é¡»å®ç° Comparable æ¥å£æˆ–æä¾› Comparator</td></tr><tr><td><strong>Hashtable</strong></td><td>å“ˆå¸Œè¡¨</td><td>æ— åº</td><td>çº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰</td><td>ä¸å…è®¸ null é”®å’Œ null å€¼ï¼ˆè¾ƒè€çš„å®ç°ï¼Œä¸æ¨èä½¿ç”¨ï¼‰</td></tr><tr><td><strong>ConcurrentHashMap</strong></td><td>åˆ†æ®µé”å“ˆå¸Œè¡¨</td><td>æ— åº</td><td>çº¿ç¨‹å®‰å…¨ï¼ˆé«˜å¹¶å‘ï¼‰</td><td>é«˜æ•ˆæ”¯æŒå¹¶å‘æ“ä½œï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒ</td></tr></tbody></table></div><hr><h3 id="Java-Map-ä¸-C-STL-Map-çš„å¯¹æ¯”"><a href="#Java-Map-ä¸-C-STL-Map-çš„å¯¹æ¯”" class="headerlink" title="Java Map ä¸ C++ STL Map çš„å¯¹æ¯”"></a>Java Map ä¸ C++ STL Map çš„å¯¹æ¯”</h3><div class="table-container"><table><thead><tr><th>ç‰¹æ€§</th><th>C++ STL Map</th><th>Java Map</th></tr></thead><tbody><tr><td><strong>æ¥å£è®¾è®¡</strong></td><td>å®¹å™¨ç±»ï¼Œé€šå¸¸ç›´æ¥ä½œä¸ºç±»ä½¿ç”¨</td><td>æ¥å£ï¼ˆMap æ¥å£ï¼‰ï¼‹å…·ä½“å®ç°ç±»</td></tr><tr><td><strong>æ’åº/æ— åº</strong></td><td><code>std::map</code>ï¼ˆçº¢é»‘æ ‘å®ç°ï¼Œè‡ªåŠ¨æ’åºï¼‰ï¼Œ<code>std::unordered_map</code>ï¼ˆå“ˆå¸Œè¡¨å®ç°ï¼‰</td><td>TreeMapï¼ˆçº¢é»‘æ ‘å®ç°ï¼Œæ’åºï¼‰ï¼ŒHashMapï¼ˆå“ˆå¸Œè¡¨å®ç°ï¼Œæ— åºï¼‰</td></tr><tr><td><strong>é”®å…è®¸ null</strong></td><td>ä¸æ”¯æŒ null é”®ï¼ˆC++ ä¸­ null ä¸é€‚ç”¨ï¼‰</td><td>HashMap å…è®¸ä¸€ä¸ª null é”®ï¼›TreeMap ä¸å…è®¸ null é”®</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>ä½¿ç”¨ <code>operator[]</code> å’Œ <code>at()</code> æ–¹æ³•</td><td>ä½¿ç”¨ <code>get()</code> å’Œ <code>put()</code> æ–¹æ³•ï¼Œä¸æ”¯æŒä¸‹æ ‡æ“ä½œ</td></tr><tr><td><strong>è¿­ä»£å™¨</strong></td><td>æä¾›åŒå‘è¿­ä»£å™¨ï¼ˆå¯¹äºæœ‰åº mapï¼‰</td><td>æä¾› keySet()/entrySet() ç­‰è§†å›¾ï¼Œé€šå¸¸ç”¨ foreach éå†</td></tr></tbody></table></div><hr><h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Map æ¥å£åŠå…¶å¸¸ç”¨æ–¹æ³•ï¼ˆä»¥ HashMap ä¸ºä¾‹ï¼‰ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•éå† Map çš„ä¸åŒè§†å›¾ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª HashMap å®ä¾‹</span></span><br><span class="line">        Map&lt;String, Integer&gt; scoreMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ’å…¥é”®å€¼å¯¹</span></span><br><span class="line">        scoreMap.put(<span class="string">&quot;Alice&quot;</span>, <span class="number">85</span>);</span><br><span class="line">        scoreMap.put(<span class="string">&quot;Bob&quot;</span>, <span class="number">92</span>);</span><br><span class="line">        scoreMap.put(<span class="string">&quot;Charlie&quot;</span>, <span class="number">78</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è·å–å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">aliceScore</span> <span class="operator">=</span> scoreMap.get(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Alice çš„åˆ†æ•°: &quot;</span> + aliceScore);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (scoreMap.containsKey(<span class="string">&quot;David&quot;</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;David å­˜åœ¨äº Map ä¸­&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;David ä¸å­˜åœ¨äº Map ä¸­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½¿ç”¨ getOrDefault æ–¹æ³•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">davidScore</span> <span class="operator">=</span> scoreMap.getOrDefault(<span class="string">&quot;David&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;David çš„åˆ†æ•°ï¼ˆé»˜è®¤å€¼ä¸º 0ï¼‰: &quot;</span> + davidScore);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éå† Mapï¼šé€šè¿‡ entrySet() éå†é”®å€¼å¯¹</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : scoreMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot; -&gt; &quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼éå† Map</span></span><br><span class="line">        scoreMap.forEach((name, score) -&gt; </span><br><span class="line">            System.out.println(<span class="string">&quot;Lambda éå†: &quot;</span> + name + <span class="string">&quot; -&gt; &quot;</span> + score)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ é™¤æŸä¸ªé”®å€¼å¯¹</span></span><br><span class="line">        scoreMap.remove(<span class="string">&quot;Charlie&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤ Charlie åï¼ŒMap ä¸­çš„å…ƒç´ : &quot;</span> + scoreMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><strong>put()</strong>ï¼šæ’å…¥æˆ–æ›´æ–°é”®å€¼å¯¹ã€‚</li><li><strong>get() / getOrDefault()</strong>ï¼šè·å–æŒ‡å®šé”®çš„å€¼ã€‚</li><li><strong>containsKey()</strong>ï¼šæ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ã€‚</li><li><strong>remove()</strong>ï¼šåˆ é™¤æŒ‡å®šé”®çš„æ˜ å°„ã€‚</li><li><strong>entrySet()ã€keySet()ã€values()</strong>ï¼šæä¾›å¯¹ Map å†…éƒ¨æ•°æ®çš„è§†å›¾ï¼Œæ–¹ä¾¿éå†ã€‚</li></ul><hr><h2 id="6-è¿›é˜¶ï¼šMap-çš„é»˜è®¤æ–¹æ³•ï¼ˆJava-8-ï¼‰"><a href="#6-è¿›é˜¶ï¼šMap-çš„é»˜è®¤æ–¹æ³•ï¼ˆJava-8-ï¼‰" class="headerlink" title="6. è¿›é˜¶ï¼šMap çš„é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰"></a>6. è¿›é˜¶ï¼šMap çš„é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰</h2><p>Java 8 å¼•å…¥äº†ä¸€ç³»åˆ—é»˜è®¤æ–¹æ³•ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº† Map çš„æ“ä½œã€‚ä¾‹å¦‚ï¼š</p><ul><li><strong>computeIfAbsent()</strong><br>  å¦‚æœæŒ‡å®šçš„é”®ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ç»™å®šå‡½æ•°è®¡ç®—ä¸€ä¸ªå€¼å¹¶æ’å…¥ Mapï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoreMap.computeIfAbsent(<span class="string">&quot;David&quot;</span>, key -&gt; <span class="number">80</span>);  <span class="comment">// å¦‚æœ David ä¸å­˜åœ¨ï¼Œåˆ™èµ‹å€¼ 80</span></span><br></pre></td></tr></table></figure><ul><li><strong>merge()</strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`scoreMap.merge(<span class="string">&quot;Alice&quot;</span>, <span class="number">5</span>, (oldVal, newVal) -&gt; oldVal + newVal);  <span class="comment">// Alice çš„åˆ†æ•°åŠ  5`</span></span><br></pre></td></tr></table></figure></li></ul><p>è¿™äº›é»˜è®¤æ–¹æ³•ä½¿å¾—å¯¹ Map çš„æ“ä½œæ›´åŠ çµæ´»å’Œç®€æ´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³›å‹</title>
      <link href="/2025/02/02/%E6%B3%9B%E5%9E%8B/"/>
      <url>/2025/02/02/%E6%B3%9B%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å’Œcppæ¨¡æ¿å…ƒç¼–ç¨‹ä¸€æ ·ï¼ŒJavaä¹Ÿæä¾›äº†æ³›å‹ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç±»å&lt;T&gt;</span><br></pre></td></tr></table></figure><h2 id="é«˜çº§ç”¨æ³•ï¼š"><a href="#é«˜çº§ç”¨æ³•ï¼š" class="headerlink" title="é«˜çº§ç”¨æ³•ï¼š"></a>é«˜çº§ç”¨æ³•ï¼š</h2><h3 id="1-é™åˆ¶æ³›å‹å¯ä½¿ç”¨ç±»å‹"><a href="#1-é™åˆ¶æ³›å‹å¯ä½¿ç”¨ç±»å‹" class="headerlink" title="1. é™åˆ¶æ³›å‹å¯ä½¿ç”¨ç±»å‹"></a>1. é™åˆ¶æ³›å‹å¯ä½¿ç”¨ç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class ç±»å&lt;T <span class="keyword">extends</span> <span class="title class_">anyclass</span>&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œanyclassæ˜¯æŒ‡æŸä¸ªæ¥å£æˆ–è€…ç±»<br>ä½¿ç”¨æ³›å‹é™åˆ¶åï¼Œæ³›å‹ç±»å‹å¿…é¡»ç»§æ‰¿æˆ–è€…å®ç°äº†anyclassè¿™ä¸ªæ¥å£æˆ–è€…ç±»</p><h2 id="2-ç±»å‹é€šé…ç¬¦"><a href="#2-ç±»å‹é€šé…ç¬¦" class="headerlink" title="2. ç±»å‹é€šé…ç¬¦"></a>2. ç±»å‹é€šé…ç¬¦</h2><p>åœ¨æ³›å‹æœºåˆ¶ä¸­ï¼Œæä¾›äº†ç±»å‹é€šé…ç¬¦ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»å¯¹è±¡çš„æ—¶å€™</p><ul><li><p><strong>æ³›å‹ä¸­çš„é€šé…ç¬¦</strong>ï¼š<br>  <code>Constructor&lt;T&gt;</code> æ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œä»£è¡¨æŸä¸ªç±» <code>T</code> çš„æ„é€ æ–¹æ³•ã€‚<br>  ä½¿ç”¨ <code>Constructor&lt;?&gt;</code> è¡¨ç¤ºä½ å…³å¿ƒçš„æ˜¯â€œæŸä¸ªç±»çš„æ„é€ æ–¹æ³•â€ï¼Œä½†å…·ä½“çš„ç±»å‹å‚æ•°ä½ å¹¶ä¸å…³å¿ƒæˆ–ä¸éœ€è¦æŒ‡å®šã€‚</p></li><li><p><strong>ç›®çš„</strong>ï¼š  </p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚å¸¸å¤„ç†</title>
      <link href="/2025/02/02/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
      <url>/2025/02/02/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨ Java çš„å¼‚å¸¸å¤„ç†ä¸­ï¼Œ<code>throw</code> å…³é”®å­—ç”¨äºæ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œè€Œ <code>throws</code> å…³é”®å­—ç”¨äºå£°æ˜æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Java çš„æœ€æ–°å¼‚å¸¸å¤„ç†æœºåˆ¶åŠ <code>try-catch-throw</code> çš„ç”¨æ³•ã€‚</p><hr><h2 id="1-throw-å…³é”®å­—"><a href="#1-throw-å…³é”®å­—" class="headerlink" title="1. throw å…³é”®å­—"></a>1. <code>throw</code> å…³é”®å­—</h2><p><code>throw</code> ç”¨äºåœ¨ä»£ç ä¸­æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé€šå¸¸ç”¨äºå¼‚å¸¸æ£€æµ‹ã€é”™è¯¯å¤„ç†æˆ–è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><h3 id="throw-çš„ä½œç”¨"><a href="#throw-çš„ä½œç”¨" class="headerlink" title="throw çš„ä½œç”¨"></a><code>throw</code> çš„ä½œç”¨</h3><p><code>throw</code> å…³é”®å­—çš„ä¸»è¦ä½œç”¨æ˜¯<strong>æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œè®©ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶ä¸»åŠ¨ç»ˆæ­¢å½“å‰ä»£ç é€»è¾‘ï¼Œå¹¶å°†å¼‚å¸¸äº¤ç»™ä¸Šå±‚ä»£ç å¤„ç†ã€‚</p><p>åœ¨ Java ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ç³»ç»Ÿé‡åˆ°é”™è¯¯æ—¶æ‰ä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œæ¯”å¦‚ <code>NullPointerException</code>ã€<code>ArithmeticException</code> ç­‰ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦<strong>è‡ªå·±å®šä¹‰é”™è¯¯æƒ…å†µ</strong>ï¼Œå¹¶ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…çŸ¥é“å‘ç”Ÿäº†é—®é¢˜ï¼Œè¿™æ—¶å€™å°±ç”¨ <code>throw</code>ã€‚</p><h3 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> å¼‚å¸¸ç±»å¯¹è±¡;`</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowExample</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;             </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æœªæˆå¹´äººä¸èƒ½æ³¨å†Œï¼&quot;</span>);         </span><br><span class="line">        &#125;         </span><br><span class="line">        System.out.println(<span class="string">&quot;æ³¨å†ŒæˆåŠŸï¼&quot;</span>);     </span><br><span class="line">    &#125;      </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;         </span><br><span class="line">        checkAge(<span class="number">15</span>); <span class="comment">// è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸     </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="throw-çš„ä½¿ç”¨åœºæ™¯"><a href="#throw-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="throw çš„ä½¿ç”¨åœºæ™¯"></a><code>throw</code> çš„ä½¿ç”¨åœºæ™¯</h3><h4 id="1-æ ¡éªŒè¾“å…¥å‚æ•°"><a href="#1-æ ¡éªŒè¾“å…¥å‚æ•°" class="headerlink" title="1. æ ¡éªŒè¾“å…¥å‚æ•°"></a>1. <strong>æ ¡éªŒè¾“å…¥å‚æ•°</strong></h4><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒåªèƒ½å¤„ç†å¹´é¾„ <code>&gt;= 18</code> çš„æƒ…å†µï¼Œå¦‚æœå¹´é¾„å°äº 18ï¼Œå°±åº”è¯¥æŠ¥é”™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æœªæˆå¹´äººä¸èƒ½æ³¨å†Œï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ³¨å†ŒæˆåŠŸï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        checkAge(<span class="number">15</span>); <span class="comment">// è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.IllegalArgumentException: æœªæˆå¹´äººä¸èƒ½æ³¨å†Œï¼</span><br></pre></td></tr></table></figure><p>ğŸ‘‰ <strong>ä½œç”¨ï¼š</strong> å½“ <code>age &lt; 18</code> æ—¶ï¼Œæˆ‘ä»¬ä¸»åŠ¨æŠ›å‡º <code>IllegalArgumentException</code>ï¼Œè®©ç¨‹åºåœæ­¢æ‰§è¡Œï¼Œå¹¶å‘Šè¯‰è°ƒç”¨è€…<strong>å¹´é¾„ä¸ç¬¦åˆè¦æ±‚</strong>ã€‚</p><hr><h4 id="2-é¿å…é”™è¯¯å€¼ç»§ç»­ä¼ æ’­"><a href="#2-é¿å…é”™è¯¯å€¼ç»§ç»­ä¼ æ’­" class="headerlink" title="2. é¿å…é”™è¯¯å€¼ç»§ç»­ä¼ æ’­"></a>2. <strong>é¿å…é”™è¯¯å€¼ç»§ç»­ä¼ æ’­</strong></h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—æ–¹æ³•ï¼Œä½†è¾“å…¥ä¸èƒ½æ˜¯è´Ÿæ•°ï¼Œå¦åˆ™è®¡ç®—å°±æ²¡æœ‰æ„ä¹‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sqrt</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;è´Ÿæ•°ä¸èƒ½å¼€å¹³æ–¹ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) Math.sqrt(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(sqrt(-<span class="number">9</span>)); <span class="comment">// æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArithmeticException: è´Ÿæ•°ä¸èƒ½å¼€å¹³æ–¹ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸ‘‰ <strong>ä½œç”¨ï¼š</strong> è¿™é‡Œå¦‚æœä¸åŠ  <code>throw</code>ï¼Œ<code>Math.sqrt(-9)</code> å¯èƒ½ä¼šè¿”å› <code>NaN</code>ï¼Œå½±å“è®¡ç®—ç»“æœã€‚ä¸»åŠ¨æŠ›å¼‚å¸¸å¯ä»¥<strong>é˜»æ­¢é”™è¯¯ç»§ç»­ä¼ æ’­</strong>ï¼Œè®©è°ƒç”¨è€…çŸ¥é“æ•°æ®ä¸åˆæ³•ã€‚</p><hr><h4 id="3-åœ¨-catch-é‡Œé‡æ–°æŠ›å‡ºå¼‚å¸¸"><a href="#3-åœ¨-catch-é‡Œé‡æ–°æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="3. åœ¨ catch é‡Œé‡æ–°æŠ›å‡ºå¼‚å¸¸"></a>3. <strong>åœ¨ catch é‡Œé‡æ–°æŠ›å‡ºå¼‚å¸¸</strong></h4><p>æœ‰æ—¶å€™ï¼Œç¨‹åºæ•è·å¼‚å¸¸åï¼Œ<strong>ä»ç„¶å¸Œæœ›æŠŠå¼‚å¸¸æŠ›å‡ºå»</strong>ï¼Œè®©ä¸Šå±‚ä»£ç å¤„ç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReThrowExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a / b;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ•è·å¼‚å¸¸ï¼Œä½†ç»§ç»­æŠ›å‡º&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> e; <span class="comment">// é‡æ–°æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        divide(<span class="number">10</span>, <span class="number">0</span>); <span class="comment">// è¿™é‡Œæœ€ç»ˆä»ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ•è·å¼‚å¸¸ï¼Œä½†ç»§ç»­æŠ›å‡º</span><br><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ArithmeticException: / by zero</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸ‘‰ <strong>ä½œç”¨ï¼š</strong> åœ¨ <code>catch</code> é‡Œå…ˆè®°å½•æ—¥å¿—ï¼Œç„¶åå†ç”¨ <code>throw</code> é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œè®©å¤–éƒ¨è°ƒç”¨è€…çŸ¥é“å‡ºé”™äº†ã€‚</p><hr><h3 id="4-æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸"><a href="#4-æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="4. æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸"></a>4. <strong>æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸</strong></h3><p>å¦‚æœ Java è‡ªå¸¦çš„å¼‚å¸¸ä¸å¤Ÿç”¨ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰å¼‚å¸¸ï¼Œå¹¶åœ¨ <code>throw</code> é‡Œä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomThrowExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkValue</span><span class="params">(<span class="type">int</span> value)</span> <span class="keyword">throws</span> MyException &#123;</span><br><span class="line">        <span class="keyword">if</span> (value &gt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;æ•°å€¼ä¸èƒ½å¤§äº 100ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkValue(<span class="number">150</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MyException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è‡ªå®šä¹‰å¼‚å¸¸æ•è·ï¼š&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è‡ªå®šä¹‰å¼‚å¸¸æ•è·ï¼šæ•°å€¼ä¸èƒ½å¤§äº <span class="number">100</span>ï¼</span><br></pre></td></tr></table></figure><hr><h2 id="2-throws-å…³é”®å­—"><a href="#2-throws-å…³é”®å­—" class="headerlink" title="2. throws å…³é”®å­—"></a>2. <code>throws</code> å…³é”®å­—</h2><p><code>throws</code> ç”¨äºå£°æ˜æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…çŸ¥é“è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h3 id="è¯­æ³•ï¼š-1"><a href="#è¯­æ³•ï¼š-1" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿”å›ç±»å‹ æ–¹æ³•å(...) <span class="keyword">throws</span> å¼‚å¸¸ç±»å‹<span class="number">1</span>, å¼‚å¸¸ç±»å‹<span class="number">2</span> &#123;     <span class="comment">// å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„ä»£ç  &#125;`</span></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowsExample</span> &#123;     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readFile</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> FileNotFoundException &#123;         </span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath);         </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(file); <span class="comment">// å¯èƒ½æŠ›å‡º FileNotFoundException     </span></span><br><span class="line">    &#125;      </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;         </span><br><span class="line">        <span class="keyword">try</span> &#123;             </span><br><span class="line">            readFile(<span class="string">&quot;test.txt&quot;</span>);         </span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;             </span><br><span class="line">            System.out.println(<span class="string">&quot;æ–‡ä»¶æœªæ‰¾åˆ°: &quot;</span> + e.getMessage());         </span><br><span class="line">        &#125;     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-try-catch-æ•è·å¼‚å¸¸"><a href="#3-try-catch-æ•è·å¼‚å¸¸" class="headerlink" title="3. try-catch æ•è·å¼‚å¸¸"></a>3. <code>try-catch</code> æ•è·å¼‚å¸¸</h2><p><code>try-catch</code> è¯­å¥ç”¨äºæ•è·å¼‚å¸¸ï¼Œå¹¶åœ¨ <code>catch</code> å—ä¸­å¤„ç†å¼‚å¸¸ï¼Œè€Œä¸ä¼šå¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚</p><h3 id="è¯­æ³•ï¼š-2"><a href="#è¯­æ³•ï¼š-2" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;     </span><br><span class="line">    <span class="comment">// å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç  </span></span><br><span class="line">&#125; <span class="keyword">catch</span> (å¼‚å¸¸ç±»å‹ å˜é‡) &#123;     </span><br><span class="line">    <span class="comment">// å¤„ç†å¼‚å¸¸ </span></span><br><span class="line">&#125;</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">**ç¤ºä¾‹ï¼š**</span><br><span class="line"></span><br><span class="line">java</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line"></span><br><span class="line">`<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TryCatchExample</span> &#123;     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;         <span class="keyword">try</span> &#123;             <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>; <span class="comment">// å¯èƒ½æŠ›å‡º ArithmeticException         &#125; catch (ArithmeticException e) &#123;             System.out.println(&quot;å‘ç”Ÿå¼‚å¸¸: &quot; + e.getMessage());         &#125;     &#125; &#125;`</span></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## <span class="number">4.</span> `<span class="keyword">try</span>-with-resources`ï¼ˆæœ€æ–° Java å¤„ç†æ–¹å¼ï¼‰</span><br><span class="line"></span><br><span class="line">Java <span class="number">7</span> å¼•å…¥äº† **<span class="keyword">try</span>-with-resources**ï¼Œç”¨äºè‡ªåŠ¨å…³é—­å®ç° `AutoCloseable` æ¥å£çš„èµ„æºï¼ˆå¦‚æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">### è¯­æ³•ï¼š</span><br><span class="line"></span><br><span class="line">```Java</span><br><span class="line"><span class="title function_">try</span> <span class="params">(èµ„æºå£°æ˜)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨èµ„æºçš„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">catch</span> (å¼‚å¸¸ç±»å‹ å˜é‡) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å¼‚å¸¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼ˆè‡ªåŠ¨å…³é—­æ–‡ä»¶æµï¼‰ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TryWithResourcesExample</span> &#123;     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;         </span><br><span class="line">        <span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;test.txt&quot;</span>))) &#123;</span><br><span class="line">            System.out.println(reader.readLine());         </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;             </span><br><span class="line">            System.out.println(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: &quot;</span> + e.getMessage());         </span><br><span class="line">        &#125;     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>try</code> å—ç»“æŸåï¼Œ<code>BufferedReader</code> ä¼šè‡ªåŠ¨å…³é—­ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ <code>close()</code>ã€‚</p><hr><h2 id="5-finally-è¯­å¥"><a href="#5-finally-è¯­å¥" class="headerlink" title="5. finally è¯­å¥"></a>5. <code>finally</code> è¯­å¥</h2><p><code>finally</code> å—ç”¨äºç¡®ä¿æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½è¦æ‰§è¡Œçš„ä»£ç ï¼ˆä¾‹å¦‚èµ„æºé‡Šæ”¾ï¼‰ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinallyExample</span> &#123;     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;         </span><br><span class="line">        <span class="keyword">try</span> &#123;             </span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>;         </span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;             </span><br><span class="line">            System.out.println(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸: &quot;</span> + e.getMessage());         </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;             </span><br><span class="line">            System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸï¼&quot;</span>);         </span><br><span class="line">        &#125;     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œ<code>finally</code> ä¾ç„¶ä¼šæ‰§è¡Œ <code>&quot;ç¨‹åºæ‰§è¡Œç»“æŸï¼&quot;</code>ã€‚</p><hr><h2 id="6-è‡ªå®šä¹‰å¼‚å¸¸"><a href="#6-è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="6. è‡ªå®šä¹‰å¼‚å¸¸"></a>6. è‡ªå®šä¹‰å¼‚å¸¸</h2><p>å¦‚æœ Java ç°æœ‰å¼‚å¸¸ç±»ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆç»§æ‰¿ <code>Exception</code> æˆ– <code>RuntimeException</code>ï¼‰ã€‚</p><h3 id="å—æ£€å¼‚å¸¸ï¼ˆå¿…é¡»-throws-å¤„ç†ï¼‰"><a href="#å—æ£€å¼‚å¸¸ï¼ˆå¿…é¡»-throws-å¤„ç†ï¼‰" class="headerlink" title="å—æ£€å¼‚å¸¸ï¼ˆå¿…é¡» throws å¤„ç†ï¼‰"></a>å—æ£€å¼‚å¸¸ï¼ˆå¿…é¡» <code>throws</code> å¤„ç†ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCheckedException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCheckedException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomExceptionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">validate</span><span class="params">(<span class="type">int</span> num)</span> <span class="keyword">throws</span> MyCheckedException &#123;</span><br><span class="line">        <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyCheckedException</span>(<span class="string">&quot;æ•°å­—ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            validate(-<span class="number">5</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MyCheckedException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ•è·å¼‚å¸¸: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¯é€‰-throws-å¤„ç†ï¼‰"><a href="#è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¯é€‰-throws-å¤„ç†ï¼‰" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¯é€‰ throws å¤„ç†ï¼‰"></a>è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¯é€‰ <code>throws</code> å¤„ç†ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRuntimeException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyRuntimeException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomRuntimeExceptionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">validate</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyRuntimeException</span>(<span class="string">&quot;æ•°å­—ä¸èƒ½ä¸ºè´Ÿæ•°ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        validate(-<span class="number">5</span>); <span class="comment">// ç›´æ¥æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œæ—¶å¼‚å¸¸ä¸å¼ºåˆ¶ <code>throws</code> å¤„ç†ã€‚</p><hr><h2 id="7-æœ€æ–°-Java-å¼‚å¸¸å¤„ç†æ”¹è¿›ï¼ˆJava-9-ï¼‰"><a href="#7-æœ€æ–°-Java-å¼‚å¸¸å¤„ç†æ”¹è¿›ï¼ˆJava-9-ï¼‰" class="headerlink" title="7. æœ€æ–° Java å¼‚å¸¸å¤„ç†æ”¹è¿›ï¼ˆJava 9+ï¼‰"></a>7. æœ€æ–° Java å¼‚å¸¸å¤„ç†æ”¹è¿›ï¼ˆJava 9+ï¼‰</h2><h3 id="1-try-with-resources-èµ„æºç®¡ç†æ”¹è¿›"><a href="#1-try-with-resources-èµ„æºç®¡ç†æ”¹è¿›" class="headerlink" title="1. try-with-resources èµ„æºç®¡ç†æ”¹è¿›"></a>1. <strong>try-with-resources èµ„æºç®¡ç†æ”¹è¿›</strong></h3><p>åœ¨ Java 9 ä¹‹å‰ï¼Œ<code>try-with-resources</code> åªèƒ½åœ¨ <code>try(èµ„æº)</code> ä¸­å£°æ˜æ–°èµ„æºï¼›ä» Java 9 å¼€å§‹ï¼Œå¯ä»¥åœ¨ <code>try</code> ä¹‹å¤–å£°æ˜èµ„æºï¼Œç„¶ååœ¨ <code>try</code> è¯­å¥ä¸­ä½¿ç”¨ã€‚</p><p><strong>Java 9+ ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;test.txt&quot;</span>));</span><br><span class="line"><span class="keyword">try</span> (reader) &#123; <span class="comment">// è¿™é‡Œ reader ä»ç„¶ä¼šè‡ªåŠ¨å…³é—­</span></span><br><span class="line">    System.out.println(reader.readLine());</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: &quot;</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-å¤šå¼‚å¸¸æ•è·ï¼ˆJava-7-ï¼‰"><a href="#2-å¤šå¼‚å¸¸æ•è·ï¼ˆJava-7-ï¼‰" class="headerlink" title="2. å¤šå¼‚å¸¸æ•è·ï¼ˆJava 7+ï¼‰"></a>2. <strong>å¤šå¼‚å¸¸æ•è·ï¼ˆJava 7+ï¼‰</strong></h3><p>å¯ä»¥åœ¨ä¸€ä¸ª <code>catch</code> å—ä¸­æ•è·å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œæé«˜ä»£ç ç®€æ´æ€§ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (NumberFormatException | NullPointerException e) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸: &quot;</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><div class="table-container"><table><thead><tr><th>å…³é”®å­—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>throw</code></td><td>æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>throws</code></td><td>å£°æ˜æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸</td></tr><tr><td><code>try-catch</code></td><td>æ•è·å¹¶å¤„ç†å¼‚å¸¸</td></tr><tr><td><code>finally</code></td><td>æ— è®ºå¼‚å¸¸æ˜¯å¦å‘ç”Ÿï¼Œéƒ½ä¼šæ‰§è¡Œ</td></tr><tr><td><code>try-with-resources</code></td><td>è‡ªåŠ¨å…³é—­èµ„æºï¼ˆJava 7+ï¼‰</td></tr><tr><td>å¤šå¼‚å¸¸æ•è·</td><td>ä¸€ä¸ª <code>catch</code> å¤„ç†å¤šä¸ªå¼‚å¸¸ï¼ˆJava 7+ï¼‰</td></tr></tbody></table></div><hr><h2 id="å¼‚å¸¸ç±»"><a href="#å¼‚å¸¸ç±»" class="headerlink" title="å¼‚å¸¸ç±»"></a>å¼‚å¸¸ç±»</h2><p>Javaé‡Œé¢æ¯ä¸ªç±»éƒ½å®šä¹‰äº†å¼‚å¸¸ç±»<br>æ‰€æœ‰çš„ç±»éƒ½æ˜¯Throwableçš„å­ç±»</p><p>Throwableæ´¾ç”Ÿäº†ä¸¤ä¸ªç±»</p><ul><li>Error (IOError, LinkageError)</li><li>Exception (RuntimeError, å…¶ä»–å­ç±»)</li></ul><hr><h2 id="ä½¿ç”¨åŸåˆ™"><a href="#ä½¿ç”¨åŸåˆ™" class="headerlink" title="ä½¿ç”¨åŸåˆ™"></a>ä½¿ç”¨åŸåˆ™</h2><ul><li>åœ¨å½“å‰æ–¹æ³•å£°æ˜ä½¿ç”¨try-catchè¯­å¥æ•è·å¼‚å¸¸</li><li>ä¸€ä¸ªæ–¹æ³•è¢«è¦†ç›–æ—¶å€™ï¼Œè¦†ç›–ä»–çš„æ–¹æ³•å¿…é¡»æŠ›å‡ºç›¸åŒçš„å¼‚å¸¸æˆ–è€…å¼‚å¸¸çš„å­ç±»</li><li>å¦‚æœçˆ¶ç±»æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œåˆ™è¦†ç›–ä»–çš„æ–¹æ³•å¿…é¡»æŠ›å‡ºé‚£äº›å¼‚å¸¸çš„ä¸€ä¸ªå­é›†ï¼Œä¸èƒ½æŠ›å‡ºæ–°çš„å¼‚å¸¸ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ•°å­—å¤„ç†ç±»</title>
      <link href="/2025/01/27/%E6%95%B0%E5%AD%97%E5%A4%84%E7%90%86%E7%B1%BB/"/>
      <url>/2025/01/27/%E6%95%B0%E5%AD%97%E5%A4%84%E7%90%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>æ­¤å¤„ä¸»è¦è®°å½•ä½¿ç”¨DecimalFormatæ ¼å¼åŒ–æµ®ç‚¹æ•°çš„æ–¹æ³•</p></blockquote><p>åœ¨Javaä¸­ï¼Œé»˜è®¤æ ¼å¼åŒ–å½¢å¼æ˜¯:</p><ul><li>å¦‚æœæ•°å­—å¤§äº0.001åŒæ—¶å°äº10000000ï¼Œåˆ™ä½¿ç”¨å¸¸è§„å°æ•°è¡¨ç¤º</li><li>å¦‚æœä¸åœ¨è¿™ä¸ªèŒƒå›´å†…æ˜¯ç”¨ç§‘å­¦è®¡æ•°æ³•</li></ul><p>ä½¿ç”¨DecimalFormatå¯ä»¥æ ¼å¼åŒ–æµ®ç‚¹æ•°</p><h2 id="1-å¸¸è§ç”¨æ³•"><a href="#1-å¸¸è§ç”¨æ³•" class="headerlink" title="1. å¸¸è§ç”¨æ³•"></a><strong>1. å¸¸è§ç”¨æ³•</strong></h2><h3 id="1-1-æ§åˆ¶å°æ•°ä½æ•°"><a href="#1-1-æ§åˆ¶å°æ•°ä½æ•°" class="headerlink" title="1.1 æ§åˆ¶å°æ•°ä½æ•°"></a><strong>1.1 æ§åˆ¶å°æ•°ä½æ•°</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">DecimalFormat</span> <span class="variable">df1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.00&quot;</span>); <span class="comment">// ä¿ç•™2ä½å°æ•°ï¼ˆä¸è¶³è¡¥0ï¼‰</span></span><br><span class="line">            <span class="type">DecimalFormat</span> <span class="variable">df2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##&quot;</span>); <span class="comment">// ä¿ç•™æœ€å¤š2ä½å°æ•°ï¼ˆä¸è¶³ä¸è¡¥0ï¼‰</span></span><br><span class="line">            System.out.println(df1.format(<span class="number">3.1</span>));  <span class="comment">// è¾“å‡º: 3.10   </span></span><br><span class="line">            System.out.println(df2.format(<span class="number">3.1</span>));  <span class="comment">// è¾“å‡º: 3.1</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure><hr><h3 id="1-2-åƒä½åˆ†éš”ç¬¦"><a href="#1-2-åƒä½åˆ†éš”ç¬¦" class="headerlink" title="1.2 åƒä½åˆ†éš”ç¬¦"></a><strong>1.2 åƒä½åˆ†éš”ç¬¦</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#,###.00&quot;</span>); </span><br><span class="line">System.out.println(df.format(<span class="number">1234567.89</span>));  <span class="comment">// è¾“å‡º: 1,234,567.89 </span></span><br><span class="line">System.out.println(df.format(<span class="number">5.2</span>));         <span class="comment">// è¾“å‡º: 5.20`</span></span><br></pre></td></tr></table></figure><ul><li><code>#,###.00</code>ï¼š<strong><code>#</code> è¡¨ç¤ºå¯é€‰ä½ï¼Œ<code>,</code> è¡¨ç¤ºåƒä½åˆ†éš”ç¬¦</strong></li><li><strong>è‹¥ä¸è¶³ä¸¤ä½å°æ•°ï¼Œè‡ªåŠ¨è¡¥ 0</strong></li></ul><hr><h3 id="1-3-å‰å¯¼é›¶"><a href="#1-3-å‰å¯¼é›¶" class="headerlink" title="1.3 å‰å¯¼é›¶"></a><strong>1.3 å‰å¯¼é›¶</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;00000.00&quot;</span>); </span><br><span class="line">System.out.println(df.format(<span class="number">7.2</span>));  <span class="comment">// è¾“å‡º: 00007.20`</span></span><br></pre></td></tr></table></figure><ul><li><code>00000.00</code>ï¼š<strong>æ•´æ•°éƒ¨åˆ†è‡³å°‘ 5 ä½ï¼Œä¸è¶³è¡¥ 0ï¼Œå°æ•°éƒ¨åˆ†å›ºå®š 2 ä½</strong></li></ul><hr><h3 id="1-4-ç™¾åˆ†æ¯”"><a href="#1-4-ç™¾åˆ†æ¯”" class="headerlink" title="1.4 ç™¾åˆ†æ¯”"></a><strong>1.4 ç™¾åˆ†æ¯”</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##%&quot;</span>);</span><br><span class="line">System.out.println(df.format(<span class="number">0.2567</span>));  <span class="comment">// è¾“å‡º: 25.67%`</span></span><br></pre></td></tr></table></figure><ul><li><code>#%</code>ï¼š<strong>è‡ªåŠ¨ Ã—100ï¼Œå¹¶åŠ  <code>%</code></strong></li></ul><hr><h3 id="1-5-è‡ªå®šä¹‰å‰åç¼€"><a href="#1-5-è‡ªå®šä¹‰å‰åç¼€" class="headerlink" title="1.5 è‡ªå®šä¹‰å‰åç¼€"></a><strong>1.5 è‡ªå®šä¹‰å‰åç¼€</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;ï¿¥#,###.00å…ƒ&quot;</span>);</span><br><span class="line">System.out.println(df.format(<span class="number">12345.6</span>));  <span class="comment">// è¾“å‡º: ï¿¥12,345.60å…ƒ`</span></span><br></pre></td></tr></table></figure><ul><li><strong>å‰åç¼€</strong>ï¼ˆå¦‚ <code>ï¿¥</code>ã€<code>å…ƒ</code>ï¼‰ä¼šç›´æ¥åŠ åœ¨æ ¼å¼åŒ–ç»“æœä¸­</li></ul><hr><h3 id="1-6-è§£æå­—ç¬¦ä¸²ä¸ºæ•°å­—"><a href="#1-6-è§£æå­—ç¬¦ä¸²ä¸ºæ•°å­—" class="headerlink" title="1.6 è§£æå­—ç¬¦ä¸²ä¸ºæ•°å­—"></a><strong>1.6 è§£æå­—ç¬¦ä¸²ä¸ºæ•°å­—</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat; </span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123; </span><br><span class="line">        <span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#,###.00&quot;</span>);</span><br><span class="line">    <span class="type">Number</span> <span class="variable">num</span> <span class="operator">=</span> df.parse(<span class="string">&quot;1,234,567.89&quot;</span>);         </span><br><span class="line">        System.out.println(num.doubleValue()); <span class="comment">// è¾“å‡º: 1234567.89     </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure><ul><li><strong><code>parse()</code> æ–¹æ³•èƒ½å°†æ ¼å¼åŒ–å­—ç¬¦ä¸²è½¬æ¢å› <code>Number</code></strong></li></ul><hr><h2 id="2-DecimalFormat-vs-String-format-vs-BigDecimal"><a href="#2-DecimalFormat-vs-String-format-vs-BigDecimal" class="headerlink" title="2. DecimalFormat vs String.format() vs BigDecimal"></a><strong>2. <code>DecimalFormat</code> vs <code>String.format()</code> vs <code>BigDecimal</code></strong></h2><div class="table-container"><table><thead><tr><th>æ–¹æ³•</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>DecimalFormat</code></td><td><strong>å¤æ‚æ ¼å¼</strong>ï¼ˆå‰å¯¼é›¶ã€åƒåˆ†ä½ã€å‰åç¼€ï¼‰</td><td><code>new DecimalFormat(&quot;#,###.00&quot;).format(1234567.89)</code></td></tr><tr><td><code>String.format()</code></td><td><strong>ç®€å•æ ¼å¼</strong>ï¼ˆå°æ•°ç‚¹ã€åƒåˆ†ä½ï¼‰</td><td><code>String.format(&quot;%,.2f&quot;, 1234567.89)</code></td></tr><tr><td><code>BigDecimal</code></td><td><strong>é«˜ç²¾åº¦è®¡ç®—</strong>ï¼ˆé‡‘è/ç§‘å­¦è®¡ç®—ï¼‰</td><td><code>new BigDecimal(&quot;1234.56789&quot;).setScale(2, RoundingMode.HALF_UP)</code></td></tr></tbody></table></div><h2 id="é€šè¿‡ç‰¹æ®Šæ–¹æ³•"><a href="#é€šè¿‡ç‰¹æ®Šæ–¹æ³•" class="headerlink" title="é€šè¿‡ç‰¹æ®Šæ–¹æ³•"></a>é€šè¿‡ç‰¹æ®Šæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DecimalFormat</span> <span class="variable">ft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>();  </span><br><span class="line">ft.setGroupingSize(<span class="number">2</span>); <span class="comment">//å°†æ•°å­—åˆ†ç»„ä¸ºäºŒ  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">out</span> <span class="operator">=</span> ft.format(<span class="number">12335.889</span>);  </span><br><span class="line">System.out.println(out);  </span><br><span class="line">ft.setGroupingUsed(<span class="literal">false</span>);  <span class="comment">//è®¾ç½®ä¸å¯ä»¥åˆ†ç»„</span></span><br><span class="line">out = ft.format(<span class="number">12335.889</span>);  </span><br><span class="line">System.out.println(out);</span><br></pre></td></tr></table></figure><hr><h2 id="æ•°å­¦è¿ç®—Mathç±»"><a href="#æ•°å­¦è¿ç®—Mathç±»" class="headerlink" title="æ•°å­¦è¿ç®—Mathç±»"></a>æ•°å­¦è¿ç®—Mathç±»</h2><p>Mathç±»å¯ä»¥å®ç°å¾ˆå¤šæ•°å­¦è¿ç®—</p><h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><ul><li>Math.PI \ï¼ˆpai\ï¼‰</li><li>Math.E</li></ul><h2 id="å¸¸ç”¨æ•°å­¦æ–¹æ³•"><a href="#å¸¸ç”¨æ•°å­¦æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ•°å­¦æ–¹æ³•:"></a>å¸¸ç”¨æ•°å­¦æ–¹æ³•:</h2><ul><li>double sin(double a)</li><li>var cos</li><li>tan</li><li>asin</li><li>acos</li><li>atan</li><li>toRadians() //å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</li><li>toDegrees() // å°†å¼§åº¦è½¬åŒ–ä¸ºè§’åº¦</li><li>exp() //eçš„å‡ æ¬¡æ–¹</li><li>pow(double a, double b): å–açš„bæ¬¡æ–¹</li><li>sqrt</li><li>cbrt //ç«‹æ–¹æ ¹</li><li>log(double a) // lna</li><li>log10(double a)</li></ul><p>éƒ½æ˜¯ä¼ å…¥doubleè¿”å›doubleï¼Œæ‰€ä»¥ç²¾åº¦ä¸å‡†ç¡®</p><h3 id="å–æ•´å‡½æ•°ç”¨æ³•"><a href="#å–æ•´å‡½æ•°ç”¨æ³•" class="headerlink" title="å–æ•´å‡½æ•°ç”¨æ³•:"></a>å–æ•´å‡½æ•°ç”¨æ³•:</h3><ul><li>ceil(double a) : å‘ä¸Šå–æ•´</li><li>floor</li><li>rint(double): è¿”å›å’Œå‚æ•°æœ€è¿‘çš„æ•´æ•°ï¼Œå¦‚æœè·ç¦»ä¸€æ ·åˆ™å–å¾—å¶æ•°</li></ul><h3 id="æœ€å¤§å€¼æœ€å°å€¼ç»å¯¹å€¼"><a href="#æœ€å¤§å€¼æœ€å°å€¼ç»å¯¹å€¼" class="headerlink" title="æœ€å¤§å€¼æœ€å°å€¼ç»å¯¹å€¼"></a>æœ€å¤§å€¼æœ€å°å€¼ç»å¯¹å€¼</h3><blockquote><p>å’Œcppä¸€æ ·ä¹Ÿé‡è½½äº†</p></blockquote><ul><li>max</li><li>min</li><li>abs</li></ul><h3 id="éšæœºæ•°"><a href="#éšæœºæ•°" class="headerlink" title="éšæœºæ•°"></a>éšæœºæ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Math.Random()</span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤ç”Ÿäº§çš„æ˜¯ 0  - 1 ä¹‹é—´çš„ä»»ä½•doubleæ•°å­—ï¼Œä½†æ˜¯ç¨åŠ å¤„ç†å°±å¯ä»¥å˜æˆäº§ç”Ÿä»»æ„èŒƒå›´çš„æ•°å­—:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m + (<span class="type">int</span>)(Math.Random() * n) <span class="comment">// è¿”å›[m, m + n)ä¹‹é—´çš„æ•°å­—</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>é™¤äº†Mathçš„Randomç±»ï¼ŒJavaæœ‰ä¸€ä¸ªRandomä¸“é—¨æ¥è¿”å›éšæœºæ•°å­—:</p></blockquote><p>Randomç±»æœ‰ä»¥ä¸‹å¸¸è§ç”¨æ³•ï¼š</p><ul><li>nextInt() è¿”å›éšæœºæ•´æ•°</li><li>nextInt(int n) è¿”å›[0, n)çš„æ•°å­—</li><li>nextLong</li><li>nextdouble</li></ul><h2 id="å¤§æ•°å­—è¿ç®—BigInteger"><a href="#å¤§æ•°å­—è¿ç®—BigInteger" class="headerlink" title="å¤§æ•°å­—è¿ç®—BigInteger"></a>å¤§æ•°å­—è¿ç®—BigInteger</h2><p>æ„é€ å‡½æ•°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">BigInteger</span><span class="params">(String val)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ„é€ å‡½æ•°:</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;123&quot;</span>)</span><br></pre></td></tr></table></figure></p><ul><li><p>æ³¨æ„\â€ \â€ ä¸å¯ä»¥çœç•¥</p><blockquote><p>å°è£…çš„æ–¹æ³•ï¼š</p></blockquote></li><li><p>public BigInteger add(BigInteger val) // +ï¼Œä¸‹åˆ—çœç•¥æ‰€æœ‰å‚æ•°</p></li><li>subtract(BI val) // -</li><li>multiply(Bi val) // *</li><li>divide(Bi val) // é™¤æ³•</li><li>remainder(Bi val) // å–ä½™</li><li>pow(int exponent) // å¯¹å®ƒå–exponentæ¬¡æ–¹</li><li>negate() : å–ç›¸åæ•°</li><li>shiftLeft(int n): å°†æ•°å­—å·¦ç§»nä½ï¼Œå¦‚æœnæ˜¯è´Ÿæ•°åšå³ç§»æ“ä½œ</li><li>shiftRight(int n)</li><li>and()</li><li>or()</li><li>compareTo() // å¤§äºè¿”å›1ï¼Œ å°äºè¿”å›-1</li><li>equals() æ¯”è¾ƒ</li><li>min() æœ€å°å€¼</li><li>max()å–æœ€å¤§å€¼<br>j 7</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŒ…è£…ç±»</title>
      <link href="/2025/01/27/%E7%BB%A7%E6%89%BF/"/>
      <url>/2025/01/27/%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å’Œcppä¸€æ ·ï¼Œä¸ä¸€æ ·çš„æ˜¯Javaå¯ä»¥ä½¿ç”¨super.xxxå»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæˆå‘˜å‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;  </span><br><span class="line"><span class="keyword">import</span> java.util.*;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">(Scanner sc)</span> &#123;  </span><br><span class="line">        <span class="type">var</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;11234&quot;</span>);  </span><br><span class="line">        <span class="type">var</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;3421&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        System.out.println(a.compareTo(b));  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Move</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> pos)</span> &#123;&#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in)) &#123;  </span><br><span class="line">            <span class="comment">//int t = scanner.nextInt();  </span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">1</span>;  </span><br><span class="line">            <span class="keyword">while</span> (t-- &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">                solve(scanner);  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Test</span> &#123;             </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">()</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;T1&quot;</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">            System.out.println(<span class="string">&quot;TT1&quot;</span>);  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;  <span class="number">3</span></span><br><span class="line">          </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">T2</span> <span class="keyword">extends</span> <span class="title class_">Test</span> &#123;  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">T2</span><span class="params">()</span> &#123;  </span><br><span class="line">            <span class="built_in">super</span>();  </span><br><span class="line">            System.out.println(<span class="string">&quot;T2&quot;</span>);  </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="meta">@Override</span>  </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">            <span class="built_in">super</span>.work();  </span><br><span class="line">            System.out.println(<span class="string">&quot;TT2&quot;</span>);  </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å’Œcppä¸€æ ·ï¼Œåœ¨å­ç±»åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°ï¼Œæƒ³è°ƒç”¨å¸¦å‚æ•°çš„å¿…é¡»ä½¿ç”¨superæ˜¾ç¤ºå®ä¾‹åŒ–</p><h2 id="Object-ç±»"><a href="#Object-ç±»" class="headerlink" title="Object ç±»"></a>Object ç±»</h2><blockquote><p>Object ç±»æ˜¯Javaæ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œæ‰€æœ‰ç±»éƒ½ç”±å®ƒç»§æ‰¿è€Œæ¥ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥externs Object,å®ƒåŒ…å«äº†ä¸€ç³»åˆ—æ–¹æ³•</p></blockquote><ul><li>equals</li><li>toString</li><li>getClass()</li></ul><p>æ³¨æ„getClass,notify,notifyAllç­‰éƒ½æ˜¯finalç±»å‹ï¼Œä¸èƒ½é‡å†™</p><h2 id="ç±»çš„ç±»å‹è½¬æ¢"><a href="#ç±»çš„ç±»å‹è½¬æ¢" class="headerlink" title="ç±»çš„ç±»å‹è½¬æ¢"></a>ç±»çš„ç±»å‹è½¬æ¢</h2><p>å’Œcppä¸€æ ·ï¼Œæ³¨æ„ç±»å‘ä¸‹è¦å¼ºåˆ¶æ˜¾å¼ç±»å‹è½¬æ¢</p><h2 id="instanceofæ“ä½œç¬¦å·åˆ¤æ–­å¯¹è±¡ç±»å‹"><a href="#instanceofæ“ä½œç¬¦å·åˆ¤æ–­å¯¹è±¡ç±»å‹" class="headerlink" title="instanceofæ“ä½œç¬¦å·åˆ¤æ–­å¯¹è±¡ç±»å‹"></a>instanceofæ“ä½œç¬¦å·åˆ¤æ–­å¯¹è±¡ç±»å‹</h2><p>åœ¨ç¨‹åºæ‰§è¡Œå‘ä¸‹è½¬å‹æ—¶ï¼Œå¦‚æœçˆ¶ç±»å¯¹è±¡ä¸æ˜¯å­ç±»çš„å®ä¾‹ï¼Œå°±ä¼šå‘ç”ŸClassCastExceptionå¼‚å¸¸ï¼Œ æ‰€ä»¥åœ¨å‘ä¸‹è½¬å‹çš„æ—¶å€™è¦åˆ¤æ–­è½¬å‹çš„æ˜¯å¦æ˜¯å½“å‰ç±»çš„å®ä¾‹,ç”¨æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myObject <span class="keyword">instanceof</span> ExampleClass</span><br></pre></td></tr></table></figure><ul><li>myObject æŸä¸ªç±»çš„å¯¹è±¡å¼•ç”¨</li><li>ExampleClassï¼Œ æŸä¸ªç±»</li><li>è¿”å›å€¼æ˜¯Boolean, trueè¯´æ˜myObject æ˜¯ecçš„å®ä¾‹ï¼Œ</li></ul><h2 id="æŠ½è±¡ç±»å’Œæ¥å£"><a href="#æŠ½è±¡ç±»å’Œæ¥å£" class="headerlink" title="æŠ½è±¡ç±»å’Œæ¥å£"></a>æŠ½è±¡ç±»å’Œæ¥å£</h2><h4 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h4><p>è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">testAbstract</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h4><p>æ¥å£æ˜¯æŠ½è±¡ç±»çš„å»¶ç”³ï¼Œä»–è¯´å­˜ç²¹çš„æŠ½è±¡ç±»ï¼Œæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">draw</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>interfaceå…³é”®å­—å®šä¹‰æ¥å£</li><li>æ³¨æ„æ‰€æœ‰çš„æ–¹æ³•å¿…é¡»æ˜¯publicæˆ–è€…æ˜¯abstractç±»å‹ï¼Œå³ä½¿ä¸å£°æ˜ä¹Ÿæ˜¯é»˜è®¤public</li><li>æ¥å£ä¸­å®šä¹‰çš„ä»»ä½•å­—æ®µéƒ½æ˜¯staticå’Œfinalçš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">VALUE</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// ç­‰åŒäº public static final int VALUE = 10;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">VALUE</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">// è¿™ä¸ªå¹¶ä¸æ˜¯é‡å†™ï¼Œè€Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œéšè—äº†æ¥å£çš„ VALUE</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printValues</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;VALUE from MyClass: &quot;</span> + VALUE);</span><br><span class="line">        System.out.println(<span class="string">&quot;VALUE from Interface: &quot;</span> + MyInterface.VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">        obj.printValues();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¥å£ä¸ç»§æ‰¿"><a href="#æ¥å£ä¸ç»§æ‰¿" class="headerlink" title="æ¥å£ä¸ç»§æ‰¿"></a>æ¥å£ä¸ç»§æ‰¿</h3><p>ä½¿ç”¨implementså…³é”®å­—å¯ä»¥è°ƒç”¨æ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> extern B implements æ¥å£ä¸€ï¼Œ äºŒ...</span><br></pre></td></tr></table></figure></p><p>ç»§æ‰¿æ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„ä½†æ˜¯è°ƒç”¨æ¥å£çš„æ—¶å€™å¯ä»¥è°ƒç”¨å¤šä¸ªï¼Œç®—æ˜¯ä¸€ç§å¤šç§ç»§æ‰¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŒ…è£…ç±»</title>
      <link href="/2025/01/26/Java%E5%8C%85%E8%A3%85%E7%B1%BB/"/>
      <url>/2025/01/26/Java%E5%8C%85%E8%A3%85%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Java-çš„åŒ…è£…ç±»ï¼ˆWrapper-Classesï¼‰ä½œç”¨"><a href="#Java-çš„åŒ…è£…ç±»ï¼ˆWrapper-Classesï¼‰ä½œç”¨" class="headerlink" title="Java çš„åŒ…è£…ç±»ï¼ˆWrapper Classesï¼‰ä½œç”¨"></a><strong>Java çš„åŒ…è£…ç±»ï¼ˆWrapper Classesï¼‰ä½œç”¨</strong></h3><p>Java çš„ <strong>åŒ…è£…ç±»ï¼ˆWrapper Classï¼‰</strong> ä¸»è¦ç”¨äºå°† <strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆprimitive typesï¼‰</strong> è½¬æ¢ä¸º <strong>å¯¹è±¡ç±»å‹ï¼ˆreference typesï¼‰</strong>ï¼Œå®ƒä»¬æä¾›äº†é¢å¤–çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯å¿…éœ€çš„ï¼Œæ¯”å¦‚åœ¨ <strong>é›†åˆæ¡†æ¶ï¼ˆå¦‚ <code>ArrayList</code>ï¼‰</strong> ä¸­å­˜å‚¨æ•°æ®ã€‚</p><hr><h2 id="1-Java-åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#1-Java-åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="1. Java åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ"></a><strong>1. Java åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ</strong></h2><p>Java ä¸ºæ¯ç§åŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†å¯¹åº”çš„åŒ…è£…ç±»ï¼š</p><div class="table-container"><table><thead><tr><th>åŸºæœ¬ç±»å‹ï¼ˆPrimitive Typeï¼‰</th><th>åŒ…è£…ç±»ï¼ˆWrapper Classï¼‰</th></tr></thead><tbody><tr><td><code>byte</code></td><td><code>Byte</code></td></tr><tr><td><code>short</code></td><td><code>Short</code></td></tr><tr><td><code>int</code></td><td><code>Integer</code></td></tr><tr><td><code>long</code></td><td><code>Long</code></td></tr><tr><td><code>float</code></td><td><code>Float</code></td></tr><tr><td><code>double</code></td><td><code>Double</code></td></tr><tr><td><code>char</code></td><td><code>Character</code></td></tr><tr><td><code>boolean</code></td><td><code>Boolean</code></td></tr></tbody></table></div><hr><h2 id="2-ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ"></a><strong>2. ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ</strong></h2><h3 id="1-åœ¨é›†åˆï¼ˆArrayListã€HashMap-ç­‰ï¼‰ä¸­å­˜å‚¨åŸºæœ¬ç±»å‹"><a href="#1-åœ¨é›†åˆï¼ˆArrayListã€HashMap-ç­‰ï¼‰ä¸­å­˜å‚¨åŸºæœ¬ç±»å‹" class="headerlink" title="(1) åœ¨é›†åˆï¼ˆArrayListã€HashMap ç­‰ï¼‰ä¸­å­˜å‚¨åŸºæœ¬ç±»å‹"></a><strong>(1) åœ¨é›†åˆï¼ˆ<code>ArrayList</code>ã€<code>HashMap</code> ç­‰ï¼‰ä¸­å­˜å‚¨åŸºæœ¬ç±»å‹</strong></h3><p>Java <strong>é›†åˆæ¡†æ¶</strong>ï¼ˆå¦‚ <code>ArrayList</code>ã€<code>HashMap</code>ï¼‰<strong>ä¸æ”¯æŒåŸºæœ¬ç±»å‹</strong>ï¼Œå¿…é¡»ä½¿ç”¨å¯¹è±¡ç±»å‹ã€‚<br>ä¾‹å¦‚ï¼Œ<code>ArrayList&lt;int&gt;</code> æ˜¯éæ³•çš„ï¼Œå¿…é¡»ä½¿ç”¨ <code>ArrayList&lt;Integer&gt;</code>ã€‚</p><p><strong>é”™è¯¯ç¤ºä¾‹ï¼ˆä¸èƒ½ä½¿ç”¨ <code>int</code>ï¼‰ï¼š</strong></p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>ArrayList&lt;int&gt; list = new ArrayList&lt;&gt;(); // âŒ é”™è¯¯ï¼</code></p><p><strong>æ­£ç¡®ç¤ºä¾‹ï¼ˆä½¿ç”¨ <code>Integer</code>ï¼‰ï¼š</strong></p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(10); // è‡ªåŠ¨è£…ç®± list.add(20); System.out.println(list.get(0)); // è¾“å‡º 10</code></p><hr><h3 id="2-null-å¤„ç†"><a href="#2-null-å¤„ç†" class="headerlink" title="(2) null å¤„ç†"></a><strong>(2) <code>null</code> å¤„ç†</strong></h3><p>åŸºæœ¬ç±»å‹ï¼ˆå¦‚ <code>int</code>ã€<code>double</code>ï¼‰<strong>ä¸èƒ½èµ‹å€¼ <code>null</code></strong>ï¼Œä½†åŒ…è£…ç±»å¯ä»¥ï¼š</p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>Integer a = null; // âœ… åˆæ³• int b = null;     // âŒ é”™è¯¯ï¼ˆåŸºæœ¬ç±»å‹ä¸èƒ½ä¸º nullï¼‰</code></p><p>è¿™åœ¨ <strong>æ•°æ®åº“æ“ä½œ</strong> æˆ– <strong>JSON è§£æ</strong> æ—¶å¾ˆå¸¸è§ï¼Œæ¯”å¦‚ <code>null</code> è¡¨ç¤ºæ•°æ®ç¼ºå¤±ã€‚</p><hr><h3 id="3-æä¾›äº†é¢å¤–çš„æ–¹æ³•"><a href="#3-æä¾›äº†é¢å¤–çš„æ–¹æ³•" class="headerlink" title="(3) æä¾›äº†é¢å¤–çš„æ–¹æ³•"></a><strong>(3) æä¾›äº†é¢å¤–çš„æ–¹æ³•</strong></h3><p>åŒ…è£…ç±»æä¾›äº†è®¸å¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><ul><li><strong><code>Integer.parseInt(String)</code></strong> å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º <code>int</code></li><li><strong><code>Double.parseDouble(String)</code></strong> å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º <code>double</code></li><li><strong><code>Integer.toHexString(int)</code></strong> å°†æ•´æ•°è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²</li><li><strong><code>Boolean.valueOf(String)</code></strong> è§£æå¸ƒå°”å€¼</li></ul><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>String str = &quot;123&quot;; int num = Integer.parseInt(str); // å°†å­—ç¬¦ä¸² &quot;123&quot; è½¬æ¢ä¸º int System.out.println(num * 2); // è¾“å‡º 246</code></p><hr><h3 id="4-è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰"><a href="#4-è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰" class="headerlink" title="(4) è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰"></a><strong>(4) è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰</strong></h3><p><strong>Java 5 å¼•å…¥äº†è‡ªåŠ¨è£…ç®±/æ‹†ç®±ï¼Œå‡å°‘äº†æ‰‹åŠ¨è½¬æ¢çš„éº»çƒ¦ã€‚</strong></p><h4 id="è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰"><a href="#è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰" class="headerlink" title="è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰"></a><strong>è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰</strong></h4><p>åŸºæœ¬ç±»å‹ <strong>â†’</strong> åŒ…è£…ç±» <strong>è‡ªåŠ¨è½¬æ¢</strong></p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>Integer num = 10; // ç›¸å½“äº Integer num = Integer.valueOf(10);</code></p><h4 id="è‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰"><a href="#è‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰" class="headerlink" title="è‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰"></a><strong>è‡ªåŠ¨æ‹†ç®±ï¼ˆUnboxingï¼‰</strong></h4><p>åŒ…è£…ç±» <strong>â†’</strong> åŸºæœ¬ç±»å‹ <strong>è‡ªåŠ¨è½¬æ¢</strong></p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>int x = num; // ç›¸å½“äº int x = num.intValue();</code></p><p>ç¤ºä¾‹ï¼š</p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(10); // è‡ªåŠ¨è£…ç®± int value = list.get(0); // è‡ªåŠ¨æ‹†ç®± System.out.println(value + 1); // è¾“å‡º 11</code></p><hr><h3 id="5-ç±»å‹è½¬æ¢"><a href="#5-ç±»å‹è½¬æ¢" class="headerlink" title="(5) ç±»å‹è½¬æ¢"></a><strong>(5) ç±»å‹è½¬æ¢</strong></h3><p>åŒ…è£…ç±»å…è®¸ä¸åŒç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š</p><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>int i = 100; String str = Integer.toString(i); // int â†’ String int j = Integer.parseInt(str); // String â†’ int</code></p><hr><h2 id="3-åŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹çš„æ€§èƒ½"><a href="#3-åŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹çš„æ€§èƒ½" class="headerlink" title="3. åŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹çš„æ€§èƒ½"></a><strong>3. åŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹çš„æ€§èƒ½</strong></h2><p>åŒ…è£…ç±»çš„å¯¹è±¡åœ¨ <strong>å †å†…å­˜ï¼ˆHeapï¼‰</strong> åˆ†é…ï¼Œè€ŒåŸºæœ¬ç±»å‹é€šå¸¸åœ¨ <strong>æ ˆå†…å­˜ï¼ˆStackï¼‰</strong> ä¸­ã€‚<br>å› æ­¤ï¼š</p><ul><li><strong>åŸºæœ¬ç±»å‹æ€§èƒ½æ›´å¥½ï¼Œå ç”¨å†…å­˜æ›´å°‘</strong>ã€‚</li><li><strong>åŒ…è£…ç±»éœ€è¦é¢å¤–çš„å†…å­˜å’Œæ—¶é—´</strong>ï¼Œé¢‘ç¹ä½¿ç”¨æ—¶å¯èƒ½å½±å“æ€§èƒ½ã€‚</li></ul><h3 id="ç¤ºä¾‹ï¼šåŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹æ€§èƒ½å¯¹æ¯”"><a href="#ç¤ºä¾‹ï¼šåŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹æ€§èƒ½å¯¹æ¯”" class="headerlink" title="ç¤ºä¾‹ï¼šåŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹æ€§èƒ½å¯¹æ¯”"></a><strong>ç¤ºä¾‹ï¼šåŒ…è£…ç±»å’ŒåŸºæœ¬ç±»å‹æ€§èƒ½å¯¹æ¯”</strong></h3><p>java</p><p>å¤åˆ¶ç¼–è¾‘</p><p><code>public class Test &#123;     public static void main(String[] args) &#123;         long startTime, endTime;          // æµ‹è¯•åŸºæœ¬ç±»å‹ int         startTime = System.nanoTime();         int sum1 = 0;         for (int i = 0; i &lt; 1000000; i++) &#123;             sum1 += i;         &#125;         endTime = System.nanoTime();         System.out.println(&quot;åŸºæœ¬ç±»å‹ int è€—æ—¶: &quot; + (endTime - startTime) + &quot; ns&quot;);          // æµ‹è¯•åŒ…è£…ç±» Integer         startTime = System.nanoTime();         Integer sum2 = 0;         for (int i = 0; i &lt; 1000000; i++) &#123;             sum2 += i; // è¿™é‡Œæ¶‰åŠå¤§é‡çš„è£…ç®±å’Œæ‹†ç®±         &#125;         endTime = System.nanoTime();         System.out.println(&quot;åŒ…è£…ç±» Integer è€—æ—¶: &quot; + (endTime - startTime) + &quot; ns&quot;);     &#125; &#125;</code></p><p>ğŸ’¡ <strong>ç»“è®º</strong>ï¼šåŒ…è£…ç±»ç”±äº<strong>è£…ç®±/æ‹†ç®±</strong>ï¼Œæ€§èƒ½æ¯”åŸºæœ¬ç±»å‹å·®å¾ˆå¤šï¼Œå› æ­¤<strong>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹ï¼Œåº”å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹</strong>ã€‚</p><hr><h2 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a><strong>4. å°ç»“</strong></h2><div class="table-container"><table><thead><tr><th><strong>ç”¨é€”</strong></th><th><strong>åŒ…è£…ç±»ï¼ˆWrapper Classï¼‰ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>é›†åˆå­˜å‚¨</strong></td><td><code>ArrayList&lt;Integer&gt;</code> ä¸èƒ½å­˜ <code>int</code>ï¼Œåªèƒ½å­˜ <code>Integer</code></td></tr><tr><td><strong><code>null</code> å¤„ç†</strong></td><td>åŒ…è£…ç±»å¯ä»¥å­˜ <code>null</code>ï¼ŒåŸºæœ¬ç±»å‹ä¸è¡Œ</td></tr><tr><td><strong>æä¾›æ–¹æ³•</strong></td><td><code>Integer.parseInt()</code>ã€<code>Double.toString()</code></td></tr><tr><td><strong>è‡ªåŠ¨è£…ç®±/æ‹†ç®±</strong></td><td><code>Integer num = 10;</code> <strong>(è£…ç®±)</strong>ï¼Œ<code>int x = num;</code> <strong>(æ‹†ç®±)</strong></td></tr><tr><td><strong>ç±»å‹è½¬æ¢</strong></td><td><code>String â†’ int</code>ï¼Œ<code>int â†’ String</code></td></tr><tr><td><strong>æ€§èƒ½è€ƒè™‘</strong></td><td>åŸºæœ¬ç±»å‹æ›´å¿«ï¼Œå ç”¨å†…å­˜æ›´å°‘</td></tr></tbody></table></div><hr><h2 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Javastudy</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªé‚®ç®±åœ°å€  </span></span><br><span class="line">        ArrayList&lt;String&gt; lst = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line">        lst.add(<span class="string">&quot;12&quot;</span>);  </span><br><span class="line">        lst.add(<span class="string">&quot;13&quot;</span>);  </span><br><span class="line">  </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;  </span><br><span class="line">            sum += Integer.parseInt(lst.get(i));  </span><br><span class="line">            System.out.println(sum);  </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> Integer.toString(<span class="number">456</span>); <span class="comment">// toStringæŠŠæ•°æ®è½¬åŒ–ä¸ºStringç±»å‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»è¦å‡ºç°çš„åŠŸèƒ½(ä»¥Intä¸ºä¾‹å­):</p><ul><li>intValue()</li><li><strong>parseInt(String)</strong> è¿”å›è¯¥stringçš„intå€¼.</li></ul><h2 id="BigInteger"><a href="#BigInteger" class="headerlink" title="BigInteger"></a>BigInteger</h2><h2 id="Javaä¸­çš„BigIntegerèŒƒå›´"><a href="#Javaä¸­çš„BigIntegerèŒƒå›´" class="headerlink" title="Javaä¸­çš„BigIntegerèŒƒå›´"></a>Javaä¸­çš„BigIntegerèŒƒå›´</h2><p>åœ¨Javaä¸­ï¼Œ<em>BigInteger</em>ç±»æ˜¯ç”¨äºå¤„ç†è¶…å‡ºæ ‡å‡†æ•°æ®ç±»å‹ï¼ˆå¦‚<em>int</em>ã€<em>long</em>ï¼‰èŒƒå›´çš„å¤§æ•´æ•°çš„ã€‚<em>BigInteger</em>ç±»ä½äº<em>java.math</em>åŒ…ä¸­ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•æ¥è¿›è¡Œå¤§æ•´æ•°çš„ç®—æœ¯è¿ç®—ï¼Œæ¯”å¦‚åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ç­‰ã€‚<em>BigInteger</em>çš„ä¸€ä¸ªå…³é”®ç‰¹ç‚¹æ˜¯å®ƒå¯ä»¥è¡¨ç¤ºéå¸¸å¤§çš„æ•°å€¼ï¼Œç†è®ºä¸Šåªå—é™äºè®¡ç®—æœºçš„å†…å­˜å¤§å°ã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ª<em>BigInteger</em>å®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°å€¼ï¼Œä¾‹å¦‚ï¼š</p><p>BigInteger bi = new BigInteger(â€œ1234567890â€);</p><p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨<em>BigInteger</em>æä¾›çš„æ–¹æ³•æ¥æ‰§è¡Œå„ç§ç®—æœ¯æ“ä½œã€‚ä¾‹å¦‚ï¼Œè¦æ‰§è¡ŒåŠ æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨<em>add</em>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">i1</span> <span class="operator">=</span>Â <span class="keyword">new</span>Â <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">i2</span> <span class="operator">=</span>Â <span class="keyword">new</span>Â <span class="title class_">BigInteger</span>(<span class="string">&quot;12345678901234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">sum</span> <span class="operator">=</span> i1.add(i2);Â <span class="comment">// ç»“æœä¸º12345678902469135780</span></span><br></pre></td></tr></table></figure><p>è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹</p><p>å°½ç®¡<em>BigInteger</em>å¯ä»¥è¡¨ç¤ºéå¸¸å¤§çš„æ•°å€¼ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚<em>long</em>ã€‚<em>BigInteger</em>æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•æ¥è¿›è¡Œè¿™ç§è½¬æ¢ï¼Œä¾‹å¦‚<em>longValue()</em>å’Œ<em>longValueExact()</em>ã€‚<em>longValue()</em>æ–¹æ³•ä¼šå°è¯•å°†<em>BigInteger</em>çš„å€¼è½¬æ¢ä¸º<em>long</em>ç±»å‹ï¼Œå¦‚æœæ•°å€¼è¶…å‡ºäº†<em>long</em>çš„èŒƒå›´ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªè¿‘ä¼¼å€¼ã€‚è€Œ<em>longValueExact()</em>æ–¹æ³•åœ¨è½¬æ¢ç»“æœè¶…å‡º<em>long</em>èŒƒå›´æ—¶ä¼šæŠ›å‡º<em>ArithmeticException</em>å¼‚å¸¸ã€‚</p><p>ä½¿ç”¨<em>BigInteger</em>çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å…¶é€Ÿåº¦ç›¸å¯¹äºåŸç”Ÿç±»å‹ï¼ˆå¦‚<em>int</em>å’Œ<em>long</em>ï¼‰è¾ƒæ…¢ï¼Œå› ä¸º<em>BigInteger</em>çš„è¿ç®—æ˜¯é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ã€‚å› æ­¤ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨ä¸­ï¼Œå¦‚æœå¯èƒ½ï¼Œæœ€å¥½è¿˜æ˜¯ä½¿ç”¨åŸç”Ÿç±»å‹ã€‚</p><p>ç¤ºä¾‹</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨<em>BigInteger</em>çš„ç®€å•ç¤ºä¾‹ï¼Œå®ƒæ¼”ç¤ºäº†å¦‚ä½•åˆ›å»º<em>BigInteger</em>å¯¹è±¡ï¼Œæ‰§è¡Œå¹‚è¿ç®—ï¼Œä»¥åŠå¦‚ä½•å¤„ç†è¶…å‡º<em>long</em>èŒƒå›´æ—¶çš„æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>Â java.math.BigInteger;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>Â <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>Â <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">bi</span> <span class="operator">=</span>Â <span class="keyword">new</span>Â <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">        System.out.println(bi.pow(<span class="number">5</span>));Â <span class="comment">// è¾“å‡º: 2867971860299718107233761438093672048294900000</span></span><br><span class="line">  </span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">i</span> <span class="operator">=</span>Â <span class="keyword">new</span>Â <span class="title class_">BigInteger</span>(<span class="string">&quot;123456789000&quot;</span>);</span><br><span class="line">        System.out.println(i.longValue());Â <span class="comment">// è¾“å‡º: 123456789000</span></span><br><span class="line">        <span class="keyword">try</span>Â &#123;</span><br><span class="line">            System.out.println(i.multiply(i).longValueExact());Â <span class="comment">// å°†æŠ›å‡º java.lang.ArithmeticException</span></span><br><span class="line">        &#125;Â <span class="keyword">catch</span>Â (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;BigInteger out of long range&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<em>BigInteger</em>å¯¹è±¡ï¼Œå¹¶è®¡ç®—äº†å®ƒçš„äº”æ¬¡æ–¹ã€‚ç„¶åï¼Œæˆ‘ä»¬å°è¯•å°†ä¸€ä¸ªå¤§<em>BigInteger</em>å€¼è½¬æ¢ä¸º<em>long</em>ç±»å‹ï¼Œå½“è½¬æ¢ç»“æœè¶…å‡º<em>long</em>çš„èŒƒå›´æ—¶ï¼Œæ•è·å¹¶å¤„ç†äº†<em>ArithmeticException</em>å¼‚å¸¸ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<em>BigInteger</em>æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç±»ï¼Œå®ƒå…è®¸Javaç¨‹åºå‘˜å¤„ç†è¶…å‡ºæ ‡å‡†æ•´æ•°ç±»å‹èŒƒå›´çš„æ•°å€¼ã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨<em>BigInteger</em>å¯èƒ½ä¼šç‰ºç‰²ä¸€äº›æ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IOæµ ï¼ˆé™„å¸¦ç®—æ³•ç«èµ›æ¨¡æ¿ï¼‰</title>
      <link href="/2025/01/26/IO%E6%B5%81%EF%BC%88%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A8%A1%E6%9D%BF%EF%BC%89/"/>
      <url>/2025/01/26/IO%E6%B5%81%EF%BC%88%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A8%A1%E6%9D%BF%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸»è¦æ˜¯BufferedReader + StringTokenizerï¼ˆå¾ˆå¿«ï¼‰</p><p>ç®—æ³•ç«èµ›æ¨¡æ¿:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;  </span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;  </span><br><span class="line"><span class="keyword">import</span> java.util.StringTokenizer;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">()</span> &#123;  </span><br><span class="line">            </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">         <span class="keyword">try</span> (<span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(System.out))) &#123;  </span><br><span class="line">             <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> in.nextInt();  </span><br><span class="line">             <span class="keyword">while</span> (t-- &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">                 solve();  </span><br><span class="line">             &#125;         </span><br><span class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">             e.printStackTrace();  </span><br><span class="line">          &#125;    </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">static</span> <span class="type">InputReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputReader</span>();  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">InputReader</span>&#123;  </span><br><span class="line">        <span class="keyword">private</span> StringTokenizer st;  </span><br><span class="line">        <span class="keyword">private</span> BufferedReader bf;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">InputReader</span><span class="params">()</span> &#123;  </span><br><span class="line">            bf = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));  </span><br><span class="line">            st = <span class="literal">null</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">next</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">while</span>(st == <span class="literal">null</span> || !st.hasMoreTokens()) &#123;  </span><br><span class="line">                st = <span class="keyword">new</span> <span class="title class_">StringTokenizer</span>(bf.readLine());  </span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="keyword">return</span> st.nextToken();  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">nextLine</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> bf.readLine();  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">nextInt</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> Integer.parseInt(next());  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">nextLong</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> Long.parseLong(next());  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">nextDouble</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> Double.parseDouble(next());  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> BigInteger <span class="title function_">nextBigInteger</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(next());  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">public</span> BigDecimal <span class="title function_">nextBigDecimal</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(next());  </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Educational codeforceRound 173 é¢˜è§£</title>
      <link href="/2024/12/26/Educational-codeforceRound-173-%E9%A2%98%E8%A7%A3/"/>
      <url>/2024/12/26/Educational-codeforceRound-173-%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> i64 inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">tuple&lt;T, T, T&gt; <span class="title">MaxArray</span><span class="params">(<span class="type">const</span> vector&lt;T&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.<span class="built_in">size</span>() == <span class="number">1</span>) <span class="keyword">return</span> &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    T cur = nums[<span class="number">1</span>], maxp = nums[<span class="number">1</span>];      </span><br><span class="line">    <span class="type">int</span> start = <span class="number">1</span>;              </span><br><span class="line">    <span class="type">int</span> le = <span class="number">1</span>;        </span><br><span class="line">    <span class="type">int</span> ri = <span class="number">1</span>;            </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur + nums[i] &lt; nums[i]) &#123;</span><br><span class="line">            cur = nums[i];</span><br><span class="line">            start = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cur &gt; maxp) &#123;</span><br><span class="line">            maxp = cur;</span><br><span class="line">            le = start; </span><br><span class="line">            ri = i;       </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;le, ri, maxp&#125;; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        <span class="keyword">if</span> (a[i] != <span class="number">1</span> &amp;&amp; a[i] != <span class="number">-1</span>) &#123;</span><br><span class="line">            pos = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [x, y, z] = <span class="built_in">MaxArray</span>&lt;i64&gt; (a);</span><br><span class="line">        i64 tp = <span class="built_in">max</span>(<span class="number">0LL</span>, z);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            a[i] = -a[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> [h, j, p] = <span class="built_in">MaxArray</span>&lt;i64&gt; (a);</span><br><span class="line"></span><br><span class="line">        i64 kp = <span class="built_in">max</span>(<span class="number">0LL</span>, p);</span><br><span class="line">        kp = -kp;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; tp - kp + <span class="number">1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = kp; i &lt;= tp; i++) &#123;</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">l</span><span class="params">(<span class="number">1</span>)</span>, <span class="title">r</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; pos; i++) &#123;</span><br><span class="line">        l.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = pos + <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        r.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [x, y, z] = <span class="built_in">MaxArray</span>(l);</span><br><span class="line">    z = <span class="built_in">max</span>(<span class="number">0LL</span>, z);</span><br><span class="line">    i64 lmax = z;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= l.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        l[i] = -l[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [p, u, b] = <span class="built_in">MaxArray</span>(l);</span><br><span class="line">    b = <span class="built_in">max</span>(<span class="number">0LL</span>, b);</span><br><span class="line">    i64 lmin = -b;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [gg, ee, f] = <span class="built_in">MaxArray</span>(r);</span><br><span class="line">    f = <span class="built_in">max</span>(<span class="number">0LL</span>, f);</span><br><span class="line">    i64 rmax = f;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= r.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        r[i] = -r[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> [ioi, powp, w] = <span class="built_in">MaxArray</span>(r);</span><br><span class="line">    w = <span class="built_in">max</span>(w, <span class="number">0LL</span>);</span><br><span class="line">    i64 rmin = -w;</span><br><span class="line"></span><br><span class="line">    set&lt;i64&gt; is;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = <span class="built_in">min</span>(rmin, lmin); i &lt;= <span class="number">0</span>; i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="built_in">max</span>(lmax, rmax); i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 sum = <span class="number">0</span>;</span><br><span class="line">    i64 mp = <span class="number">0</span>;</span><br><span class="line">    i64 mi = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = pos + <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        mp = <span class="built_in">max</span>(<span class="number">0LL</span>, <span class="built_in">max</span>(mp, sum));</span><br><span class="line">        mi = <span class="built_in">min</span>(<span class="number">0LL</span>, <span class="built_in">min</span>(mi, sum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 mmp = <span class="number">0</span>, mmi = <span class="number">0</span>;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i64 i = pos - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        sum += a[i];</span><br><span class="line">        mmp = <span class="built_in">max</span>(<span class="number">0LL</span>, <span class="built_in">max</span>(mmp, sum));</span><br><span class="line">        mmi = <span class="built_in">min</span>(<span class="number">0LL</span>, <span class="built_in">min</span>(mmi, sum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 tminp = mmi + mi;</span><br><span class="line">    i64 tmaxp = mmp + mp;</span><br><span class="line">    <span class="comment">//cerr &lt;&lt; tminp &lt;&lt; &#x27; &#x27; &lt;&lt; tmaxp &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i64 i = a[pos] + tminp; i &lt;= a[pos] + tmaxp; i++) &#123;</span><br><span class="line">        is.<span class="built_in">insert</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; is.<span class="built_in">size</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : is) &#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">constexpr</span> i64 inf = <span class="number">1e18</span> + <span class="number">9</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i64 l, r, g;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r &gt;&gt; g;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (g &gt; r) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    i64 de = (l / g) + ((l % g) ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">    i64 kp = (r / g);</span><br><span class="line">   <span class="comment">// cerr &lt;&lt; &quot;!:&quot; &lt;&lt; de &lt;&lt; &#x27; &#x27; &lt;&lt; kp &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (g == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * r &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        i64 maxp = <span class="number">0</span>;</span><br><span class="line">        i64 ll = l, rr = r;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i64 i = l; i &lt;= r; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r - i &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 j = r; j &gt;= l; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j - i &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">gcd</span>(i, j) == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &gt; maxp) &#123;</span><br><span class="line">                        maxp = j - i, ll = i, rr = j;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="number">1LL</span> * ll &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * rr &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (de &gt; kp) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (de == kp) &#123;</span><br><span class="line">        <span class="keyword">if</span> (de == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; g &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (de == <span class="number">1</span>) &#123;</span><br><span class="line">            cout &lt;&lt; g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">1LL</span> * g * kp &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        i64 ll = de, rr = kp;</span><br><span class="line">        i64 maxp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (i64 li = de; li &lt;= kp; li++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (kp - li &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span> (i64 j = kp; j &gt;= li; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j - li &lt;= maxp) <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">gcd</span>(j, li) == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - li &gt; maxp) &#123;</span><br><span class="line">                        maxp = j - li;</span><br><span class="line">                        rr = j, ll = li;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ll * <span class="number">1LL</span> * g &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; rr * <span class="number">1LL</span> * g &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforceé¢˜è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘</title>
      <link href="/2024/12/26/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
      <url>/2024/12/26/%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>å¯¹äºä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæƒ³è¦åŠ¨æ€çš„ç®¡ç†å®ƒï¼Œå°±ä½¿ç”¨çº¿æ®µæ ‘æŠŠ</li></ul><h2 id="åŒºé—´åŠ -amp-Sum"><a href="#åŒºé—´åŠ -amp-Sum" class="headerlink" title="åŒºé—´åŠ  &amp; Sum"></a>åŒºé—´åŠ  &amp; Sum</h2><blockquote><p>åŒºé—´ä¿®æ”¹ï¼Œ åŒºé—´åŠ å’Œæ±‚å’Œ</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">    vector&lt;T&gt; f;</span><br><span class="line">    vector&lt;T&gt; tag;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Segment</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Segment</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n) &#123; </span><br><span class="line">        f.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        tag.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, T c, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            f[p] += c * (t - s + <span class="number">1</span>);</span><br><span class="line">            tag[p] += c;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            <span class="built_in">pushdown</span>(s, t, p);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[p] = f[p * <span class="number">2</span>] + f[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        f[p * <span class="number">2</span>] += <span class="number">1LL</span> * (m - s + <span class="number">1</span>) * tag[p];</span><br><span class="line">        f[p * <span class="number">2</span> + <span class="number">1</span>] += <span class="number">1LL</span> * (t - m) * tag[p];</span><br><span class="line">        tag[p * <span class="number">2</span>] += tag[p];</span><br><span class="line">        tag[p * <span class="number">2</span> + <span class="number">1</span>] += tag[p];</span><br><span class="line">        tag[p] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[p];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tag[p]) &#123;</span><br><span class="line">            <span class="built_in">pushdown</span>(s, t, p);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(s, t, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, T c)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">update</span>(s, t, c, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘èµ¶æ—¶é—´ç‰ˆæœ¬ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">    vector&lt;T&gt; f;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Segment</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Segment</span>(<span class="type">int</span> n) : <span class="built_in">n</span>(n) &#123; </span><br><span class="line">        f.<span class="built_in">assign</span>(n &lt;&lt; <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, T c, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t &amp;&amp; l == s) &#123;</span><br><span class="line">            f[p] = c;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            <span class="built_in">update</span>(l, r, c, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pushup</span>(s, t, p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= s &amp;&amp; t &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[p];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> m = s + ((t - s) &gt;&gt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        T sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, s, m, p * <span class="number">2</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) &#123;</span><br><span class="line">            sum += <span class="built_in">query</span>(l, r, m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">query</span>(s, t, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, T c)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">update</span>(s, t, c, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TCP / UDP</title>
      <link href="/2024/12/26/hehehe/"/>
      <url>/2024/12/26/hehehe/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>OSIä¸ƒå±‚ç½‘ç»œæ¨¡å‹</li></ul><p>ä»ä¸‹å¾€ä¸Š ï¼š ç‰©ç†å±‚ï¼Œ æ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œè¿è¾“å±‚ï¼Œ ä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚</p><ul><li>TCP/ IP</li></ul><h3 id="ç½‘ç»œåè®®æ˜¯ä»€ä¹ˆ"><a href="#ç½‘ç»œåè®®æ˜¯ä»€ä¹ˆ" class="headerlink" title="ç½‘ç»œåè®®æ˜¯ä»€ä¹ˆ"></a><a href="https://so.csdn.net/so/search?q=%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE&amp;spm=1001.2101.3001.7020">ç½‘ç»œåè®®</a>æ˜¯ä»€ä¹ˆ</h3><ul><li>åœ¨è®¡ç®—æœºç½‘ç»œè¦åšåˆ°äº•äº•æœ‰æ¡çš„äº¤æ¢æ•°æ®ï¼Œå°±å¿…é¡»éµå®ˆä¸€äº›äº‹å…ˆçº¦å®šå¥½çš„è§„åˆ™ï¼Œæ¯”å¦‚äº¤æ¢æ•°æ®çš„æ ¼å¼ã€æ˜¯å¦éœ€è¦å‘é€ä¸€ä¸ªåº”ç­”ä¿¡æ¯ã€‚è¿™äº›è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œåè®®ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦å¯¹ç½‘ç»œåè®®åˆ†å±‚"><a href="#ä¸ºä»€ä¹ˆè¦å¯¹ç½‘ç»œåè®®åˆ†å±‚" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¯¹ç½‘ç»œåè®®åˆ†å±‚"></a>ä¸ºä»€ä¹ˆè¦å¯¹ç½‘ç»œåè®®åˆ†å±‚</h3><ul><li>ç®€åŒ–é—®é¢˜éš¾åº¦å’Œå¤æ‚åº¦ã€‚ç”±äºå„å±‚ä¹‹é—´ç‹¬ç«‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å‰²å¤§é—®é¢˜ä¸ºå°é—®é¢˜ã€‚</li><li>çµæ´»æ€§å¥½ã€‚å½“å…¶ä¸­ä¸€å±‚çš„æŠ€æœ¯å˜åŒ–æ—¶ï¼Œåªè¦å±‚é—´æ¥å£å…³ç³»ä¿æŒä¸å˜ï¼Œå…¶ä»–å±‚ä¸å—å½±å“ã€‚</li><li>æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚</li><li>ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚åˆ†å¼€åï¼Œæ¯å±‚åŠŸèƒ½å¯ä»¥ç›¸å¯¹ç®€å•åœ°è¢«æè¿°![[OSI.png]]</li></ul><p><strong>1ã€UDP å’Œ TCP çš„ç‰¹ç‚¹ä¸åŒºåˆ«</strong></p><p><strong>ç”¨æˆ·æ•°æ®æŠ¥åè®® UDPï¼ˆUser Datagram Protocolï¼‰</strong></p><p>æ˜¯æ— è¿æ¥çš„ï¼Œå°½æœ€å¤§å¯èƒ½äº¤ä»˜ï¼Œæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œé¢å‘æŠ¥æ–‡ï¼ˆå¯¹äºåº”ç”¨ç¨‹åºä¼ ä¸‹æ¥çš„æŠ¥æ–‡ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œåªæ˜¯æ·»åŠ  UDP é¦–éƒ¨ï¼‰ï¼Œæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚</p><p><strong>ä¼ è¾“æ§åˆ¶åè®® TCPï¼ˆTransmission Control Protocolï¼‰</strong></p><p>æ˜¯é¢å‘è¿æ¥çš„ï¼Œæä¾›å¯é äº¤ä»˜ï¼Œæœ‰æµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ï¼Œæä¾›å…¨åŒå·¥é€šä¿¡ï¼Œé¢å‘å­—èŠ‚æµï¼ˆæŠŠåº”ç”¨å±‚ä¼ ä¸‹æ¥çš„æŠ¥æ–‡çœ‹æˆå­—èŠ‚æµï¼ŒæŠŠå­—èŠ‚æµç»„ç»‡æˆå¤§å°ä¸ç­‰çš„æ•°æ®å—ï¼‰ï¼Œæ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€‚</p><p><strong>TCPæ‹¥å¡æ§åˆ¶</strong>æ˜¯<a href="https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE" title="ä¼ è¾“æ§åˆ¶åè®®">ä¼ è¾“æ§åˆ¶åè®®</a>ï¼ˆè‹±è¯­ï¼šTransmission Control Protocolï¼Œç¼©å†™TCPï¼‰é¿å…ç½‘ç»œæ‹¥å¡çš„ç®—æ³•ï¼Œæ˜¯<a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91" title="äº’è”ç½‘">äº’è”ç½‘</a>ä¸Šä¸»è¦çš„ä¸€ä¸ª<a href="https://zh.wikipedia.org/wiki/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6" title="æ‹¥å¡æ§åˆ¶">æ‹¥å¡æ§åˆ¶</a>æªæ–½ã€‚å®ƒä½¿ç”¨ä¸€å¥—åŸºäº<a href="https://zh.wikipedia.org/wiki/%E5%92%8C%E6%80%A7%E5%A2%9E%E9%95%BF/%E4%B9%98%E6%80%A7%E9%99%8D%E4%BD%8E" title="å’Œæ€§å¢é•¿/ä¹˜æ€§é™ä½">çº¿å¢ç§¯å‡æ¨¡å¼</a>çš„å¤šæ ·åŒ–ç½‘ç»œæ‹¥å¡æ§åˆ¶æ–¹æ³•ï¼ˆåŒ…æ‹¬æ…¢å¯åŠ¨å’Œæ‹¥å¡çª—å£ç­‰æ¨¡å¼ï¼‰æ¥æ§åˆ¶æ‹¥å¡ã€‚<a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-1">[1]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-2">[2]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-3">[3]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-4">[4]</a><a href="https://zh.wikipedia.org/zh-cn/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#cite_note-5">[5]</a>åœ¨äº’è”ç½‘ä¸Šåº”ç”¨ä¸­æœ‰ç›¸å½“å¤šçš„å…·ä½“å®ç°ç®—æ³•ã€‚</p><p>![[{3B980C8E-4290-4775-9A0E-701F2F915A2F}.png]]![[{C2356D64-8E5C-4E3A-A3A8-E8D6517C3212}.png]]</p><p>TCPç»“æ„ï¼š<br>åºå· :</p><p>ç¡®è®¤å·ï¼š </p><p>æ•°æ®åç§»ï¼š</p><p><strong>æ§åˆ¶ä½ï¼š</strong>å…«ä½ä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ CWRï¼ŒECEï¼ŒURGï¼ŒACKï¼ŒPSHï¼ŒRSTï¼ŒSYNï¼ŒFINã€‚</p><p><strong>CWRï¼š</strong>CWR æ ‡å¿—ä¸åé¢çš„ ECE æ ‡å¿—éƒ½ç”¨äº IP é¦–éƒ¨çš„ ECN å­—æ®µï¼ŒECE æ ‡å¿—ä¸º 1 æ—¶ï¼Œåˆ™é€šçŸ¥å¯¹æ–¹å·²å°†æ‹¥å¡çª—å£ç¼©å°ï¼›</p><p><strong>ECEï¼š</strong>è‹¥å…¶å€¼ä¸º 1 åˆ™ä¼šé€šçŸ¥å¯¹æ–¹ï¼Œä»å¯¹æ–¹åˆ°è¿™è¾¹çš„ç½‘ç»œæœ‰é˜»å¡ã€‚åœ¨æ”¶åˆ°æ•°æ®åŒ…çš„ IP é¦–éƒ¨ä¸­ ECN ä¸º 1 æ—¶å°† TCP é¦–éƒ¨ä¸­çš„ ECE è®¾ä¸º 1ï¼›</p><p><strong>URGï¼š</strong>è¯¥ä½è®¾ä¸º 1ï¼Œè¡¨ç¤ºåŒ…ä¸­æœ‰éœ€è¦ç´§æ€¥å¤„ç†çš„æ•°æ®ï¼Œå¯¹äºéœ€è¦ç´§æ€¥å¤„ç†çš„æ•°æ®ï¼Œä¸åé¢çš„ç´§æ€¥æŒ‡é’ˆæœ‰å…³ï¼›</p><p><strong>ACKï¼š</strong>è¯¥ä½è®¾ä¸º 1ï¼Œç¡®è®¤åº”ç­”çš„å­—æ®µæœ‰æ•ˆï¼ŒTCPè§„å®šé™¤äº†æœ€åˆå»ºç«‹è¿æ¥æ—¶çš„ SYN åŒ…ä¹‹å¤–è¯¥ä½å¿…é¡»è®¾ä¸º 1ï¼›</p><p><strong>PSHï¼š</strong>è¯¥ä½è®¾ä¸º 1ï¼Œè¡¨ç¤ºéœ€è¦å°†æ”¶åˆ°çš„æ•°æ®ç«‹åˆ»ä¼ ç»™ä¸Šå±‚åº”ç”¨åè®®ï¼Œè‹¥è®¾ä¸º 0ï¼Œåˆ™å…ˆå°†æ•°æ®è¿›è¡Œç¼“å­˜ï¼›</p><p><strong>RSTï¼š</strong>è¯¥ä½è®¾ä¸º 1ï¼Œè¡¨ç¤º TCP è¿æ¥å‡ºç°å¼‚å¸¸å¿…é¡»å¼ºåˆ¶æ–­å¼€è¿æ¥ï¼›</p><p><strong>SYNï¼š</strong>ç”¨äºå»ºç«‹è¿æ¥ï¼Œè¯¥ä½è®¾ä¸º 1ï¼Œè¡¨ç¤ºå¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶åºåˆ—å·çš„å­—æ®µè¿›è¡Œåºåˆ—å·åˆå€¼è®¾å®šï¼›</p><p><strong>FINï¼š</strong>è¯¥ä½è®¾ä¸º 1ï¼Œè¡¨ç¤ºä»Šåä¸å†æœ‰æ•°æ®å‘é€ï¼Œå¸Œæœ›æ–­å¼€è¿æ¥ã€‚å½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ FIN ä½ç½®ä¸º 1 çš„ TCP æ®µã€‚</p><p>æ¯ä¸ªä¸»æœºåˆå¯¹å¯¹æ–¹çš„ FIN åŒ…è¿›è¡Œç¡®è®¤åº”ç­”ä¹‹åå¯ä»¥æ–­å¼€è¿æ¥ã€‚ä¸è¿‡ï¼Œä¸»æœºæ”¶åˆ° FIN è®¾ç½®ä¸º 1 çš„ TCP æ®µä¹‹åä¸å¿…é©¬ä¸Šå›å¤ä¸€ä¸ª FIN åŒ…ï¼Œè€Œæ˜¯å¯ä»¥ç­‰åˆ°ç¼“å†²åŒºä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å› ä¸ºå·²æˆåŠŸå‘é€è€Œè¢«è‡ªåŠ¨åˆ é™¤ä¹‹åå†å‘ FIN åŒ…ï¼›</p><p><strong>çª—å£ï¼š</strong>çª—å£å€¼ä½œä¸ºæ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ã€‚ä¹‹æ‰€ä»¥è¦æœ‰è¿™ä¸ªé™åˆ¶ï¼Œæ˜¯å› ä¸ºæ¥æ”¶æ–¹çš„æ•°æ®ç¼“å­˜ç©ºé—´æ˜¯æœ‰é™çš„ã€‚</p><h2 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h2><ul><li><p>ç¬¬ä¸€æ¬¡ ä»å‘é€æ–¹ä¸»æœº  -&gt; æ¥æ”¶æ–¹ä¸»æœº<br>ACK = 0, SYN = 1; é€‰æ‹©ä¸€ä¸ªåºåˆ—å· Seq = x</p></li><li><p>ç¬¬äºŒæ¬¡ ä»æ¥æ”¶æ–¹ä¸»æœº -&gt; å‘é€æ–¹ä¸»æœº<br>ACK = 1, SYN = 1; è¿”å›Seq = x + 1åŒæ—¶é€‰æ‹©ä¸€ä¸ªåºåˆ—å· ACKnum = y</p></li><li><p>ç¬¬ä¸‰æ¬¡ï¼Œ ä»å‘é€æ–¹ä¸»æœº -&gt; æ¥å—æ–¹ä¸»æœº<br>ACK = 1; ACKnum = y + 1</p></li></ul><p>å»ºç«‹è¿æ¥</p><blockquote><p>ä½¿ç”¨TCPä¸‰æ¬¡æ¡æ‰‹çš„åŸå› </p><ul><li>ç¡®è®¤åŒæ–¹çš„å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„èƒ½åŠ›æ˜¯æ­£å¸¸çš„</li></ul></blockquote><p>æ³¨æ„åˆ°å»ºç«‹è¿æ¥ä¸€èˆ¬æ˜¯ ä¸‰æ¬¡æ¡æ‰‹ </p><h2 id="TCPçš„å››æ¬¡æŒ¥æ‰‹"><a href="#TCPçš„å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPçš„å››æ¬¡æŒ¥æ‰‹"></a>TCPçš„å››æ¬¡æŒ¥æ‰‹</h2><ul><li><p>ç¬¬ä¸€æ¬¡ ä»å‘é€æ–¹ -&gt; æ¥é€æ–¹ä¸»æœº<br>FIN = 1ï¼Œ Seq = x</p></li><li><p>ç¬¬äºŒæ¬¡ ä»æ¥æ”¶æ–¹ -&gt; å‘é€æ–¹<br>ACK = 1ï¼Œ ACKnum = x + 1;</p></li></ul><hr><pre><code>ä¸­é—´æœ‰ä¸€æ®µæœåŠ¡ç«¯ç¡®è®¤ï¼ˆCLOSEWAITï¼‰ï¼Œ ç­‰å¾… æœåŠ¡ç«¯ æ‰€æœ‰ ä¼ è¾“å‰©ä¸‹çš„æŠ¥æ–‡æ®µå‘é€å®Œæ¯• </code></pre><ul><li><p>ç¬¬ä¸‰æ¬¡ ä»æ¥æ”¶æ–¹ -&gt; å‘é€æ–¹<br>FIN = 1ï¼Œ Seq = y</p></li><li><p>ç¬¬å››æ¬¡ ä»å‘é€æ–¹ -&gt; æ¥æ”¶æ–¹</p></li></ul><hr><pre><code>ä¹‹åæ˜¯å®¢æˆ·ç«¯çš„TIME_WAITï¼Œ ç­‰å¾… 2 MSL ï¼ˆæŠ¥æ–‡æ®µæœ€å¤§å­˜æ´»æ—¶é—´ï¼‰åå…³é—­è¿æ¥</code></pre><h2 id="TCP-çŸ­è¿æ¥å’Œé•¿è¿æ¥çš„åŒºåˆ«"><a href="#TCP-çŸ­è¿æ¥å’Œé•¿è¿æ¥çš„åŒºåˆ«" class="headerlink" title="TCP çŸ­è¿æ¥å’Œé•¿è¿æ¥çš„åŒºåˆ«"></a><strong>TCP çŸ­è¿æ¥å’Œé•¿è¿æ¥çš„åŒºåˆ«</strong></h2><p><strong>çŸ­è¿æ¥ï¼š</strong>Client å‘ Server å‘é€æ¶ˆæ¯ï¼ŒServer å›åº” Clientï¼Œç„¶åä¸€æ¬¡è¯»å†™å°±å®Œæˆäº†ï¼Œè¿™æ—¶å€™åŒæ–¹ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥å‘èµ· close æ“ä½œï¼Œä¸è¿‡ä¸€èˆ¬éƒ½æ˜¯ Client å…ˆå‘èµ· close æ“ä½œã€‚çŸ­è¿æ¥ä¸€èˆ¬åªä¼šåœ¨ Client/Server é—´ä¼ é€’ä¸€æ¬¡è¯»å†™æ“ä½œã€‚</p><p>çŸ­è¿æ¥çš„ä¼˜ç‚¹ï¼šç®¡ç†èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå»ºç«‹å­˜åœ¨çš„è¿æ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿æ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ‰‹æ®µã€‚</p><p><strong>é•¿è¿æ¥ï¼š</strong>Client ä¸ Server å®Œæˆä¸€æ¬¡è¯»å†™ä¹‹åï¼Œå®ƒä»¬ä¹‹é—´çš„è¿æ¥å¹¶ä¸ä¼šä¸»åŠ¨å…³é—­ï¼Œåç»­çš„è¯»å†™æ“ä½œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸ªè¿æ¥ã€‚</p><p>åœ¨é•¿è¿æ¥çš„åº”ç”¨åœºæ™¯ä¸‹ï¼ŒClient ç«¯ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å…³é—­å®ƒä»¬ä¹‹é—´çš„è¿æ¥ï¼ŒClient ä¸ Server ä¹‹é—´çš„è¿æ¥å¦‚æœä¸€ç›´ä¸å…³é—­çš„è¯ï¼Œéšç€å®¢æˆ·ç«¯è¿æ¥è¶Šæ¥è¶Šå¤šï¼ŒServer å‹åŠ›ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œè¿™æ—¶å€™ Server ç«¯éœ€è¦é‡‡å–ä¸€äº›ç­–ç•¥ï¼Œå¦‚å…³é—­ä¸€äº›é•¿æ—¶é—´æ²¡æœ‰è¯»å†™äº‹ä»¶å‘ç”Ÿçš„è¿æ¥ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€äº›æ¶æ„è¿æ¥å¯¼è‡´ Server ç«¯æœåŠ¡å—æŸï¼›å¦‚æœæ¡ä»¶å†å…è®¸å¯ä»¥ä»¥å®¢æˆ·ç«¯ä¸ºé¢—ç²’åº¦ï¼Œé™åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯çš„æœ€å¤§é•¿è¿æ¥æ•°ï¼Œä»è€Œé¿å…æŸä¸ªå®¢æˆ·ç«¯è¿ç´¯åç«¯çš„æœåŠ¡ã€‚</p><h3 id="ç²˜åŒ…å’Œæ‹†åŒ…"><a href="#ç²˜åŒ…å’Œæ‹†åŒ…" class="headerlink" title="ç²˜åŒ…å’Œæ‹†åŒ…"></a>ç²˜åŒ…å’Œæ‹†åŒ…</h3><ul><li>ç²˜åŒ… ï¼š åœ¨ä» å®¢æˆ·ç«¯ åˆ° æœåŠ¡ç«¯è¿‡ç¨‹ä¸­ä¸¤ä¸ªåŒ…è¿åœ¨ä¸€èµ· å«åšç²˜åŒ…</li><li>æ‹†åŒ… ï¼š â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-ä¹‹åè¿˜æ‹†åˆ†æˆä¸¤ä¸ªä¸åŸæ¥ä¸åŒçš„æ•°æ®æ®µå«åšæ‹†åŒ…</li></ul><blockquote><p>ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç²˜åŒ…å’Œæ‹†åŒ…ï¼Ÿ<br>    ç­”æ¡ˆ : </p><pre><code>1. åœ¨å‘é€çš„æ•°æ®è¶…è¿‡TCPç¼“å†²åŒºæœ€å¤§ç©ºé—´æ—¶å€™å¯èƒ½å‘ç”Ÿæ‹†åŒ…2. å‘é€çš„æ•°æ®å¤§äºMSSï¼ˆæœ€å¤§æŠ¥æ–‡é•¿åº¦ï¼‰ï¼Œ å‘ç”Ÿæ‹†åŒ…3. å‘é€çš„æ•°æ®å°äºTCPç¼“å†²åŒºæœ€å°ç©ºé—´å¯èƒ½å‘ç”Ÿç²˜åŒ…4. æ¥å—æ•°æ®ç«¯åº”ç”¨å±‚æ²¡æœ‰åŠæ—¶è¯»å–ç¼“å†²åŒºçš„æ•°æ®</code></pre></blockquote><p>ç²˜åŒ…æ‹†åŒ…è§£å†³åŠæ³• : </p><ul><li><strong>æ¶ˆæ¯å®šé•¿</strong> ï¼š æ¯ä¸ªæ•°æ®åŒ…å›ºå®šé•¿åº¦ï¼ˆä¸å¤Ÿçš„æ‹¿0å»å¡«è¡¥ï¼‰ï¼Œè¿™æ ·æ¥æ”¶ç«¯æ¯æ¬¡æ¥å—çš„éƒ½æ˜¯å›ºå®šé•¿åº¦çš„æ•°æ®ï¼Œå°±å¯ä»¥åˆ†å¼€</li><li><strong>è®¾ç½®æ¶ˆæ¯è¾¹ç•Œ</strong> ï¼š æœåŠ¡ç«¯åœ¨æ¥å—æ—¶å€™ï¼Œ æŒ‰ç…§åˆ†å‰²è¾¹ç•ŒæŠŠæ¶ˆæ¯åˆ†å‰²ï¼Œ å¦‚ FTPåè®®ï¼ˆé€šè¿‡è®¾ç½®ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰</li></ul><h3 id="TCPçš„å¯é ä¼ è¾“"><a href="#TCPçš„å¯é ä¼ è¾“" class="headerlink" title="TCPçš„å¯é ä¼ è¾“"></a>TCPçš„å¯é ä¼ è¾“</h3><blockquote><p>TCPé‡‡ç”¨è¶…æ—¶é‡ä¼ å®ç°å¯é ä¼ è¾“ ï¼š å½“æŸä¸€ä¸ªä¿¡æ¯å‘é€ååœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å°±é‡ä¼ è¿™ä¸ªæŠ¥æ–‡æ®µï¼ˆä»å‘é€åˆ°æ¥å—çš„æ—¶é—´æ˜¯RTTï¼Œ å¯ä»¥è‡ªå·±è®¡ç®—ï¼‰</p></blockquote><h3 id="TCPæ»‘åŠ¨çª—å£"><a href="#TCPæ»‘åŠ¨çª—å£" class="headerlink" title="TCPæ»‘åŠ¨çª—å£"></a>TCPæ»‘åŠ¨çª—å£</h3><blockquote><p>TCPå‘é€çª—å£ï¼Œ å’Œæ¥å—çª—å£å†…çš„æ•°æ®æ®µéƒ½æ˜¯å¯æ¥å—æˆ–è€…å¯ä»¥å‘é€çš„ï¼Œå½“å‘é€æ–¹çš„æŸä¸ªæŠ¥æ–‡æ®µå·²ç»è¢«ç¡®è®¤åï¼Œ çª—å£ä¼šå‘å³ç§»åŠ¨ä¸€æ®µè·ç¦»ï¼Œ æ›´æ–°å¯ä»¥æ¥å—å’Œè¢«æ¥å—çš„æŠ¥æ–‡æ®µ</p></blockquote><h3 id="TCPçš„æµé‡æ§åˆ¶"><a href="#TCPçš„æµé‡æ§åˆ¶" class="headerlink" title="TCPçš„æµé‡æ§åˆ¶"></a>TCPçš„æµé‡æ§åˆ¶</h3><blockquote><p>TCPé€šè¿‡æ§åˆ¶çª—å£å¤§å°å®ç°æµé‡çš„æ§åˆ¶<br>ä¸ºäº†é¿å…å‘é€ä¸å‡ºæ•°æ®ï¼Œ æ¥æ”¶æ–¹ä¼šæ—¶ä¸æ—¶å‘é€ä¸€ä¸ª <strong>çª—å£æ¢æµ‹</strong> çš„æ•°æ®æ®µï¼ˆåªåŒ…å«ä¸€ä¸ªå­—èŠ‚ï¼‰æ¥ç¡®å®šæœ€æ–°çš„çª—å£å¤§å°</p></blockquote><h2 id="TCPçš„æ‹¥å¡æ§åˆ¶"><a href="#TCPçš„æ‹¥å¡æ§åˆ¶" class="headerlink" title="TCPçš„æ‹¥å¡æ§åˆ¶"></a>TCPçš„æ‹¥å¡æ§åˆ¶</h2><blockquote><p><strong>ä¸»è¦é€šè¿‡å››ä¸ªç®—æ³•</strong>ï¼šæ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é‡ä¼ ï¼Œå¿«æ¢å¤</p></blockquote><p>ç»´æŠ¤ä¸€ä¸ªæ‹¥å¡çª—å£ï¼ˆcwndï¼‰ï¼Œæ³¨æ„é“æ‹¥å¡çª—å£åªæ˜¯ä¸€ä¸ªçŠ¶æ€å˜é‡</p><p>å‡è®¾æ¥æ”¶æ–¹æœ‰è¶³å¤Ÿå¤§çš„æ¥æ”¶çª—å£ï¼Œçª—å£çš„å¤§å°ä¸ºæŠ¥æ–‡æ®µ</p><ul><li><p>æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…</p><pre><code> æœ€å¼€å§‹æ‰§è¡Œæ»¡å¼€å§‹ï¼Œè®©cwnd = 1ï¼Œä¹‹åæ¯å½“æ¥å—ç¡®è®¤ï¼Œå°±å€å¢ 2 4 8 ....å†è®¾ç½®ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ssthreshï¼Œå½“æ…¢å¼€å§‹å¤§äºè¿™ä¸ªé—¨é™çš„æ—¶å€™è¿›å…¥æ‹¥å¡é¿å…ï¼Œæ¯ä¸ªè½®æ¬¡è®©cwnd + 1 1    å¦‚æœå‡ºç°äº†è¶…æ—¶ï¼Œå°±å¦æ…¢å¼€å§‹é—¨é™ = cwnd / 2ï¼Œé‡æ–°å¼€å§‹æ…¢å¼€å§‹</code></pre></li><li><p>å¿«é‡ä¼ å’Œå¿«æ¢å¤</p><pre><code>  æ¥æ”¶æ–¹æ¯æ¬¡æ¥æ”¶æŠ¥æ–‡éƒ½åº”è¯¥å¯¹æœ€åä¸€æ¬¡æ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œç¡®è®¤ï¼Œä¾‹å¦‚æ”¶åˆ°äº†B1ï¼Œ B2ï¼Œ B4  åˆ™åœ¨æ”¶åˆ°B2æ—¶å€™è¦å¯¹B1ç¡®è®¤ï¼ŒB4æ—¶å€™è¦å¯¹B2ç¡®è®¤  å½“å‘é€æ–¹é‡å¤æ”¶åˆ°3æ¬¡æ¥æ”¶æ–¹å‘æ¥çš„æŸä¸ªç›¸åŒçš„æŠ¥æ–‡çš„ç¡®è®¤æ—¶ï¼Œç«‹å³æ‰§è¡Œå¿«é‡ä¼ ï¼ˆå› ä¸ºè¿™æ—¶å€™çŸ¥é“æœ‰æŠ¥æ–‡ä¸¢å¤±ï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯æŠ¥æ–‡æ®µçš„ä¸¢å¤±ï¼Œä¸æ˜¯ç½‘ç»œæ‹¥å¡ï¼Œæ‰€ä»¥ç›´æ¥æ‰§è¡Œå¿«æ¢å¤ï¼Œè®©æ…¢å¼€å§‹ä¸Šé™ï¼ˆssthreshï¼‰= æ‹¥å¡çª—å£ï¼ˆcwndï¼‰ / 2ï¼›æ³¨æ„æ­¤æ—¶ç›´æ¥è¿›å…¥æ‹¥å¡é¿å…</code></pre></li></ul><blockquote><p>æ³¨æ„ æ…¢å¼€å§‹å’Œå¿«æ¢å¤çš„æ…¢å’Œå¿«æŒ‡çš„æ˜¯cwndçš„è®¾å®šå€¼ï¼Œæ…¢å¼€å§‹cwndè®¾ç½®æˆ1ï¼Œå¿«å¼€å§‹cwndè®¾ç½®æˆssthresh</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Tarjan</title>
      <link href="/2024/10/03/Tarjan/"/>
      <url>/2024/10/03/Tarjan/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li><h3 id="å¼ºè¿é€šåˆ†é‡"><a href="#å¼ºè¿é€šåˆ†é‡" class="headerlink" title="å¼ºè¿é€šåˆ†é‡"></a>å¼ºè¿é€šåˆ†é‡</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; st;</span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    st.<span class="built_in">push</span>(u);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (f[v] == <span class="number">0</span>) &#123;</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dfn[u] == low[u]) &#123;</span><br><span class="line">        ++flag;</span><br><span class="line">        <span class="keyword">while</span> (st.<span class="built_in">top</span>() != u) &#123;</span><br><span class="line">            f[st.<span class="built_in">top</span>()] = flag;</span><br><span class="line">            st.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        st.<span class="built_in">pop</span>();</span><br><span class="line">        f[u] = flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dfn[i] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">tarjan</span>(tarjan, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><h3 id="æ±‚å‰²ç‚¹"><a href="#æ±‚å‰²ç‚¹" class="headerlink" title="æ±‚å‰²ç‚¹"></a>æ±‚å‰²ç‚¹</h3></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">cut</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> start = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    <span class="type">int</span> child = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            child++;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (low[v] &gt;= dfn[u] &amp;&amp; !cut[u]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (u != start || child &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    cut[u] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> low[u] = <span class="built_in">min</span>(low[u], dfn[v]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!dfn[i]) start = i, <span class="built_in">tarjan</span>(tarjan, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦æœ‰ä¸€ä¸ªå­©å­å›ä¸åˆ°åŸæ¥çš„ç‚¹ï¼ˆä¹Ÿå°±æ˜¯low[v] ã€‹ dfn[u] ï¼Œ é‚£ä¹ˆè¿™ä¸ªç‚¹å°±æ˜¯å‰²ç‚¹ï¼Œæ³¨æ„å¦‚æœæ˜¯èµ·ç‚¹è¦é¢å¤–åŠ ä¸Šæœ‰ä¸¤ä¸ªå„¿å­è¿™ä¸ªæ¡ä»¶</p><h2 id="å‰²è¾¹"><a href="#å‰²è¾¹" class="headerlink" title="å‰²è¾¹"></a>å‰²è¾¹</h2><h2 id="ç‚¹åŒè¿é€šåˆ†é‡"><a href="#ç‚¹åŒè¿é€šåˆ†é‡" class="headerlink" title="ç‚¹åŒè¿é€šåˆ†é‡"></a>ç‚¹åŒè¿é€šåˆ†é‡</h2><ul><li>åœ¨ä¸€å¼ è¿é€šçš„æ— å‘å›¾ä¸­ï¼Œå¯¹äºä¸¤ä¸ªç‚¹ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> å’Œ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v">ï¼Œå¦‚æœæ— è®ºåˆ å»å“ªä¸ªç‚¹ï¼ˆåªèƒ½åˆ å»ä¸€ä¸ªï¼‰éƒ½ä¸èƒ½ä½¿å®ƒä»¬ä¸è¿é€šï¼Œæˆ‘ä»¬å°±è¯´ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> å’Œ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> <strong>ç‚¹åŒè¿é€š</strong></li></ul><h2 id="è¾¹åŒè¿é€šåˆ†é‡"><a href="#è¾¹åŒè¿é€šåˆ†é‡" class="headerlink" title="è¾¹åŒè¿é€šåˆ†é‡"></a>è¾¹åŒè¿é€šåˆ†é‡</h2><ul><li>åœ¨ä¸€å¼ è¿é€šçš„æ— å‘å›¾ä¸­ï¼Œå¯¹äºä¸¤ä¸ªç‚¹ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> å’Œ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v">ï¼Œå¦‚æœæ— è®ºåˆ å»å“ªæ¡è¾¹ï¼ˆåªèƒ½åˆ å»ä¸€ä¸ªï¼Œä¸”ä¸èƒ½åˆ  <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> å’Œ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> è‡ªå·±ï¼‰éƒ½ä¸èƒ½ä½¿å®ƒä»¬ä¸è¿é€šï¼Œæˆ‘ä»¬å°±è¯´ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="u"> å’Œ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="v"> <strong>è¾¹åŒè¿é€š</strong></li></ul><blockquote><p>æ€§è´¨ï¼š</p></blockquote><ul><li>è¾¹åŒè¿é€šå…·æœ‰ä¼ é€’æ€§ï¼Œå³ï¼Œè‹¥x , y <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="x,y"> è¾¹åŒè¿é€šï¼Œy, z<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="y,z"> è¾¹åŒè¿é€šï¼Œåˆ™ <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" title="x,z">x , z è¾¹åŒè¿é€šã€‚</li><li>ç‚¹åŒè¿é€šä¸å…·æœ‰ä¼ é€’æ€§ã€‚</li></ul><h3 id="è¾¹åŒç¼©ç‚¹ï¼šè¾¹åŒæ ‘"><a href="#è¾¹åŒç¼©ç‚¹ï¼šè¾¹åŒæ ‘" class="headerlink" title="è¾¹åŒç¼©ç‚¹ï¼šè¾¹åŒæ ‘"></a>è¾¹åŒç¼©ç‚¹ï¼šè¾¹åŒæ ‘</h3><p>å°±åƒå¼ºè”é€šåˆ†é‡ç¼©ç‚¹ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€ä¸ªè¾¹åŒç¼©æˆä¸€ä¸ªç‚¹æ¥å¤„ç†ä¸€äº›é—®é¢˜ï¼Œç„¶åè¿™äº›ç‚¹ä¹‹é—´ç”±åŸæ¥çš„å‰²è¾¹ç›¸è¿å½¢æˆäº†ä¸€æ£µæ ‘ã€‚</p><p>æœ€åå¾—å‡ºä¸€å®šæ˜¯ä¸€æ£µæ ‘ï¼ˆæ£®æ—ï¼‰ï¼Œå¦‚æœä¸æ˜¯æ ‘ï¼Œé‚£å°±æœ‰ç¯ï¼Œç¯å°±æ˜¯ä¸ªè¾¹åŒã€‚</p><p>å°±åƒå¼ºè¿é€šåˆ†é‡åˆ†è§£æŠŠä¸€èˆ¬æœ‰å‘å›¾å˜æˆäº†æœ‰å‘æ— ç¯å›¾ä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠæ— å‘å›¾çš„é—®é¢˜è½¬åˆ°äº†æ ‘ä¸Šï¼Œæ›´å¥½å¤„ç†äº†ï¼ŒåŒæ—¶ä¹Ÿä¿å­˜äº†åŸæ¥æ— å‘å›¾çš„ä¿¡æ¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">low</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> dfncnt = <span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">bridge</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> tarjan = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dfn[u] = low[u] = ++dfncnt;</span><br><span class="line">    stk.<span class="built_in">push</span>(u);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> lin = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v == fa) &#123;</span><br><span class="line">            lin++; <span class="keyword">if</span> (lin == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], low[v]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            low[u] = <span class="built_in">min</span>(low[u], dfn[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (low[u] == dfn[u]) &#123;</span><br><span class="line">        ++flag;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; g;</span><br><span class="line">        <span class="keyword">while</span> (stk.<span class="built_in">top</span>() != u) &#123;</span><br><span class="line">            f[stk.<span class="built_in">top</span>()] = flag;</span><br><span class="line">            g.<span class="built_in">push_back</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        g.<span class="built_in">push_back</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">        stk.<span class="built_in">pop</span>();</span><br><span class="line">        f[u] = flag;</span><br><span class="line">        ans.<span class="built_in">push_back</span>(g);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!dfn[i]) <span class="built_in">tarjan</span>(tarjan, i, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠè¾¹ç¼©æ‰ä¹‹åå›¾ä¼šå˜æˆä¸€é¢—æ ‘ï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹ä¸Šçš„æ“ä½œæ€§è´¨ä¼šæ›´å¥½</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºç¯æ ‘</title>
      <link href="/2024/09/01/%E5%9F%BA%E7%8E%AF%E6%A0%91/"/>
      <url>/2024/09/01/%E5%9F%BA%E7%8E%AF%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å›¾ä¸­åªå­˜åœ¨ä¸€ä¸ªç¯çš„å›¾å°±æ˜¯åŸºç¯æ ‘ï¼Œ<br>åˆ†ä¸ºæœ‰å‘å›¾å’Œæ— å‘å›¾</p><p>æ— å‘å›¾æ±‚åŸºç¯æ ‘å¯ä»¥ä½¿ç”¨bfs ï¼š å…ˆç»Ÿè®¡å…¥åº¦ï¼Œç„¶åæ¯æ¬¡å¯¹é˜Ÿåˆ—ä¸­å…ƒç´ åˆ è¾¹ï¼ŒæŠŠåˆ ååº¦æ•°ä¸º1çš„ç‚¹å…¥é˜Ÿï¼Œbfsç»“æŸåï¼Œæ‰€æœ‰åº¦æ•° &gt; 1çš„ç‚¹å°±æ˜¯ç¯ä¸Šçš„ç‚¹ï¼Œå¦‚æœåªéœ€è¦æ±‚ä¸€ä¸ªç‚¹ï¼Œå¯ä»¥ä½¿ç”¨dfsï¼Œå‡ºç°äº†ä¸¤æ¬¡çš„ç‚¹è¯´æ˜å¿…ç„¶æœ‰ç¯ã€‚</p><blockquote><p>æƒ³æ³•1 ï¼š å¯ä»¥é€šè¿‡å…ˆæ‰¾å‡ºåŸºç¯æ ‘çš„ç¯ï¼Œ ä¹‹ååˆ†åˆ«å¯¹é™¤äº†ç¯ä»¥å¤–çš„æ¯ä¸ªç‚¹çš„å­æ ‘è¿›è¡Œæ“ä½œï¼ŒæŠŠä¿¡æ¯åˆå¹¶åˆ°ç¯ä¸Šï¼Œä¹‹åé—®é¢˜å°±é›†ä¸­ä¸ºå¤„ç†ä¸€ä¸ªç¯ä¸Šé—®é¢˜ï¼Œ </p><p>æƒ³æ³•2 ï¼š å¯ä»¥å…ˆæ‰¾å‡ºåŸºç¯æ ‘çš„ç¯ï¼Œ ä¹‹ååˆ æ‰åŸºç¯æ ‘ä¸ŠæŸä¸€æ¡è¾¹ï¼Œ å°†åŸºç¯æ ‘å˜æˆä¸€ä¸ªæ ‘ï¼Œå¤„ç†æ ‘ä¸Šé—®é¢˜</p></blockquote><h3 id="å¯»æ‰¾ç¯çš„åŠæ³•"><a href="#å¯»æ‰¾ç¯çš„åŠæ³•" class="headerlink" title="å¯»æ‰¾ç¯çš„åŠæ³•"></a>å¯»æ‰¾ç¯çš„åŠæ³•</h3><h4 id="1-ï¼š-å¯¹äºæ— å‘å›¾ï¼Œ-ä½¿ç”¨æ‹“è¡¥æ’åºï¼Œæœ€åå‰©ä¸‹çš„åº¦æ•°-gt-1-çš„ç‚¹å°±æ˜¯ç¯ä¸Šçš„ç‚¹"><a href="#1-ï¼š-å¯¹äºæ— å‘å›¾ï¼Œ-ä½¿ç”¨æ‹“è¡¥æ’åºï¼Œæœ€åå‰©ä¸‹çš„åº¦æ•°-gt-1-çš„ç‚¹å°±æ˜¯ç¯ä¸Šçš„ç‚¹" class="headerlink" title="1 ï¼š å¯¹äºæ— å‘å›¾ï¼Œ ä½¿ç”¨æ‹“è¡¥æ’åºï¼Œæœ€åå‰©ä¸‹çš„åº¦æ•° &gt; 1 çš„ç‚¹å°±æ˜¯ç¯ä¸Šçš„ç‚¹"></a>1 ï¼š å¯¹äºæ— å‘å›¾ï¼Œ ä½¿ç”¨æ‹“è¡¥æ’åºï¼Œæœ€åå‰©ä¸‹çš„åº¦æ•° &gt; 1 çš„ç‚¹å°±æ˜¯ç¯ä¸Šçš„ç‚¹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-å¯¹äºæœ‰å‘å›¾ï¼Œ-ä½¿ç”¨dfs-å¯»æ‰¾ï¼Œå‡ºç°äº†visä¸¤æ¬¡çš„ç‚¹å°±æ˜¯ç¯ä¸Šä¸€ä¸ªç‚¹"><a href="#2-å¯¹äºæœ‰å‘å›¾ï¼Œ-ä½¿ç”¨dfs-å¯»æ‰¾ï¼Œå‡ºç°äº†visä¸¤æ¬¡çš„ç‚¹å°±æ˜¯ç¯ä¸Šä¸€ä¸ªç‚¹" class="headerlink" title="2 : å¯¹äºæœ‰å‘å›¾ï¼Œ ä½¿ç”¨dfs å¯»æ‰¾ï¼Œå‡ºç°äº†visä¸¤æ¬¡çš„ç‚¹å°±æ˜¯ç¯ä¸Šä¸€ä¸ªç‚¹"></a>2 : å¯¹äºæœ‰å‘å›¾ï¼Œ ä½¿ç”¨dfs å¯»æ‰¾ï¼Œå‡ºç°äº†visä¸¤æ¬¡çš„ç‚¹å°±æ˜¯ç¯ä¸Šä¸€ä¸ªç‚¹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> check_c = [&amp;](<span class="keyword">auto</span> self, i64 u) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        vis[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> now = fa[u];</span><br><span class="line">        <span class="keyword">if</span> (vis[now]) <span class="keyword">return</span> now;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">self</span>(self, now);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><p>è®°å½•æ·±åº¦å¹¶è¿”å›ç¯å†…å…ƒç´ ä¸ªæ•°çš„æ¿å­ : </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">h</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">auto</span> check_c = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> cnt) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    h[u] = cnt;</span><br><span class="line">    vis[u] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[v]) &#123;</span><br><span class="line">            <span class="built_in">self</span>(self, v, cnt + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (vis[v] == <span class="number">1</span>) &#123;</span><br><span class="line">            ++flag, siz.<span class="built_in">push_back</span>(h[u] - h[v] + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[u] = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å¹¶æŸ¥é›†å¯»æ‰¾ç¯ä¸Šä¸¤ä¸ªæ–­ç‚¹ : ï¼ˆé€‚ç”¨äºæ— å‘å›¾æ–­ç¯ï¼‰</p><blockquote><p>æ¯æ¬¡è¾“å…¥ç‚¹çš„æ—¶å€™å°†ç‚¹å¹¶å…¥ä¸€ä¸ªå¹¶æŸ¥é›†ï¼Œå¦‚æœè¾“å…¥çš„ç‚¹å·²ç»åœ¨ä¸€ä¸ªé›†åˆé‡Œé¢ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªç‚¹è¿æ¥åä¼šå½¢æˆç¯ï¼Œç›´æ¥è®°å½•ä¸‹ä¸¤ä¸ªæ–­ç‚¹çš„ä½ç½®</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»è·³è½¬ : ä¾‹é¢˜1 : </p></blockquote></li><li><a href="https://www.luogu.com.cn/problem/P2607">éª‘å£«</a><br>å‰ç½®çŸ¥è¯† ï¼š æ ‘å½¢dpï¼Œ P1352æ²¡æœ‰ä¸Šå¸çš„èˆä¼šï¼Œ å¯¹äºé¢—æ ‘ï¼Œä»æ ¹å¼€å§‹è·‘ä¸€édpï¼Œ ä½¿ç”¨dpã€xã€‘ã€1 / 0 ã€‘ï¼Œ xè¡¨ç¤ºå½“å‰çš„èŠ‚ç‚¹ï¼Œ1æˆ–è€…0è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å–æˆ–è€…ä¸å–ï¼Œä½¿ç”¨å›æº¯è½¬ç§»ï¼Œä»å¶å­åˆ°èŠ‚ç‚¹æ›´æ–°ç­”æ¡ˆï¼Œ å…¶ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹uï¼Œ ç”¨vè¡¨ç¤ºä»–çš„å­èŠ‚ç‚¹ï¼Œ æœ‰ï¼š <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dp[u][<span class="number">1</span>] = âˆ‘dp[v][<span class="number">0</span>] </span><br><span class="line">dp[u][<span class="number">0</span>] = âˆ‘<span class="built_in">max</span>(dp[v][<span class="number">1</span>], dp[v][<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>å°†æ‰€æœ‰èŠ‚ç‚¹æ›´æ–°å®Œå¾—åˆ°ç­”æ¡ˆï¼Œ å¯¹äºè¿™é“éª‘å£«ï¼Œ å°±æ˜¯åœ¨åŸé¢˜çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€æ¡è¾¹ï¼Œä½¿å¾—åŸæ¥çš„æ ‘é‡Œé¢å‡ºç°äº†ç¯ï¼Œ å˜æˆä¸€ä¸ªåŸºç¯æ£®æ—ï¼Œ solution : </li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    vector&lt;vector&lt;i64&gt;&gt; <span class="built_in">dp</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;i64&gt; (<span class="number">3</span>));</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;i64&gt; <span class="title">val</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> mark;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">vis</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u;</span><br><span class="line">        cin &gt;&gt; val[i] &gt;&gt; u;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(i); </span><br><span class="line">        fa[i] = u;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dp[u][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[u][<span class="number">1</span>] = val[u];</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == mark) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, v);</span><br><span class="line">            dp[u][<span class="number">1</span>] += dp[v][<span class="number">0</span>];</span><br><span class="line">            dp[u][<span class="number">0</span>] += <span class="built_in">max</span>(dp[v][<span class="number">1</span>], dp[v][<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> find = [&amp;](<span class="keyword">auto</span> self, i64 u) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        vis[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> now = fa[u];</span><br><span class="line">        <span class="keyword">if</span> (vis[now]) <span class="keyword">return</span> now;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">self</span>(self, now);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    i64 ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">        i64 res = <span class="number">0</span>;</span><br><span class="line">        mark = <span class="built_in">find</span>(find, i);</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, mark);</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[mark][<span class="number">0</span>]);</span><br><span class="line">        mark = fa[mark];</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, mark);</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[mark][<span class="number">0</span>]);</span><br><span class="line">        ans += res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹é¢˜2 ï¼š </p><ul><li><a href="https://www.luogu.com.cn/problem/P8943">è¿½é€æ¸¸æˆ</a><br>æœ¬é¢˜å¦‚æœä½¿ç”¨ä¸Šé¢çš„æ€è·¯ï¼Œå¾ˆéš¾å®ç°ï¼Œä¸å¦‚é‡‡ç”¨å…ˆæ‰¾å‡ºç¯ï¼Œä¹‹åå¯¹äºç¯ä¸Šæ¯ä¸€ä¸ªç‚¹å¤„ç†ï¼Œä½¿å…¶æ»¡è¶³æ¡ä»¶ : <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        e[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">dfn</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> dfncnt = <span class="number">0</span>, siz = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; cycle;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> dfs1 = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> Fa) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dfn[u] = ++dfncnt;</span><br><span class="line">        f[u] = Fa;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == Fa) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (!dfn[v]) &#123;</span><br><span class="line">                <span class="built_in">self</span>(self, v, u);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dfn[v] &gt; dfn[u]) &#123;</span><br><span class="line">                <span class="keyword">while</span> (v != u) &#123;</span><br><span class="line">                    cycle.<span class="built_in">push_back</span>(v);</span><br><span class="line">                    siz++;</span><br><span class="line">                    v = f[v];</span><br><span class="line">                &#125;</span><br><span class="line">                cycle.<span class="built_in">push_back</span>(v);</span><br><span class="line">                siz++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dep</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">root</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs2 = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u, <span class="type">int</span> fa, <span class="type">int</span> Root) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        dep[u] = dep[fa] + <span class="number">1</span>;</span><br><span class="line">        root[u] = Root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : e[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == fa || dfn[v]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">self</span>(self, v, u, Root);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">dfs1</span>(dfs1, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) dfn[i] = <span class="number">0</span>; <span class="comment">// è½¬vis</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : cycle) &#123;</span><br><span class="line">        <span class="comment">//cerr &lt;&lt; x &lt;&lt; &#x27; &#x27;;</span></span><br><span class="line">        dfn[x] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; siz; i++) &#123;</span><br><span class="line">        <span class="built_in">dfs2</span>(dfs2, cycle[i], <span class="number">0</span>, cycle[i]);</span><br><span class="line">        dep[cycle[i]] = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (siz == <span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;Deception\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (dfn[a]) cout &lt;&lt; <span class="string">&quot;Survive\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> ned1 = dep[a] - <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> ned2 = <span class="built_in">min</span>(<span class="built_in">abs</span>(dep[root[b]] - dep[root[a]]);</span><br><span class="line">            <span class="type">int</span> siz - <span class="built_in">abs</span>(dep[root[b]] - dep[root[a]]));</span><br><span class="line">            <span class="keyword">if</span> (!dfn[b]) ned2 += dep[b] - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (ned1 &lt; ned2) &#123;</span><br><span class="line">                <span class="comment">//cerr &lt;&lt; ned1 &lt;&lt; ned2 &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Survive\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Deception\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¬§æ‹‰å›è·¯</title>
      <link href="/2024/07/22/%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF/"/>
      <url>/2024/07/22/%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¬§æ‹‰å›è·¯æ˜¯è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼ˆä¸ªäººç†è§£ï¼‰ ï¼š ä»å›¾ä¸ŠæŸä¸ªç‚¹å‡ºå‘ï¼Œæ¯æ¡è¾¹ä¸èƒ½é‡å¤ç»è¿‡ï¼Œç„¶åä»è¿™ä¸ªç‚¹å¼€å§‹æŠŠæ‰€æœ‰çš„ç‚¹å’Œè¾¹èµ°ä¸€éï¼ˆåŒæ—¶æ»¡è¶³æ¯æ¡è¾¹ä¸èƒ½é‡å¤ï¼‰åå›åˆ°è¿™ä¸ªç‚¹ã€‚</p><p>æ€ä¹ˆæ±‚ï¼Ÿ ä¸€ç§åŠæ³•æ˜¯Fluery , å³æ¯æ¬¡åªæ‰¾ä¸æ˜¯æ¡¥çš„è¾¹bfsï¼Œ å½“æ¯ä¸ªç‚¹å’Œè¾¹éƒ½è¿›é˜Ÿåå†å¤„ç†æ¡¥ï¼Œ å¦‚æœå›¾ä¸è¿é€šæˆ–è€…ç»è¿‡æ¡¥ä¹‹åæ— æ³•éå†æ•´ä¸ªå›¾ï¼Œåˆ™æ²¡æœ‰æ¬§æ‹‰å›è·¯ï¼Œå¦åˆ™å°±æ‰¾åˆ°äº†æ¬§æ‹‰å›è·¯ï¼Œ ç”±äºè¿™æ ·å®ç°éœ€è¦å…ˆtarjanç¼©å¼ºè¿é€šåˆ†é‡åè®°å½•æ¡¥çš„ä½ç½®ï¼Œä¹‹åå†æ¯ä¸ªç‚¹éå†ï¼Œéœ€è¦æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯O(n ^ 2), å¤ªä¸ç‰›ï¼Œæˆ‘ä»¬æ¢ä¸‹ä¸€ä¸ªç®—æ³•</p><blockquote><p><strong>Hierholzer</strong>ç®—æ³•</p></blockquote><p>ï¼ˆä¸æ˜¯è¿™ä»€ä¹ˆé¬¼åå­—ä¹Ÿå¤ªé•¿â€¦â€¦ï¼‰<br>æˆ‘ç›´æ¥æŠŠå‡½æ•°åå­—å†™æˆdfsäº†ï¼Œæ¿å­å¦‚ä¸‹ï¼ˆè‡ªå·±å®ç°çš„ç”¨èµ·æ¥è‡ªå·±èˆ’æœï¼‰<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"><span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = now[u]; i &lt; e[u].<span class="built_in">size</span>(); i = now[u]) &#123;</span><br><span class="line">        now[u]++;</span><br><span class="line">        <span class="built_in">self</span>(self, e[u][i]);</span><br><span class="line">    &#125;</span><br><span class="line">    s.<span class="built_in">push</span>(u);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>é¦–å…ˆè¯´ä¸€ä¸‹æœ‰å‘å›¾æ¬§æ‹‰é€šè·¯çš„åˆ¤å®š ï¼š ï¼ˆéœ€è¦æ»¡è¶³ä»¥ä¸‹2 ä¹‹ä¸€ï¼‰</p><ul><li>æ‰€æœ‰é¡¶ç‚¹å‡ºåº¦ç­‰äºå…¥åº¦</li><li>æœ‰ä¸”åªæœ‰ä¸€ä¸ªé¡¶ç‚¹å‡ºåº¦ç­‰äºå…¥åº¦åŠ ä¸€ï¼ŒåŒæ—¶æœ‰å¦å¤–ä¸€ä¸ªé¡¶ç‚¹å…¥åº¦ç­‰äºå‡ºåº¦åŠ ä¸€ï¼ˆå¯ä»¥æƒ³è±¡æˆæ¯ä¸ªé¡¶ç‚¹2ä¸ª2ä¸ªåˆ è¾¹ä¹‹åä¼šå‰©ä¸‹ä¸€æ¡ï¼Œè€Œè¿™æ¡è·¯å¦‚æœä¸€å¼€å§‹å°±èµ°ä¹Ÿå¯ä»¥å½¢æˆæ¬§æ‹‰å›è·¯ï¼‰</li></ul><p>æ¥ä¸‹æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢å®ç° ï¼š<br>    nowæ•°ç»„è®°å½•ç»è¿‡å½“å‰é¡¶ç‚¹æ¬¡æ•°ï¼ˆæ¯æ¬¡èµ°è¿‡åè®©è·¯å¾„ç©¿è¿‡è¿™ä¸ªç‚¹ï¼Œ ä¹‹åç»§ç»­dfsä¸‹ä¸€ä¸ªç‚¹ï¼‰ï¼Œå›æ¥çš„æ—¶å€™è®°å½•ï¼Œç”±äºæ˜¯é€†åºçš„ï¼Œæ‰€ä»¥å¼€äº†ä¸ªstack</p><p>next is the code of P7771 [æ´›è°·P7771] : <a href="https://www.luogu.com.cn/problem/P7771">https://www.luogu.com.cn/problem/P7771</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">in</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">out</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line"></span><br><span class="line">        e[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">        in[v]++;</span><br><span class="line">        out[u]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> vis1 = <span class="number">0</span>, vis2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i] + <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis1) vis1 = i;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (in[i] == out[i] - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis2) vis2 = i;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = now[u]; i &lt; e[u].<span class="built_in">size</span>(); i = now[u]) &#123;</span><br><span class="line">            now[u]++;</span><br><span class="line">            <span class="built_in">self</span>(self, e[u][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        s.<span class="built_in">push</span>(u);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">sort</span>(e[i].<span class="built_in">begin</span>(), e[i].<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (vis2) <span class="built_in">dfs</span>(dfs, vis2);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">dfs</span>(dfs, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; s.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åº”ç”¨ä¾‹å­:<br>æ´›è°·P1341 å­—ç¬¦ä¸²åŒ¹é…ï¼Œä»¥å‰cfæœ‰ä¸€é“ä¼ é€é—¨çš„é¢˜ï¼Œå¥½åƒæ˜¯æŸåœºdiv3 Eé¢˜ä¹Ÿæ˜¯ä¸€æ¨¡ä¸€æ ·ï¼š<br>æ€è·¯ï¼Œæƒ³è¦æ‹¿åˆ°ä¸€ä¸ªé¦–å°¾ç›¸é“¾æ¥çš„ä¸²ï¼Œ åˆ™ç›´æ¥è·‘ä¸€è¾¹æ¬§æ‹‰å›è·¯ï¼ˆå°±å¥½åƒæ¯ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªç›¸åŒçš„å­—ç¬¦å°±æ˜¯ä¸€ä¸ªä¼ é€é—¨ï¼Œé‚£ä¹ˆå¯¹äºç›¸åŒçš„å­—ç¬¦å°±å»ºè¾¹é“¾æ¥ï¼ŒåŒæ—¶ç»Ÿè®¡æ¯ä¸ªç‚¹çš„åº¦æ•°ï¼Œç”±äºæ¬§æ‹‰é€šè·¯åˆ¤å®šéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ : </p><ul><li>æ‰€æœ‰ç‚¹éƒ½æ˜¯å¶æ•°åº¦</li><li>æœ‰å¥‡æ•°åº¦é¡¶ç‚¹ä¸”å¥‡æ•°åº¦é¡¶ç‚¹æœ‰ä¸”åªæœ‰2ä¸ª<br>åœ¨æ¥ä¸‹æ¥åˆ¤å®šæ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è®°å½•çš„åº¦æ•°ã€‚<br>ä¹‹åå°±è·‘ä¸€éæ¬§æ‹‰å›è·¯ï¼Œè®°å½•è·¯å¾„ï¼Œ è¾“å‡ºè·¯å¾„ï¼Œ ä¸€éAC!!!<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> start = inf;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">e</span>(<span class="number">59</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">59</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">du</span><span class="params">(<span class="number">59</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> u = s[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        <span class="type">int</span> v = s[<span class="number">1</span>] - <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        start = <span class="built_in">min</span>(&#123;start, u, v&#125;);</span><br><span class="line">        e[u][v] = e[v][u] = <span class="number">1</span>;</span><br><span class="line">        du[u]++;</span><br><span class="line">        du[v]++; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">58</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (du[i] &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pos == <span class="number">-1</span>) pos = i;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">now</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> self, <span class="type">int</span> u) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">58</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (e[u][i]) &#123;</span><br><span class="line">                e[u][i] = e[i][u] = <span class="number">0</span>;</span><br><span class="line">                <span class="built_in">self</span>(self, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        s.<span class="built_in">push</span>(u);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cerr &lt;&lt; (char)(start + &#x27;A&#x27;)&lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    <span class="keyword">if</span> (cnt == <span class="number">0</span>) <span class="built_in">dfs</span>(dfs, start);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cnt == <span class="number">2</span>) <span class="built_in">dfs</span>(dfs, pos);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No Solution\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">char</span> c = (<span class="type">char</span>)(s.<span class="built_in">top</span>() + <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">        cout &lt;&lt; c;</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>æ–‡ç« åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h3 id="å…³äºä½œè€…"><a href="#å…³äºä½œè€…" class="headerlink" title="å…³äºä½œè€…"></a>å…³äºä½œè€…</h3><ul><li>ä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ç§‘ç”Ÿä¸€æšã€‚</li><li>æœ¬ç«™è¯ç”Ÿä¸æŸå¤©å¿ƒè¡€æ¥æ½®ï¼Œç”¨æ¥åˆ†äº«å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜å’Œç®—æ³•é¢˜è§£æ€»ç»“ã€‚</li><li>è¯·å„è·¯æœ‹å‹å¤šå¤šæŒ‡æ•™ ï¼</li></ul><hr><h3 id="è”ç³»æ–¹å¼"><a href="#è”ç³»æ–¹å¼" class="headerlink" title="è”ç³»æ–¹å¼"></a>è”ç³»æ–¹å¼</h3><ul><li>å¾®ä¿¡ : a511017802</li><li>é‚®ä»¶ : 511017802@qq.com</li><li>åšå®¢ ï¼šTansuozhe1num.github.io</li></ul><hr>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>comment</title>
      <link href="/comment/index.html"/>
      <url>/comment/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å“”å“”ä¸€ä¸‹</title>
      <link href="/artitalk/index.html"/>
      <url>/artitalk/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!-- å¼•ç”¨ artitalk --><script type="text/javascript" src="https://unpkg.com/artitalk"></script><!-- å­˜æ”¾è¯´è¯´çš„å®¹å™¨ --><div id="artitalk_main"></div><script>new Artitalk({    serverURL: 'https://qlkrssux.api.lncldglobal.com',// Your LeanCloud site    appId: 'QLkrsSUXWoq6pMt7E8wWUlRk-MdYXbMMI', // Your LeanCloud appId    appKey: '0NH6KVhnb773X0q7fmZ01O82', // Your LeanCloud appKey    color1: 'linear-gradient(45deg,rgba(109,208,242,0.75) 15%,rgba(245,154,190,0.75) 85%)',    color2: 'linear-gradient(45deg,rgba(109,208,242,0.75) 15%,rgba(245,154,190,0.75) 85%)',})</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>éŸ³ä¹</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
  
</search>
